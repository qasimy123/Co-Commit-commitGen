{"prompt":" file path A: src\/v3\/apiAsyncComponent.ts | file path B: src\/v3\/apiAsyncComponent.ts\n\n@@ -47,7 +47,7 @@ export function defineAsyncComponent(\n \n   if (__DEV__ && suspensible) {\n     warn(\n-      `The suspensiblbe option for async components is not supported in Vue2. It is ignored.`\n+      `The suspensible option for async components is not supported in Vue2. It is ignored.`\n     )\n   }\n \n\n\n###\n\n","completion":" chore: fix typo in apiAsyncComponent.ts (#<issue-num>)\n"}
{"prompt":" file path A: .github\/CODE_OF_CONDUCT.md | file path B: .github\/CODE_OF_CONDUCT.md\n\n@@ -10,4 +10,4 @@ Project maintainers have the right and responsibility to remove, edit, or reject\n \n Instances of abusive, harassing, or otherwise unacceptable behavior may be reported by opening an issue or contacting one or more of the project maintainers.\n \n-This Code of Conduct is adapted from the [Contributor Covenant](http:\/\/contributor-covenant.org), version 1.0.0, available at [http:\/\/contributor-covenant.org\/version\/1\/0\/0\/](http:\/\/contributor-covenant.org\/version\/1\/0\/0\/)\n+This Code of Conduct is adapted from the [Contributor Covenant](https:\/\/contributor-covenant.org), version 1.0.0, available at [http:\/\/contributor-covenant.org\/version\/1\/0\/0\/](http:\/\/contributor-covenant.org\/version\/1\/0\/0\/)\n\n---\n file path A: .github\/CONTRIBUTING.md | file path B: .github\/CONTRIBUTING.md\n\n@@ -36,7 +36,7 @@ Hi! I'm really excited that you are interested in contributing to Vue.js. Before\n \n ## Development Setup\n \n-You will need [Node.js](http:\/\/nodejs.org) **version 12+** and [pnpm](https:\/\/pnpm.io\/).\n+You will need [Node.js](https:\/\/nodejs.org) **version 12+** and [pnpm](https:\/\/pnpm.io\/).\n \n After cloning the repo, run:\n \n\n---\n file path A: examples\/classic\/todomvc\/index.html | file path B: examples\/classic\/todomvc\/index.html\n\n@@ -54,8 +54,8 @@\n     <\/section>\n     <footer class=\"info\">\n       <p>Double-click to edit a todo<\/p>\n-      <p>Written by <a href=\"http:\/\/evanyou.me\">Evan You<\/a><\/p>\n-      <p>Part of <a href=\"http:\/\/todomvc.com\">TodoMVC<\/a><\/p>\n+      <p>Written by <a href=\"https:\/\/evanyou.me\">Evan You<\/a><\/p>\n+      <p>Part of <a href=\"https:\/\/todomvc.com\">TodoMVC<\/a><\/p>\n     <\/footer>\n \n     <script>\n\n---\n file path A: examples\/classic\/todomvc\/readme.md | file path B: examples\/classic\/todomvc\/readme.md\n\n@@ -16,7 +16,7 @@ Here are some links you may find helpful:\n \n Get help from other Vue.js users:\n \n-* [Vue.js official forum](http:\/\/forum.vuejs.org)\n+* [Vue.js official forum](https:\/\/forum.vuejs.org)\n * [Vue.js on Twitter](https:\/\/twitter.com\/vuejs)\n * [Vue.js on Gitter](https:\/\/gitter.im\/vuejs\/vue)\n \n@@ -24,4 +24,4 @@ _If you have other helpful links to share, or find any of the links above no lon\n \n ## Credit\n \n-This TodoMVC application was created by [Evan You](http:\/\/evanyou.me).\n+This TodoMVC application was created by [Evan You](https:\/\/evanyou.me).\n\n---\n file path A: src\/compiler\/parser\/html-parser.ts | file path B: src\/compiler\/parser\/html-parser.ts\n\n@@ -98,7 +98,7 @@ export function parseHTML(html, options: HTMLParserOptions) {\n           }\n         }\n \n-        \/\/ http:\/\/en.wikipedia.org\/wiki\/Conditional_comment#Downlevel-revealed_conditional_comment\n+        \/\/ https:\/\/en.wikipedia.org\/wiki\/Conditional_comment#Downlevel-revealed_conditional_comment\n         if (conditionalComment.test(html)) {\n           const conditionalEnd = html.indexOf(']>')\n \n\n---\n file path A: src\/platforms\/web\/util\/element.ts | file path B: src\/platforms\/web\/util\/element.ts\n\n@@ -62,7 +62,7 @@ export function isUnknownElement(tag: string): boolean {\n   }\n   const el = document.createElement(tag)\n   if (tag.indexOf('-') > -1) {\n-    \/\/ http:\/\/stackoverflow.com\/a\/28210364\/1070244\n+    \/\/ https:\/\/stackoverflow.com\/a\/28210364\/1070244\n     return (unknownElementCache[tag] =\n       el.constructor === window.HTMLUnknownElement ||\n       el.constructor === window.HTMLElement)\n\n\n###\n\n","completion":" chore: update links (http=https) (#<issue-num>)\n"}
{"prompt":" file path A: types\/common.d.ts | file path B: types\/common.d.ts\n\n@@ -14,7 +14,7 @@ type Equal<Left, Right> =\n \n export type HasDefined<T> = Equal<T, unknown> extends true ? false : true\n \n-\/\/ If the the type T accepts type \"any\", output type Y, otherwise output type N.\n+\/\/ If the type T accepts type \"any\", output type Y, otherwise output type N.\n \/\/ https:\/\/stackoverflow.com\/questions\/49927523\/disallow-call-with-any\/49928360#49928360\n export type IfAny<T, Y, N> = 0 extends 1 & T ? Y : N\n \n\n\n###\n\n","completion":" chore: comment typos (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/index.ts | file path B: src\/core\/observer\/index.ts\n\n@@ -19,7 +19,7 @@ import { isReadonly, isRef, TrackOpTypes, TriggerOpTypes } from '..\/..\/v3'\n \n const arrayKeys = Object.getOwnPropertyNames(arrayMethods)\n \n-const NO_INIITIAL_VALUE = {}\n+const NO_INITIAL_VALUE = {}\n \n \/**\n  * In some cases we may want to disable observation inside a component's\n@@ -79,7 +79,7 @@ export class Observer {\n       const keys = Object.keys(value)\n       for (let i = 0; i < keys.length; i++) {\n         const key = keys[i]\n-        defineReactive(value, key, NO_INIITIAL_VALUE, undefined, shallow, mock)\n+        defineReactive(value, key, NO_INITIAL_VALUE, undefined, shallow, mock)\n       }\n     }\n   }\n@@ -145,7 +145,7 @@ export function defineReactive(\n   const setter = property && property.set\n   if (\n     (!getter || setter) &&\n-    (val === NO_INIITIAL_VALUE || arguments.length === 2)\n+    (val === NO_INITIAL_VALUE || arguments.length === 2)\n   ) {\n     val = obj[key]\n   }\n\n\n###\n\n","completion":" chore: fix typo (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/index.ts | file path B: src\/core\/observer\/index.ts\n\n@@ -16,7 +16,6 @@ import {\n   noop\n } from '..\/util\/index'\n import { isReadonly, isRef, TrackOpTypes, TriggerOpTypes } from '..\/..\/v3'\n-import { rawMap } from '..\/..\/v3\/reactivity\/reactive'\n \n const arrayKeys = Object.getOwnPropertyNames(arrayMethods)\n \n@@ -116,7 +115,6 @@ export function observe(\n     (isArray(value) || isPlainObject(value)) &&\n     Object.isExtensible(value) &&\n     !value.__v_skip \/* ReactiveFlags.SKIP *\/ &&\n-    !rawMap.has(value) &&\n     !isRef(value) &&\n     !(value instanceof VNode)\n   ) {\n\n---\n file path A: src\/v3\/reactivity\/reactive.ts | file path B: src\/v3\/reactivity\/reactive.ts\n\n@@ -5,13 +5,10 @@ import {\n   isPrimitive,\n   warn,\n   toRawType,\n-  isServerRendering,\n-  isObject\n+  isServerRendering\n } from 'core\/util'\n import type { Ref, UnwrapRefSimple, RawSymbol } from '.\/ref'\n \n-export const rawMap = new WeakMap()\n-\n export const enum ReactiveFlags {\n   SKIP = '__v_skip',\n   IS_READONLY = '__v_isReadonly',\n@@ -122,8 +119,9 @@ export function toRaw<T>(observed: T): T {\n export function markRaw<T extends object>(\n   value: T\n ): T & { [RawSymbol]?: true } {\n-  if (isObject(value)) {\n-    rawMap.set(value, true)\n+  \/\/ non-extensible objects won't be observed anyway\n+  if (Object.isExtensible(value)) {\n+    def(value, ReactiveFlags.SKIP, true)\n   }\n   return value\n }\n\n---\n file path A: src\/v3\/reactivity\/readonly.ts | file path B: src\/v3\/reactivity\/readonly.ts\n\n@@ -32,8 +32,8 @@ export type DeepReadonly<T> = T extends Builtin\n   ? { readonly [K in keyof T]: DeepReadonly<T[K]> }\n   : Readonly<T>\n \n-const rawToReadonlyMap = new WeakMap()\n-const rawToShallowReadonlyMap = new WeakMap()\n+const rawToReadonlyFlag = `__v_rawToReadonly`\n+const rawToShallowReadonlyFlag = `__v_rawToShallowReadonly`\n \n export function readonly<T extends object>(\n   target: T\n@@ -57,20 +57,26 @@ function createReadonly(target: any, shallow: boolean) {\n     return target as any\n   }\n \n+  if (__DEV__ && !Object.isExtensible(target)) {\n+    warn(\n+      `Vue 2 does not support creating readonly proxy for non-extensible object.`\n+    )\n+  }\n+\n   \/\/ already a readonly object\n   if (isReadonly(target)) {\n     return target as any\n   }\n \n   \/\/ already has a readonly proxy\n-  const map = shallow ? rawToShallowReadonlyMap : rawToReadonlyMap\n-  const existingProxy = map.get(target)\n+  const existingFlag = shallow ? rawToShallowReadonlyFlag : rawToReadonlyFlag\n+  const existingProxy = target[existingFlag]\n   if (existingProxy) {\n     return existingProxy\n   }\n \n   const proxy = Object.create(Object.getPrototypeOf(target))\n-  map.set(target, proxy)\n+  def(target, existingFlag, proxy)\n \n   def(proxy, ReactiveFlags.IS_READONLY, true)\n   def(proxy, ReactiveFlags.RAW, target)\n\n---\n file path A: test\/unit\/features\/v3\/reactivity\/reactive.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/reactive.spec.ts\n\n@@ -259,7 +259,7 @@ describe('reactivity\/reactive', () => {\n   })\n \n   test('markRaw on non-extensible objects', () => {\n-    const foo = Object.freeze({})\n+    const foo = Object.seal({})\n     markRaw(foo)\n     expect(isReactive(reactive(foo))).toBe(false)\n   })\n\n---\n file path A: test\/unit\/features\/v3\/reactivity\/readonly.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/readonly.spec.ts\n\n@@ -526,10 +526,13 @@ describe('reactivity\/readonly', () => {\n     expect(`et operation on key \"x\" failed`).toHaveBeenWarned()\n   })\n \n-  test('compatibility with non-extensible objects', () => {\n+  test('warn non-extensible objects', () => {\n     const foo = Object.freeze({ a: 1 })\n-    const bar = readonly(foo)\n-    expect(isReadonly(bar)).toBe(true)\n-    expect(readonly(foo)).toBe(bar)\n+    try {\n+      readonly(foo)\n+    } catch (e) {}\n+    expect(\n+      `Vue 2 does not support creating readonly proxy for non-extensible object`\n+    ).toHaveBeenWarned()\n   })\n })\n\n\n###\n\n","completion":" fix(reactivity): avoid using WeakMap for IE compatibility\n"}
{"prompt":" file path A: src\/core\/util\/options.ts | file path B: src\/core\/util\/options.ts\n\n@@ -51,7 +51,8 @@ if (__DEV__) {\n  *\/\n function mergeData(\n   to: Record<string | symbol, any>,\n-  from: Record<string | symbol, any> | null\n+  from: Record<string | symbol, any> | null,\n+  recursive = true\n ): Record<PropertyKey, any> {\n   if (!from) return to\n   let key, toVal, fromVal\n@@ -66,7 +67,7 @@ function mergeData(\n     if (key === '__ob__') continue\n     toVal = to[key]\n     fromVal = from[key]\n-    if (!hasOwn(to, key)) {\n+    if (!recursive || !hasOwn(to, key)) {\n       set(to, key, fromVal)\n     } else if (\n       toVal !== fromVal &&\n@@ -262,7 +263,22 @@ strats.props =\n       if (childVal) extend(ret, childVal)\n       return ret\n     }\n-strats.provide = mergeDataOrFn\n+\n+strats.provide = function (parentVal: Object | null, childVal: Object | null) {\n+  if (!parentVal) return childVal\n+  return function () {\n+    const ret = Object.create(null)\n+    mergeData(ret, isFunction(parentVal) ? parentVal.call(this) : parentVal)\n+    if (childVal) {\n+      mergeData(\n+        ret,\n+        isFunction(childVal) ? childVal.call(this) : childVal,\n+        false \/\/ non-recursive\n+      )\n+    }\n+    return ret\n+  }\n+}\n \n \/**\n  * Default strategy.\n\n---\n file path A: test\/unit\/features\/options\/inject.spec.ts | file path B: test\/unit\/features\/options\/inject.spec.ts\n\n@@ -712,4 +712,12 @@ describe('Options provide\/inject', () => {\n     await nextTick()\n     expect(spy).toHaveBeenCalledWith(2)\n   })\n+\n+  \/\/ #12854\n+  test('should not mutate original provide options', () => {\n+    const hairMixin = { provide: { hair: 'red' } }\n+    const eyesMixin = { provide: { eyes: 'brown' } }\n+    new Vue({ mixins: [hairMixin, eyesMixin], render() {} }).$mount()\n+    expect(eyesMixin.provide).toStrictEqual({ eyes: 'brown' })\n+  })\n })\n\n\n###\n\n","completion":" fix(provide\/inject): do not mutate original provide options during merge\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/compileScript.ts | file path B: packages\/compiler-sfc\/src\/compileScript.ts\n\n@@ -39,7 +39,7 @@ import { walk } from 'estree-walker'\n import { RawSourceMap } from 'source-map'\n import { warnOnce } from '.\/warn'\n import { isReservedTag } from 'web\/util'\n-import { bindRE, dirRE, onRE } from 'compiler\/parser'\n+import { bindRE, dirRE, onRE, slotRE } from 'compiler\/parser'\n import { parseText } from 'compiler\/parser\/text-parser'\n import { DEFAULT_FILENAME } from '.\/parseComponent'\n import {\n@@ -1804,6 +1804,8 @@ function resolveTemplateUsageCheckString(sfc: SFCDescriptor, isTS: boolean) {\n         if (dirRE.test(name)) {\n           const baseName = onRE.test(name)\n             ? 'on'\n+            : slotRE.test(name)\n+            ? 'slot'\n             : bindRE.test(name)\n             ? 'bind'\n             : name.replace(dirRE, '')\n\n---\n file path A: packages\/compiler-sfc\/test\/compileScript.spec.ts | file path B: packages\/compiler-sfc\/test\/compileScript.spec.ts\n\n@@ -1574,5 +1574,21 @@ describe('SFC analyze <script> bindings', () => {\n       <\/template>\n       `)\n     })\n+\n+    \/\/ #12841\n+    test('should not error when performing ts expression check for v-slot destructured default value', () => {\n+      compile(`\n+      <script setup lang=\"ts\">\n+        import FooComp from '.\/Foo.vue'\n+      <\/script>\n+      <template>\n+        <FooComp>\n+          <template #bar=\"{ bar = { baz: '' } }\">\n+            {{ bar.baz }}\n+          <\/template>\n+        <\/FooComp>\n+      <\/template>\n+      `)\n+    })\n   })\n })\n\n---\n file path A: src\/compiler\/parser\/index.ts | file path B: src\/compiler\/parser\/index.ts\n\n@@ -42,7 +42,7 @@ export const bindRE = \/^:|^\\.|^v-bind:\/\n const propBindRE = \/^\\.\/\n const modifierRE = \/\\.[^.\\]]+(?=[^\\]]*$)\/g\n \n-const slotRE = \/^v-slot(:|$)|^#\/\n+export const slotRE = \/^v-slot(:|$)|^#\/\n \n const lineBreakRE = \/[\\r\\n]\/\n const whitespaceRE = \/[ \\f\\t\\r\\n]+\/g\n\n\n###\n\n","completion":" fix(compiler-sfc): fix template usage check edge case for v-slot destructured default value (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/v3\/tsx-test.tsx | file path B: types\/test\/v3\/tsx-test.tsx\n\n@@ -1,4 +1,4 @@\n-import { VNode, defineComponent, ref } from '..\/..\/index'\n+import { VNode, defineComponent, ref, RenderContext } from '..\/..\/index'\n import { expectType } from '..\/utils'\n \n expectType<VNode>(<div \/>)\n@@ -25,7 +25,13 @@ expectType<JSX.Element>(<div ref=\"bar\" \/>)\n \/\/ allow Ref type type on arbitrary element\n const fooRef = ref<HTMLElement>()\n expectType<JSX.Element>(<div ref={fooRef} \/>)\n-expectType<JSX.Element>(<div ref={(el) => {fooRef.value = el as HTMLElement}} \/>)\n+expectType<JSX.Element>(\n+  <div\n+    ref={el => {\n+      fooRef.value = el as HTMLElement\n+    }}\n+  \/>\n+)\n \n expectType<JSX.Element>(\n   <input\n@@ -56,5 +62,8 @@ const Foo = defineComponent({\n \/\/ working\n ;<Foo bar={1} \/>\n ;<Foo bar={1} foo=\"baz\" \/>\n-\n ;<div slot=\"x\" \/>\n+\n+export default ({ data }: RenderContext) => {\n+  return <button {...data} \/>\n+}\n\n\n###\n\n","completion":" test: add test case for #12778\n"}
{"prompt":" file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -228,21 +228,21 @@ obj.a++\n const ComponentWithStyleInVNodeData = Vue.extend({\n   render(h) {\n     const elementWithStyleAsString = h('div', {\n-      style: 'background-color: red;'\n+      style: '--theme-color: black;'\n     })\n \n-    const elementWithStyleAsObject = h('div', {\n-      style: { backgroundColor: 'green' }\n+    const elementWithStyleCSSProperties = h('div', {\n+      style: { ['--theme-color' as any]: 'black' }\n     })\n \n-    const elementWithStyleAsArrayOfObjects = h('div', {\n-      style: [{ backgroundColor: 'blue' }]\n+    const elementWithStyleAsArrayOfStyleValues = h('div', {\n+      style: [{ ['--theme-color' as any]: 'black' }]\n     })\n \n     return h('div', undefined, [\n       elementWithStyleAsString,\n-      elementWithStyleAsObject,\n-      elementWithStyleAsArrayOfObjects\n+      elementWithStyleCSSProperties,\n+      elementWithStyleAsArrayOfStyleValues\n     ])\n   }\n })\n\n---\n file path A: types\/vnode.d.ts | file path B: types\/vnode.d.ts\n\n@@ -1,3 +1,4 @@\n+import { StyleValue } from '.\/jsx'\n import { Vue } from '.\/vue'\n import { DirectiveFunction, DirectiveOptions } from '.\/options'\n import { Ref } from '.\/v3-generated'\n@@ -85,7 +86,7 @@ export interface VNodeData {\n   staticClass?: string\n   class?: any\n   staticStyle?: { [key: string]: any }\n-  style?: string | object[] | object\n+  style?: StyleValue\n   props?: { [key: string]: any }\n   attrs?: { [key: string]: any }\n   domProps?: { [key: string]: any }\n\n\n###\n\n","completion":" fix(types): fix spreading VNodeData in tsx (#<issue-num>)\n"}
{"prompt":" file path A: types\/jsx.d.ts | file path B: types\/jsx.d.ts\n\n@@ -1297,7 +1297,9 @@ export interface Events {\n }\n \n type EventHandlers<E> = {\n-  [K in keyof E]?: E[K] extends Function ? E[K] : (payload: E[K]) => void\n+  [K in keyof E]?: E[K] extends (...args: any) => any\n+    ? E[K]\n+    : (payload: E[K]) => void\n }\n \n type ReservedProps = {\n\n\n###\n\n","completion":" fix(types): stricter type condition for `EventHandlers` (#<issue-num>)\n"}
{"prompt":" file path A: packages\/compiler-sfc\/test\/compileScript.spec.ts | file path B: packages\/compiler-sfc\/test\/compileScript.spec.ts\n\n@@ -1571,7 +1571,7 @@ describe('SFC analyze <script> bindings', () => {\n       <\/script>\n       <template>\n         <div @click=\"$emit('update:a');\"><\/div>\n-      <\/tempalte>\n+      <\/template>\n       `)\n     })\n   })\n\n\n###\n\n","completion":" chore: fix typo (#<issue-num>)\n"}
{"prompt":" file path A: examples\/classic\/elastic-header\/index.html | file path B: examples\/classic\/elastic-header\/index.html\n\n@@ -32,7 +32,7 @@\n       <draggable-header-view>\n         <template slot=\"header\">\n           <h1>Elastic Draggable SVG Header<\/h1>\n-          <p>with <a href=\"https:\/\/vuejs.org\">Vue.js<\/a> + <a href=\"http:\/\/dynamicsjs.com\">dynamics.js<\/a><\/p>\n+          <p>with <a href=\"https:\/\/v2.vuejs.org\">Vue.js<\/a> + <a href=\"http:\/\/dynamicsjs.com\">dynamics.js<\/a><\/p>\n         <\/template>\n         <template slot=\"content\">\n           <p>Note this is just an effect demo - there are of course many additional details if you want to use this in production, e.g. handling responsive sizes, reload threshold and content scrolling. Those are out of scope for this quick little hack. However, the idea is that you can hide them as internal details of a Vue.js component and expose a simple Web-Component-like interface.<\/p>\n\n---\n file path A: examples\/classic\/todomvc\/app.js | file path B: examples\/classic\/todomvc\/app.js\n\n@@ -55,7 +55,7 @@ var app = new Vue({\n   },\n \n   \/\/ computed properties\n-  \/\/ https:\/\/vuejs.org\/guide\/computed.html\n+  \/\/ https:\/\/v2.vuejs.org\/v2\/guide\/computed.html\n   computed: {\n     filteredTodos: function () {\n       return filters[this.visibility](this.todos)\n@@ -129,7 +129,7 @@ var app = new Vue({\n \n   \/\/ a custom directive to wait for the DOM to be updated\n   \/\/ before focusing on the input field.\n-  \/\/ https:\/\/vuejs.org\/guide\/custom-directive.html\n+  \/\/ https:\/\/v2.vuejs.org\/v2\/guide\/custom-directive.html\n   directives: {\n     'todo-focus': function (el, binding) {\n       if (binding.value) {\n\n---\n file path A: examples\/classic\/todomvc\/readme.md | file path B: examples\/classic\/todomvc\/readme.md\n\n@@ -3,16 +3,16 @@\n > Vue.js is a library for building interactive web interfaces. \n It provides data-driven, nestable view components with a simple and flexible API.\n \n-> _[Vue.js - vuejs.org](https:\/\/vuejs.org)_\n+> _[Vue.js - v2.vuejs.org](https:\/\/v2.vuejs.org)_\n \n ## Learning Vue.js\n-The [Vue.js website](https:\/\/vuejs.org\/) is a great resource to get started.\n+The [Vue.js website](https:\/\/v2.vuejs.org\/) is a great resource to get started.\n \n Here are some links you may find helpful:\n \n-* [Official Guide](https:\/\/vuejs.org\/guide\/)\n-* [API Reference](https:\/\/vuejs.org\/api\/)\n-* [Examples](https:\/\/vuejs.org\/examples\/)\n+* [Official Guide](https:\/\/v2.vuejs.org\/guide\/)\n+* [API Reference](https:\/\/v2.vuejs.org\/api\/)\n+* [Examples](https:\/\/v2.vuejs.org\/examples\/)\n \n Get help from other Vue.js users:\n \n\n---\n file path A: src\/compiler\/codegen\/index.ts | file path B: src\/compiler\/codegen\/index.ts\n\n@@ -259,7 +259,7 @@ export function genFor(\n     state.warn(\n       `<${el.tag} v-for=\"${alias} in ${exp}\">: component lists rendered with ` +\n         `v-for should have explicit keys. ` +\n-        `See https:\/\/vuejs.org\/guide\/list.html#key for more info.`,\n+        `See https:\/\/v2.vuejs.org\/v2\/guide\/list.html#key for more info.`,\n       el.rawAttrsMap['v-for'],\n       true \/* tip *\/\n     )\n\n\n###\n\n","completion":" chore: fix some broken links to v2 docs (#<issue-num>)\n"}
{"prompt":" file path A: src\/v3\/reactivity\/effectScope.ts | file path B: src\/v3\/reactivity\/effectScope.ts\n\n@@ -16,9 +16,7 @@ export class EffectScope {\n    * @internal\n    *\/\n   cleanups: (() => void)[] = []\n-\n   \/**\n-   * only assigned by undetached scope\n    * @internal\n    *\/\n   parent: EffectScope | undefined\n@@ -38,9 +36,9 @@ export class EffectScope {\n    *\/\n   private index: number | undefined\n \n-  constructor(detached = false) {\n+  constructor(public detached = false) {\n+    this.parent = activeEffectScope\n     if (!detached && activeEffectScope) {\n-      this.parent = activeEffectScope\n       this.index =\n         (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(\n           this\n@@ -93,7 +91,7 @@ export class EffectScope {\n         }\n       }\n       \/\/ nested scope, dereference from parent to avoid memory leaks\n-      if (this.parent && !fromParent) {\n+      if (!this.detached && this.parent && !fromParent) {\n         \/\/ optimized O(1) removal\n         const last = this.parent.scopes!.pop()\n         if (last && last !== this) {\n@@ -101,6 +99,7 @@ export class EffectScope {\n           last.index = this.index!\n         }\n       }\n+      this.parent = undefined\n       this.active = false\n     }\n   }\n\n---\n file path A: test\/unit\/features\/v3\/reactivity\/effectScope.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/effectScope.spec.ts\n\n@@ -279,4 +279,15 @@ describe('reactivity\/effectScope', () => {\n       expect(getCurrentScope()).toBe(currentScope)\n     })\n   })\n+\n+  it('calling .off() of a detached scope inside an active scope should not break currentScope', () => {\n+    const parentScope = new EffectScope()\n+\n+    parentScope.run(() => {\n+      const childScope = new EffectScope(true)\n+      childScope.on()\n+      childScope.off()\n+      expect(getCurrentScope()).toBe(parentScope)\n+    })\n+  })\n })\n\n\n###\n\n","completion":" fix(effectScope): calling off() of a detached scope should not break currentScope\n"}
{"prompt":" file path A: src\/core\/observer\/traverse.ts | file path B: src\/core\/observer\/traverse.ts\n\n@@ -21,6 +21,7 @@ function _traverse(val: any, seen: SimpleSet) {\n   const isA = isArray(val)\n   if (\n     (!isA && !isObject(val)) ||\n+    val.__v_skip \/* ReactiveFlags.SKIP *\/ ||\n     Object.isFrozen(val) ||\n     val instanceof VNode\n   ) {\n\n\n###\n\n","completion":" fix(watch): avoid traversing objects that are marked non-reactive (#<issue-num>)\n"}
{"prompt":" file path A: types\/jsx.d.ts | file path B: types\/jsx.d.ts\n\n@@ -731,7 +731,7 @@ export interface SVGAttributes extends AriaAttributes, EventHandlers<Events> {\n    * @see https:\/\/www.w3.org\/TR\/SVG\/styling.html#ElementSpecificStyling\n    *\/\n   class?: any\n-  style?: string | CSSProperties\n+  style?: StyleValue\n \n   color?: string\n   height?: Numberish\n\n\n###\n\n","completion":" fix(types): style attribute svg (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/dep.ts | file path B: src\/core\/observer\/dep.ts\n\n@@ -1,9 +1,19 @@\n-import { remove } from '..\/util\/index'\n import config from '..\/config'\n import { DebuggerOptions, DebuggerEventExtraInfo } from 'v3'\n \n let uid = 0\n \n+const pendingCleanupDeps: Dep[] = []\n+\n+export const cleanupDeps = () => {\n+  for (let i = 0; i < pendingCleanupDeps.length; i++) {\n+    const dep = pendingCleanupDeps[i]\n+    dep.subs = dep.subs.filter(s => s)\n+    dep._pending = false\n+  }\n+  pendingCleanupDeps.length = 0\n+}\n+\n \/**\n  * @internal\n  *\/\n@@ -21,7 +31,9 @@ export interface DepTarget extends DebuggerOptions {\n export default class Dep {\n   static target?: DepTarget | null\n   id: number\n-  subs: Array<DepTarget>\n+  subs: Array<DepTarget | null>\n+  \/\/ pending subs cleanup\n+  _pending = false\n \n   constructor() {\n     this.id = uid++\n@@ -33,7 +45,15 @@ export default class Dep {\n   }\n \n   removeSub(sub: DepTarget) {\n-    remove(this.subs, sub)\n+    \/\/ #12696 deps with massive amount of subscribers are extremely slow to\n+    \/\/ clean up in Chromium\n+    \/\/ to workaround this, we unset the sub for now, and clear them on\n+    \/\/ next scheduler flush.\n+    this.subs[this.subs.indexOf(sub)] = null\n+    if (!this._pending) {\n+      this._pending = true\n+      pendingCleanupDeps.push(this)\n+    }\n   }\n \n   depend(info?: DebuggerEventExtraInfo) {\n@@ -50,7 +70,7 @@ export default class Dep {\n \n   notify(info?: DebuggerEventExtraInfo) {\n     \/\/ stabilize the subscriber list first\n-    const subs = this.subs.slice()\n+    const subs = this.subs.filter(s => s) as DepTarget[]\n     if (__DEV__ && !config.async) {\n       \/\/ subs aren't sorted in scheduler if not running async\n       \/\/ we need to sort them now to make sure they fire in correct\n@@ -58,15 +78,15 @@ export default class Dep {\n       subs.sort((a, b) => a.id - b.id)\n     }\n     for (let i = 0, l = subs.length; i < l; i++) {\n+      const sub = subs[i]\n       if (__DEV__ && info) {\n-        const sub = subs[i]\n         sub.onTrigger &&\n           sub.onTrigger({\n             effect: subs[i],\n             ...info\n           })\n       }\n-      subs[i].update()\n+      sub.update()\n     }\n   }\n }\n\n---\n file path A: src\/core\/observer\/scheduler.ts | file path B: src\/core\/observer\/scheduler.ts\n\n@@ -1,6 +1,6 @@\n import type Watcher from '.\/watcher'\n import config from '..\/config'\n-import Dep from '.\/dep'\n+import Dep, { cleanupDeps } from '.\/dep'\n import { callHook, activateChildComponent } from '..\/instance\/lifecycle'\n \n import { warn, nextTick, devtools, inBrowser, isIE } from '..\/util\/index'\n@@ -121,6 +121,7 @@ function flushSchedulerQueue() {\n   \/\/ call component updated and activated hooks\n   callActivatedHooks(activatedQueue)\n   callUpdatedHooks(updatedQueue)\n+  cleanupDeps()\n \n   \/\/ devtool hook\n   \/* istanbul ignore if *\/\n\n---\n file path A: src\/shared\/util.ts | file path B: src\/shared\/util.ts\n\n@@ -133,7 +133,13 @@ export const isReservedAttribute = makeMap('key,ref,slot,slot-scope,is')\n  * Remove an item from an array.\n  *\/\n export function remove(arr: Array<any>, item: any): Array<any> | void {\n-  if (arr.length) {\n+  const len = arr.length\n+  if (len) {\n+    \/\/ fast path for the only \/ last item\n+    if (item === arr[len - 1]) {\n+      arr.length = len - 1\n+      return\n+    }\n     const index = arr.indexOf(item)\n     if (index > -1) {\n       return arr.splice(index, 1)\n\n---\n file path A: test\/unit\/modules\/observer\/dep.spec.ts | file path B: test\/unit\/modules\/observer\/dep.spec.ts\n\n@@ -1,4 +1,4 @@\n-import Dep from 'core\/observer\/dep'\n+import Dep, { cleanupDeps } from 'core\/observer\/dep'\n \n describe('Dep', () => {\n   let dep\n@@ -24,8 +24,13 @@ describe('Dep', () => {\n \n   describe('removeSub()', () => {\n     it('should remove sub', () => {\n-      dep.subs.push(null)\n-      dep.removeSub(null)\n+      const sub = {}\n+      dep.subs.push(sub)\n+      dep.removeSub(sub)\n+      expect(dep.subs.includes(sub)).toBe(false)\n+\n+      \/\/ nulled subs are cleared on next flush\n+      cleanupDeps()\n       expect(dep.subs.length).toBe(0)\n     })\n   })\n\n\n###\n\n","completion":" perf: improve unsub perf for deps with massive amount of subs\n"}
{"prompt":" file path A: dist\/vue.runtime.mjs | file path B: dist\/vue.runtime.mjs\n\n@@ -1,76 +1,76 @@\n-import Vue from '.\/vue.runtime.common.js'\r\n-export default Vue\r\n-\r\n-\/\/ this should be kept in sync with src\/v3\/index.ts\r\n-export const {\r\n-  version,\r\n-\r\n-  \/\/ refs\r\n-  ref,\r\n-  shallowRef,\r\n-  isRef,\r\n-  toRef,\r\n-  toRefs,\r\n-  unref,\r\n-  proxyRefs,\r\n-  customRef,\r\n-  triggerRef,\r\n-  computed,\r\n-\r\n-  \/\/ reactive\r\n-  reactive,\r\n-  isReactive,\r\n-  isReadonly,\r\n-  isShallow,\r\n-  isProxy,\r\n-  shallowReactive,\r\n-  markRaw,\r\n-  toRaw,\r\n-  readonly,\r\n-  shallowReadonly,\r\n-\r\n-  \/\/ watch\r\n-  watch,\r\n-  watchEffect,\r\n-  watchPostEffect,\r\n-  watchSyncEffect,\r\n-\r\n-  \/\/ effectScope\r\n-  effectScope,\r\n-  onScopeDispose,\r\n-  getCurrentScope,\r\n-\r\n-  \/\/ provide \/ inject\r\n-  provide,\r\n-  inject,\r\n-\r\n-  \/\/ lifecycle\r\n-  onBeforeMount,\r\n-  onMounted,\r\n-  onBeforeUpdate,\r\n-  onUpdated,\r\n-  onBeforeUnmount,\r\n-  onUnmounted,\r\n-  onErrorCaptured,\r\n-  onActivated,\r\n-  onDeactivated,\r\n-  onServerPrefetch,\r\n-  onRenderTracked,\r\n-  onRenderTriggered,\r\n-\r\n-  \/\/ v2 only\r\n-  set,\r\n-  del,\r\n-\r\n-  \/\/ v3 compat\r\n-  h,\r\n-  getCurrentInstance,\r\n-  useSlots,\r\n-  useAttrs,\r\n-  mergeDefaults,\r\n-  nextTick,\r\n-  useCssModule,\r\n-  useCssVars,\r\n-  defineComponent,\r\n-  defineAsyncComponent\r\n-} = Vue\r\n+import Vue from '.\/vue.runtime.common.js'\n+export default Vue\n+\n+\/\/ this should be kept in sync with src\/v3\/index.ts\n+export const {\n+  version,\n+\n+  \/\/ refs\n+  ref,\n+  shallowRef,\n+  isRef,\n+  toRef,\n+  toRefs,\n+  unref,\n+  proxyRefs,\n+  customRef,\n+  triggerRef,\n+  computed,\n+\n+  \/\/ reactive\n+  reactive,\n+  isReactive,\n+  isReadonly,\n+  isShallow,\n+  isProxy,\n+  shallowReactive,\n+  markRaw,\n+  toRaw,\n+  readonly,\n+  shallowReadonly,\n+\n+  \/\/ watch\n+  watch,\n+  watchEffect,\n+  watchPostEffect,\n+  watchSyncEffect,\n+\n+  \/\/ effectScope\n+  effectScope,\n+  onScopeDispose,\n+  getCurrentScope,\n+\n+  \/\/ provide \/ inject\n+  provide,\n+  inject,\n+\n+  \/\/ lifecycle\n+  onBeforeMount,\n+  onMounted,\n+  onBeforeUpdate,\n+  onUpdated,\n+  onBeforeUnmount,\n+  onUnmounted,\n+  onErrorCaptured,\n+  onActivated,\n+  onDeactivated,\n+  onServerPrefetch,\n+  onRenderTracked,\n+  onRenderTriggered,\n+\n+  \/\/ v2 only\n+  set,\n+  del,\n+\n+  \/\/ v3 compat\n+  h,\n+  getCurrentInstance,\n+  useSlots,\n+  useAttrs,\n+  mergeDefaults,\n+  nextTick,\n+  useCssModule,\n+  useCssVars,\n+  defineComponent,\n+  defineAsyncComponent\n+} = Vue\n\n---\n file path A: tsconfig.json | file path B: tsconfig.json\n\n@@ -6,6 +6,7 @@\n     \"target\": \"esnext\",\n     \"module\": \"ESNext\",\n     \"moduleResolution\": \"node\",\n+    \"newLine\": \"LF\",\n     \"strict\": true,\n \n     \"allowJs\": true,\n\n\n###\n\n","completion":" fix(build): enforce LF line ending in built files\n"}
{"prompt":" file path A: src\/core\/instance\/init.ts | file path B: src\/core\/instance\/init.ts\n\n@@ -1,6 +1,6 @@\n import config from '..\/config'\n import { initProxy } from '.\/proxy'\n-import { initState } from '.\/state'\n+import { initProps, initState } from '.\/state'\n import { initRender } from '.\/render'\n import { initEvents } from '.\/events'\n import { mark, measure } from '..\/util\/perf'\n@@ -10,6 +10,7 @@ import { extend, mergeOptions, formatComponentName } from '..\/util\/index'\n import type { Component } from 'types\/component'\n import type { InternalComponentOptions } from 'types\/options'\n import { EffectScope } from 'v3\/reactivity\/effectScope'\n+import { initSetup } from '..\/..\/v3\/apiSetup'\n \n let uid = 0\n \n@@ -59,8 +60,12 @@ export function initMixin(Vue: typeof Component) {\n     initLifecycle(vm)\n     initEvents(vm)\n     initRender(vm)\n-    callHook(vm, 'beforeCreate', undefined, false \/* setContext *\/)\n+\n+    const opts = vm.$options\n     initInjections(vm) \/\/ resolve injections before data\/props\n+    initProps(vm, opts.props)\n+    initSetup(vm)\n+    callHook(vm, 'beforeCreate', undefined, false \/* setContext *\/)\n     initState(vm)\n     initProvide(vm) \/\/ resolve provide after data\/props\n     callHook(vm, 'created')\n\n---\n file path A: src\/core\/instance\/state.ts | file path B: src\/core\/instance\/state.ts\n\n@@ -2,7 +2,6 @@ import config from '..\/config'\n import Watcher from '..\/observer\/watcher'\n import Dep, { pushTarget, popTarget } from '..\/observer\/dep'\n import { isUpdatingChildComponent } from '.\/lifecycle'\n-import { initSetup } from 'v3\/apiSetup'\n \n import {\n   set,\n@@ -51,11 +50,6 @@ export function proxy(target: Object, sourceKey: string, key: string) {\n \n export function initState(vm: Component) {\n   const opts = vm.$options\n-  if (opts.props) initProps(vm, opts.props)\n-\n-  \/\/ Composition API\n-  initSetup(vm)\n-\n   if (opts.methods) initMethods(vm, opts.methods)\n   if (opts.data) {\n     initData(vm)\n@@ -69,7 +63,8 @@ export function initState(vm: Component) {\n   }\n }\n \n-function initProps(vm: Component, propsOptions: Object) {\n+export function initProps(vm: Component, propsOptions: Object | undefined) {\n+  if (!propsOptions) return\n   const propsData = vm.$options.propsData || {}\n   const props = (vm._props = shallowReactive({}))\n   \/\/ cache prop keys so that future props updates can iterate using Array\n\n---\n file path A: test\/unit\/features\/v3\/apiSetup.spec.ts | file path B: test\/unit\/features\/v3\/apiSetup.spec.ts\n\n@@ -263,7 +263,7 @@ describe('api: setup context', () => {\n     }).$mount()\n     expect(spy).toHaveBeenCalled()\n   })\n-  \n+\n   \/\/ #12561\n   it('setup props should be reactive', () => {\n     const msg = ref('hi')\n@@ -333,4 +333,30 @@ describe('api: setup context', () => {\n     await nextTick()\n     expect(_listeners.foo()).toBe(2)\n   })\n+\n+  \/\/ #12802\n+  it('should be called before all lifecycle hooks', () => {\n+    const calls: string[] = []\n+\n+    Vue.mixin({\n+      beforeCreate() {\n+        calls.push('global beforeCreate')\n+      }\n+    })\n+\n+    new Vue({\n+      beforeCreate() {\n+        calls.push('component beforeCreate')\n+      },\n+      setup() {\n+        calls.push('setup')\n+      }\n+    })\n+\n+    expect(calls).toEqual([\n+      'setup',\n+      'global beforeCreate',\n+      'component beforeCreate'\n+    ])\n+  })\n })\n\n\n###\n\n","completion":" fix(setup): setup hook should be called before beforeCreate\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/index.ts | file path B: packages\/compiler-sfc\/src\/index.ts\n\n@@ -6,6 +6,13 @@ export { compileScript } from '.\/compileScript'\n export { generateCodeFrame } from 'compiler\/codeframe'\n export { rewriteDefault } from '.\/rewriteDefault'\n \n+\/\/ For backwards compat only. Some existing tools like\n+\/\/ fork-ts-checker-webpack-plugin relies on its presence for differentiating\n+\/\/ between Vue 2 and Vue 3.\n+\/\/ ref #12719\n+\/\/ ref https:\/\/github.com\/TypeStrong\/fork-ts-checker-webpack-plugin\/issues\/765\n+export { parseComponent } from '.\/parseComponent'\n+\n \/\/ types\n export { SFCParseOptions } from '.\/parse'\n export { CompilerOptions, WarningMessage } from 'types\/compiler'\n\n\n###\n\n","completion":" fix(compiler-sfc): export parseComponent for compat with fork-ts-checker-webpack-plugin\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -181,7 +181,7 @@ export interface ComponentOptions<\n   propsData?: object\n   computed?: Accessors<Computed>\n   methods?: Methods\n-  watch?: Record<string, WatchOptionsWithHandler<any> | WatchHandler<any>>\n+  watch?: Record<string, WatchOptionsWithHandler<any> | WatchHandler<any> | Array<WatchOptionsWithHandler<any> | WatchHandler<any>>>\n \n   setup?: (\n     this: void,\n\n---\n file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -172,7 +172,14 @@ Vue.component('component', {\n     d: {\n       handler: 'someMethod',\n       immediate: true\n-    }\n+    },\n+    e: [\n+      'handle1',\n+      function handle2 (val, oldVal) {},\n+      {\n+        handler: function handle3 (val, oldVal) {},\n+      }\n+    ],\n   },\n   el: '#app',\n   template: '<div>{{ message }}<\/div>',\n\n\n###\n\n","completion":" fix(types): fix error with options watch (#<issue-num>)\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/compileScript.ts | file path B: packages\/compiler-sfc\/src\/compileScript.ts\n\n@@ -284,11 +284,9 @@ export function compileScript(\n       userImportAlias[imported] = local\n     }\n \n-    \/\/ template usage check is only needed in non-inline mode, so we can skip\n-    \/\/ the work if inlineTemplate is true.\n     let isUsedInTemplate = true\n-    if (isTS && sfc.template && !sfc.template.src && !sfc.template.lang) {\n-      isUsedInTemplate = isImportUsed(local, sfc)\n+    if (sfc.template && !sfc.template.src && !sfc.template.lang) {\n+      isUsedInTemplate = isImportUsed(local, sfc, isTS)\n     }\n \n     userImports[local] = {\n@@ -1782,7 +1780,7 @@ function getObjectOrArrayExpressionKeys(value: Node): string[] {\n \n const templateUsageCheckCache = new LRU<string, string>(512)\n \n-function resolveTemplateUsageCheckString(sfc: SFCDescriptor) {\n+function resolveTemplateUsageCheckString(sfc: SFCDescriptor, isTS: boolean) {\n   const { content } = sfc.template!\n   const cached = templateUsageCheckCache.get(content)\n   if (cached) {\n@@ -1809,7 +1807,7 @@ function resolveTemplateUsageCheckString(sfc: SFCDescriptor) {\n             code += `,v${capitalize(camelize(baseName))}`\n           }\n           if (value) {\n-            code += `,${processExp(value, baseName)}`\n+            code += `,${processExp(value, isTS, baseName)}`\n           }\n         }\n       }\n@@ -1817,7 +1815,7 @@ function resolveTemplateUsageCheckString(sfc: SFCDescriptor) {\n     chars(text) {\n       const res = parseText(text)\n       if (res) {\n-        code += `,${processExp(res.expression)}`\n+        code += `,${processExp(res.expression, isTS)}`\n       }\n     }\n   })\n@@ -1829,8 +1827,8 @@ function resolveTemplateUsageCheckString(sfc: SFCDescriptor) {\n \n const forAliasRE = \/([\\s\\S]*?)\\s+(?:in|of)\\s+([\\s\\S]*)\/\n \n-function processExp(exp: string, dir?: string): string {\n-  if (\/ as\\s+\\w|<.*>|:\/.test(exp)) {\n+function processExp(exp: string, isTS: boolean, dir?: string): string {\n+  if (isTS && \/ as\\s+\\w|<.*>|:\/.test(exp)) {\n     if (dir === 'slot') {\n       exp = `(${exp})=>{}`\n     } else if (dir === 'on') {\n@@ -1839,7 +1837,7 @@ function processExp(exp: string, dir?: string): string {\n       const inMatch = exp.match(forAliasRE)\n       if (inMatch) {\n         const [, LHS, RHS] = inMatch\n-        return processExp(`(${LHS})=>{}`) + processExp(RHS)\n+        return processExp(`(${LHS})=>{}`, true) + processExp(RHS, true)\n       }\n     }\n     let ret = ''\n@@ -1867,36 +1865,38 @@ function stripTemplateString(str: string): string {\n   return ''\n }\n \n-function isImportUsed(local: string, sfc: SFCDescriptor): boolean {\n+function isImportUsed(\n+  local: string,\n+  sfc: SFCDescriptor,\n+  isTS: boolean\n+): boolean {\n   return new RegExp(\n     \/\/ #4274 escape $ since it's a special char in regex\n     \/\/ (and is the only regex special char that is valid in identifiers)\n     `[^\\\\w$_]${local.replace(\/\\$\/g, '\\\\$')}[^\\\\w$_]`\n-  ).test(resolveTemplateUsageCheckString(sfc))\n+  ).test(resolveTemplateUsageCheckString(sfc, isTS))\n }\n \n \/**\n  * Note: this comparison assumes the prev\/next script are already identical,\n- * and only checks the special case where <script setup lang=\"ts\"> unused import\n+ * and only checks the special case where <script setup> unused import\n  * pruning result changes due to template changes.\n  *\/\n export function hmrShouldReload(\n   prevImports: Record<string, ImportBinding>,\n   next: SFCDescriptor\n ): boolean {\n-  if (\n-    !next.scriptSetup ||\n-    (next.scriptSetup.lang !== 'ts' && next.scriptSetup.lang !== 'tsx')\n-  ) {\n+  if (!next.scriptSetup) {\n     return false\n   }\n \n+  const isTS = next.scriptSetup.lang === 'ts' || next.scriptSetup.lang === 'tsx'\n   \/\/ for each previous import, check if its used status remain the same based on\n   \/\/ the next descriptor's template\n   for (const key in prevImports) {\n     \/\/ if an import was previous unused, but now is used, we need to force\n     \/\/ reload so that the script now includes that import.\n-    if (!prevImports[key].isUsedInTemplate && isImportUsed(key, next)) {\n+    if (!prevImports[key].isUsedInTemplate && isImportUsed(key, next, isTS)) {\n       return true\n     }\n   }\n\n---\n file path A: packages\/compiler-sfc\/test\/__snapshots__\/compileScript.spec.ts.snap | file path B: packages\/compiler-sfc\/test\/__snapshots__\/compileScript.spec.ts.snap\n\n@@ -20,7 +20,7 @@ exports[`SFC analyze <script> bindings > auto name inference > do not overwrite\n export default \/*#__PURE__*\/Object.assign(__default__, {\n   setup(__props) {\n const a = 1\n-return { a, defineComponent }\n+return { a }\n }\n \n })\"\n\n\n###\n\n","completion":" fix(sfc): prune returned bindings for non-TS as well\n"}
{"prompt":" file path A: types\/test\/v3\/tsx-test.tsx | file path B: types\/test\/v3\/tsx-test.tsx\n\n@@ -1,4 +1,4 @@\n-import { VNode, defineComponent } from '..\/..\/index'\n+import { VNode, defineComponent, ref } from '..\/..\/index'\n import { expectType } from '..\/utils'\n \n expectType<VNode>(<div \/>)\n@@ -22,6 +22,11 @@ expectError(<div foo=\"bar\" \/>)\n expectType<JSX.Element>(<div key=\"foo\" \/>)\n expectType<JSX.Element>(<div ref=\"bar\" \/>)\n \n+\/\/ allow Ref type type on arbitrary element\n+const fooRef = ref<HTMLElement>()\n+expectType<JSX.Element>(<div ref={fooRef} \/>)\n+expectType<JSX.Element>(<div ref={(el) => {fooRef.value = el as HTMLElement}} \/>)\n+\n expectType<JSX.Element>(\n   <input\n     onInput={e => {\n\n---\n file path A: types\/vnode.d.ts | file path B: types\/vnode.d.ts\n\n@@ -1,5 +1,7 @@\n import { Vue } from '.\/vue'\n import { DirectiveFunction, DirectiveOptions } from '.\/options'\n+import { Ref } from '.\/v3-generated'\n+import { ComponentPublicInstance } from '.\/v3-component-public-instance'\n \n \/**\n  * For extending allowed non-declared props on components in TSX\n@@ -65,11 +67,19 @@ export interface VNodeComponentOptions {\n   tag?: string\n }\n \n+export type VNodeRef =\n+  | string\n+  | Ref\n+  | ((\n+      ref: Element | ComponentPublicInstance | null,\n+      refs: Record<string, any>\n+    ) => void)\n+\n export interface VNodeData {\n   key?: string | number\n   slot?: string\n   scopedSlots?: { [key: string]: ScopedSlot | undefined }\n-  ref?: string\n+  ref?: VNodeRef\n   refInFor?: boolean\n   tag?: string\n   staticClass?: string\n\n\n###\n\n","completion":" fix(types): support Ref and function types in tsx ref attribute (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/index.ts | file path B: src\/core\/observer\/index.ts\n\n@@ -7,7 +7,6 @@ import {\n   hasOwn,\n   isArray,\n   hasProto,\n-  isObject,\n   isPlainObject,\n   isPrimitive,\n   isUndef,\n@@ -108,23 +107,21 @@ export function observe(\n   shallow?: boolean,\n   ssrMockReactivity?: boolean\n ): Observer | void {\n-  if (!isObject(value) || isRef(value) || value instanceof VNode) {\n-    return\n+  if (value && hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n+    return value.__ob__\n   }\n-  let ob: Observer | void\n-  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n-    ob = value.__ob__\n-  } else if (\n+  if (\n     shouldObserve &&\n     (ssrMockReactivity || !isServerRendering()) &&\n     (isArray(value) || isPlainObject(value)) &&\n     Object.isExtensible(value) &&\n     !value.__v_skip \/* ReactiveFlags.SKIP *\/ &&\n-    !rawMap.has(value)\n+    !rawMap.has(value) &&\n+    !isRef(value) &&\n+    !(value instanceof VNode)\n   ) {\n-    ob = new Observer(value, shallow, ssrMockReactivity)\n+    return new Observer(value, shallow, ssrMockReactivity)\n   }\n-  return ob\n }\n \n \/**\n\n\n###\n\n","completion":" fix(reactivity): check skip first before checking ref when creating observer (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/index.ts | file path B: src\/core\/observer\/index.ts\n\n@@ -17,6 +17,7 @@ import {\n   noop\n } from '..\/util\/index'\n import { isReadonly, isRef, TrackOpTypes, TriggerOpTypes } from '..\/..\/v3'\n+import { rawMap } from '..\/..\/v3\/reactivity\/reactive'\n \n const arrayKeys = Object.getOwnPropertyNames(arrayMethods)\n \n@@ -118,7 +119,8 @@ export function observe(\n     (ssrMockReactivity || !isServerRendering()) &&\n     (isArray(value) || isPlainObject(value)) &&\n     Object.isExtensible(value) &&\n-    !value.__v_skip \/* ReactiveFlags.SKIP *\/\n+    !value.__v_skip \/* ReactiveFlags.SKIP *\/ &&\n+    !rawMap.has(value)\n   ) {\n     ob = new Observer(value, shallow, ssrMockReactivity)\n   }\n\n---\n file path A: src\/v3\/reactivity\/reactive.ts | file path B: src\/v3\/reactivity\/reactive.ts\n\n@@ -5,10 +5,13 @@ import {\n   isPrimitive,\n   warn,\n   toRawType,\n-  isServerRendering\n+  isServerRendering,\n+  isObject\n } from 'core\/util'\n import type { Ref, UnwrapRefSimple, RawSymbol } from '.\/ref'\n \n+export const rawMap = new WeakMap()\n+\n export const enum ReactiveFlags {\n   SKIP = '__v_skip',\n   IS_READONLY = '__v_isReadonly',\n@@ -119,7 +122,9 @@ export function toRaw<T>(observed: T): T {\n export function markRaw<T extends object>(\n   value: T\n ): T & { [RawSymbol]?: true } {\n-  def(value, ReactiveFlags.SKIP, true)\n+  if (isObject(value)) {\n+    rawMap.set(value, true)\n+  }\n   return value\n }\n \n\n---\n file path A: src\/v3\/reactivity\/readonly.ts | file path B: src\/v3\/reactivity\/readonly.ts\n\n@@ -32,8 +32,8 @@ export type DeepReadonly<T> = T extends Builtin\n   ? { readonly [K in keyof T]: DeepReadonly<T[K]> }\n   : Readonly<T>\n \n-const rawToReadonlyFlag = `__v_rawToReadonly`\n-const rawToShallowReadonlyFlag = `__v_rawToShallowReadonly`\n+const rawToReadonlyMap = new WeakMap()\n+const rawToShallowReadonlyMap = new WeakMap()\n \n export function readonly<T extends object>(\n   target: T\n@@ -63,14 +63,14 @@ function createReadonly(target: any, shallow: boolean) {\n   }\n \n   \/\/ already has a readonly proxy\n-  const existingFlag = shallow ? rawToShallowReadonlyFlag : rawToReadonlyFlag\n-  const existingProxy = target[existingFlag]\n+  const map = shallow ? rawToShallowReadonlyMap : rawToReadonlyMap\n+  const existingProxy = map.get(target)\n   if (existingProxy) {\n     return existingProxy\n   }\n \n   const proxy = Object.create(Object.getPrototypeOf(target))\n-  def(target, existingFlag, proxy)\n+  map.set(target, proxy)\n \n   def(proxy, ReactiveFlags.IS_READONLY, true)\n   def(proxy, ReactiveFlags.RAW, target)\n\n---\n file path A: test\/unit\/features\/v3\/reactivity\/reactive.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/reactive.spec.ts\n\n@@ -258,6 +258,12 @@ describe('reactivity\/reactive', () => {\n     expect(isReactive(obj.bar)).toBe(false)\n   })\n \n+  test('markRaw on non-extensible objects', () => {\n+    const foo = Object.freeze({})\n+    markRaw(foo)\n+    expect(isReactive(reactive(foo))).toBe(false)\n+  })\n+\n   test('should not observe non-extensible objects', () => {\n     const obj = reactive({\n       foo: Object.preventExtensions({ a: 1 }),\n\n---\n file path A: test\/unit\/features\/v3\/reactivity\/readonly.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/readonly.spec.ts\n\n@@ -525,4 +525,11 @@ describe('reactivity\/readonly', () => {\n     expect(readonlyFoo.x).toBe(1)\n     expect(`et operation on key \"x\" failed`).toHaveBeenWarned()\n   })\n+\n+  test('compatibility with non-extensible objects', () => {\n+    const foo = Object.freeze({ a: 1 })\n+    const bar = readonly(foo)\n+    expect(isReadonly(bar)).toBe(true)\n+    expect(readonly(foo)).toBe(bar)\n+  })\n })\n\n\n###\n\n","completion":" fix(reactivity): use WeakMap for proxy\/raw checks, compat with non-extensible objects\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -4,6 +4,7 @@ import { SetupContext } from '.\/v3-setup-context'\n import { DebuggerEvent } from '.\/v3-generated'\n import { DefineComponent } from '.\/v3-define-component'\n import { ComponentOptionsMixin } from '.\/v3-component-options'\n+import { ObjectDirective, FunctionDirective } from '.\/v3-directive'\n \n type Constructor = {\n   new (...args: any[]): any\n@@ -318,6 +319,9 @@ export interface DirectiveBinding extends Readonly<VNodeDirective> {\n   readonly modifiers: { [key: string]: boolean }\n }\n \n+\/**\n+ * @deprecated use {@link FunctionDirective} instead\n+ *\/\n export type DirectiveFunction = (\n   el: HTMLElement,\n   binding: DirectiveBinding,\n@@ -325,6 +329,9 @@ export type DirectiveFunction = (\n   oldVnode: VNode\n ) => void\n \n+\/**\n+ * @deprecated use {@link ObjectDirective} instead\n+ *\/\n export interface DirectiveOptions {\n   bind?: DirectiveFunction\n   inserted?: DirectiveFunction\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -22,6 +22,7 @@ import {\n   ExtractComputedReturns,\n   ComponentOptionsMixin\n } from '.\/v3-component-options'\n+import { Directive, ObjectDirective } from '.\/v3-directive'\n \n export interface CreateElement {\n   (\n@@ -338,6 +339,10 @@ export interface VueConstructor<V extends Vue = Vue> {\n     id: string,\n     definition?: DirectiveOptions | DirectiveFunction\n   ): DirectiveOptions\n+  directive(\n+    id: string,\n+    definition?: Directive\n+  ): ObjectDirective\n   filter(id: string, definition?: Function): Function\n \n   component(id: string): VueConstructor\n\n\n###\n\n","completion":" fix(types): vue 3 directive type compatibility (#<issue-num>)\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/stylePlugins\/scoped.ts | file path B: packages\/compiler-sfc\/src\/stylePlugins\/scoped.ts\n\n@@ -1,6 +1,5 @@\n import { PluginCreator, Rule, AtRule } from 'postcss'\n import selectorParser from 'postcss-selector-parser'\n-import { warn } from '..\/warn'\n \n const animationNameRE = \/^(-\\w+-)?animation-name$\/\n const animationRE = \/^(-\\w+-)?animation$\/\n@@ -94,10 +93,10 @@ function rewriteSelector(\n     ) {\n       n.value = ' '\n       n.spaces.before = n.spaces.after = ''\n-      warn(\n-        `the >>> and \/deep\/ combinators have been deprecated. ` +\n-          `Use :deep() instead.`\n-      )\n+      \/\/ warn(\n+      \/\/   `the >>> and \/deep\/ combinators have been deprecated. ` +\n+      \/\/     `Use :deep() instead.`\n+      \/\/ )\n       return false\n     }\n \n@@ -126,12 +125,12 @@ function rewriteSelector(\n           }\n           selector.removeChild(n)\n         } else {\n-          \/\/ DEPRECATED usage\n+          \/\/ DEPRECATED usage in v3\n           \/\/ .foo ::v-deep .bar -> .foo[xxxxxxx] .bar\n-          warn(\n-            `::v-deep usage as a combinator has ` +\n-              `been deprecated. Use :deep(<inner-selector>) instead.`\n-          )\n+          \/\/ warn(\n+          \/\/   `::v-deep usage as a combinator has ` +\n+          \/\/     `been deprecated. Use :deep(<inner-selector>) instead.`\n+          \/\/ )\n           const prev = selector.at(selector.index(n) - 1)\n           if (prev && isSpaceCombinator(prev)) {\n             selector.removeChild(prev)\n\n\n###\n\n","completion":" fix(sfc): remove sfc scoped deep syntax deprecation warnings\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -29,7 +29,7 @@ Vue.js is an MIT-licensed open source project with its ongoing development made\n \n <p align=\"center\">\n   <a target=\"_blank\" href=\"https:\/\/vuejs.org\/sponsor\/\">\n-    <img alt=\"sponsors\" src=\"https:\/\/sponsors.vuejs.org\/sponsors.svg\">\n+    <img alt=\"sponsors\" src=\"https:\/\/sponsors.vuejs.org\/sponsors.svg?v2\">\n   <\/a>\n <\/p>\n \n\n\n###\n\n","completion":" chore: cache bust svg [ci skip]\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -17,6 +17,16 @@ You are looking at the repository for Vue 2. The repo for Vue 3 is [vuejs\/core](\n \n Vue.js is an MIT-licensed open source project with its ongoing development made possible entirely by the support of these awesome [backers](https:\/\/github.com\/vuejs\/core\/blob\/main\/BACKERS.md). If you'd like to join them, please consider [ sponsor Vue's development](https:\/\/vuejs.org\/sponsor\/).\n \n+<p align=\"center\">\n+  <h3 align=\"center\">Special Sponsor<\/h3>\n+<\/p>\n+\n+<p align=\"center\">\n+  <a target=\"_blank\" href=\"https:\/\/github.com\/appwrite\/appwrite\">\n+  <img alt=\"special sponsor appwrite\" src=\"https:\/\/sponsors.vuejs.org\/images\/appwrite.svg\" width=\"300\">\n+  <\/a>\n+<\/p>\n+\n <p align=\"center\">\n   <a target=\"_blank\" href=\"https:\/\/vuejs.org\/sponsor\/\">\n     <img alt=\"sponsors\" src=\"https:\/\/sponsors.vuejs.org\/sponsors.svg\">\n\n\n###\n\n","completion":" chore: special sponsor [ci skip]\n"}
{"prompt":" file path A: src\/core\/instance\/lifecycle.ts | file path B: src\/core\/instance\/lifecycle.ts\n\n@@ -83,8 +83,15 @@ export function lifecycleMixin(Vue: typeof Component) {\n       vm.$el.__vue__ = vm\n     }\n     \/\/ if parent is an HOC, update its $el as well\n-    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n-      vm.$parent.$el = vm.$el\n+    let wrapper: Component | undefined = vm\n+    while (\n+      wrapper &&\n+      wrapper.$vnode &&\n+      wrapper.$parent &&\n+      wrapper.$vnode === wrapper.$parent._vnode\n+    ) {\n+      wrapper.$parent.$el = wrapper.$el\n+      wrapper = wrapper.$parent\n     }\n     \/\/ updated hook is called by the scheduler to ensure that children are\n     \/\/ updated in a parent's updated hook.\n\n---\n file path A: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.ts | file path B: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.ts\n\n@@ -257,11 +257,15 @@ describe('vdom patch: edge cases', () => {\n \n     expect(vm.$refs.foo.$refs.bar.$el.tagName).toBe('DIV')\n     expect(vm.$refs.foo.$refs.bar.$el.className).toBe(`hello`)\n+    expect(vm.$el.tagName).toBe('DIV')\n+    expect(vm.$el.className).toBe(`hello`)\n \n     vm.$refs.foo.$refs.bar.ok = false\n     waitForUpdate(() => {\n       expect(vm.$refs.foo.$refs.bar.$el.tagName).toBe('SPAN')\n       expect(vm.$refs.foo.$refs.bar.$el.className).toBe(`hello`)\n+      expect(vm.$el.tagName).toBe('SPAN')\n+      expect(vm.$el.className).toBe(`hello`)\n     }).then(done)\n   })\n \n\n\n###\n\n","completion":" fix: fix parent of multi-nested HOC $el not updating (#<issue-num>)\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/parseComponent.ts | file path B: packages\/compiler-sfc\/src\/parseComponent.ts\n\n@@ -179,11 +179,11 @@ export function parseComponent(\n       let text = source.slice(currentBlock.start, currentBlock.end)\n       if (\n         options.deindent === true ||\n-        \/\/ by default, deindent unless it's script with default lang or ts\n+        \/\/ by default, deindent unless it's script with default lang or (j\/t)sx?\n         (options.deindent !== false &&\n           !(\n             currentBlock.type === 'script' &&\n-            (!currentBlock.lang || currentBlock.lang === 'ts')\n+            (!currentBlock.lang || \/^(j|t)sx?$\/.test(currentBlock.lang))\n           ))\n       ) {\n         text = deindent(text)\n\n\n###\n\n","completion":" fix(compiler-sfc): avoid deindent when lang is jsx\/tsx\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -95,8 +95,8 @@ export type ThisTypedComponentOptionsWithArrayProps<\n   Computed,\n   PropNames extends string,\n   SetupBindings,\n-  Mixin,\n-  Extends\n+  Mixin extends ComponentOptionsMixin,\n+  Extends extends ComponentOptionsMixin\n > = object &\n   ComponentOptions<\n     V,\n@@ -132,8 +132,8 @@ export type ThisTypedComponentOptionsWithRecordProps<\n   Computed,\n   Props,\n   SetupBindings,\n-  Mixin,\n-  Extends\n+  Mixin extends ComponentOptionsMixin,\n+  Extends extends ComponentOptionsMixin\n > = object &\n   ComponentOptions<\n     V,\n\n\n###\n\n","completion":" fix(types): Add missing type parameter constraints (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/v3\/define-component-test.tsx | file path B: types\/test\/v3\/define-component-test.tsx\n\n@@ -1166,6 +1166,62 @@ defineComponent({\n   }\n })\n \n-\/\/ #12742 allow attaching custom properties (consistent with v3)\n-const Foo = defineComponent({})\n-Foo.foobar = 123\n+describe('constructor attach custom properties', () => {\n+  \/\/ #12742 allow attaching custom properties (consistent with v3)\n+  const Foo = defineComponent({})\n+  Foo.foobar = 123\n+})\n+\n+describe('constructor instance type', () => {\n+  const Comp = defineComponent({\n+    data() {\n+      return {\n+        a: 1\n+      }\n+    },\n+\n+    computed: {\n+      ac() {\n+        return 1\n+      }\n+    },\n+\n+    methods: {\n+      callA(b: number) {\n+        return b\n+      }\n+    },\n+\n+    setup() {\n+      return {\n+        sa: '1'\n+      }\n+    }\n+  })\n+\n+  const comp = new Comp()\n+\n+  expectType<number>(comp.a)\n+  expectType<number>(comp.ac)\n+  expectType<string>(comp.sa)\n+  expectType<(b: number) => number>(comp.callA)\n+})\n+\n+describe('should report non-existent properties in instance', () => {\n+  const Foo = defineComponent({})\n+  const instance = new Foo()\n+  \/\/ @ts-expect-error\n+  instance.foo\n+\n+  const Foo2 = defineComponent({\n+    data() {\n+      return {}\n+    },\n+    methods: {\n+      example() {}\n+    }\n+  })\n+  const instance2 = new Foo2()\n+  \/\/ @ts-expect-error\n+  instance2.foo\n+})\n\n---\n file path A: types\/v3-define-component.d.ts | file path B: types\/v3-define-component.d.ts\n\n@@ -72,7 +72,7 @@ export type DefineComponent<\n  *\/\n export function defineComponent<\n   RawBindings,\n-  D = Data,\n+  D = {},\n   C extends ComputedOptions = {},\n   M extends MethodOptions = {},\n   Mixin extends ComponentOptionsMixin = ComponentOptionsMixin,\n@@ -101,8 +101,8 @@ export function defineComponent<\n  *\/\n export function defineComponent<\n   PropNames extends string,\n-  RawBindings = Data,\n-  D = Data,\n+  RawBindings = {},\n+  D = {},\n   C extends ComputedOptions = {},\n   M extends MethodOptions = {},\n   Mixin extends ComponentOptionsMixin = ComponentOptionsMixin,\n@@ -140,8 +140,8 @@ export function defineComponent<\n  *\/\n export function defineComponent<\n   Props,\n-  RawBindings = Data,\n-  D = Data,\n+  RawBindings = {},\n+  D = {},\n   C extends ComputedOptions = {},\n   M extends MethodOptions = {},\n   Mixin extends ComponentOptionsMixin = ComponentOptionsMixin,\n\n\n###\n\n","completion":" fix(types): fix missing error for accessing undefined instance properties\n"}
{"prompt":" file path A: src\/core\/instance\/init.ts | file path B: src\/core\/instance\/init.ts\n\n@@ -34,6 +34,7 @@ export function initMixin(Vue: typeof Component) {\n     vm.__v_skip = true\n     \/\/ effect scope\n     vm._scope = new EffectScope(true \/* detached *\/)\n+    vm._scope._vm = true\n     \/\/ merge options\n     if (options && options._isComponent) {\n       \/\/ optimize internal component instantiation\n\n---\n file path A: src\/core\/instance\/lifecycle.ts | file path B: src\/core\/instance\/lifecycle.ts\n\n@@ -209,7 +209,6 @@ export function mountComponent(\n   \/\/ we set this to vm._watcher inside the watcher's constructor\n   \/\/ since the watcher's initial patch may call $forceUpdate (e.g. inside child\n   \/\/ component's mounted hook), which relies on vm._watcher being already defined\n-  vm._scope.on()\n   new Watcher(\n     vm,\n     updateComponent,\n@@ -217,7 +216,6 @@ export function mountComponent(\n     watcherOptions,\n     true \/* isRenderWatcher *\/\n   )\n-  vm._scope.off()\n   hydrating = false\n \n   \/\/ flush buffer for flush: \"pre\" watchers queued in setup()\n\n---\n file path A: src\/core\/observer\/watcher.ts | file path B: src\/core\/observer\/watcher.ts\n\n@@ -71,7 +71,16 @@ export default class Watcher implements DepTarget {\n     options?: WatcherOptions | null,\n     isRenderWatcher?: boolean\n   ) {\n-    recordEffectScope(this, activeEffectScope || (vm ? vm._scope : undefined))\n+    recordEffectScope(\n+      this,\n+      \/\/ if the active effect scope is manually created (not a component scope),\n+      \/\/ prioritize it\n+      activeEffectScope && !activeEffectScope._vm\n+        ? activeEffectScope\n+        : vm\n+        ? vm._scope\n+        : undefined\n+    )\n     if ((this.vm = vm) && isRenderWatcher) {\n       vm._watcher = this\n     }\n\n---\n file path A: src\/v3\/reactivity\/effectScope.ts | file path B: src\/v3\/reactivity\/effectScope.ts\n\n@@ -27,10 +27,14 @@ export class EffectScope {\n    * @internal\n    *\/\n   scopes: EffectScope[] | undefined\n+  \/**\n+   * indicates this being a component root scope\n+   * @internal\n+   *\/\n+  _vm?: boolean\n   \/**\n    * track a child scope's index in its parent's scopes array for optimized\n    * removal\n-   * @internal\n    *\/\n   private index: number | undefined\n \n\n\n###\n\n","completion":" fix: fix effect scope tracking for manually created instances\n"}
{"prompt":" file path A: packages\/server-renderer\/src\/render.ts | file path B: packages\/server-renderer\/src\/render.ts\n\n@@ -206,6 +206,11 @@ function renderComponentInner(node, isRoot, context) {\n       type: 'Component',\n       prevActive\n     })\n+    if (isDef(node.data) && isDef(node.data.directives)) {\n+      childNode.data = childNode.data || {}\n+      childNode.data.directives = node.data.directives\n+      childNode.isComponentRootElement = true\n+    }\n     renderNode(childNode, isRoot, context)\n   }\n \n@@ -372,7 +377,10 @@ function renderStartingTag(node: VNode, context) {\n           if (dirRenderer) {\n             \/\/ directives mutate the node's data\n             \/\/ which then gets rendered by modules\n-            dirRenderer(node, dirs[i])\n+            dirRenderer(\n+              node.isComponentRootElement ? node.parent : node,\n+              dirs[i]\n+            )\n           }\n         }\n       }\n\n---\n file path A: packages\/server-renderer\/test\/ssr-string.spec.ts | file path B: packages\/server-renderer\/test\/ssr-string.spec.ts\n\n@@ -1086,7 +1086,7 @@ describe('SSR: renderToString', () => {\n     )\n   })\n \n-  it('custom directives', done => {\n+  it('custom directives on raw element', done => {\n     const renderer = createRenderer({\n       directives: {\n         'class-prefixer': (node, dir) => {\n@@ -1129,6 +1129,98 @@ describe('SSR: renderToString', () => {\n     )\n   })\n \n+  it('custom directives on component', done => {\n+    const Test = {\n+      template: '<span>hello world<\/span>'\n+    }\n+    const renderer = createRenderer({\n+      directives: {\n+        'class-prefixer': (node, dir) => {\n+          if (node.data.class) {\n+            node.data.class = `${dir.value}-${node.data.class}`\n+          }\n+          if (node.data.staticClass) {\n+            node.data.staticClass = `${dir.value}-${node.data.staticClass}`\n+          }\n+        }\n+      }\n+    })\n+    renderer.renderToString(\n+      new Vue({\n+        template:\n+          '<p><Test v-class-prefixer=\"\\'my\\'\" class=\"class1\" :class=\"\\'class2\\'\" \/><\/p>',\n+        components: { Test }\n+      }),\n+      (err, result) => {\n+        expect(err).toBeNull()\n+        expect(result).toContain(\n+          '<p data-server-rendered=\"true\"><span class=\"my-class1 my-class2\">hello world<\/span><\/p>'\n+        )\n+        done()\n+      }\n+    )\n+  })\n+\n+  it('custom directives on element root of a component', done => {\n+    const Test = {\n+      template:\n+        '<span v-class-prefixer=\"\\'my\\'\" class=\"class1\" :class=\"\\'class2\\'\">hello world<\/span>'\n+    }\n+    const renderer = createRenderer({\n+      directives: {\n+        'class-prefixer': (node, dir) => {\n+          if (node.data.class) {\n+            node.data.class = `${dir.value}-${node.data.class}`\n+          }\n+          if (node.data.staticClass) {\n+            node.data.staticClass = `${dir.value}-${node.data.staticClass}`\n+          }\n+        }\n+      }\n+    })\n+    renderer.renderToString(\n+      new Vue({\n+        template: '<p><Test \/><\/p>',\n+        components: { Test }\n+      }),\n+      (err, result) => {\n+        expect(err).toBeNull()\n+        expect(result).toContain(\n+          '<p data-server-rendered=\"true\"><span class=\"my-class1 my-class2\">hello world<\/span><\/p>'\n+        )\n+        done()\n+      }\n+    )\n+  })\n+\n+  it('custom directives on element with parent element', done => {\n+    const renderer = createRenderer({\n+      directives: {\n+        'class-prefixer': (node, dir) => {\n+          if (node.data.class) {\n+            node.data.class = `${dir.value}-${node.data.class}`\n+          }\n+          if (node.data.staticClass) {\n+            node.data.staticClass = `${dir.value}-${node.data.staticClass}`\n+          }\n+        }\n+      }\n+    })\n+    renderer.renderToString(\n+      new Vue({\n+        template:\n+          '<p><span v-class-prefixer=\"\\'my\\'\" class=\"class1\" :class=\"\\'class2\\'\">hello world<\/span><\/p>'\n+      }),\n+      (err, result) => {\n+        expect(err).toBeNull()\n+        expect(result).toContain(\n+          '<p data-server-rendered=\"true\"><span class=\"my-class1 my-class2\">hello world<\/span><\/p>'\n+        )\n+        done()\n+      }\n+    )\n+  })\n+\n   it('should not warn for custom directives that do not have server-side implementation', done => {\n     renderToString(\n       new Vue({\n\n---\n file path A: src\/core\/vdom\/vnode.ts | file path B: src\/core\/vdom\/vnode.ts\n\n@@ -33,6 +33,7 @@ export default class VNode {\n   fnOptions?: ComponentOptions | null \/\/ for SSR caching\n   devtoolsMeta?: Object | null \/\/ used to store functional render context for devtools\n   fnScopeId?: string | null \/\/ functional scope id support\n+  isComponentRootElement?: boolean | null \/\/ for SSR directives\n \n   constructor(\n     tag?: string,\n\n\n###\n\n","completion":" fix(ssr): fix on-component directives rendering (#<issue-num>)\n"}
{"prompt":" file path A: src\/v3\/apiLifecycle.ts | file path B: src\/v3\/apiLifecycle.ts\n\n@@ -42,7 +42,6 @@ export const onBeforeUpdate = createLifeCycle('beforeUpdate')\n export const onUpdated = createLifeCycle('updated')\n export const onBeforeUnmount = createLifeCycle('beforeDestroy')\n export const onUnmounted = createLifeCycle('destroyed')\n-export const onErrorCaptured = createLifeCycle('errorCaptured')\n export const onActivated = createLifeCycle('activated')\n export const onDeactivated = createLifeCycle('deactivated')\n export const onServerPrefetch = createLifeCycle('serverPrefetch')\n@@ -51,3 +50,19 @@ export const onRenderTracked =\n   createLifeCycle<(e: DebuggerEvent) => any>('renderTracked')\n export const onRenderTriggered =\n   createLifeCycle<(e: DebuggerEvent) => any>('renderTriggered')\n+\n+export type ErrorCapturedHook<TError = unknown> = (\n+  err: TError,\n+  instance: any,\n+  info: string\n+) => boolean | void\n+\n+const injectErrorCapturedHook =\n+  createLifeCycle<ErrorCapturedHook<any>>('errorCaptured')\n+\n+export function onErrorCaptured<TError = Error>(\n+  hook: ErrorCapturedHook<TError>,\n+  target: any = currentInstance\n+) {\n+  injectErrorCapturedHook(hook, target)\n+}\n\n\n###\n\n","completion":" feat(types): enhance type for onErrorCaptured (#<issue-num>)\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -73,7 +73,7 @@ Vue.js supports all browsers that are [ES5-compliant](https:\/\/kangax.github.io\/c\n \n ## Documentation\n \n-To check out [live examples](https:\/\/vuejs.org\/v2\/examples\/) and docs, visit [vuejs.org](https:\/\/vuejs.org).\n+To check out [live examples](https:\/\/v2.vuejs.org\/v2\/examples\/) and docs, visit [vuejs.org](https:\/\/v2.vuejs.org).\n \n ## Questions\n \n\n---\n file path A: src\/core\/instance\/proxy.ts | file path B: src\/core\/instance\/proxy.ts\n\n@@ -19,7 +19,7 @@ if (__DEV__) {\n         'referenced during render. Make sure that this property is reactive, ' +\n         'either in the data option, or for class-based components, by ' +\n         'initializing the property. ' +\n-        'See: https:\/\/vuejs.org\/v2\/guide\/reactivity.html#Declaring-Reactive-Properties.',\n+        'See: https:\/\/v2.vuejs.org\/v2\/guide\/reactivity.html#Declaring-Reactive-Properties.',\n       target\n     )\n   }\n@@ -29,7 +29,7 @@ if (__DEV__) {\n       `Property \"${key}\" must be accessed with \"$data.${key}\" because ` +\n         'properties starting with \"$\" or \"_\" are not proxied in the Vue instance to ' +\n         'prevent conflicts with Vue internals. ' +\n-        'See: https:\/\/vuejs.org\/v2\/api\/#data',\n+        'See: https:\/\/v2.vuejs.org\/v2\/api\/#data',\n       target\n     )\n   }\n\n---\n file path A: src\/core\/instance\/state.ts | file path B: src\/core\/instance\/state.ts\n\n@@ -127,7 +127,7 @@ function initData(vm: Component) {\n     __DEV__ &&\n       warn(\n         'data functions should return an object:\\n' +\n-          'https:\/\/vuejs.org\/v2\/guide\/components.html#data-Must-Be-a-Function',\n+          'https:\/\/v2.vuejs.org\/v2\/guide\/components.html#data-Must-Be-a-Function',\n         vm\n       )\n   }\n\n\n###\n\n","completion":" chore: fix some legacy doc urls in warnings and readme (#<issue-num>) [ci skip]\n"}
{"prompt":" file path A: src\/core\/vdom\/modules\/directives.ts | file path B: src\/core\/vdom\/modules\/directives.ts\n\n@@ -103,7 +103,15 @@ function normalizeDirectives(\n     }\n     res[getRawDirName(dir)] = dir\n     if (vm._setupState && vm._setupState.__sfc) {\n-      dir.def = dir.def || resolveAsset(vm, '_setupState', 'v-' + dir.name)\n+      const setupDef = dir.def || resolveAsset(vm, '_setupState', 'v-' + dir.name)\n+      if (typeof setupDef === 'function') {\n+        dir.def = {\n+          bind: setupDef,\n+          update: setupDef,\n+        }\n+      } else {\n+        dir.def = setupDef\n+      }\n     }\n     dir.def = dir.def || resolveAsset(vm.$options, 'directives', dir.name, true)\n   }\n\n---\n file path A: test\/unit\/features\/v3\/apiSetup.spec.ts | file path B: test\/unit\/features\/v3\/apiSetup.spec.ts\n\n@@ -251,6 +251,19 @@ describe('api: setup context', () => {\n     expect(spy).toHaveBeenCalled()\n   })\n \n+  \/\/ #12743\n+  it('directive resolution for shorthand', () => {\n+    const spy = vi.fn()\n+    new Vue({\n+      setup: () => ({\n+        __sfc: true,\n+        vDir: spy\n+      }),\n+      template: `<div v-dir \/>`\n+    }).$mount()\n+    expect(spy).toHaveBeenCalled()\n+  })\n+  \n   \/\/ #12561\n   it('setup props should be reactive', () => {\n     const msg = ref('hi')\n\n\n###\n\n","completion":" fix: directives shorthand normalize error (#<issue-num>)\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/rewriteDefault.ts | file path B: packages\/compiler-sfc\/src\/rewriteDefault.ts\n\n@@ -42,7 +42,12 @@ export function rewriteDefault(\n   }).program.body\n   ast.forEach(node => {\n     if (node.type === 'ExportDefaultDeclaration') {\n-      s.overwrite(node.start!, node.declaration.start!, `const ${as} = `)\n+      if (node.declaration.type === 'ClassDeclaration') {\n+        s.overwrite(node.start!, node.declaration.id.start!, `class `)\n+        s.append(`\\nconst ${as} = ${node.declaration.id.name}`)\n+      } else {\n+        s.overwrite(node.start!, node.declaration.start!, `const ${as} = `)\n+      }\n     }\n     if (node.type === 'ExportNamedDeclaration') {\n       for (const specifier of node.specifiers) {\n\n---\n file path A: None | file path B: packages\/compiler-sfc\/test\/rewriteDefault.spec.ts\n\n@@ -0,0 +1,245 @@\n+import { rewriteDefault } from '..\/src'\n+\n+describe('compiler sfc: rewriteDefault', () => {\n+  test('without export default', () => {\n+    expect(rewriteDefault(`export  a = {}`, 'script')).toMatchInlineSnapshot(`\n+      \"export  a = {}\n+      const script = {}\"\n+    `)\n+  })\n+\n+  test('rewrite export default', () => {\n+    expect(\n+      rewriteDefault(`export  default {}`, 'script')\n+    ).toMatchInlineSnapshot(`\"const script = {}\"`)\n+  })\n+\n+  test('rewrite export named default', () => {\n+    expect(\n+      rewriteDefault(\n+        `const a = 1 \\n export { a as b, a as default, a as c}`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+      \"const a = 1 \n+       export { a as b,  a as c}\n+      const script = a\"\n+    `)\n+\n+    expect(\n+      rewriteDefault(\n+        `const a = 1 \\n export { a as b, a as default    , a as c}`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+      \"const a = 1 \n+       export { a as b,  a as c}\n+      const script = a\"\n+    `)\n+  })\n+\n+  test('w\/ comments', async () => {\n+    expect(rewriteDefault(`\/\/ export default\\nexport default {}`, 'script'))\n+      .toMatchInlineSnapshot(`\n+      \"\/\/ export default\n+      const script = {}\"\n+    `)\n+  })\n+\n+  test('export named default multiline', () => {\n+    expect(\n+      rewriteDefault(`let App = {}\\n export {\\nApp as default\\n}`, '_sfc_main')\n+    ).toMatchInlineSnapshot(`\n+      \"let App = {}\n+       export {\n+      \n+      }\n+      const _sfc_main = App\"\n+    `)\n+  })\n+\n+  test('export named default multiline \/w comments', () => {\n+    expect(\n+      rewriteDefault(\n+        `const a = 1 \\n export {\\n a as b,\\n a as default,\\n a as c}\\n` +\n+          `\/\/ export { myFunction as default }`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+      \"const a = 1 \n+       export {\n+       a as b,\n+       \n+       a as c}\n+      \/\/ export { myFunction as default }\n+      const script = a\"\n+    `)\n+\n+    expect(\n+      rewriteDefault(\n+        `const a = 1 \\n export {\\n a as b,\\n a as default      ,\\n a as c}\\n` +\n+          `\/\/ export { myFunction as default }`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+      \"const a = 1 \n+       export {\n+       a as b,\n+       \n+       a as c}\n+      \/\/ export { myFunction as default }\n+      const script = a\"\n+    `)\n+  })\n+\n+  test(`export { default } from '...'`, async () => {\n+    expect(\n+      rewriteDefault(`export { default, foo } from '.\/index.js'`, 'script')\n+    ).toMatchInlineSnapshot(`\n+    \"import { default as __VUE_DEFAULT__ } from '.\/index.js'\n+    export {  foo } from '.\/index.js'\n+    const script = __VUE_DEFAULT__\"\n+    `)\n+\n+    expect(\n+      rewriteDefault(`export { default    , foo } from '.\/index.js'`, 'script')\n+    ).toMatchInlineSnapshot(`\n+    \"import { default as __VUE_DEFAULT__ } from '.\/index.js'\n+    export {  foo } from '.\/index.js'\n+    const script = __VUE_DEFAULT__\"\n+    `)\n+\n+    expect(\n+      rewriteDefault(`export { foo,   default } from '.\/index.js'`, 'script')\n+    ).toMatchInlineSnapshot(`\n+    \"import { default as __VUE_DEFAULT__ } from '.\/index.js'\n+    export { foo,    } from '.\/index.js'\n+    const script = __VUE_DEFAULT__\"\n+    `)\n+\n+    expect(\n+      rewriteDefault(\n+        `export { foo as default, bar } from '.\/index.js'`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+    \"import { foo } from '.\/index.js'\n+    export {  bar } from '.\/index.js'\n+    const script = foo\"\n+    `)\n+\n+    expect(\n+      rewriteDefault(\n+        `export { foo as default     , bar } from '.\/index.js'`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+    \"import { foo } from '.\/index.js'\n+    export {  bar } from '.\/index.js'\n+    const script = foo\"\n+    `)\n+\n+    expect(\n+      rewriteDefault(\n+        `export { bar,   foo as default } from '.\/index.js'`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+    \"import { foo } from '.\/index.js'\n+    export { bar,    } from '.\/index.js'\n+    const script = foo\"\n+    `)\n+  })\n+\n+  test('export default class', async () => {\n+    expect(rewriteDefault(`export default class Foo {}`, 'script'))\n+      .toMatchInlineSnapshot(`\n+      \"class Foo {}\n+      const script = Foo\"\n+    `)\n+  })\n+\n+  test('export default class w\/ comments', async () => {\n+    expect(\n+      rewriteDefault(`\/\/ export default\\nexport default class Foo {}`, 'script')\n+    ).toMatchInlineSnapshot(`\n+      \"\/\/ export default\n+      class Foo {}\n+      const script = Foo\"\n+    `)\n+  })\n+\n+  test('export default class w\/ comments 2', async () => {\n+    expect(\n+      rewriteDefault(\n+        `export default {}\\n` + `\/\/ export default class Foo {}`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+      \"const script = {}\n+      \/\/ export default class Foo {}\"\n+    `)\n+  })\n+\n+  test('export default class w\/ comments 3', async () => {\n+    expect(\n+      rewriteDefault(\n+        `\/*\\nexport default class Foo {}*\/\\n` + `export default class Bar {}`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+      \"\/*\n+      export default class Foo {}*\/\n+      class Bar {}\n+      const script = Bar\"\n+    `)\n+  })\n+\n+  test('@Component\\nexport default class', async () => {\n+    expect(rewriteDefault(`@Component\\nexport default class Foo {}`, 'script'))\n+      .toMatchInlineSnapshot(`\n+      \"@Component\n+      class Foo {}\n+      const script = Foo\"\n+    `)\n+  })\n+\n+  test('@Component\\nexport default class w\/ comments', async () => {\n+    expect(\n+      rewriteDefault(`\/\/ export default\\n@Component\\nexport default class Foo {}`, 'script')\n+    ).toMatchInlineSnapshot(`\n+      \"\/\/ export default\n+      @Component\n+      class Foo {}\n+      const script = Foo\"\n+    `)\n+  })\n+\n+  test('@Component\\nexport default class w\/ comments 2', async () => {\n+    expect(\n+      rewriteDefault(\n+        `export default {}\\n` + `\/\/ @Component\\n\/\/ export default class Foo {}`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+      \"const script = {}\n+      \/\/ @Component\n+      \/\/ export default class Foo {}\"\n+    `)\n+  })\n+\n+  test('@Component\\nexport default class w\/ comments 3', async () => {\n+    expect(\n+      rewriteDefault(\n+        `\/*\\n@Component\\nexport default class Foo {}*\/\\n` + `export default class Bar {}`,\n+        'script'\n+      )\n+    ).toMatchInlineSnapshot(`\n+      \"\/*\n+      @Component\n+      export default class Foo {}*\/\n+      class Bar {}\n+      const script = Bar\"\n+    `)\n+  })\n+})\n\n\n###\n\n","completion":" fix(compiler-sfc): rewriteDefault for class with decorators (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/v3\/define-component-test.tsx | file path B: types\/test\/v3\/define-component-test.tsx\n\n@@ -1165,3 +1165,7 @@ defineComponent({\n     return h('div', {}, [...this.$slots.default!])\n   }\n })\n+\n+\/\/ #12742 allow attaching custom properties (consistent with v3)\n+const Foo = defineComponent({})\n+Foo.foobar = 123\n\n---\n file path A: types\/v3-component-options.d.ts | file path B: types\/v3-component-options.d.ts\n\n@@ -88,6 +88,9 @@ export interface ComponentOptionsBase<\n       'data' | 'computed' | 'methods' | 'setup' | 'props' | 'mixins' | 'extends'\n     >,\n     ComponentCustomOptions {\n+  \/\/ allow any options\n+  [key: string]: any\n+\n   \/\/ rewrite options api types\n   data?: (\n     this: CreateComponentPublicInstance<Props, {}, {}, {}, M, Mixin, Extends>,\n\n\n###\n\n","completion":" fix(types): allow attaching unknown options to defined component\n"}
{"prompt":" file path A: types\/index.d.ts | file path B: types\/index.d.ts\n\n@@ -41,7 +41,7 @@ export * from '.\/v3-setup-helpers'\n \n export { Data } from '.\/common'\n export { SetupContext } from '.\/v3-setup-context'\n-export { defineComponent } from '.\/v3-define-component'\n+export { defineComponent, DefineComponent } from '.\/v3-define-component'\n export { defineAsyncComponent } from '.\/v3-define-async-component'\n export {\n   SetupFunction,\n\n---\n file path A: types\/v3-define-component.d.ts | file path B: types\/v3-define-component.d.ts\n\n@@ -20,7 +20,7 @@ import { Data, HasDefined } from '.\/common'\n import { EmitsOptions } from '.\/v3-setup-context'\n import { CreateElement, RenderContext } from '.\/umd'\n \n-type DefineComponent<\n+export type DefineComponent<\n   PropsOrPropOptions = {},\n   RawBindings = {},\n   D = {},\n\n\n###\n\n","completion":" feat(types): export DefineComponent\n"}
{"prompt":" file path A: src\/v3\/apiWatch.ts | file path B: src\/v3\/apiWatch.ts\n\n@@ -274,10 +274,7 @@ function doWatch(\n   let oldValue = isMultiSource ? [] : INITIAL_WATCHER_VALUE\n   \/\/ overwrite default run\n   watcher.run = () => {\n-    if (\n-      !watcher.active &&\n-      !(flush === 'pre' && instance && instance._isBeingDestroyed)\n-    ) {\n+    if (!watcher.active) {\n       return\n     }\n     if (cb) {\n\n---\n file path A: test\/unit\/features\/v3\/apiWatch.spec.ts | file path B: test\/unit\/features\/v3\/apiWatch.spec.ts\n\n@@ -542,7 +542,7 @@ describe('api: watch', () => {\n     expect(cb).not.toHaveBeenCalled()\n   })\n \n-  it('should fire on component unmount w\/ flush: pre', async () => {\n+  it('should not fire on component unmount w\/ flush: pre', async () => {\n     const toggle = ref(true)\n     const cb = vi.fn()\n     const Comp = {\n@@ -560,7 +560,7 @@ describe('api: watch', () => {\n     expect(cb).not.toHaveBeenCalled()\n     toggle.value = false\n     await nextTick()\n-    expect(cb).toHaveBeenCalledTimes(1)\n+    expect(cb).not.toHaveBeenCalled()\n   })\n \n   \/\/ vuejs\/core#1763\n\n\n###\n\n","completion":" fix(watch): avoid pre watcher firing on unmount\n"}
{"prompt":" file path A: src\/core\/instance\/lifecycle.ts | file path B: src\/core\/instance\/lifecycle.ts\n\n@@ -209,6 +209,7 @@ export function mountComponent(\n   \/\/ we set this to vm._watcher inside the watcher's constructor\n   \/\/ since the watcher's initial patch may call $forceUpdate (e.g. inside child\n   \/\/ component's mounted hook), which relies on vm._watcher being already defined\n+  vm._scope.on()\n   new Watcher(\n     vm,\n     updateComponent,\n@@ -216,6 +217,7 @@ export function mountComponent(\n     watcherOptions,\n     true \/* isRenderWatcher *\/\n   )\n+  vm._scope.off()\n   hydrating = false\n \n   \/\/ flush buffer for flush: \"pre\" watchers queued in setup()\n\n---\n file path A: src\/core\/observer\/watcher.ts | file path B: src\/core\/observer\/watcher.ts\n\n@@ -72,10 +72,8 @@ export default class Watcher implements DepTarget {\n     isRenderWatcher?: boolean\n   ) {\n     recordEffectScope(this, activeEffectScope || (vm ? vm._scope : undefined))\n-    if ((this.vm = vm)) {\n-      if (isRenderWatcher) {\n-        vm._watcher = this\n-      }\n+    if ((this.vm = vm) && isRenderWatcher) {\n+      vm._watcher = this\n     }\n     \/\/ options\n     if (options) {\n\n\n###\n\n","completion":" fix: ensure render watcher of manually created instance is correctly tracked in owner scope\n"}
{"prompt":" file path A: types\/v3-define-component.d.ts | file path B: types\/v3-define-component.d.ts\n\n@@ -67,30 +67,6 @@ type DefineComponent<\n     props: PropsOrPropOptions\n   }\n \n-\/**\n- * overload 0.0: functional component with array props\n- *\/\n-export function defineComponent<\n-  PropNames extends string,\n-  Props = Readonly<{ [key in PropNames]?: any }>\n->(options: {\n-  functional: true\n-  props?: PropNames[]\n-  render?: (h: CreateElement, context: RenderContext<Props>) => any\n-}): DefineComponent<Props>\n-\n-\/**\n- * overload 0.1: functional component with object props\n- *\/\n-export function defineComponent<\n-  PropsOptions extends ComponentPropsOptions = ComponentPropsOptions,\n-  Props = ExtractPropTypes<PropsOptions>\n->(options: {\n-  functional: true\n-  props?: PropsOptions\n-  render?: (h: CreateElement, context: RenderContext<Props>) => any\n-}): DefineComponent<PropsOptions>\n-\n \/**\n  * overload 1: object format with no props\n  *\/\n@@ -104,7 +80,7 @@ export function defineComponent<\n   Emits extends EmitsOptions = {},\n   EmitsNames extends string = string\n >(\n-  options: ComponentOptionsWithoutProps<\n+  options: { functional?: never } & ComponentOptionsWithoutProps<\n     {},\n     RawBindings,\n     D,\n@@ -135,7 +111,7 @@ export function defineComponent<\n   EmitsNames extends string = string,\n   PropsOptions extends ComponentPropsOptions = ComponentPropsOptions\n >(\n-  options: ComponentOptionsWithArrayProps<\n+  options: { functional?: never } & ComponentOptionsWithArrayProps<\n     PropNames,\n     RawBindings,\n     D,\n@@ -175,7 +151,7 @@ export function defineComponent<\n   PropsOptions extends ComponentPropsOptions = ComponentPropsOptions\n >(\n   options: HasDefined<Props> extends true\n-    ? ComponentOptionsWithProps<\n+    ? { functional?: never } & ComponentOptionsWithProps<\n         PropsOptions,\n         RawBindings,\n         D,\n@@ -187,7 +163,7 @@ export function defineComponent<\n         EmitsNames,\n         Props\n       >\n-    : ComponentOptionsWithProps<\n+    : { functional?: never } & ComponentOptionsWithProps<\n         PropsOptions,\n         RawBindings,\n         D,\n@@ -199,3 +175,27 @@ export function defineComponent<\n         EmitsNames\n       >\n ): DefineComponent<PropsOptions, RawBindings, D, C, M, Mixin, Extends, Emits>\n+\n+\/**\n+ * overload 4.1: functional component with array props\n+ *\/\n+export function defineComponent<\n+  PropNames extends string,\n+  Props = Readonly<{ [key in PropNames]?: any }>\n+>(options: {\n+  functional: true\n+  props?: PropNames[]\n+  render?: (h: CreateElement, context: RenderContext<Props>) => any\n+}): DefineComponent<Props>\n+\n+\/**\n+ * overload 4.2: functional component with object props\n+ *\/\n+export function defineComponent<\n+  PropsOptions extends ComponentPropsOptions = ComponentPropsOptions,\n+  Props = ExtractPropTypes<PropsOptions>\n+>(options: {\n+  functional: true\n+  props?: PropsOptions\n+  render?: (h: CreateElement, context: RenderContext<Props>) => any\n+}): DefineComponent<PropsOptions>\n\n\n###\n\n","completion":" fix(types): fix options suggestions when using defineComponent\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/templateCompilerModules\/utils.ts | file path B: packages\/compiler-sfc\/src\/templateCompilerModules\/utils.ts\n\n@@ -24,10 +24,15 @@ export function urlToRequire(\n     \/\/ does not apply to absolute urls or urls that start with `@`\n     \/\/ since they are aliases\n     if (firstChar === '.' || firstChar === '~') {\n+      \/\/ Allow for full hostnames provided in options.base\n+      const base = parseUriParts(transformAssetUrlsOption.base)\n+      const protocol = base.protocol || ''\n+      const host = base.host ? protocol + '\/\/' + base.host : ''\n+      const basePath = base.path || '\/'\n       \/\/ when packaged in the browser, path will be using the posix-\n       \/\/ only version provided by rollup-plugin-node-builtins.\n-      return `\"${(path.posix || path).join(\n-        transformAssetUrlsOption.base,\n+      return `\"${host}${(path.posix || path).join(\n+        basePath,\n         uriParts.path + (uriParts.hash || '')\n       )}\"`\n     }\n@@ -64,7 +69,7 @@ function parseUriParts(urlString: string): UrlWithStringQuery {\n     \/\/ @see https:\/\/nodejs.org\/api\/url.html#url_url_parse_urlstring_parsequerystring_slashesdenotehost\n     if ('string' === typeof urlString) {\n       \/\/ check is an uri\n-      return uriParse(urlString) \/\/ take apart the uri\n+      return uriParse(urlString, false, true) \/\/ take apart the uri\n     }\n   }\n   return returnValue\n\n\n###\n\n","completion":" fix(compiler-sfc): allow full hostnames in asset url base (#<issue-num>)\n"}
{"prompt":" file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -100,7 +100,7 @@ export type CombinedVueInstance<\n   Methods,\n   Computed,\n   Props,\n-  SetupBindings\n+  SetupBindings = {}\n > = Data &\n   Methods &\n   Computed &\n@@ -114,7 +114,7 @@ export type ExtendedVue<\n   Methods,\n   Computed,\n   Props,\n-  SetupBindings\n+  SetupBindings = {}\n > = VueConstructor<\n   CombinedVueInstance<Instance, Data, Methods, Computed, Props, SetupBindings> &\n     Vue\n\n\n###\n\n","completion":" fix(types): Make SetupBindings optional on ExtendedVue and CombinedVueInstance (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/index.ts | file path B: src\/core\/observer\/index.ts\n\n@@ -191,7 +191,7 @@ export function defineReactive(\n       } else if (getter) {\n         \/\/ #7981: for accessor properties without setter\n         return\n-      } else if (isRef(value) && !isRef(newVal)) {\n+      } else if (!shallow && isRef(value) && !isRef(newVal)) {\n         value.value = newVal\n         return\n       } else {\n\n---\n file path A: test\/unit\/features\/v3\/reactivity\/readonly.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/readonly.spec.ts\n\n@@ -483,7 +483,6 @@ describe('reactivity\/readonly', () => {\n     const ror = readonly(r)\n     const obj = reactive({ ror })\n     obj.ror = true\n-\n     expect(obj.ror).toBe(false)\n     expect(`Set operation on key \"value\" failed`).toHaveBeenWarned()\n   })\n@@ -492,14 +491,20 @@ describe('reactivity\/readonly', () => {\n     const r = ref(false)\n     const ror = readonly(r)\n     const obj = reactive({ ror })\n-    try {\n-      obj.ror = ref(true) as unknown as boolean\n-    } catch (e) {}\n-\n+    obj.ror = ref(true) as unknown as boolean\n     expect(obj.ror).toBe(true)\n     expect(toRaw(obj).ror).not.toBe(ror) \/\/ ref successfully replaced\n   })\n \n+  test('setting readonly object to writable nested ref', () => {\n+    const r = ref<any>()\n+    const obj = reactive({ r })\n+    const ro = readonly({})\n+    obj.r = ro\n+    expect(obj.r).toBe(ro)\n+    expect(r.value).toBe(ro)\n+  })\n+\n   test('compatiblity with classes', () => {\n     const spy = vi.fn()\n     class Foo {\n\n---\n file path A: test\/unit\/features\/v3\/reactivity\/ref.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/ref.spec.ts\n\n@@ -11,7 +11,8 @@ import {\n   isReactive,\n   isShallow,\n   reactive,\n-  computed\n+  computed,\n+  readonly\n } from 'v3'\n import { effect } from 'v3\/reactivity\/effect'\n \n@@ -404,4 +405,17 @@ describe('reactivity\/ref', () => {\n     b.value = obj\n     expect(spy2).toBeCalledTimes(1)\n   })\n+\n+  test('ref should preserve value readonly-ness', () => {\n+    const original = {}\n+    const r = reactive(original)\n+    const rr = readonly(original)\n+    const a = ref(original)\n+\n+    expect(a.value).toBe(r)\n+\n+    a.value = rr\n+    expect(a.value).toBe(rr)\n+    expect(a.value).not.toBe(r)\n+  })\n })\n\n---\n file path A: test\/unit\/features\/v3\/reactivity\/shallowReactive.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/shallowReactive.spec.ts\n\n@@ -3,6 +3,7 @@ import {\n   isRef,\n   isShallow,\n   reactive,\n+  Ref,\n   ref,\n   shallowReactive,\n   shallowReadonly\n@@ -45,6 +46,18 @@ describe('shallowReactive', () => {\n     expect(foo.bar.value).toBe(123)\n   })\n \n+  \/\/ #12688\n+  test('should not mutate refs', () => {\n+    const original = ref(123)\n+    const foo = shallowReactive<{ bar: Ref<number> | number }>({\n+      bar: original\n+    })\n+    expect(foo.bar).toBe(original)\n+    foo.bar = 234\n+    expect(foo.bar).toBe(234)\n+    expect(original.value).toBe(123)\n+  })\n+\n   \/\/ @discrepancy no shallow\/non-shallow versions from the same source -\n   \/\/ cannot support this without real proxies\n   \/\/ #2843\n\n\n###\n\n","completion":" fix(reactivity): fix shallowReactive nested ref setting edge cases\n"}
{"prompt":" file path A: types\/index.d.ts | file path B: types\/index.d.ts\n\n@@ -42,7 +42,7 @@ export * from '.\/v3-setup-helpers'\n export { Data } from '.\/common'\n export { SetupContext } from '.\/v3-setup-context'\n export { defineComponent } from '.\/v3-define-component'\n-\/\/ export { defineAsyncComponent } from '.\/defineAsyncComponent'\n+export { defineAsyncComponent } from '.\/v3-define-async-component'\n export {\n   SetupFunction,\n   \/\/ v2 already has option with same name and it's for a single computed\n\n\n###\n\n","completion":" fix(types): export `defineAsyncComponent` type (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.ts | file path B: src\/compiler\/codegen\/index.ts\n\n@@ -13,7 +13,7 @@ import {\n   ASTText,\n   CompilerOptions\n } from 'types\/compiler'\n-import { BindingMetadata } from 'sfc\/types'\n+import { BindingMetadata, BindingTypes } from 'sfc\/types'\n \n type TransformFunction = (el: ASTElement, code: string) => string\n type DataGenFunction = (el: ASTElement) => string\n@@ -104,10 +104,7 @@ export function genElement(el: ASTElement, state: CodegenState): string {\n       \/\/ check if this is a component in <script setup>\n       const bindings = state.options.bindings\n       if (maybeComponent && bindings && bindings.__isScriptSetup !== false) {\n-        tag =\n-          checkBindingType(bindings, el.tag) ||\n-          checkBindingType(bindings, camelize(el.tag)) ||\n-          checkBindingType(bindings, capitalize(camelize(el.tag)))\n+        tag = checkBindingType(bindings, el.tag)\n       }\n       if (!tag) tag = `'${el.tag}'`\n \n@@ -127,9 +124,32 @@ export function genElement(el: ASTElement, state: CodegenState): string {\n }\n \n function checkBindingType(bindings: BindingMetadata, key: string) {\n-  const type = bindings[key]\n-  if (type && type.startsWith('setup')) {\n-    return key\n+  const camelName = camelize(key)\n+  const PascalName = capitalize(camelName)\n+  const checkType = (type) => {\n+    if (bindings[key] === type) {\n+      return key\n+    }\n+    if (bindings[camelName] === type) {\n+      return camelName\n+    }\n+    if (bindings[PascalName] === type) {\n+      return PascalName\n+    }\n+  }\n+  const fromConst =\n+    checkType(BindingTypes.SETUP_CONST) ||\n+    checkType(BindingTypes.SETUP_REACTIVE_CONST)\n+  if (fromConst) {\n+    return fromConst\n+  }\n+\n+  const fromMaybeRef =\n+    checkType(BindingTypes.SETUP_LET) ||\n+    checkType(BindingTypes.SETUP_REF) ||\n+    checkType(BindingTypes.SETUP_MAYBE_REF)\n+  if (fromMaybeRef) {\n+    return fromMaybeRef\n   }\n }\n \n\n\n###\n\n","completion":" fix(sfc): align `<script setup>` component resolution edge case with v3 (#<issue-num>)\n"}
{"prompt":" file path A: types\/v3-component-public-instance.d.ts | file path B: types\/v3-component-public-instance.d.ts\n\n@@ -179,9 +179,7 @@ interface Vue3Instance<\n         ? Partial<Defaults> & Omit<P & PublicProps, keyof Defaults>\n         : P & PublicProps\n     >,\n-    ComponentPublicInstance | null,\n     ComponentPublicInstance,\n-    ComponentPublicInstance[],\n     Options & MergedComponentOptionsOverride,\n     EmitFn<E>\n   > {}\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -14,7 +14,6 @@ import { VNode, VNodeData, VNodeChildren, NormalizedScopedSlot } from '.\/vnode'\n import { PluginFunction, PluginObject } from '.\/plugin'\n import { DefineComponent } from '.\/v3-define-component'\n import { nextTick } from '.\/v3-generated'\n-import { ComponentPublicInstance } from '.\/v3-component-public-instance'\n \n export interface CreateElement {\n   (\n@@ -41,18 +40,16 @@ type NeverFallback<T, D> = [T] extends [never] ? D : T\n export interface Vue<\n   Data = Record<string, any>,\n   Props = Record<string, any>,\n-  Parent = never,\n-  Root = never,\n-  Children = never,\n+  Instance = never,\n   Options = never,\n   Emit = (event: string, ...args: any[]) => Vue\n > {\n   \/\/ properties with different types in defineComponent()\n   readonly $data: Data\n   readonly $props: Props\n-  readonly $parent: NeverFallback<Parent, Vue>\n-  readonly $root: NeverFallback<Root, Vue>\n-  readonly $children: NeverFallback<Children, Vue[]>\n+  readonly $parent: NeverFallback<Instance, Vue> | null\n+  readonly $root: NeverFallback<Instance, Vue>\n+  readonly $children: NeverFallback<Instance, Vue>[]\n   readonly $options: NeverFallback<Options, ComponentOptions<Vue>>\n   $emit: Emit\n \n@@ -60,10 +57,10 @@ export interface Vue<\n   readonly $el: Element\n   readonly $refs: {\n     [key: string]:\n+      | NeverFallback<Instance, Vue>\n       | Vue\n       | Element\n-      | ComponentPublicInstance\n-      | (Vue | Element | ComponentPublicInstance)[]\n+      | (NeverFallback<Instance, Vue> | Vue | Element)[]\n       | undefined\n   }\n   readonly $slots: { [key: string]: VNode[] | undefined }\n\n\n###\n\n","completion":" fix(types): avoid circular type inference between v2 and v3 instance types\n"}
{"prompt":" file path A: src\/core\/instance\/lifecycle.ts | file path B: src\/core\/instance\/lifecycle.ts\n\n@@ -18,7 +18,7 @@ import {\n   invokeWithErrorHandling\n } from '..\/util\/index'\n import { currentInstance, setCurrentInstance } from 'v3\/currentInstance'\n-import { syncSetupAttrs } from 'v3\/apiSetup'\n+import { syncSetupProxy } from 'v3\/apiSetup'\n \n export let activeInstance: any = null\n export let isUpdatingChildComponent: boolean = false\n@@ -288,11 +288,12 @@ export function updateChildComponent(\n     \/\/ force update if attrs are accessed and has changed since it may be\n     \/\/ passed to a child component.\n     if (\n-      syncSetupAttrs(\n+      syncSetupProxy(\n         vm._attrsProxy,\n         attrs,\n         (prevVNode.data && prevVNode.data.attrs) || emptyObject,\n-        vm\n+        vm,\n+        '$attrs'\n       )\n     ) {\n       needsForceUpdate = true\n@@ -300,7 +301,20 @@ export function updateChildComponent(\n   }\n   vm.$attrs = attrs\n \n-  vm.$listeners = listeners || emptyObject\n+  \/\/ update listeners\n+  listeners = listeners || emptyObject\n+  const prevListeners = vm.$options._parentListeners\n+  if (vm._listenersProxy) {\n+    syncSetupProxy(\n+      vm._listenersProxy,\n+      listeners,\n+      prevListeners || emptyObject,\n+      vm,\n+      '$listeners'\n+    )\n+  }\n+  vm.$listeners = vm.$options._parentListeners = listeners\n+  updateComponentListeners(vm, listeners, prevListeners)\n \n   \/\/ update props\n   if (propsData && vm.$options.props) {\n@@ -317,12 +331,6 @@ export function updateChildComponent(\n     vm.$options.propsData = propsData\n   }\n \n-  \/\/ update listeners\n-  listeners = listeners || emptyObject\n-  const oldListeners = vm.$options._parentListeners\n-  vm.$options._parentListeners = listeners\n-  updateComponentListeners(vm, listeners, oldListeners)\n-\n   \/\/ resolve slots + force update if has children\n   if (needsForceUpdate) {\n     vm.$slots = resolveSlots(renderChildren, parentVnode.context)\n\n---\n file path A: src\/types\/component.ts | file path B: src\/types\/component.ts\n\n@@ -111,6 +111,7 @@ export declare class Component {\n   _setupProxy?: Record<string, any>\n   _setupContext?: SetupContext\n   _attrsProxy?: Record<string, any>\n+  _listenersProxy?: Record<string, Function | Function[]>\n   _slotsProxy?: Record<string, () => VNode[]>\n   _preWatchers?: Watcher[]\n \n\n---\n file path A: src\/v3\/apiSetup.ts | file path B: src\/v3\/apiSetup.ts\n\n@@ -19,6 +19,7 @@ import { proxyWithRefUnwrap } from '.\/reactivity\/ref'\n  *\/\n export interface SetupContext {\n   attrs: Record<string, any>\n+  listeners: Record<string, Function | Function[]>\n   slots: Record<string, () => VNode[]>\n   emit: (event: string, ...args: any[]) => any\n   expose: (exposed: Record<string, any>) => void\n@@ -87,7 +88,19 @@ function createSetupContext(vm: Component): SetupContext {\n   let exposeCalled = false\n   return {\n     get attrs() {\n-      return initAttrsProxy(vm)\n+      if (!vm._attrsProxy) {\n+        const proxy = (vm._attrsProxy = {})\n+        def(proxy, '_v_attr_proxy', true)\n+        syncSetupProxy(proxy, vm.$attrs, emptyObject, vm, '$attrs')\n+      }\n+      return vm._attrsProxy\n+    },\n+    get listeners() {\n+      if (!vm._listenersProxy) {\n+        const proxy = (vm._listenersProxy = {})\n+        syncSetupProxy(proxy, vm.$listeners, emptyObject, vm, '$listeners')\n+      }\n+      return vm._listenersProxy\n     },\n     get slots() {\n       return initSlotsProxy(vm)\n@@ -109,26 +122,18 @@ function createSetupContext(vm: Component): SetupContext {\n   }\n }\n \n-function initAttrsProxy(vm: Component) {\n-  if (!vm._attrsProxy) {\n-    const proxy = (vm._attrsProxy = {})\n-    def(proxy, '_v_attr_proxy', true)\n-    syncSetupAttrs(proxy, vm.$attrs, emptyObject, vm)\n-  }\n-  return vm._attrsProxy\n-}\n-\n-export function syncSetupAttrs(\n+export function syncSetupProxy(\n   to: any,\n   from: any,\n   prev: any,\n-  instance: Component\n+  instance: Component,\n+  type: string\n ) {\n   let changed = false\n   for (const key in from) {\n     if (!(key in to)) {\n       changed = true\n-      defineProxyAttr(to, key, instance)\n+      defineProxyAttr(to, key, instance, type)\n     } else if (from[key] !== prev[key]) {\n       changed = true\n     }\n@@ -142,12 +147,17 @@ export function syncSetupAttrs(\n   return changed\n }\n \n-function defineProxyAttr(proxy: any, key: string, instance: Component) {\n+function defineProxyAttr(\n+  proxy: any,\n+  key: string,\n+  instance: Component,\n+  type: string\n+) {\n   Object.defineProperty(proxy, key, {\n     enumerable: true,\n     configurable: true,\n     get() {\n-      return instance.$attrs[key]\n+      return instance[type][key]\n     }\n   })\n }\n@@ -171,19 +181,23 @@ export function syncSetupSlots(to: any, from: any) {\n }\n \n \/**\n- * @internal use manual type def\n+ * @internal use manual type def because it relies on legacy VNode types\n  *\/\n export function useSlots(): SetupContext['slots'] {\n   return getContext().slots\n }\n \n-\/**\n- * @internal use manual type def\n- *\/\n export function useAttrs(): SetupContext['attrs'] {\n   return getContext().attrs\n }\n \n+\/**\n+ * Vue 2 only\n+ *\/\n+export function useListeners(): SetupContext['listeners'] {\n+  return getContext().listeners\n+}\n+\n function getContext(): SetupContext {\n   if (__DEV__ && !currentInstance) {\n     warn(`useContext() called without active instance.`)\n\n---\n file path A: src\/v3\/index.ts | file path B: src\/v3\/index.ts\n\n@@ -77,7 +77,7 @@ export { provide, inject, InjectionKey } from '.\/apiInject'\n \n export { h } from '.\/h'\n export { getCurrentInstance } from '.\/currentInstance'\n-export { useSlots, useAttrs, mergeDefaults } from '.\/apiSetup'\n+export { useSlots, useAttrs, useListeners, mergeDefaults } from '.\/apiSetup'\n export { nextTick } from 'core\/util\/next-tick'\n export { set, del } from 'core\/observer'\n \n\n---\n file path A: test\/unit\/features\/v3\/apiSetup.spec.ts | file path B: test\/unit\/features\/v3\/apiSetup.spec.ts\n\n@@ -297,4 +297,27 @@ describe('api: setup context', () => {\n     await nextTick()\n     expect(spy).toHaveBeenCalledTimes(1)\n   })\n+\n+  it('context.listeners', async () => {\n+    let _listeners\n+    const Child = {\n+      setup(_, { listeners }) {\n+        _listeners = listeners\n+        return () => {}\n+      }\n+    }\n+\n+    const Parent = {\n+      data: () => ({ log: () => 1 }),\n+      template: `<Child @foo=\"log\" \/>`,\n+      components: { Child }\n+    }\n+\n+    const vm = new Vue(Parent).$mount()\n+\n+    expect(_listeners.foo()).toBe(1)\n+    vm.log = () => 2\n+    await nextTick()\n+    expect(_listeners.foo()).toBe(2)\n+  })\n })\n\n---\n file path A: types\/v3-manual-apis.d.ts | file path B: types\/v3-manual-apis.d.ts\n\n@@ -5,6 +5,4 @@ export function getCurrentInstance(): { proxy: Vue } | null\n \n export const h: CreateElement\n \n-export function useAttrs(): SetupContext['attrs']\n-\n export function useSlots(): SetupContext['slots']\n\n---\n file path A: types\/v3-setup-context.d.ts | file path B: types\/v3-setup-context.d.ts\n\n@@ -31,6 +31,10 @@ export type EmitFn<\n \n export interface SetupContext<E extends EmitsOptions = {}> {\n   attrs: Data\n+  \/**\n+   * Equivalent of `this.$listeners`, which is Vue 2 only.\n+   *\/\n+  listeners: Record<string, Function | Function[]>\n   slots: Slots\n   emit: EmitFn<E>\n   expose(exposed?: Record<string, any>): void\n\n\n###\n\n","completion":" feat(setup): support listeners on setup context + `useListeners()` helper\n"}
{"prompt":" file path A: packages\/compiler-sfc\/package.json | file path B: packages\/compiler-sfc\/package.json\n\n@@ -29,7 +29,6 @@\n     \"postcss-selector-parser\": \"^6.0.10\",\n     \"pug\": \"^3.0.2\",\n     \"sass\": \"^1.52.3\",\n-    \"stylus\": \"^0.58.1\",\n-    \"vue-template-es2015-compiler\": \"^1.9.1\"\n+    \"stylus\": \"^0.58.1\"\n   }\n }\n\n---\n file path A: packages\/compiler-sfc\/src\/compileTemplate.ts | file path B: packages\/compiler-sfc\/src\/compileTemplate.ts\n\n@@ -144,8 +144,7 @@ function actuallyCompile(\n       errors\n     }\n   } else {\n-    \/\/ transpile code with vue-template-es2015-compiler, which is a forked\n-    \/\/ version of Buble that applies ES2015 transforms + stripping `with` usage\n+    \/\/ stripping `with` usage\n     let code =\n       `var __render__ = ${prefixIdentifiers(\n         `function render(${isFunctional ? `_c,_vm` : ``}){${render}\\n}`,\n\n---\n file path A: pnpm-lock.yaml | file path B: pnpm-lock.yaml\n\n@@ -115,7 +115,6 @@ importers:\n       sass: ^1.52.3\n       source-map: ^0.6.1\n       stylus: ^0.58.1\n-      vue-template-es2015-compiler: ^1.9.1\n     dependencies:\n       '@babel\/parser': 7.18.4\n       postcss: 8.4.14\n@@ -138,7 +137,6 @@ importers:\n       pug: 3.0.2\n       sass: 1.52.3\n       stylus: 0.58.1\n-      vue-template-es2015-compiler: 1.9.1\n \n   packages\/server-renderer:\n     specifiers:\n@@ -6222,10 +6220,6 @@ packages:\n     engines: {node: '>=0.10.0'}\n     dev: true\n \n-  \/vue-template-es2015-compiler\/1.9.1:\n-    resolution: {integrity: sha512-4gDntzrifFnCEvyoO8PqyJDmguXgVPxKiIxrBKjIowvL9l+N66196+72XVYR8BBf1Uv1Fgt3bGevJ+sEmxfZzw==}\n-    dev: true\n-\n   \/w3c-hr-time\/1.0.2:\n     resolution: {integrity: sha512-z8P5DvDNjKDoFIHK7q8r8lackT6l+jo\/Ye3HOle7l9nICP9lf1Ci25fy9vHd0JOWewkIFzXIEig3TdKT7JQ5fQ==}\n     dependencies:\n\n---\n file path A: test\/unit\/features\/options\/functional.spec.ts | file path B: test\/unit\/features\/options\/functional.spec.ts\n\n@@ -269,7 +269,6 @@ describe('Options functional', () => {\n   })\n \n   it('should work with render fns compiled from template', done => {\n-    \/\/ code generated via vue-template-es2015-compiler\n     const render = function (_h, _vm) {\n       const _c = _vm._c\n       return _c(\n\n\n###\n\n","completion":" chore(sfc): remove useless vue-template-es2015-compiler (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.ts | file path B: src\/compiler\/codegen\/index.ts\n\n@@ -95,14 +95,15 @@ export function genElement(el: ASTElement, state: CodegenState): string {\n       code = genComponent(el.component, el, state)\n     } else {\n       let data\n-      if (!el.plain || (el.pre && state.maybeComponent(el))) {\n+      const maybeComponent = state.maybeComponent(el)\n+      if (!el.plain || (el.pre && maybeComponent)) {\n         data = genData(el, state)\n       }\n \n       let tag: string | undefined\n       \/\/ check if this is a component in <script setup>\n       const bindings = state.options.bindings\n-      if (bindings && bindings.__isScriptSetup !== false) {\n+      if (maybeComponent && bindings && bindings.__isScriptSetup !== false) {\n         tag =\n           checkBindingType(bindings, el.tag) ||\n           checkBindingType(bindings, camelize(el.tag)) ||\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.ts | file path B: test\/unit\/modules\/compiler\/codegen.spec.ts\n\n@@ -724,4 +724,20 @@ describe('codegen', () => {\n       '\"with(this){return _c(\\'div\\',[_c(Foo),_c(FooBar)],1)}\"'\n     )\n   })\n+\n+  \/\/ #12674\n+  it('component with bindings: should not resolve native elements', () => {\n+    const ast = parse(`<div><form>{{ n }}<\/form><\/div>`, baseOptions)\n+    optimize(ast, baseOptions)\n+    const res = generate(ast, {\n+      ...baseOptions,\n+      bindings: {\n+        form: BindingTypes.SETUP_CONST\n+      }\n+    })\n+    expect(res.render).toMatch(`_c('form'`)\n+    expect(res.render).toMatchInlineSnapshot(\n+      \"\\\"with(this){return _c('div',[_c('form',[_v(_s(n))])])}\\\"\"\n+    )\n+  })\n })\n\n\n###\n\n","completion":" fix(codegen): script setup should not attempt to resolve native elements as component\n"}
{"prompt":" file path A: src\/core\/instance\/render.ts | file path B: src\/core\/instance\/render.ts\n\n@@ -25,7 +25,13 @@ export function initRender(vm: Component) {\n   const parentVnode = (vm.$vnode = options._parentVnode!) \/\/ the placeholder node in parent tree\n   const renderContext = parentVnode && (parentVnode.context as Component)\n   vm.$slots = resolveSlots(options._renderChildren, renderContext)\n-  vm.$scopedSlots = emptyObject\n+  vm.$scopedSlots = parentVnode\n+    ? normalizeScopedSlots(\n+        vm.$parent!,\n+        parentVnode.data!.scopedSlots,\n+        vm.$slots\n+      )\n+    : emptyObject\n   \/\/ bind the createElement fn to this instance\n   \/\/ so that we get proper render context inside it.\n   \/\/ args order: tag, data, children, normalizationType, alwaysNormalize\n@@ -98,7 +104,7 @@ export function renderMixin(Vue: typeof Component) {\n     const vm: Component = this\n     const { render, _parentVnode } = vm.$options\n \n-    if (_parentVnode) {\n+    if (_parentVnode && vm._isMounted) {\n       vm.$scopedSlots = normalizeScopedSlots(\n         vm.$parent!,\n         _parentVnode.data!.scopedSlots,\n\n---\n file path A: test\/unit\/features\/v3\/apiSetup.spec.ts | file path B: test\/unit\/features\/v3\/apiSetup.spec.ts\n\n@@ -165,6 +165,9 @@ describe('api: setup context', () => {\n \n     const Child = {\n       setup(_props: any, { slots }: any) {\n+        \/\/ #12672 behavior consistency with Vue 3: should be able to access\n+        \/\/ slots directly in setup()\n+        expect(slots.foo()).toBeTruthy()\n         return () => h('div', [...slots.foo(), ...slots.bar()])\n       }\n     }\n\n\n###\n\n","completion":" fix(setup): ensure setup context slots can be accessed immediately\n"}
{"prompt":" file path A: src\/core\/instance\/inject.ts | file path B: src\/core\/instance\/inject.ts\n\n@@ -1,8 +1,7 @@\n import { warn, hasSymbol, isFunction, isObject } from '..\/util\/index'\n import { defineReactive, toggleObserving } from '..\/observer\/index'\n import type { Component } from 'types\/component'\n-import { provide } from 'v3\/apiInject'\n-import { setCurrentInstance } from '..\/..\/v3\/currentInstance'\n+import { resolveProvided } from 'v3\/apiInject'\n \n export function initProvide(vm: Component) {\n   const provideOption = vm.$options.provide\n@@ -13,12 +12,18 @@ export function initProvide(vm: Component) {\n     if (!isObject(provided)) {\n       return\n     }\n+    const source = resolveProvided(vm)\n+    \/\/ IE9 doesn't support Object.getOwnPropertyDescriptors so we have to\n+    \/\/ iterate the keys ourselves.\n     const keys = hasSymbol ? Reflect.ownKeys(provided) : Object.keys(provided)\n-    setCurrentInstance(vm)\n     for (let i = 0; i < keys.length; i++) {\n-      provide(keys[i], provided[keys[i]])\n+      const key = keys[i]\n+      Object.defineProperty(\n+        source,\n+        key,\n+        Object.getOwnPropertyDescriptor(provided, key)!\n+      )\n     }\n-    setCurrentInstance()\n   }\n }\n \n\n---\n file path A: src\/v3\/apiInject.ts | file path B: src\/v3\/apiInject.ts\n\n@@ -1,5 +1,6 @@\n import { isFunction, warn } from 'core\/util'\n import { currentInstance } from '.\/currentInstance'\n+import type { Component } from 'types\/component'\n \n export interface InjectionKey<T> extends Symbol {}\n \n@@ -9,19 +10,23 @@ export function provide<T>(key: InjectionKey<T> | string | number, value: T) {\n       warn(`provide() can only be used inside setup().`)\n     }\n   } else {\n-    let provides = currentInstance._provided\n-    \/\/ by default an instance inherits its parent's provides object\n-    \/\/ but when it needs to provide values of its own, it creates its\n-    \/\/ own provides object using parent provides object as prototype.\n-    \/\/ this way in `inject` we can simply look up injections from direct\n-    \/\/ parent and let the prototype chain do the work.\n-    const parentProvides =\n-      currentInstance.$parent && currentInstance.$parent._provided\n-    if (parentProvides === provides) {\n-      provides = currentInstance._provided = Object.create(parentProvides)\n-    }\n     \/\/ TS doesn't allow symbol as index type\n-    provides[key as string] = value\n+    resolveProvided(currentInstance)[key as string] = value\n+  }\n+}\n+\n+export function resolveProvided(vm: Component): Record<string, any> {\n+  \/\/ by default an instance inherits its parent's provides object\n+  \/\/ but when it needs to provide values of its own, it creates its\n+  \/\/ own provides object using parent provides object as prototype.\n+  \/\/ this way in `inject` we can simply look up injections from direct\n+  \/\/ parent and let the prototype chain do the work.\n+  const existing = vm._provided\n+  const parentProvides = vm.$parent && vm.$parent._provided\n+  if (parentProvides === existing) {\n+    return (vm._provided = Object.create(parentProvides))\n+  } else {\n+    return existing\n   }\n }\n \n\n---\n file path A: test\/unit\/features\/options\/inject.spec.ts | file path B: test\/unit\/features\/options\/inject.spec.ts\n\n@@ -1,6 +1,6 @@\n import Vue from 'vue'\n import { Observer } from 'core\/observer\/index'\n-import { isNative, isObject, hasOwn } from 'core\/util\/index'\n+import { isNative, isObject, hasOwn, nextTick } from 'core\/util\/index'\n import testObjectOption from '..\/..\/..\/helpers\/test-object-option'\n \n describe('Options provide\/inject', () => {\n@@ -677,4 +677,39 @@ describe('Options provide\/inject', () => {\n     })\n     expect(`Injection \"constructor\" not found`).toHaveBeenWarned()\n   })\n+\n+  \/\/ #12667\n+  test('provide with getters', async () => {\n+    const spy = vi.fn()\n+    const Child = {\n+      render() {},\n+      inject: ['foo'],\n+      mounted() {\n+        spy(this.foo)\n+      }\n+    }\n+\n+    let val = 1\n+    const vm = new Vue({\n+      components: { Child },\n+      template: `<Child v-if=\"ok\" \/>`,\n+      data() {\n+        return {\n+          ok: false\n+        }\n+      },\n+      provide() {\n+        return {\n+          get foo() {\n+            return val\n+          }\n+        }\n+      }\n+    }).$mount()\n+\n+    val = 2\n+    vm.ok = true\n+    await nextTick()\n+    expect(spy).toHaveBeenCalledWith(2)\n+  })\n })\n\n\n###\n\n","completion":" fix(inject): fix edge case of provided with async-mutated getters\n"}
{"prompt":" file path A: src\/core\/observer\/scheduler.ts | file path B: src\/core\/observer\/scheduler.ts\n\n@@ -59,6 +59,15 @@ if (inBrowser && !isIE) {\n   }\n }\n \n+const sortCompareFn = (a: Watcher, b: Watcher): number => {\n+  if (a.post) {\n+    if (!b.post) return 1\n+  } else if (b.post) {\n+    return -1\n+  }\n+  return a.id - b.id\n+}\n+\n \/**\n  * Flush both queues and run the watchers.\n  *\/\n@@ -75,7 +84,7 @@ function flushSchedulerQueue() {\n   \/\/    user watchers are created before the render watcher)\n   \/\/ 3. If a component is destroyed during a parent component's watcher run,\n   \/\/    its watchers can be skipped.\n-  queue.sort((a, b) => a.id - b.id)\n+  queue.sort(sortCompareFn)\n \n   \/\/ do not cache length because more watchers might be pushed\n   \/\/ as we run existing watchers\n\n---\n file path A: src\/core\/observer\/watcher.ts | file path B: src\/core\/observer\/watcher.ts\n\n@@ -58,6 +58,7 @@ export default class Watcher implements DepTarget {\n   noRecurse?: boolean\n   getter: Function\n   value: any\n+  post: boolean\n \n   \/\/ dev only\n   onTrack?: ((event: DebuggerEvent) => void) | undefined\n@@ -93,6 +94,7 @@ export default class Watcher implements DepTarget {\n     this.cb = cb\n     this.id = ++uid \/\/ uid for batching\n     this.active = true\n+    this.post = false\n     this.dirty = this.lazy \/\/ for lazy watchers\n     this.deps = []\n     this.newDeps = []\n\n---\n file path A: src\/v3\/apiWatch.ts | file path B: src\/v3\/apiWatch.ts\n\n@@ -313,7 +313,7 @@ function doWatch(\n   if (flush === 'sync') {\n     watcher.update = watcher.run\n   } else if (flush === 'post') {\n-    watcher.id = Infinity\n+    watcher.post = true\n     watcher.update = () => queueWatcher(watcher)\n   } else {\n     \/\/ pre\n\n---\n file path A: test\/unit\/features\/v3\/apiWatch.spec.ts | file path B: test\/unit\/features\/v3\/apiWatch.spec.ts\n\n@@ -1167,4 +1167,37 @@ describe('api: watch', () => {\n     set(r.value, 'foo', 1)\n     expect(spy).not.toHaveBeenCalled()\n   })\n+\n+  \/\/ #12664\n+  it('queueing multiple flush: post watchers', async () => {\n+    const parentSpy = vi.fn()\n+    const childSpy = vi.fn()\n+\n+    const Child = {\n+      setup() {\n+        const el = ref()\n+        watch(el, childSpy, { flush: 'post' })\n+        return { el }\n+      },\n+      template: `<div><span ref=\"el\">hello child<\/span><\/div>`\n+    }\n+    const App = {\n+      components: { Child },\n+      setup() {\n+        const el = ref()\n+        watch(el, parentSpy, { flush: 'post' })\n+        return { el }\n+      },\n+      template: `<div><Child \/><span ref=\"el\">hello app1<\/span><\/div>`\n+    }\n+\n+    const container = document.createElement('div')\n+    const root = document.createElement('div')\n+    container.appendChild(root)\n+    new Vue(App).$mount(root)\n+\n+    await nextTick()\n+    expect(parentSpy).toHaveBeenCalledTimes(1)\n+    expect(childSpy).toHaveBeenCalledTimes(1)\n+  })\n })\n\n\n###\n\n","completion":" fix(watch): fix queueing multiple post watchers\n"}
{"prompt":" file path A: types\/tsconfig.json | file path B: types\/tsconfig.json\n\n@@ -9,7 +9,6 @@\n     \"jsx\": \"preserve\",\n     \"strict\": true,\n     \"noEmit\": true,\n-    \"baseUrl\": \".\",\n     \"paths\": {\n       \"vue\": [\"..\/index.d.ts\"]\n     }\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -14,7 +14,7 @@ import { VNode, VNodeData, VNodeChildren, NormalizedScopedSlot } from '.\/vnode'\n import { PluginFunction, PluginObject } from '.\/plugin'\n import { DefineComponent } from '.\/v3-define-component'\n import { nextTick } from '.\/v3-generated'\n-import { ComponentPublicInstance } from 'v3-component-public-instance'\n+import { ComponentPublicInstance } from '.\/v3-component-public-instance'\n \n export interface CreateElement {\n   (\n\n\n###\n\n","completion":" fix(types): vue.d.ts should use relative import to v3-component-public-instance (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/v3\/define-component-test.tsx | file path B: types\/test\/v3\/define-component-test.tsx\n\n@@ -1139,6 +1139,14 @@ defineComponent({\n   }\n })\n \n+const X = defineComponent({\n+  methods: {\n+    foo() {\n+      return 123\n+    }\n+  }\n+})\n+\n \/\/ Missing \/ mismatching Vue 2 properties\n \/\/ https:\/\/github.com\/vuejs\/vue\/issues\/12628#issuecomment-1177258223\n defineComponent({\n@@ -1149,6 +1157,11 @@ defineComponent({\n     this.$ssrContext\n     this.$isServer\n     this.$children[0].$root.$children\n+\n+    \/\/ type casting refs\n+    const foo = this.$refs.foo as InstanceType<typeof X>\n+    foo.foo().toExponential()\n+\n     return h('div', {}, [...this.$slots.default!])\n   }\n })\n\n\n###\n\n","completion":" test: add test for type casting $refs to defineComponent instance type\n"}
{"prompt":" file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -14,6 +14,7 @@ import { VNode, VNodeData, VNodeChildren, NormalizedScopedSlot } from '.\/vnode'\n import { PluginFunction, PluginObject } from '.\/plugin'\n import { DefineComponent } from '.\/v3-define-component'\n import { nextTick } from '.\/v3-generated'\n+import { ComponentPublicInstance } from 'v3-component-public-instance'\n \n export interface CreateElement {\n   (\n@@ -58,7 +59,12 @@ export interface Vue<\n   \/\/ Vue 2 only or shared\n   readonly $el: Element\n   readonly $refs: {\n-    [key: string]: Vue | Element | (Vue | Element)[] | undefined\n+    [key: string]:\n+      | Vue\n+      | Element\n+      | ComponentPublicInstance\n+      | (Vue | Element | ComponentPublicInstance)[]\n+      | undefined\n   }\n   readonly $slots: { [key: string]: VNode[] | undefined }\n   readonly $scopedSlots: { [key: string]: NormalizedScopedSlot | undefined }\n\n\n###\n\n","completion":" fix(types): $refs can also contain ComponentPublicInstance (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/v3\/setup-test.ts | file path B: types\/test\/v3\/setup-test.ts\n\n@@ -28,6 +28,9 @@ Vue.extend({\n     }\n     ctx.emit('foo')\n     ctx.slots.default && ctx.slots.default()\n+    ctx.expose({\n+      a: 123\n+    })\n   }\n })\n \n\n---\n file path A: types\/v3-setup-context.d.ts | file path B: types\/v3-setup-context.d.ts\n\n@@ -33,4 +33,5 @@ export interface SetupContext<E extends EmitsOptions = {}> {\n   attrs: Data\n   slots: Slots\n   emit: EmitFn<E>\n+  expose(exposed?: Record<string, any>): void\n }\n\n\n###\n\n","completion":" fix(types): fix missing expose() type on setup context\n"}
{"prompt":" file path A: types\/test\/v3\/define-component-test.tsx | file path B: types\/test\/v3\/define-component-test.tsx\n\n@@ -1148,6 +1148,7 @@ defineComponent({\n     this.$on('foo', () => {})\n     this.$ssrContext\n     this.$isServer\n+    this.$children[0].$root.$children\n     return h('div', {}, [...this.$slots.default!])\n   }\n })\n\n---\n file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -16,6 +16,7 @@ class Test extends Vue {\n     this.$isServer\n     this.$ssrContext\n     this.$vnode\n+    this.$root.$children[0].$children[0]\n   }\n \n   \/\/ test property reification\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -35,6 +35,8 @@ export interface CreateElement {\n   ): VNode\n }\n \n+type NeverFallback<T, D> = [T] extends [never] ? D : T\n+\n export interface Vue<\n   Data = Record<string, any>,\n   Props = Record<string, any>,\n@@ -47,10 +49,10 @@ export interface Vue<\n   \/\/ properties with different types in defineComponent()\n   readonly $data: Data\n   readonly $props: Props\n-  readonly $parent: Parent extends never ? Vue : Parent\n-  readonly $root: Root extends never ? Vue : Root\n-  readonly $children: Children extends never ? Vue[] : Children\n-  readonly $options: ComponentOptions<Vue>\n+  readonly $parent: NeverFallback<Parent, Vue>\n+  readonly $root: NeverFallback<Root, Vue>\n+  readonly $children: NeverFallback<Children, Vue[]>\n+  readonly $options: NeverFallback<Options, ComponentOptions<Vue>>\n   $emit: Emit\n \n   \/\/ Vue 2 only or shared\n\n\n###\n\n","completion":" fix(types): fix $children and $root instance types\n"}
{"prompt":" file path A: src\/core\/observer\/traverse.ts | file path B: src\/core\/observer\/traverse.ts\n\n@@ -1,6 +1,7 @@\n import { _Set as Set, isObject, isArray } from '..\/util\/index'\n import type { SimpleSet } from '..\/util\/index'\n import VNode from '..\/vdom\/vnode'\n+import { isRef } from '..\/..\/v3'\n \n const seenObjects = new Set()\n \n@@ -35,6 +36,8 @@ function _traverse(val: any, seen: SimpleSet) {\n   if (isA) {\n     i = val.length\n     while (i--) _traverse(val[i], seen)\n+  } else if (isRef(val)) {\n+    _traverse(val.value, seen)\n   } else {\n     keys = Object.keys(val)\n     i = keys.length\n\n---\n file path A: test\/unit\/features\/v3\/apiWatch.spec.ts | file path B: test\/unit\/features\/v3\/apiWatch.spec.ts\n\n@@ -144,6 +144,20 @@ describe('api: watch', () => {\n     expect(dummy).toBe(1)\n   })\n \n+  it('deep watch w\/ raw refs', async () => {\n+    const count = ref(0)\n+    const src = reactive({\n+      arr: [count]\n+    })\n+    let dummy\n+    watch(src, ({ arr: [{ value }] }) => {\n+      dummy = value\n+    })\n+    count.value++\n+    await nextTick()\n+    expect(dummy).toBe(1)\n+  })\n+\n   it('watching multiple sources', async () => {\n     const state = reactive({ count: 1 })\n     const count = ref(1)\n\n\n###\n\n","completion":" fix(watch): fix deep watch for structures containing raw refs\n"}
{"prompt":" file path A: types\/test\/augmentation-test.ts | file path B: types\/test\/augmentation-test.ts\n\n@@ -1,4 +1,4 @@\n-import Vue from '..\/index'\n+import Vue, { defineComponent } from '..\/index'\n \n declare module '..\/vue' {\n   \/\/ add instance property and method\n@@ -44,3 +44,10 @@ vm.$instanceMethod()\n \n Vue.staticProperty\n Vue.staticMethod()\n+\n+defineComponent({\n+  mounted() {\n+    this.$instanceMethod\n+    this.$instanceProperty\n+  }\n+})\n\n---\n file path A: types\/test\/v3\/define-component-test.tsx | file path B: types\/test\/v3\/define-component-test.tsx\n\n@@ -1143,6 +1143,7 @@ defineComponent({\n \/\/ https:\/\/github.com\/vuejs\/vue\/issues\/12628#issuecomment-1177258223\n defineComponent({\n   render(h) {\n+    \/\/ vue 2\n     this.$listeners\n     this.$on('foo', () => {})\n     this.$ssrContext\n\n---\n file path A: types\/v3-component-public-instance.d.ts | file path B: types\/v3-component-public-instance.d.ts\n\n@@ -5,7 +5,7 @@ import {\n } from '.\/v3-generated'\n import { UnionToIntersection } from '.\/common'\n \n-import { Vue, Vue2Instance, VueConstructor } from '.\/vue'\n+import { Vue, VueConstructor } from '.\/vue'\n import {\n   ComputedOptions,\n   MethodOptions,\n@@ -13,8 +13,7 @@ import {\n   ComponentOptionsMixin,\n   ComponentOptionsBase\n } from '.\/v3-component-options'\n-import { EmitFn, EmitsOptions, Slots } from '.\/v3-setup-context'\n-import { VNode } from '.\/vnode'\n+import { EmitFn, EmitsOptions } from '.\/v3-setup-context'\n \n \/**\n  * Custom properties added to component instances in any way and can be accessed through `this`\n@@ -173,18 +172,19 @@ interface Vue3Instance<\n   Defaults,\n   MakeDefaultsOptional,\n   Options\n-> extends Vue2Instance {\n-  $data: D\n-  readonly $props: Readonly<\n-    MakeDefaultsOptional extends true\n-      ? Partial<Defaults> & Omit<P & PublicProps, keyof Defaults>\n-      : P & PublicProps\n-  >\n-  readonly $root: ComponentPublicInstance | null\n-  readonly $parent: ComponentPublicInstance | null\n-  readonly $emit: EmitFn<E>\n-  readonly $options: Options & MergedComponentOptionsOverride\n-}\n+> extends Vue<\n+    D,\n+    Readonly<\n+      MakeDefaultsOptional extends true\n+        ? Partial<Defaults> & Omit<P & PublicProps, keyof Defaults>\n+        : P & PublicProps\n+    >,\n+    ComponentPublicInstance | null,\n+    ComponentPublicInstance,\n+    ComponentPublicInstance[],\n+    Options & MergedComponentOptionsOverride,\n+    EmitFn<E>\n+  > {}\n \n type MergedHook<T = () => void> = T | T[]\n \n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -35,17 +35,25 @@ export interface CreateElement {\n   ): VNode\n }\n \n-export interface Vue extends Vue2Instance {\n-  readonly $data: Record<string, any>\n-  readonly $props: Record<string, any>\n-  readonly $parent: Vue\n-  readonly $root: Vue\n-  readonly $children: Vue[]\n+export interface Vue<\n+  Data = Record<string, any>,\n+  Props = Record<string, any>,\n+  Parent = never,\n+  Root = never,\n+  Children = never,\n+  Options = never,\n+  Emit = (event: string, ...args: any[]) => Vue\n+> {\n+  \/\/ properties with different types in defineComponent()\n+  readonly $data: Data\n+  readonly $props: Props\n+  readonly $parent: Parent extends never ? Vue : Parent\n+  readonly $root: Root extends never ? Vue : Root\n+  readonly $children: Children extends never ? Vue[] : Children\n   readonly $options: ComponentOptions<Vue>\n-  $emit(event: string, ...args: any[]): this\n-}\n+  $emit: Emit\n \n-export interface Vue2Instance {\n+  \/\/ Vue 2 only or shared\n   readonly $el: Element\n   readonly $refs: {\n     [key: string]: Vue | Element | (Vue | Element)[] | undefined\n\n\n###\n\n","completion":" fix(types): support Vue interface augmentations in defineComponent\n"}
{"prompt":" file path A: dist\/vue.runtime.mjs | file path B: dist\/vue.runtime.mjs\n\n@@ -49,6 +49,7 @@ export const {\n   onMounted,\r\n   onBeforeUpdate,\r\n   onUpdated,\r\n+  onBeforeUnmount,\r\n   onUnmounted,\r\n   onErrorCaptured,\r\n   onActivated,\r\n\n\n###\n\n","completion":" fix: add missing export from `vue.runtime.mjs` (#<issue-num>)\n"}
{"prompt":" file path A: CHANGELOG.md | file path B: CHANGELOG.md\n\n@@ -7,7 +7,7 @@\n * **compiler-sfc:** use safer deindent default for compatibility with previous behavior ([b70a258](https:\/\/github.com\/vuejs\/vue\/commit\/b70a2585fcd102def2bb5a3b2b589edf5311122d))\n * pass element creation helper to static render fns for functional components ([dc8a68e](https:\/\/github.com\/vuejs\/vue\/commit\/dc8a68e8c6c4e8ed4fdde094004fca272d71ef2e)), closes [#12625](https:\/\/github.com\/vuejs\/vue\/issues\/12625)\n * **ssr\/reactivity:** fix array setting error at created in ssr [[#12632](https:\/\/github.com\/vuejs\/vue\/issues\/12632)] ([#12633](https:\/\/github.com\/vuejs\/vue\/issues\/12633)) ([ca7daef](https:\/\/github.com\/vuejs\/vue\/commit\/ca7daefaa15a192046d22d060220cd595a6a275f))\n-* **types:** fix missing instance properties on defineComponent this ([f8de4ca](https:\/\/github.com\/vuejs\/vue\/commit\/f8de4ca9d458a03378e848b1e62d6507f7124871)), closes [\/github.com\/vuejs\/vue\/issues\/12628#issuecomment-1177258223](https:\/\/github.com\/\/github.com\/vuejs\/vue\/issues\/12628\/issues\/issuecomment-1177258223)\n+* **types:** fix missing instance properties on defineComponent this ([f8de4ca](https:\/\/github.com\/vuejs\/vue\/commit\/f8de4ca9d458a03378e848b1e62d6507f7124871)), closes [#12628](https:\/\/github.com\/vuejs\/vue\/issues\/12628#issuecomment-1177258223)\n * **types:** fix this.$slots type for defineComponent ([d3add06](https:\/\/github.com\/vuejs\/vue\/commit\/d3add06e6e18a78a3745240632fecd076eb49d19))\n * **types:** fix type inference when using components option ([1d5a411](https:\/\/github.com\/vuejs\/vue\/commit\/1d5a411c1e3aa062aa5080432cf3f852f1583ed2))\n * **types:** global component registration type compat w\/ defineComponent ([26ff4bc](https:\/\/github.com\/vuejs\/vue\/commit\/26ff4bc0ed75d8bf7921523a2e546df24ec81d8f)), closes [#12622](https:\/\/github.com\/vuejs\/vue\/issues\/12622)\n\n\n###\n\n","completion":" chore(changelog): fix dead link (#<issue-num>) [ci skip]\n"}
{"prompt":" file path A: CHANGELOG.md | file path B: CHANGELOG.md\n\n@@ -117,6 +117,12 @@ In addition, the following features are explicitly **NOT** ported:\n -  Reactivity transform (still experimental)\n -  `expose` option is not supported for options components (but `defineExpose()` is supported in `<script setup>`).\n \n+### TypeScript Changes\n+\n+- `defineComponent` provides improved type inference similar to that of Vue 3. Note the type of `this` inside `defineComponent()` is not interoperable with `this` from `Vue.extend()`.\n+\n+- Similar to Vue 3, TSX support is now built-in. If your project previously had manual JSX type shims, make sure to remove them.\n+\n ## Upgrade Guide\n \n ### Vue CLI \/ webpack\n\n\n###\n\n","completion":" chore: document TS changes in changelog [ci skip]\n"}
{"prompt":" file path A: src\/v3\/reactivity\/ref.ts | file path B: src\/v3\/reactivity\/ref.ts\n\n@@ -119,7 +119,16 @@ export function proxyWithRefUnwrap(\n   Object.defineProperty(target, key, {\n     enumerable: true,\n     configurable: true,\n-    get: () => unref(source[key]),\n+    get: () => {\n+      const val = source[key]\n+      if (isRef(val)) {\n+        return val.value\n+      } else {\n+        const ob = val && val.__ob__\n+        if (ob) ob.dep.depend()\n+        return val\n+      }\n+    },\n     set: value => {\n       const oldValue = source[key]\n       if (isRef(oldValue) && !isRef(value)) {\n\n\n###\n\n","completion":" fix: detect property add\/deletion on reactive objects from setup when used in templates\n"}
{"prompt":" file path A: src\/v3\/apiWatch.ts | file path B: src\/v3\/apiWatch.ts\n\n@@ -196,12 +196,10 @@ function doWatch(\n     getter = () => source.value\n     forceTrigger = isShallow(source)\n   } else if (isReactive(source)) {\n-    getter = isArray(source)\n-      ? () => {\n-          ;(source as any).__ob__.dep.depend()\n-          return source\n-        }\n-      : () => source\n+    getter = () => {\n+      ;(source as any).__ob__.dep.depend()\n+      return source\n+    }\n     deep = true\n   } else if (isArray(source)) {\n     isMultiSource = true\n\n---\n file path A: src\/v3\/reactivity\/ref.ts | file path B: src\/v3\/reactivity\/ref.ts\n\n@@ -68,7 +68,7 @@ function createRef(rawValue: unknown, shallow: boolean) {\n   }\n   const ref: any = {}\n   def(ref, RefFlag, true)\n-  def(ref, ReactiveFlags.IS_SHALLOW, true)\n+  def(ref, ReactiveFlags.IS_SHALLOW, shallow)\n   def(\n     ref,\n     'dep',\n\n---\n file path A: test\/unit\/features\/v3\/apiWatch.spec.ts | file path B: test\/unit\/features\/v3\/apiWatch.spec.ts\n\n@@ -1136,4 +1136,21 @@ describe('api: watch', () => {\n     await nextTick()\n     expect(spy).toHaveBeenCalledTimes(2)\n   })\n+\n+  \/\/ #12643\n+  test('should trigger watch on reactive object when new property is added via set()', () => {\n+    const spy = vi.fn()\n+    const obj = reactive({})\n+    watch(obj, spy, { flush: 'sync' })\n+    set(obj, 'foo', 1)\n+    expect(spy).toHaveBeenCalled()\n+  })\n+\n+  test('should not trigger watch when calling set() on ref value', () => {\n+    const spy = vi.fn()\n+    const r = ref({})\n+    watch(r, spy, { flush: 'sync' })\n+    set(r.value, 'foo', 1)\n+    expect(spy).not.toHaveBeenCalled()\n+  })\n })\n\n\n###\n\n","completion":" fix(reactivity): fix watch behavior inconsistency + deep ref shallow check\n"}
{"prompt":" file path A: src\/core\/instance\/init.ts | file path B: src\/core\/instance\/init.ts\n\n@@ -58,7 +58,7 @@ export function initMixin(Vue: typeof Component) {\n     initLifecycle(vm)\n     initEvents(vm)\n     initRender(vm)\n-    callHook(vm, 'beforeCreate')\n+    callHook(vm, 'beforeCreate', undefined, false \/* setContext *\/)\n     initInjections(vm) \/\/ resolve injections before data\/props\n     initState(vm)\n     initProvide(vm) \/\/ resolve provide after data\/props\n\n---\n file path A: src\/core\/instance\/lifecycle.ts | file path B: src\/core\/instance\/lifecycle.ts\n\n@@ -375,11 +375,16 @@ export function deactivateChildComponent(vm: Component, direct?: boolean) {\n   }\n }\n \n-export function callHook(vm: Component, hook: string, args?: any[]) {\n+export function callHook(\n+  vm: Component,\n+  hook: string,\n+  args?: any[],\n+  setContext = true\n+) {\n   \/\/ #7573 disable dep collection when invoking lifecycle hooks\n   pushTarget()\n   const prev = currentInstance\n-  setCurrentInstance(vm)\n+  setContext && setCurrentInstance(vm)\n   const handlers = vm.$options[hook]\n   const info = `${hook} hook`\n   if (handlers) {\n@@ -390,6 +395,6 @@ export function callHook(vm: Component, hook: string, args?: any[]) {\n   if (vm._hasHookEvent) {\n     vm.$emit('hook:' + hook)\n   }\n-  setCurrentInstance(prev)\n+  setContext && setCurrentInstance(prev)\n   popTarget()\n }\n\n\n###\n\n","completion":" fix: do not set currentInstance in beforeCreate\n"}
{"prompt":" file path A: src\/core\/components\/keep-alive.ts | file path B: src\/core\/components\/keep-alive.ts\n\n@@ -3,6 +3,7 @@ import { getFirstComponentChild } from 'core\/vdom\/helpers\/index'\n import type VNode from 'core\/vdom\/vnode'\n import type { VNodeComponentOptions } from 'types\/vnode'\n import type { Component } from 'types\/component'\n+import { getComponentName } from '..\/vdom\/create-component'\n \n type CacheEntry = {\n   name?: string\n@@ -12,8 +13,8 @@ type CacheEntry = {\n \n type CacheEntryMap = Record<string, CacheEntry | null>\n \n-function getComponentName(opts?: VNodeComponentOptions): string | null {\n-  return opts && (opts.Ctor.options.name || opts.tag)\n+function _getComponentName(opts?: VNodeComponentOptions): string | null {\n+  return opts && (getComponentName(opts.Ctor.options as any) || opts.tag)\n }\n \n function matches(\n@@ -81,7 +82,7 @@ export default {\n       if (vnodeToCache) {\n         const { tag, componentInstance, componentOptions } = vnodeToCache\n         cache[keyToCache] = {\n-          name: getComponentName(componentOptions),\n+          name: _getComponentName(componentOptions),\n           tag,\n           componentInstance\n         }\n@@ -126,7 +127,7 @@ export default {\n     const componentOptions = vnode && vnode.componentOptions\n     if (componentOptions) {\n       \/\/ check pattern\n-      const name = getComponentName(componentOptions)\n+      const name = _getComponentName(componentOptions)\n       const { include, exclude } = this\n       if (\n         \/\/ not included\n\n---\n file path A: src\/core\/global-api\/extend.ts | file path B: src\/core\/global-api\/extend.ts\n\n@@ -3,6 +3,7 @@ import type { Component } from 'types\/component'\n import type { GlobalAPI } from 'types\/global-api'\n import { defineComputed, proxy } from '..\/instance\/state'\n import { extend, mergeOptions, validateComponentName } from '..\/util\/index'\n+import { getComponentName } from '..\/vdom\/create-component'\n \n export function initExtend(Vue: GlobalAPI) {\n   \/**\n@@ -25,7 +26,8 @@ export function initExtend(Vue: GlobalAPI) {\n       return cachedCtors[SuperId]\n     }\n \n-    const name = extendOptions.name || Super.options.name\n+    const name =\n+      getComponentName(extendOptions) || getComponentName(Super.options)\n     if (__DEV__ && name) {\n       validateComponentName(name)\n     }\n\n---\n file path A: src\/core\/util\/debug.ts | file path B: src\/core\/util\/debug.ts\n\n@@ -2,6 +2,7 @@ import config from '..\/config'\n import { noop, isArray, isFunction } from 'shared\/util'\n import type { Component } from 'types\/component'\n import { currentInstance } from 'v3\/currentInstance'\n+import { getComponentName } from '..\/vdom\/create-component'\n \n export let warn: (msg: string, vm?: Component | null) => void = noop\n export let tip = noop\n@@ -40,7 +41,7 @@ if (__DEV__) {\n         : vm._isVue\n         ? vm.$options || (vm.constructor as any).options\n         : vm\n-    let name = options.name || options._componentTag\n+    let name = getComponentName(options)\n     const file = options.__file\n     if (!name && file) {\n       const match = file.match(\/([^\/\\\\]+)\\.vue$\/)\n\n---\n file path A: src\/core\/vdom\/create-component.ts | file path B: src\/core\/vdom\/create-component.ts\n\n@@ -28,6 +28,10 @@ import type {\n import type { Component } from 'types\/component'\n import type { ComponentOptions, InternalComponentOptions } from 'types\/options'\n \n+export function getComponentName(options: ComponentOptions) {\n+  return options.name || options.__name || options._componentTag\n+}\n+\n \/\/ inline hooks to be invoked on component VNodes during patch\n const componentVNodeHooks = {\n   init(vnode: VNodeWithData, hydrating: boolean): boolean | void {\n@@ -188,7 +192,7 @@ export function createComponent(\n \n   \/\/ return a placeholder vnode\n   \/\/ @ts-expect-error\n-  const name = Ctor.options.name || tag\n+  const name = getComponentName(Ctor.options) || tag\n   const vnode = new VNode(\n     \/\/ @ts-expect-error\n     `vue-component-${Ctor.cid}${name ? `-${name}` : ''}`,\n\n---\n file path A: src\/platforms\/web\/runtime\/components\/transition-group.ts | file path B: src\/platforms\/web\/runtime\/components\/transition-group.ts\n\n@@ -23,6 +23,7 @@ import {\n } from 'web\/runtime\/transition-util'\n import VNode from 'core\/vdom\/vnode'\n import { VNodeWithData } from 'types\/vnode'\n+import { getComponentName } from 'core\/vdom\/create-component'\n \n const props = extend(\n   {\n@@ -72,7 +73,7 @@ export default {\n         } else if (__DEV__) {\n           const opts = c.componentOptions\n           const name: string = opts\n-            ? opts.Ctor.options.name || opts.tag || ''\n+            ? getComponentName(opts.Ctor.options as any) || opts.tag || ''\n             : c.tag\n           warn(`<transition-group> children must be keyed: <${name}>`)\n         }\n\n---\n file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -219,6 +219,8 @@ export interface ComponentOptions<\n   parent?: Vue\n   mixins?: (ComponentOptions<Vue> | typeof Vue)[]\n   name?: string\n+  \/\/ for SFC auto name inference w\/ ts-loader check\n+  __name?: string\n   \/\/ TODO: support properly inferred 'extends'\n   extends?: ComponentOptions<Vue> | typeof Vue\n   delimiters?: [string, string]\n\n\n###\n\n","completion":" fix(sfc): fix sfc name inference type check\n"}
{"prompt":" file path A: types\/test\/v3\/define-component-test.tsx | file path B: types\/test\/v3\/define-component-test.tsx\n\n@@ -1139,9 +1139,14 @@ defineComponent({\n   }\n })\n \n+\/\/ Missing \/ mismatching Vue 2 properties\n \/\/ https:\/\/github.com\/vuejs\/vue\/issues\/12628#issuecomment-1177258223\n defineComponent({\n   render(h) {\n+    this.$listeners\n+    this.$on('foo', () => {})\n+    this.$ssrContext\n+    this.$isServer\n     return h('div', {}, [...this.$slots.default!])\n   }\n })\n\n---\n file path A: types\/v3-component-public-instance.d.ts | file path B: types\/v3-component-public-instance.d.ts\n\n@@ -1,15 +1,11 @@\n-import { ExtractDefaultPropTypes, ExtractPropTypes } from '.\/v3-component-props'\n import {\n   DebuggerEvent,\n-  nextTick,\n   ShallowUnwrapRef,\n-  UnwrapNestedRefs,\n-  WatchOptions,\n-  WatchStopHandle\n+  UnwrapNestedRefs\n } from '.\/v3-generated'\n-import { Data, UnionToIntersection } from '.\/common'\n+import { UnionToIntersection } from '.\/common'\n \n-import { VueConstructor } from '.\/vue'\n+import { Vue, Vue2Instance, VueConstructor } from '.\/vue'\n import {\n   ComputedOptions,\n   MethodOptions,\n@@ -153,37 +149,43 @@ export type ComponentPublicInstance<\n     any,\n     any\n   >\n-> = {\n-  \/\/ $: ComponentInternalInstance\n-  $data: D\n-  $props: Readonly<\n-    MakeDefaultsOptional extends true\n-      ? Partial<Defaults> & Omit<P & PublicProps, keyof Defaults>\n-      : P & PublicProps\n-  >\n-  $attrs: Data\n-  $refs: Data\n-  $slots: Record<string, VNode[] | undefined>\n-  $scopedSlots: Slots\n-  $root: ComponentPublicInstance | null\n-  $parent: ComponentPublicInstance | null\n-  $emit: EmitFn<E>\n-  $el: any\n-  $options: Options & MergedComponentOptionsOverride\n-  $forceUpdate: () => void\n-  $nextTick: typeof nextTick\n-  $watch(\n-    source: string | Function,\n-    cb: Function,\n-    options?: WatchOptions\n-  ): WatchStopHandle\n-} & Readonly<P> &\n+> = Vue3Instance<\n+  D,\n+  P,\n+  PublicProps,\n+  E,\n+  Defaults,\n+  MakeDefaultsOptional,\n+  Options\n+> &\n+  Readonly<P> &\n   ShallowUnwrapRef<B> &\n   UnwrapNestedRefs<D> &\n   ExtractComputedReturns<C> &\n   M &\n   ComponentCustomProperties\n \n+interface Vue3Instance<\n+  D,\n+  P,\n+  PublicProps,\n+  E,\n+  Defaults,\n+  MakeDefaultsOptional,\n+  Options\n+> extends Vue2Instance {\n+  $data: D\n+  readonly $props: Readonly<\n+    MakeDefaultsOptional extends true\n+      ? Partial<Defaults> & Omit<P & PublicProps, keyof Defaults>\n+      : P & PublicProps\n+  >\n+  readonly $root: ComponentPublicInstance | null\n+  readonly $parent: ComponentPublicInstance | null\n+  readonly $emit: EmitFn<E>\n+  readonly $options: Options & MergedComponentOptionsOverride\n+}\n+\n type MergedHook<T = () => void> = T | T[]\n \n export type MergedComponentOptionsOverride = {\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -3,8 +3,6 @@ import {\n   AsyncComponent,\n   ComponentOptions,\n   FunctionalComponentOptions,\n-  WatchOptionsWithHandler,\n-  WatchHandler,\n   DirectiveOptions,\n   DirectiveFunction,\n   RecordPropsDefinition,\n@@ -15,6 +13,7 @@ import {\n import { VNode, VNodeData, VNodeChildren, NormalizedScopedSlot } from '.\/vnode'\n import { PluginFunction, PluginObject } from '.\/plugin'\n import { DefineComponent } from '.\/v3-define-component'\n+import { nextTick } from '.\/v3-generated'\n \n export interface CreateElement {\n   (\n@@ -36,20 +35,25 @@ export interface CreateElement {\n   ): VNode\n }\n \n-export interface Vue {\n-  readonly $el: Element\n-  readonly $options: ComponentOptions<Vue>\n+export interface Vue extends Vue2Instance {\n+  readonly $data: Record<string, any>\n+  readonly $props: Record<string, any>\n   readonly $parent: Vue\n   readonly $root: Vue\n   readonly $children: Vue[]\n+  readonly $options: ComponentOptions<Vue>\n+  $emit(event: string, ...args: any[]): this\n+}\n+\n+export interface Vue2Instance {\n+  readonly $el: Element\n   readonly $refs: {\n     [key: string]: Vue | Element | (Vue | Element)[] | undefined\n   }\n   readonly $slots: { [key: string]: VNode[] | undefined }\n   readonly $scopedSlots: { [key: string]: NormalizedScopedSlot | undefined }\n   readonly $isServer: boolean\n-  readonly $data: Record<string, any>\n-  readonly $props: Record<string, any>\n+\n   readonly $ssrContext: any\n   readonly $vnode: VNode\n   readonly $attrs: Record<string, string>\n@@ -73,9 +77,7 @@ export interface Vue {\n   $on(event: string | string[], callback: Function): this\n   $once(event: string | string[], callback: Function): this\n   $off(event?: string | string[], callback?: Function): this\n-  $emit(event: string, ...args: any[]): this\n-  $nextTick(callback: (this: this) => void): void\n-  $nextTick(): Promise<void>\n+  $nextTick: typeof nextTick\n   $createElement: CreateElement\n }\n \n\n\n###\n\n","completion":" fix(types): fix missing instance properties on defineComponent this\n"}
{"prompt":" file path A: types\/test\/v3\/define-component-test.tsx | file path B: types\/test\/v3\/define-component-test.tsx\n\n@@ -1138,3 +1138,10 @@ defineComponent({\n     }\n   }\n })\n+\n+\/\/ https:\/\/github.com\/vuejs\/vue\/issues\/12628#issuecomment-1177258223\n+defineComponent({\n+  render(h) {\n+    return h('div', {}, [...this.$slots.default!])\n+  }\n+})\n\n---\n file path A: types\/v3-component-public-instance.d.ts | file path B: types\/v3-component-public-instance.d.ts\n\n@@ -18,6 +18,7 @@ import {\n   ComponentOptionsBase\n } from '.\/v3-component-options'\n import { EmitFn, EmitsOptions, Slots } from '.\/v3-setup-context'\n+import { VNode } from '.\/vnode'\n \n \/**\n  * Custom properties added to component instances in any way and can be accessed through `this`\n@@ -162,7 +163,8 @@ export type ComponentPublicInstance<\n   >\n   $attrs: Data\n   $refs: Data\n-  $slots: Slots\n+  $slots: Record<string, VNode[] | undefined>\n+  $scopedSlots: Slots\n   $root: ComponentPublicInstance | null\n   $parent: ComponentPublicInstance | null\n   $emit: EmitFn<E>\n\n\n###\n\n","completion":" fix(types): fix this.$slots type for defineComponent\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -20,7 +20,7 @@ export type Component<\n   | typeof Vue\n   | FunctionalComponentOptions<Props>\n   | ComponentOptions<never, Data, Methods, Computed, Props, SetupBindings>\n-  | DefineComponent<any, any, any, any, any>\n+  | DefineComponent<any, any, any, any, any, any, any, any, any, any, any>\n \n type EsModule<T> = T | { default: T }\n \n@@ -201,9 +201,9 @@ export interface ComponentOptions<\n   directives?: { [key: string]: DirectiveFunction | DirectiveOptions }\n   components?: {\n     [key: string]:\n-      | Component<any, any, any, any>\n+      | {}\n+      | Component<any, any, any, any, any>\n       | AsyncComponent<any, any, any, any>\n-      | DefineComponent<any, any, any, any, any, any, any, any, any, any>\n   }\n   transitions?: { [key: string]: object }\n   filters?: { [key: string]: Function }\n\n---\n file path A: types\/test\/v3\/define-component-test.tsx | file path B: types\/test\/v3\/define-component-test.tsx\n\n@@ -1115,3 +1115,26 @@ describe('functional w\/ object props', () => {\n   \/\/ @ts-expect-error\n   ;<Foo bar={123} \/>\n })\n+\n+\/\/ #12628\n+defineComponent({\n+  components: {\n+    App: defineComponent({})\n+  },\n+  data() {\n+    return {}\n+  },\n+  provide(): any {\n+    return {\n+      fetchData: this.fetchData\n+    }\n+  },\n+  created() {\n+    this.fetchData()\n+  },\n+  methods: {\n+    fetchData() {\n+      throw new Error('Not implemented.')\n+    }\n+  }\n+})\n\n\n###\n\n","completion":" fix(types): fix type inference when using components option\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/render-static.ts | file path B: src\/core\/instance\/render-helpers\/render-static.ts\n\n@@ -18,7 +18,7 @@ export function renderStatic(\n   \/\/ otherwise, render a fresh tree.\n   tree = cached[index] = this.$options.staticRenderFns[index].call(\n     this._renderProxy,\n-    null,\n+    this._c,\n     this \/\/ for render fns generated for functional component templates\n   )\n   markStatic(tree, `__static__${index}`, false)\n\n\n###\n\n","completion":" fix: pass element creation helper to static render fns for functional components\n"}
{"prompt":" file path A: src\/v3\/apiWatch.ts | file path B: src\/v3\/apiWatch.ts\n\n@@ -320,8 +320,8 @@ function doWatch(\n   } else {\n     \/\/ pre\n     watcher.update = () => {\n-      if (instance && instance === currentInstance) {\n-        \/\/ pre-watcher triggered inside setup()\n+      if (instance && instance === currentInstance && !instance._isMounted) {\n+        \/\/ pre-watcher triggered before\n         const buffer = instance._preWatchers || (instance._preWatchers = [])\n         if (buffer.indexOf(watcher) < 0) buffer.push(watcher)\n       } else {\n\n---\n file path A: test\/unit\/features\/v3\/apiWatch.spec.ts | file path B: test\/unit\/features\/v3\/apiWatch.spec.ts\n\n@@ -1116,4 +1116,24 @@ describe('api: watch', () => {\n     await nextTick()\n     expect(order).toMatchObject([`mounted`, `watcher`])\n   })\n+\n+  \/\/ #12624\n+  test('pre watch triggered in mounted hook', async () => {\n+    const spy = vi.fn()\n+    new Vue({\n+      setup() {\n+        const c = ref(0)\n+\n+        onMounted(() => {\n+          c.value++\n+        })\n+\n+        watchEffect(() => spy(c.value))\n+        return () => {}\n+      }\n+    }).$mount()\n+    expect(spy).toHaveBeenCalledTimes(1)\n+    await nextTick()\n+    expect(spy).toHaveBeenCalledTimes(2)\n+  })\n })\n\n\n###\n\n","completion":" fix(watch): fix watchers triggered in mounted hook\n"}
{"prompt":" file path A: None | file path B: dist\/vue.runtime.mjs\n\n@@ -0,0 +1,75 @@\n+import Vue from '.\/vue.runtime.common.js'\r\n+export default Vue\r\n+\r\n+\/\/ this should be kept in sync with src\/v3\/index.ts\r\n+export const {\r\n+  version,\r\n+\r\n+  \/\/ refs\r\n+  ref,\r\n+  shallowRef,\r\n+  isRef,\r\n+  toRef,\r\n+  toRefs,\r\n+  unref,\r\n+  proxyRefs,\r\n+  customRef,\r\n+  triggerRef,\r\n+  computed,\r\n+\r\n+  \/\/ reactive\r\n+  reactive,\r\n+  isReactive,\r\n+  isReadonly,\r\n+  isShallow,\r\n+  isProxy,\r\n+  shallowReactive,\r\n+  markRaw,\r\n+  toRaw,\r\n+  readonly,\r\n+  shallowReadonly,\r\n+\r\n+  \/\/ watch\r\n+  watch,\r\n+  watchEffect,\r\n+  watchPostEffect,\r\n+  watchSyncEffect,\r\n+\r\n+  \/\/ effectScope\r\n+  effectScope,\r\n+  onScopeDispose,\r\n+  getCurrentScope,\r\n+\r\n+  \/\/ provide \/ inject\r\n+  provide,\r\n+  inject,\r\n+\r\n+  \/\/ lifecycle\r\n+  onBeforeMount,\r\n+  onMounted,\r\n+  onBeforeUpdate,\r\n+  onUpdated,\r\n+  onUnmounted,\r\n+  onErrorCaptured,\r\n+  onActivated,\r\n+  onDeactivated,\r\n+  onServerPrefetch,\r\n+  onRenderTracked,\r\n+  onRenderTriggered,\r\n+\r\n+  \/\/ v2 only\r\n+  set,\r\n+  del,\r\n+\r\n+  \/\/ v3 compat\r\n+  h,\r\n+  getCurrentInstance,\r\n+  useSlots,\r\n+  useAttrs,\r\n+  mergeDefaults,\r\n+  nextTick,\r\n+  useCssModule,\r\n+  useCssVars,\r\n+  defineComponent,\r\n+  defineAsyncComponent\r\n+} = Vue\r\n\n---\n file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -71,13 +71,6 @@ const builds = {\n     format: 'es',\n     banner\n   },\n-  \/\/ Runtime only ES modules build (for Node)\n-  'runtime-mjs': {\n-    entry: resolve('web\/entry-runtime-esm.ts'),\n-    dest: resolve('dist\/vue.runtime.mjs'),\n-    format: 'es',\n-    banner\n-  },\n   \/\/ Runtime+compiler ES modules build (for bundlers)\n   'full-esm': {\n     entry: resolve('web\/entry-runtime-with-compiler-esm.ts'),\n\n---\n file path A: src\/v3\/index.ts | file path B: src\/v3\/index.ts\n\n@@ -1,3 +1,7 @@\n+\/**\n+ * Note: also update dist\/vue.runtime.mjs when adding new exports to this file.\n+ *\/\n+\n export const version: string = '__VERSION__'\n \n export {\n\n\n###\n\n","completion":" fix(build): fix mjs dual package hazard\n"}
{"prompt":" file path A: types\/test\/v3\/define-component-test.tsx | file path B: types\/test\/v3\/define-component-test.tsx\n\n@@ -1079,3 +1079,39 @@ export default {\n     }\n   })\n }\n+\n+describe('functional w\/ array props', () => {\n+  const Foo = defineComponent({\n+    functional: true,\n+    props: ['foo'],\n+    render(h, ctx) {\n+      ctx.props.foo\n+      \/\/ @ts-expect-error\n+      ctx.props.bar\n+    }\n+  })\n+\n+  ;<Foo foo=\"hi\" \/>\n+  \/\/ @ts-expect-error\n+  ;<Foo bar={123} \/>\n+})\n+\n+describe('functional w\/ object props', () => {\n+  const Foo = defineComponent({\n+    functional: true,\n+    props: {\n+      foo: String\n+    },\n+    render(h, ctx) {\n+      ctx.props.foo\n+      \/\/ @ts-expect-error\n+      ctx.props.bar\n+    }\n+  })\n+\n+  ;<Foo foo=\"hi\" \/>\n+  \/\/ @ts-expect-error\n+  ;<Foo foo={123} \/>\n+  \/\/ @ts-expect-error\n+  ;<Foo bar={123} \/>\n+})\n\n---\n file path A: types\/v3-define-component.d.ts | file path B: types\/v3-define-component.d.ts\n\n@@ -18,6 +18,7 @@ import {\n } from '.\/v3-component-public-instance'\n import { Data, HasDefined } from '.\/common'\n import { EmitsOptions } from '.\/v3-setup-context'\n+import { CreateElement, RenderContext } from '.\/umd'\n \n type DefineComponent<\n   PropsOrPropOptions = {},\n@@ -66,6 +67,30 @@ type DefineComponent<\n     props: PropsOrPropOptions\n   }\n \n+\/**\n+ * overload 0.0: functional component with array props\n+ *\/\n+export function defineComponent<\n+  PropNames extends string,\n+  Props = Readonly<{ [key in PropNames]?: any }>\n+>(options: {\n+  functional: true\n+  props?: PropNames[]\n+  render?: (h: CreateElement, context: RenderContext<Props>) => any\n+}): DefineComponent<Props>\n+\n+\/**\n+ * overload 0.1: functional component with object props\n+ *\/\n+export function defineComponent<\n+  PropsOptions extends ComponentPropsOptions = ComponentPropsOptions,\n+  Props = ExtractPropTypes<PropsOptions>\n+>(options: {\n+  functional: true\n+  props?: PropsOptions\n+  render?: (h: CreateElement, context: RenderContext<Props>) => any\n+}): DefineComponent<PropsOptions>\n+\n \/**\n  * overload 1: object format with no props\n  *\/\n\n\n###\n\n","completion":" feat: support functional components in defineComponent\n"}
{"prompt":" file path A: types\/test\/v3\/define-component-test.tsx | file path B: types\/test\/v3\/define-component-test.tsx\n\n@@ -1,3 +1,4 @@\n+import Vue, { VueConstructor } from '..\/..\/index'\n import {\n   Component,\n   defineComponent,\n@@ -8,12 +9,12 @@ import {\n } from '..\/..\/index'\n import { describe, test, expectType, expectError, IsUnion } from '..\/utils'\n \n-defineComponent({\n-  props: {\n-    foo: Number\n-  },\n-  render() {\n-    this.foo\n+describe('compat with v2 APIs', () => {\n+  const comp = defineComponent({})\n+\n+  Vue.component('foo', comp)\n+  function install(app: VueConstructor) {\n+    app.component('foo', comp)\n   }\n })\n \n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -14,6 +14,7 @@ import {\n } from '.\/options'\n import { VNode, VNodeData, VNodeChildren, NormalizedScopedSlot } from '.\/vnode'\n import { PluginFunction, PluginObject } from '.\/plugin'\n+import { DefineComponent } from '.\/v3-define-component'\n \n export interface CreateElement {\n   (\n@@ -313,6 +314,10 @@ export interface VueConstructor<V extends Vue = Vue> {\n     id: string,\n     definition?: ComponentOptions<V>\n   ): ExtendedVue<V, {}, {}, {}, {}, {}>\n+  component<T extends DefineComponent<any, any, any, any, any, any, any, any>>(\n+    id: string,\n+    definition?: T\n+  ): T\n \n   use<T>(\n     plugin: PluginObject<T> | PluginFunction<T>,\n\n\n###\n\n","completion":" fix(types): global component registration type compat w\/ defineComponent\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/parseComponent.ts | file path B: packages\/compiler-sfc\/src\/parseComponent.ts\n\n@@ -10,7 +10,6 @@ export const DEFAULT_FILENAME = 'anonymous.vue'\n const splitRE = \/\\r?\\n\/g\n const replaceRE = \/.\/g\n const isSpecialTag = makeMap('script,style,template', true)\n-const isNeedIndentLang = makeMap('pug,jade')\n \n export interface SFCCustomBlock {\n   type: string\n@@ -179,9 +178,13 @@ export function parseComponent(\n       currentBlock.end = start\n       let text = source.slice(currentBlock.start, currentBlock.end)\n       if (\n-        options.deindent ||\n-        \/\/ certain langs like pug are indent sensitive, preserve old behavior\n-        (currentBlock.lang && isNeedIndentLang(currentBlock.lang))\n+        options.deindent === true ||\n+        \/\/ by default, deindent unless it's script with default lang or ts\n+        (options.deindent !== false &&\n+          !(\n+            currentBlock.type === 'script' &&\n+            (!currentBlock.lang || currentBlock.lang === 'ts')\n+          ))\n       ) {\n         text = deindent(text)\n       }\n\n---\n file path A: packages\/compiler-sfc\/test\/parseComponent.spec.ts | file path B: packages\/compiler-sfc\/test\/parseComponent.spec.ts\n\n@@ -25,8 +25,7 @@ describe('Single File Component parser', () => {\n       <div>\n         <style>nested should be ignored<\/style>\n       <\/div>\n-    `,\n-      { deindent: true }\n+    `\n     )\n     expect(res.template!.content.trim()).toBe('<div>hi<\/div>')\n     expect(res.styles.length).toBe(4)\n@@ -76,8 +75,7 @@ describe('Single File Component parser', () => {\n       <\/style>\n     `\n     const deindentDefault = parseComponent(content.trim(), {\n-      pad: false,\n-      deindent: true\n+      pad: false\n     })\n     const deindentEnabled = parseComponent(content.trim(), {\n       pad: false,\n@@ -89,7 +87,9 @@ describe('Single File Component parser', () => {\n     })\n \n     expect(deindentDefault.template!.content).toBe('\\n<div><\/div>\\n')\n-    expect(deindentDefault.script!.content).toBe('\\nexport default {}\\n')\n+    expect(deindentDefault.script!.content).toBe(\n+      '\\n        export default {}\\n      '\n+    )\n     expect(deindentDefault.styles[0].content).toBe('\\nh1 { color: red }\\n')\n     expect(deindentEnabled.template!.content).toBe('\\n<div><\/div>\\n')\n     expect(deindentEnabled.script!.content).toBe('\\nexport default {}\\n')\n@@ -203,8 +203,7 @@ describe('Single File Component parser', () => {\n       }\n       <\/test>\n       <custom src=\".\/x.json\"><\/custom>\n-    `,\n-      { deindent: true }\n+    `\n     )\n     expect(res.customBlocks.length).toBe(4)\n \n\n\n###\n\n","completion":" fix(compiler-sfc): use safer deindent default for compatibility with previous behavior\n"}
{"prompt":" file path A: packages\/server-renderer\/test\/ssr-reactivity.spec.ts | file path B: packages\/server-renderer\/test\/ssr-reactivity.spec.ts\n\n@@ -93,6 +93,10 @@ describe('SSR Reactive', () => {\n \n     set(state.value, 1, {})\n     expect(isReactive(state.value[1])).toBe(true)\n+\n+    const rawArr = []\n+    set(rawArr, 1, {})\n+    expect(isReactive(rawArr[1])).toBe(false)\n   })\n \n   \/\/ #550\n\n---\n file path A: src\/core\/observer\/index.ts | file path B: src\/core\/observer\/index.ts\n\n@@ -241,7 +241,7 @@ export function set(\n     target.length = Math.max(target.length, key)\n     target.splice(key, 1, val)\n     \/\/ when mocking for SSR, array methods are not hijacked\n-    if (!ob.shallow && ob.mock) {\n+    if (ob && !ob.shallow && ob.mock) {\n       observe(val, false, true)\n     }\n     return val\n\n\n###\n\n","completion":" fix(ssr\/reactivity): fix array setting error at created in ssr [#12632] (#<issue-num>)\n"}
{"prompt":" file path A: src\/shared\/constants.ts | file path B: src\/shared\/constants.ts\n\n@@ -14,5 +14,7 @@ export const LIFECYCLE_HOOKS = [\n   'activated',\n   'deactivated',\n   'errorCaptured',\n-  'serverPrefetch'\n+  'serverPrefetch',\n+  'renderTracked',\n+  'renderTriggered'\n ] as const\n\n\n###\n\n","completion":" fix: add renderTracked\/Triggered merge strategy (#<issue-num>)\n"}
{"prompt":" file path A: types\/jsx.d.ts | file path B: types\/jsx.d.ts\n\n@@ -1303,6 +1303,12 @@ type EventHandlers<E> = {\n type ReservedProps = {\n   key?: string | number | symbol\n   ref?: VNodeData['ref']\n+  \/**\n+   * @deprecated Old named slot syntax has been deprecated, use the new syntax\n+   * instead: `<template v-slot:name>`\n+   * https:\/\/v2.vuejs.org\/v2\/guide\/components-slots.html#Named-Slots\n+   *\/\n+  slot?: string\n }\n \n type ElementAttrs<T> = T & ReservedProps\n\n---\n file path A: types\/test\/v3\/tsx-test.tsx | file path B: types\/test\/v3\/tsx-test.tsx\n\n@@ -51,3 +51,5 @@ const Foo = defineComponent({\n \/\/ working\n ;<Foo bar={1} \/>\n ;<Foo bar={1} foo=\"baz\" \/>\n+\n+;<div slot=\"x\" \/>\n\n\n###\n\n","completion":" fix(types): allow slot attribute\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/parseComponent.ts | file path B: packages\/compiler-sfc\/src\/parseComponent.ts\n\n@@ -10,6 +10,7 @@ export const DEFAULT_FILENAME = 'anonymous.vue'\n const splitRE = \/\\r?\\n\/g\n const replaceRE = \/.\/g\n const isSpecialTag = makeMap('script,style,template', true)\n+const isNeedIndentLang = makeMap('pug,jade')\n \n export interface SFCCustomBlock {\n   type: string\n@@ -177,7 +178,11 @@ export function parseComponent(\n     if (depth === 1 && currentBlock) {\n       currentBlock.end = start\n       let text = source.slice(currentBlock.start, currentBlock.end)\n-      if (options.deindent) {\n+      if (\n+        options.deindent ||\n+        \/\/ certain langs like pug are indent sensitive, preserve old behavior\n+        (currentBlock.lang && isNeedIndentLang(currentBlock.lang))\n+      ) {\n         text = deindent(text)\n       }\n       \/\/ pad content so that linters and pre-processors can output correct\n\n\n###\n\n","completion":" fix(compiler-sfc): preserve old deindent behavior for pug\n"}
{"prompt":" file path A: src\/core\/vdom\/modules\/directives.ts | file path B: src\/core\/vdom\/modules\/directives.ts\n\n@@ -94,7 +94,7 @@ function normalizeDirectives(\n     \/\/ $flow-disable-line\n     return res\n   }\n-  let i, dir\n+  let i: number, dir: VNodeDirective\n   for (i = 0; i < dirs.length; i++) {\n     dir = dirs[i]\n     if (!dir.modifiers) {\n@@ -103,7 +103,7 @@ function normalizeDirectives(\n     }\n     res[getRawDirName(dir)] = dir\n     if (vm._setupState && vm._setupState.__sfc) {\n-      dir.def = resolveAsset(vm, '_setupState', 'v-' + dir.name)\n+      dir.def = dir.def || resolveAsset(vm, '_setupState', 'v-' + dir.name)\n     }\n     dir.def = dir.def || resolveAsset(vm.$options, 'directives', dir.name, true)\n   }\n\n---\n file path A: types\/vnode.d.ts | file path B: types\/vnode.d.ts\n\n@@ -1,4 +1,5 @@\n import { Vue } from '.\/vue'\n+import { DirectiveFunction, DirectiveOptions } from '.\/options'\n \n export type ScopedSlot = (props: any) => ScopedSlotReturnValue\n type ScopedSlotReturnValue =\n@@ -86,4 +87,5 @@ export interface VNodeDirective {\n   arg?: string\n   oldArg?: string\n   modifiers?: { [key: string]: boolean }\n+  def?: DirectiveFunction | DirectiveOptions\n }\n\n\n###\n\n","completion":" feat: allow passing directive definition directly to h() (#<issue-num>)\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/compileScript.ts | file path B: packages\/compiler-sfc\/src\/compileScript.ts\n\n@@ -39,7 +39,7 @@ import { walk } from 'estree-walker'\n import { RawSourceMap } from 'source-map'\n import { warnOnce } from '.\/warn'\n import { isReservedTag } from 'web\/util'\n-import { dirRE } from 'compiler\/parser'\n+import { bindRE, dirRE, onRE } from 'compiler\/parser'\n import { parseText } from 'compiler\/parser\/text-parser'\n import { DEFAULT_FILENAME } from '.\/parseComponent'\n import {\n@@ -278,8 +278,7 @@ export function compileScript(\n     local: string,\n     imported: string | false,\n     isType: boolean,\n-    isFromSetup: boolean,\n-    needTemplateUsageCheck: boolean\n+    isFromSetup: boolean\n   ) {\n     if (source === 'vue' && imported) {\n       userImportAlias[imported] = local\n@@ -287,14 +286,8 @@ export function compileScript(\n \n     \/\/ template usage check is only needed in non-inline mode, so we can skip\n     \/\/ the work if inlineTemplate is true.\n-    let isUsedInTemplate = needTemplateUsageCheck\n-    if (\n-      needTemplateUsageCheck &&\n-      isTS &&\n-      sfc.template &&\n-      !sfc.template.src &&\n-      !sfc.template.lang\n-    ) {\n+    let isUsedInTemplate = true\n+    if (isTS && sfc.template && !sfc.template.src && !sfc.template.lang) {\n       isUsedInTemplate = isImportUsed(local, sfc)\n     }\n \n@@ -658,8 +651,7 @@ export function compileScript(\n             node.importKind === 'type' ||\n               (specifier.type === 'ImportSpecifier' &&\n                 specifier.importKind === 'type'),\n-            false,\n-            true\n+            false\n           )\n         }\n       } else if (node.type === 'ExportDefaultDeclaration') {\n@@ -872,7 +864,6 @@ export function compileScript(\n             node.importKind === 'type' ||\n               (specifier.type === 'ImportSpecifier' &&\n                 specifier.importKind === 'type'),\n-            true,\n             true\n           )\n         }\n@@ -1809,7 +1800,11 @@ function resolveTemplateUsageCheckString(sfc: SFCDescriptor) {\n       for (let i = 0; i < attrs.length; i++) {\n         const { name, value } = attrs[i]\n         if (dirRE.test(name)) {\n-          const baseName = name.replace(dirRE, '')\n+          const baseName = onRE.test(name)\n+            ? 'on'\n+            : bindRE.test(name)\n+            ? 'bind'\n+            : name.replace(dirRE, '')\n           if (!isBuiltInDir(baseName)) {\n             code += `,v${capitalize(camelize(baseName))}`\n           }\n@@ -1838,6 +1833,8 @@ function processExp(exp: string, dir?: string): string {\n   if (\/ as\\s+\\w|<.*>|:\/.test(exp)) {\n     if (dir === 'slot') {\n       exp = `(${exp})=>{}`\n+    } else if (dir === 'on') {\n+      exp = `()=>{${exp}}`\n     } else if (dir === 'for') {\n       const inMatch = exp.match(forAliasRE)\n       if (inMatch) {\n\n---\n file path A: packages\/compiler-sfc\/test\/compileScript.spec.ts | file path B: packages\/compiler-sfc\/test\/compileScript.spec.ts\n\n@@ -1562,5 +1562,17 @@ describe('SFC analyze <script> bindings', () => {\n       expect(content).toMatch(`name: 'Baz'`)\n       assertCode(content)\n     })\n+\n+    \/\/ #12591\n+    test('should not error when performing ts expression check for v-on inline statement', () => {\n+      compile(`\n+      <script setup lang=\"ts\">\n+        import { foo } from '.\/foo'\n+      <\/script>\n+      <template>\n+        <div @click=\"$emit('update:a');\"><\/div>\n+      <\/tempalte>\n+      `)\n+    })\n   })\n })\n\n\n###\n\n","completion":" fix(compiler-sfc): fix template usage check edge case for v-on statements\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/templateCompilerModules\/srcset.ts | file path B: packages\/compiler-sfc\/src\/templateCompilerModules\/srcset.ts\n\n@@ -38,7 +38,7 @@ function transform(\n         }\n \n         const imageCandidates: ImageCandidate[] = value\n-          .substr(1, value.length - 2)\n+          .slice(1, -1)\n           .split(',')\n           .map(s => {\n             \/\/ The attribute value arrives here with all whitespace, except\n\n\n###\n\n","completion":" chore(compiler-sfc): replace `substr` with `slice` (#<issue-num>)\n"}
{"prompt":" file path A: src\/v3\/apiWatch.ts | file path B: src\/v3\/apiWatch.ts\n\n@@ -221,7 +221,7 @@ function doWatch(\n   } else if (isFunction(source)) {\n     if (cb) {\n       \/\/ getter with cb\n-      getter = () => call(source as Function, WATCHER_GETTER)\n+      getter = () => call(source, WATCHER_GETTER)\n     } else {\n       \/\/ no cb -> simple effect\n       getter = () => {\n@@ -231,7 +231,7 @@ function doWatch(\n         if (cleanup) {\n           cleanup()\n         }\n-        return call(source as Function, WATCHER, [onCleanup])\n+        return call(source, WATCHER, [onCleanup])\n       }\n     }\n   } else {\n\n\n###\n\n","completion":" chore(types): remove unnecessary type assertion (#<issue-num>)\n"}
{"prompt":" file path A: benchmarks\/ssr\/renderToStream.js | file path B: benchmarks\/ssr\/renderToStream.js\n\n@@ -5,7 +5,7 @@\n process.env.NODE_ENV = 'production'\n \n const Vue = require('..\/..\/dist\/vue.runtime.common.js')\n-const createRenderer = require('..\/..\/packages\/vue-server-renderer').createRenderer\n+const createRenderer = require('..\/..\/packages\/server-renderer').createRenderer\n const renderToStream = createRenderer().renderToStream\n const gridComponent = require('.\/common.js')\n \n\n---\n file path A: benchmarks\/ssr\/renderToString.js | file path B: benchmarks\/ssr\/renderToString.js\n\n@@ -3,7 +3,7 @@\n process.env.NODE_ENV = 'production'\n \n const Vue = require('..\/..\/dist\/vue.runtime.common.js')\n-const createRenderer = require('..\/..\/packages\/vue-server-renderer').createRenderer\n+const createRenderer = require('..\/..\/packages\/server-renderer').createRenderer\n const renderToString = createRenderer().renderToString\n const gridComponent = require('.\/common.js')\n \n\n\n###\n\n","completion":" chore(benchmarks:ssr): createRenderer function path error (#<issue-num>)\n"}
{"prompt":" file path A: src\/v3\/apiSetup.ts | file path B: src\/v3\/apiSetup.ts\n\n@@ -12,7 +12,7 @@ import {\n } from '..\/shared\/util'\n import { currentInstance, setCurrentInstance } from '.\/currentInstance'\n import { shallowReactive } from '.\/reactivity\/reactive'\n-import { isRef } from '.\/reactivity\/ref'\n+import { proxyWithRefUnwrap } from '.\/reactivity\/ref'\n \n \/**\n  * @internal\n@@ -68,7 +68,9 @@ export function initSetup(vm: Component) {\n         \/\/ exposed for compiled render fn\n         const proxy = (vm._setupProxy = {})\n         for (const key in setupResult) {\n-          proxyWithRefUnwrap(proxy, setupResult, key)\n+          if (key !== '__sfc') {\n+            proxyWithRefUnwrap(proxy, setupResult, key)\n+          }\n         }\n       }\n     } else if (__DEV__ && setupResult !== undefined) {\n@@ -81,25 +83,6 @@ export function initSetup(vm: Component) {\n   }\n }\n \n-export function proxyWithRefUnwrap(\n-  target: any,\n-  source: Record<string, any>,\n-  key: string\n-) {\n-  Object.defineProperty(target, key, {\n-    enumerable: true,\n-    configurable: true,\n-    get: () => {\n-      const raw = source[key]\n-      return isRef(raw) ? raw.value : raw\n-    },\n-    set: newVal => {\n-      const raw = source[key]\n-      isRef(raw) ? (raw.value = newVal) : (source[key] = newVal)\n-    }\n-  })\n-}\n-\n function createSetupContext(vm: Component): SetupContext {\n   let exposeCalled = false\n   return {\n\n---\n file path A: src\/v3\/index.ts | file path B: src\/v3\/index.ts\n\n@@ -7,6 +7,7 @@ export {\n   toRef,\n   toRefs,\n   unref,\n+  proxyRefs,\n   customRef,\n   triggerRef,\n   Ref,\n\n---\n file path A: src\/v3\/reactivity\/ref.ts | file path B: src\/v3\/reactivity\/ref.ts\n\n@@ -93,6 +93,40 @@ export function unref<T>(ref: T | Ref<T>): T {\n   return isRef(ref) ? (ref.value as any) : ref\n }\n \n+export function proxyRefs<T extends object>(\n+  objectWithRefs: T\n+): ShallowUnwrapRef<T> {\n+  if (isReactive(objectWithRefs)) {\n+    return objectWithRefs as any\n+  }\n+  const proxy = {}\n+  const keys = Object.keys(objectWithRefs)\n+  for (let i = 0; i < keys.length; i++) {\n+    proxyWithRefUnwrap(proxy, objectWithRefs, keys[i])\n+  }\n+  return proxy as any\n+}\n+\n+export function proxyWithRefUnwrap(\n+  target: any,\n+  source: Record<string, any>,\n+  key: string\n+) {\n+  Object.defineProperty(target, key, {\n+    enumerable: true,\n+    configurable: true,\n+    get: () => unref(source[key]),\n+    set: value => {\n+      const oldValue = source[key]\n+      if (isRef(oldValue) && !isRef(value)) {\n+        oldValue.value = value\n+      } else {\n+        source[key] = value\n+      }\n+    }\n+  })\n+}\n+\n export type CustomRefFactory<T> = (\n   track: () => void,\n   trigger: () => void\n\n\n###\n\n","completion":" fix: export proxyRefs\n"}
{"prompt":" file path A: test\/unit\/features\/v3\/reactivity\/shallowReactive.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/shallowReactive.spec.ts\n\n@@ -1,7 +1,9 @@\n import {\n   isReactive,\n+  isRef,\n   isShallow,\n   reactive,\n+  ref,\n   shallowReactive,\n   shallowReadonly\n } from 'v3'\n@@ -34,6 +36,15 @@ describe('shallowReactive', () => {\n     expect(isReactive(r.foo.bar)).toBe(false)\n   })\n \n+  \/\/ #12597\n+  test('should not unwrap refs', () => {\n+    const foo = shallowReactive({\n+      bar: ref(123)\n+    })\n+    expect(isRef(foo.bar)).toBe(true)\n+    expect(foo.bar.value).toBe(123)\n+  })\n+\n   \/\/ @discrepancy no shallow\/non-shallow versions from the same source -\n   \/\/ cannot support this without real proxies\n   \/\/ #2843\n\n\n###\n\n","completion":" test: test case for #12597\n"}
{"prompt":" file path A: src\/shared\/util.ts | file path B: src\/shared\/util.ts\n\n@@ -361,6 +361,6 @@ export function hasChanged(x: unknown, y: unknown): boolean {\n   if (x === y) {\n     return x === 0 && 1 \/ x !== 1 \/ (y as number)\n   } else {\n-    return x === x && y === y\n+    return x === x || y === y\n   }\n }\n\n---\n file path A: test\/unit\/features\/v3\/reactivity\/reactive.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/reactive.spec.ts\n\n@@ -278,4 +278,29 @@ describe('reactivity\/reactive', () => {\n     const observed = reactive(original)\n     expect(isReactive(observed)).toBe(false)\n   })\n+\n+  \/\/ #12595\n+  test(`should not trigger if value didn't change`, () => {\n+    const state = reactive({\n+      foo: 1\n+    })\n+    const spy = vi.fn()\n+    effect(() => {\n+      state.foo\n+      spy()\n+    })\n+    expect(spy).toHaveBeenCalledTimes(1)\n+\n+    state.foo = 1\n+    expect(spy).toHaveBeenCalledTimes(1)\n+\n+    state.foo = NaN\n+    expect(spy).toHaveBeenCalledTimes(2)\n+\n+    state.foo = NaN\n+    expect(spy).toHaveBeenCalledTimes(2)\n+\n+    state.foo = 2\n+    expect(spy).toHaveBeenCalledTimes(3)\n+  })\n })\n\n\n###\n\n","completion":" fix: fix NaN comparison on state change\n"}
{"prompt":" file path A: src\/core\/observer\/index.ts | file path B: src\/core\/observer\/index.ts\n\n@@ -181,7 +181,7 @@ export function defineReactive(\n           }\n         }\n       }\n-      return isRef(value) ? value.value : value\n+      return isRef(value) && !shallow ? value.value : value\n     },\n     set: function reactiveSetter(newVal) {\n       const value = getter ? getter.call(obj) : val\n\n\n###\n\n","completion":" fix(reactivity):  shallowReactive should not unwrap refs (#<issue-num>)\n"}
{"prompt":" file path A: CHANGELOG.md | file path B: CHANGELOG.md\n\n@@ -2,8 +2,6 @@\n \n ## Backported Features\n \n-2.7 backports some of the most important features from Vue 3 so that Vue 2 users can benefit from them as well:\n-\n - [Composition API](https:\/\/vuejs.org\/guide\/extras\/composition-api-faq.html)\n - SFC [`<script setup>`](https:\/\/vuejs.org\/api\/sfc-script-setup.html)\n - SFC [CSS v-bind](https:\/\/vuejs.org\/api\/sfc-css-features.html#v-bind-in-css)\n@@ -80,7 +78,32 @@ In addition, the following features are explicitly **NOT** ported:\n \n 4. If you were previously using [`@vue\/composition-api`](https:\/\/github.com\/vuejs\/composition-api), update imports from it to `vue` instead. Note that some APIs exported by the plugin, e.g. `createApp`, are not ported in 2.7.\n \n-5. The SFC compiler for 2.7 now uses PostCSS 8 (upgraded from 7). PostCSS 8 should be backwards compatible with most plugins, but the upgrade **may** cause issues if you were previously using a custom PostCSS plugin that can only work with PostCSS 7. In such cases, you will need to upgrade the relevant plugins to their PostCSS 8 compatible versions.\n+5. Update `eslint-plugin-vue` to latest version (9+) if you run into unused variable lint errors when using `<script setup>`.\n+\n+6. The SFC compiler for 2.7 now uses PostCSS 8 (upgraded from 7). PostCSS 8 should be backwards compatible with most plugins, but the upgrade **may** cause issues if you were previously using a custom PostCSS plugin that can only work with PostCSS 7. In such cases, you will need to upgrade the relevant plugins to their PostCSS 8 compatible versions.\n+\n+### Vite\n+\n+2.7 support for Vite is provided via a new plugin: [@vitejs\/plugin-vue2](https:\/\/github.com\/vitejs\/vite-plugin-vue2). This new plugin requires Vue 2.7 or above and supersedes the existing [vite-plugin-vue2](https:\/\/github.com\/underfin\/vite-plugin-vue2).\n+\n+Note that the new plugin does not handle Vue-specific JSX \/ TSX transform, which is intentional. Vue 2 JSX \/ TSX transform should be handled in a separate, dedicated plugin, which will be provided soon.\n+\n+### Volar Compatibility\n+\n+2.7 ships improved type definitions so it is no longer necessary to install `@vue\/runtime-dom` just for Volar template type inference support. All you need now is the following config in `tsconfig.json`:\n+\n+```json\n+{\n+  \/\/ ...\n+  \"vueCompilerOptions\": {\n+    \"target\": 2.7\n+  }\n+}\n+```\n+\n+### Devtools Support\n+\n+Vue Devtools 6.2.0 has added support for inspecting 2.7 Composition API state, but the extensions may still need a few days to go through review on respective publishing platforms.\n \n ### Bug Fixes\n \n\n\n###\n\n","completion":" chore: update 2.7 changelog [ci skip]\n"}
{"prompt":" file path A: CHANGELOG.md | file path B: CHANGELOG.md\n\n@@ -1,5 +1,86 @@\n # [2.7.0](https:\/\/github.com\/vuejs\/vue\/compare\/v2.7.0-beta.8...v2.7.0) (2022-07-01)\n \n+## Backported Features\n+\n+2.7 backports some of the most important features from Vue 3 so that Vue 2 users can benefit from them as well:\n+\n+- [Composition API](https:\/\/vuejs.org\/guide\/extras\/composition-api-faq.html)\n+- SFC [`<script setup>`](https:\/\/vuejs.org\/api\/sfc-script-setup.html)\n+- SFC [CSS v-bind](https:\/\/vuejs.org\/api\/sfc-css-features.html#v-bind-in-css)\n+\n+In addition, the following APIs are also supported:\n+\n+- `defineComponent()` with improved type inference (compared to `Vue.extend`)\n+- `h()`, `useSlot()`, `useAttrs()`, `useCssModules()`\n+- `set()`, `del()` and `nextTick()` are also provided as named exports in ESM builds.\n+- The `emits` option is also supported, but only for type-checking purposes (does not affect runtime behavior)\n+\n+  2.7 also supports using ESNext syntax in template expressions. When using a build system, the compiled template render function will go through the same loaders \/ plugins configured for normal JavaScript. This means if you have configured Babel for `.js` files, it will also apply to the expressions in your SFC templates.\n+\n+### Notes on API exposure\n+\n+- In ESM builds, these APIs are provided as named exports (and named exports only):\n+\n+  ```js\n+  import Vue, { ref } from 'vue'\n+\n+  Vue.ref \/\/ undefined, use named export instead\n+  ```\n+\n+- In UMD and CJS builds, these APIs are exposed as properties on the global `Vue` object.\n+\n+- When bundling with CJS builds externalized, bundlers should be able to handle ESM interop when externalizing CJS builds.\n+\n+### Behavior Differences from Vue 3\n+\n+The Composition API is backported using Vue 2's getter\/setter-based reactivity system to ensure browser compatibility. This means there are some important behavior differences from Vue 3's proxy-based system:\n+\n+- All [Vue 2 change detection caveats](https:\/\/v2.vuejs.org\/v2\/guide\/reactivity.html#Change-Detection-Caveats) still apply.\n+\n+- `reactive()`, `ref()`, and `shallowReactive()` will directly convert original objects instead of creating proxies. This means:\n+\n+  ```js\n+  \/\/ true in 2.7, false in 3.x\n+  reactive(foo) === foo\n+  ```\n+\n+- `readonly()` **does** create a separate object, but it won't track newly added properties and does not work on arrays.\n+\n+- Avoid using arrays as root values in `reactive()` because without property access the array's mutation won't be tracked (this will result in a warning).\n+\n+- Reactivity APIs ignore properties with symbol keys.\n+\n+In addition, the following features are explicitly **NOT** ported:\n+\n+-  `createApp()` (Vue 2 doesn't have isolated app scope)\n+-  Top-level `await` in `<script setup>` (Vue 2 does not support async component initialization)\n+-  TypeScript syntax in template expressions (incompatible w\/ Vue 2 parser)\n+-  Reactivity transform (still experimental)\n+-  `expose` option is not supported for options components (but `defineExpose()` is supported in `<script setup>`).\n+\n+## Upgrade Guide\n+\n+### Vue CLI \/ webpack\n+\n+1. Upgrade local `@vue\/cli-xxx` dependencies the latest version in your major version range (if applicable):\n+\n+   - `~4.5.18` for v4\n+   - `~5.0.6` for v5\n+\n+2. Upgrade `vue` to `^2.7.0`. You can also remove `vue-template-compiler` from the dependencies - it is no longer needed in 2.7.\n+\n+   Note: if you are using `@vue\/test-utils`, you may need to keep it in the dependencies for now, but this requirement will also be lifted in a new release of test utils.\n+\n+3. Check your package manager lockfile to ensure the following dependencies meet the version requirements. They may be transitive dependencies not listed in `package.json`.\n+\n+   - `vue-loader`: `^15.10.0`\n+   - `vue-demi`: `^0.13.1`\n+\n+   If not, you will need to remove `node_modules` and the lockfile and perform a fresh install to ensure they are bumped to the latest version.\n+\n+4. If you were previously using [`@vue\/composition-api`](https:\/\/github.com\/vuejs\/composition-api), update imports from it to `vue` instead. Note that some APIs exported by the plugin, e.g. `createApp`, are not ported in 2.7.\n+\n+5. The SFC compiler for 2.7 now uses PostCSS 8 (upgraded from 7). PostCSS 8 should be backwards compatible with most plugins, but the upgrade **may** cause issues if you were previously using a custom PostCSS plugin that can only work with PostCSS 7. In such cases, you will need to upgrade the relevant plugins to their PostCSS 8 compatible versions.\n \n ### Bug Fixes\n \n\n---\n file path A: CHANGELOG.md | file path B: CHANGELOG.md\n\n@@ -1,6 +1,10 @@\n # [2.7.0-alpha.8](https:\/\/github.com\/vuejs\/vue\/compare\/v2.7.0-alpha.7...v2.7.0-alpha.8) (2022-06-14)\n \n+### Features\n \n+- Basic `<script setup>` support. Requires `vue-loader@^15.10.0-beta.1`.\n+  - Component resolution doesn't work yet\n+  - Types for `defineXXX` macros not supported yet\n \n # [2.7.0-alpha.7](https:\/\/github.com\/vuejs\/vue\/compare\/v2.7.0-alpha.6...v2.7.0-alpha.7) (2022-06-14)\n \n\n---\n file path A: CHANGELOG.md | file path B: CHANGELOG.md\n\n@@ -1,5 +1,8 @@\n # [2.7.0-alpha.6](https:\/\/github.com\/vuejs\/vue\/compare\/v2.7.0-alpha.5...v2.7.0-alpha.6) (2022-06-09)\n \n+### Features\n+\n+* Add JSX types for Volar integration. No longer requires `@vue\/runtime-dom` for component props validation in templates.\n \n \n # [2.7.0-alpha.5](https:\/\/github.com\/vuejs\/vue\/compare\/v2.7.0-alpha.4...v2.7.0-alpha.5) (2022-06-06)\n\n---\n file path A: CHANGELOG.md | file path B: CHANGELOG.md\n\n@@ -5,7 +5,9 @@\n \n * guard against non-object provide value ([c319cc7](https:\/\/github.com\/vuejs\/vue\/commit\/c319cc7a74a790414c33db74ad9f1070851de76b))\n \n+### Features\n \n+* `defineComponent` [206f8a7f](https:\/\/github.com\/vuejs\/vue\/commit\/206f8a7f0949a50ae062d9d71061716ae3c3a749)\n \n # [2.7.0-alpha.3](https:\/\/github.com\/vuejs\/vue\/compare\/v2.7.0-alpha.2...v2.7.0-alpha.3) (2022-06-01)\n \n\n\n###\n\n","completion":" chore: changelog [ci skip]\n"}
{"prompt":" file path A: scripts\/release.js | file path B: scripts\/release.js\n\n@@ -168,7 +168,7 @@ async function publishPackage(pkgName, version, runIfNotDry) {\n     if (releaseTag) {\n       releaseTag = `v2-${releaseTag}`\n     } else {\n-      releaseTag = 'v2'\n+      releaseTag = 'v2-latest'\n     }\n   }\n \n\n\n###\n\n","completion":" chore: use v2-latest release tag\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/compileScript.ts | file path B: packages\/compiler-sfc\/src\/compileScript.ts\n\n@@ -126,7 +126,12 @@ export function compileScript(\n       )\n   }\n   if (options.babelParserPlugins) plugins.push(...options.babelParserPlugins)\n-  if (isTS) plugins.push('typescript', 'decorators-legacy')\n+  if (isTS) {\n+    plugins.push('typescript')\n+    if (!plugins.includes('decorators')) {\n+      plugins.push('decorators-legacy')\n+    }\n+  }\n \n   if (!scriptSetup) {\n     if (!script) {\n\n\n###\n\n","completion":" fix(sfc): only include legacy decorator parser plugin when new plugin is not used\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/templateCompilerModules\/utils.ts | file path B: packages\/compiler-sfc\/src\/templateCompilerModules\/utils.ts\n\n@@ -31,7 +31,6 @@ export function urlToRequire(\n         uriParts.path + (uriParts.hash || '')\n       )}\"`\n     }\n-    return returnValue\n   }\n \n   if (\n\n---\n file path A: packages\/compiler-sfc\/test\/compileTemplate.spec.ts | file path B: packages\/compiler-sfc\/test\/compileTemplate.spec.ts\n\n@@ -207,6 +207,7 @@ test('transform assetUrls and srcset with base option', () => {\n   <img src=\"~fixtures\/logo.png\">\n   <img src=\"~\/fixtures\/logo.png\">\n   <img src=\".\/logo.png\" srcset=\".\/logo.png 2x, .\/logo.png 3x\">\n+  <img src=\"@\/fixtures\/logo.png\">\n <\/div>\n `\n   const result = compileTemplate({\n@@ -218,13 +219,16 @@ test('transform assetUrls and srcset with base option', () => {\n \n   expect(result.errors.length).toBe(0)\n \n-  const vnode = mockRender(result.code)\n+  const vnode = mockRender(result.code, {\n+    '@\/fixtures\/logo.png': 'aliased'\n+  })\n   expect(vnode.children[0].data.attrs.src).toBe('\/base\/logo.png')\n   expect(vnode.children[2].data.attrs.src).toBe('\/base\/fixtures\/logo.png')\n   expect(vnode.children[4].data.attrs.src).toBe('\/base\/fixtures\/logo.png')\n   expect(vnode.children[6].data.attrs.srcset).toBe(\n     '\/base\/logo.png 2x, \/base\/logo.png 3x'\n   )\n+  expect(vnode.children[8].data.attrs.src).toBe('aliased')\n })\n \n test('transform with includeAbsolute', () => {\n\n\n###\n\n","completion":" fix(compiler-sfc): should transform non relative paths when base option is present\n"}
{"prompt":" file path A: scripts\/build.js | file path B: scripts\/build.js\n\n@@ -67,6 +67,9 @@ function write (dest, code, zip) {\n       resolve()\n     }\n \n+    if (!fs.existsSync(path.dirname(dest))) {\n+      fs.mkdirSync(path.dirname(dest), { recursive: true })\n+    }\n     fs.writeFile(dest, code, err => {\n       if (err) return reject(err)\n       if (zip) {\n\n\n###\n\n","completion":" chore: create build target dir if does not exist (#<issue-num>)\n"}
{"prompt":" file path A: types\/v3-directive.ts | file path B: types\/v3-directive.d.ts\n\n\n\n###\n\n","completion":" fix: types\/v3-directive not published (#<issue-num>)\n"}
{"prompt":" file path A: src\/v3\/apiWatch.ts | file path B: src\/v3\/apiWatch.ts\n\n@@ -320,11 +320,12 @@ function doWatch(\n   } else {\n     \/\/ pre\n     watcher.update = () => {\n-      if (!instance || instance._isMounted) {\n-        queueWatcher(watcher)\n-      } else {\n+      if (instance && instance === currentInstance) {\n+        \/\/ pre-watcher triggered inside setup()\n         const buffer = instance._preWatchers || (instance._preWatchers = [])\n         if (buffer.indexOf(watcher) < 0) buffer.push(watcher)\n+      } else {\n+        queueWatcher(watcher)\n       }\n     }\n   }\n\n---\n file path A: test\/unit\/features\/v3\/apiWatch.spec.ts | file path B: test\/unit\/features\/v3\/apiWatch.spec.ts\n\n@@ -628,9 +628,8 @@ describe('api: watch', () => {\n     expect(calls).toMatchObject(['watch 3', 'mounted'])\n   })\n \n-  \/\/ TODO\n   \/\/ vuejs\/core#1852\n-  it.skip('flush: post watcher should fire after template refs updated', async () => {\n+  it('flush: post watcher should fire after template refs updated', async () => {\n     const toggle = ref(false)\n     let dom: HTMLElement | null = null\n \n@@ -1093,4 +1092,28 @@ describe('api: watch', () => {\n     \/\/ own update effect\n     expect(instance!._scope.effects.length).toBe(1)\n   })\n+\n+  \/\/ #12578\n+  test('template ref triggered watcher should fire after component mount', async () => {\n+    const order: string[] = []\n+    const Child = { template: '<div\/>' }\n+    const App = {\n+      setup() {\n+        const child = ref<any>(null)\n+        onMounted(() => {\n+          order.push('mounted')\n+        })\n+        watch(child, () => {\n+          order.push('watcher')\n+        })\n+        return { child }\n+      },\n+      components: { Child },\n+      template: `<Child ref=\"child\"\/>`\n+    }\n+    new Vue(App).$mount()\n+\n+    await nextTick()\n+    expect(order).toMatchObject([`mounted`, `watcher`])\n+  })\n })\n\n\n###\n\n","completion":" fix(watch): template ref watcher should fire after owner instance mounted hook\n"}
{"prompt":" file path A: src\/v3\/reactivity\/readonly.ts | file path B: src\/v3\/reactivity\/readonly.ts\n\n@@ -69,7 +69,7 @@ function createReadonly(target: any, shallow: boolean) {\n     return existingProxy\n   }\n \n-  const proxy = {}\n+  const proxy = Object.create(Object.getPrototypeOf(target))\n   def(target, existingFlag, proxy)\n \n   def(proxy, ReactiveFlags.IS_READONLY, true)\n\n---\n file path A: test\/unit\/features\/v3\/reactivity\/readonly.spec.ts | file path B: test\/unit\/features\/v3\/reactivity\/readonly.spec.ts\n\n@@ -499,4 +499,25 @@ describe('reactivity\/readonly', () => {\n     expect(obj.ror).toBe(true)\n     expect(toRaw(obj).ror).not.toBe(ror) \/\/ ref successfully replaced\n   })\n+\n+  test('compatiblity with classes', () => {\n+    const spy = vi.fn()\n+    class Foo {\n+      x = 1\n+      log() {\n+        spy(this.x)\n+      }\n+      change() {\n+        this.x++\n+      }\n+    }\n+    const foo = new Foo()\n+    const readonlyFoo = readonly(foo)\n+    readonlyFoo.log()\n+    expect(spy).toHaveBeenCalledWith(1)\n+\n+    readonlyFoo.change()\n+    expect(readonlyFoo.x).toBe(1)\n+    expect(`et operation on key \"x\" failed`).toHaveBeenWarned()\n+  })\n })\n\n\n###\n\n","completion":" fix(reactivity): readonly() compat with classes\n"}
{"prompt":" file path A: src\/core\/instance\/lifecycle.ts | file path B: src\/core\/instance\/lifecycle.ts\n\n@@ -218,15 +218,17 @@ export function mountComponent(\n   )\n   hydrating = false\n \n+  \/\/ flush buffer for flush: \"pre\" watchers queued in setup()\n+  const preWatchers = vm._preWatchers\n+  if (preWatchers) {\n+    for (let i = 0; i < preWatchers.length; i++) {\n+      preWatchers[i].run()\n+    }\n+  }\n+\n   \/\/ manually mounted instance, call mounted on self\n   \/\/ mounted is called for render-created child components in its inserted hook\n   if (vm.$vnode == null) {\n-    const preWatchers = vm._preWatchers\n-    if (preWatchers) {\n-      for (let i = 0; i < preWatchers.length; i++) {\n-        preWatchers[i].run()\n-      }\n-    }\n     vm._isMounted = true\n     callHook(vm, 'mounted')\n   }\n\n---\n file path A: test\/unit\/features\/v3\/apiWatch.spec.ts | file path B: test\/unit\/features\/v3\/apiWatch.spec.ts\n\n@@ -336,6 +336,23 @@ describe('api: watch', () => {\n     expect(result2).toBe(true)\n   })\n \n+  \/\/ #12569\n+  it('flush:pre watcher triggered before component mount (in child components)', () => {\n+    const count = ref(0)\n+    const spy = vi.fn()\n+    const Comp = {\n+      setup() {\n+        watch(count, spy)\n+        count.value++\n+        return h => h('div')\n+      }\n+    }\n+    new Vue({\n+      render: h => h(Comp)\n+    }).$mount()\n+    expect(spy).toHaveBeenCalledTimes(1)\n+  })\n+\n   it('flush timing: post', async () => {\n     const count = ref(0)\n     let result\n\n\n###\n\n","completion":" fix(watch): fix pre watchers not flushed on mount for nested component\n"}
{"prompt":" file path A: src\/core\/vdom\/modules\/template-ref.ts | file path B: src\/core\/vdom\/modules\/template-ref.ts\n\n@@ -40,7 +40,6 @@ export function registerRef(vnode: VNodeWithData, isRemoval?: boolean) {\n     return\n   }\n \n-  const setupRefKey = vnode.data.ref_key\n   const isFor = vnode.data.refInFor\n   const _isString = typeof ref === 'string' || typeof ref === 'number'\n   const _isRef = isRef(ref)\n@@ -58,7 +57,6 @@ export function registerRef(vnode: VNodeWithData, isRemoval?: boolean) {\n             setSetupRef(vm, ref, refs[ref])\n           } else {\n             ref.value = [refValue]\n-            if (setupRefKey) refs[setupRefKey] = ref.value as any\n           }\n         } else if (!existing.includes(refValue)) {\n           existing.push(refValue)\n@@ -75,7 +73,6 @@ export function registerRef(vnode: VNodeWithData, isRemoval?: boolean) {\n         return\n       }\n       ref.value = value\n-      if (setupRefKey) refs[setupRefKey] = $refsValue\n     } else if (__DEV__) {\n       warn(`Invalid template ref type: ${typeof ref}`)\n     }\n\n---\n file path A: test\/unit\/features\/v3\/setupTemplateRef.spec.ts | file path B: test\/unit\/features\/v3\/setupTemplateRef.spec.ts\n\n@@ -371,33 +371,33 @@ describe('api: setup() template refs', () => {\n   \/\/   expect(elRef1.value).toBe(elRef2.value)\n   \/\/ })\n \n-  \/\/ compiled output of <script setup> inline mode\n-  test('raw ref with ref_key', () => {\n-    let refs: any\n+  \/\/ Vue 2 doesn't have inline mode\n+  \/\/ test('raw ref with ref_key', () => {\n+  \/\/   let refs: any\n \n-    const el = ref()\n+  \/\/   const el = ref()\n \n-    const App = {\n-      mounted() {\n-        refs = (this as any).$refs\n-      },\n-      render() {\n-        return h(\n-          'div',\n-          {\n-            ref: el,\n-            ref_key: 'el'\n-          },\n-          'hello'\n-        )\n-      }\n-    }\n+  \/\/   const App = {\n+  \/\/     mounted() {\n+  \/\/       refs = (this as any).$refs\n+  \/\/     },\n+  \/\/     render() {\n+  \/\/       return h(\n+  \/\/         'div',\n+  \/\/         {\n+  \/\/           ref: el,\n+  \/\/           ref_key: 'el'\n+  \/\/         },\n+  \/\/         'hello'\n+  \/\/       )\n+  \/\/     }\n+  \/\/   }\n \n-    new Vue(App).$mount()\n+  \/\/   new Vue(App).$mount()\n \n-    expect(el.value.innerHTML).toBe('hello')\n-    expect(refs.el.innerHTML).toBe('hello')\n-  })\n+  \/\/   expect(el.value.innerHTML).toBe('hello')\n+  \/\/   expect(refs.el.innerHTML).toBe('hello')\n+  \/\/ })\n \n   \/\/ compiled output of v-for + template ref\n   test('ref in v-for', async () => {\n\n\n###\n\n","completion":" chore: remove unused code\n"}
{"prompt":" file path A: types\/test\/v3\/setup-test.ts | file path B: types\/test\/v3\/setup-test.ts\n\n@@ -93,3 +93,11 @@ defineComponent({\n     res?.charAt(1)\n   }\n })\n+\n+\/\/ #12568\n+const vm = new Vue({\n+  setup() {},\n+  render: h => h({})\n+})\n+\n+vm.$mount('#app')\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -85,7 +85,12 @@ export type CombinedVueInstance<\n   Computed,\n   Props,\n   SetupBindings\n-> = Data & Methods & Computed & Props & Instance & SetupBindings\n+> = Data &\n+  Methods &\n+  Computed &\n+  Props &\n+  Instance &\n+  (SetupBindings extends void ? {} : SetupBindings)\n \n export type ExtendedVue<\n   Instance extends Vue,\n\n\n###\n\n","completion":" fix(types): fix instance type inference for setup() with no return value\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/prefixIdentifiers.ts | file path B: packages\/compiler-sfc\/src\/prefixIdentifiers.ts\n\n@@ -1,7 +1,7 @@\n import MagicString from 'magic-string'\n import { parseExpression, ParserOptions, ParserPlugin } from '@babel\/parser'\n import { makeMap } from 'shared\/util'\n-import { walkIdentifiers } from '.\/babelUtils'\n+import { isStaticProperty, walkIdentifiers } from '.\/babelUtils'\n import { BindingMetadata } from '.\/types'\n \n const doNotPrefix = makeMap(\n@@ -39,18 +39,28 @@ export function prefixIdentifiers(\n \n   walkIdentifiers(\n     ast,\n-    ident => {\n+    (ident, parent) => {\n       const { name } = ident\n       if (doNotPrefix(name)) {\n         return\n       }\n \n-      if (!isScriptSetup) {\n-        s.prependRight(ident.start!, '_vm.')\n-        return\n+      let prefix = `_vm.`\n+      if (isScriptSetup) {\n+        const type = bindings[name]\n+        if (type && type.startsWith('setup')) {\n+          prefix = `_setup.`\n+        }\n       }\n \n-      s.overwrite(ident.start!, ident.end!, rewriteIdentifier(name, bindings))\n+      if (isStaticProperty(parent) && parent.shorthand) {\n+        \/\/ property shorthand like { foo }, we need to add the key since\n+        \/\/ we rewrite the value\n+        \/\/ { foo } -> { foo: _vm.foo }\n+        s.appendLeft(ident.end!, `: ${prefix}${name}`)\n+      } else {\n+        s.prependRight(ident.start!, prefix)\n+      }\n     },\n     node => {\n       if (node.type === 'WithStatement') {\n@@ -70,15 +80,3 @@ export function prefixIdentifiers(\n \n   return s.toString()\n }\n-\n-export function rewriteIdentifier(\n-  name: string,\n-  bindings: BindingMetadata\n-): string {\n-  const type = bindings[name]\n-  if (type && type.startsWith('setup')) {\n-    return `_setup.${name}`\n-  } else {\n-    return `_vm.${name}`\n-  }\n-}\n\n---\n file path A: packages\/compiler-sfc\/test\/prefixIdentifiers.spec.ts | file path B: packages\/compiler-sfc\/test\/prefixIdentifiers.spec.ts\n\n@@ -7,7 +7,7 @@ const toFn = (source: string) => `function render(){${source}\\n}`\n \n it('should work', () => {\n   const { render } = compile(`<div id=\"app\">\n-  <div>{{ foo }}<\/div>\n+  <div :style=\"{ color }\">{{ foo }}<\/div>\n   <p v-for=\"i in list\">{{ i }}<\/p>\n   <foo inline-template>\n     <div>{{ bar }}<\/div>\n@@ -22,6 +22,7 @@ it('should work', () => {\n   expect(result).not.toMatch(`_vm._c`)\n   expect(result).toMatch(`_vm.foo`)\n   expect(result).toMatch(`_vm.list`)\n+  expect(result).toMatch(`{ color: _vm.color }`)\n   expect(result).not.toMatch(`_vm.i`)\n   expect(result).not.toMatch(`with (this)`)\n \n@@ -33,7 +34,7 @@ it('should work', () => {\n         \\\\\"div\\\\\",\n         { attrs: { id: \\\\\"app\\\\\" } },\n         [\n-          _c(\\\\\"div\\\\\", [_vm._v(_vm._s(_vm.foo))]),\n+          _c(\\\\\"div\\\\\", { style: { color: _vm.color } }, [_vm._v(_vm._s(_vm.foo))]),\n           _vm._v(\\\\\" \\\\\"),\n           _vm._l(_vm.list, function (i) {\n             return _c(\\\\\"p\\\\\", [_vm._v(_vm._s(i))])\n\n\n###\n\n","completion":" fix(compiler-sfc): properly handle shorthand property in template expressions\n"}
{"prompt":" file path A: examples\/composition\/todomvc.html | file path B: examples\/composition\/todomvc.html\n\n@@ -1,4 +1,4 @@\n-<script src=\"..\/..\/dist\/vue.js\"><\/script>\n+<script src=\"..\/..\/dist\/vue.min.js\"><\/script>\n <link\n   rel=\"stylesheet\"\n   href=\"..\/..\/node_modules\/todomvc-app-css\/index.css\"\n@@ -90,7 +90,7 @@\n <script>\n   const { reactive, computed, watchEffect, onMounted, onUnmounted } = Vue\n \n-  const STORAGE_KEY = 'todos-vuejs-3.x'\n+  const STORAGE_KEY = 'todos-vuejs-3.x-composition'\n   const todoStorage = {\n     fetch() {\n       const todos = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]')\n\n\n###\n\n","completion":" ci: e2e test fix\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/parse.ts | file path B: packages\/compiler-sfc\/src\/parse.ts\n\n@@ -10,6 +10,7 @@ import {\n import hash from 'hash-sum'\n import LRU from 'lru-cache'\n import { hmrShouldReload } from '.\/compileScript'\n+import { parseCssVars } from '.\/cssVars'\n \n const cache = new LRU<string, SFCDescriptor>(100)\n \n@@ -57,6 +58,10 @@ export function parse(options: SFCParseOptions): SFCDescriptor {\n   }\n \n   output.filename = filename\n+\n+  \/\/ parse CSS vars\n+  output.cssVars = parseCssVars(output)\n+\n   output.shouldForceReload = prevImports =>\n     hmrShouldReload(prevImports, output!)\n \n\n---\n file path A: packages\/compiler-sfc\/src\/parseComponent.ts | file path B: packages\/compiler-sfc\/src\/parseComponent.ts\n\n@@ -4,7 +4,6 @@ import { makeMap } from 'shared\/util'\n import { ASTAttr, WarningMessage } from 'types\/compiler'\n import { BindingMetadata, RawSourceMap } from '.\/types'\n import type { ImportBinding } from '.\/compileScript'\n-import { parseCssVars } from '.\/cssVars'\n \n export const DEFAULT_FILENAME = 'anonymous.vue'\n \n@@ -209,8 +208,5 @@ export function parseComponent(\n     outputSourceRange: options.outputSourceRange\n   })\n \n-  \/\/ parse CSS vars\n-  sfc.cssVars = parseCssVars(sfc)\n-\n   return sfc\n }\n\n\n###\n\n","completion":" build: move cssVars logic into compiler-sfc entry\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/parse.ts | file path B: packages\/compiler-sfc\/src\/parse.ts\n\n@@ -23,6 +23,10 @@ export interface SFCParseOptions {\n   compilerParseOptions?: VueTemplateCompilerParseOptions\n   sourceRoot?: string\n   sourceMap?: boolean\n+  \/**\n+   * @deprecated use `sourceMap` instead.\n+   *\/\n+  needMap?: boolean\n }\n \n export function parse(options: SFCParseOptions): SFCDescriptor {\n@@ -32,7 +36,8 @@ export function parse(options: SFCParseOptions): SFCDescriptor {\n     compiler,\n     compilerParseOptions = { pad: false } as VueTemplateCompilerParseOptions,\n     sourceRoot = '',\n-    sourceMap = true\n+    needMap = true,\n+    sourceMap = needMap\n   } = options\n   const cacheKey = hash(\n     filename + source + JSON.stringify(compilerParseOptions)\n\n\n###\n\n","completion":" feat(sfc): parse needMap compat\n"}
{"prompt":" file path A: src\/v3\/apiSetup.ts | file path B: src\/v3\/apiSetup.ts\n\n@@ -1,6 +1,6 @@\n import { Component } from 'types\/component'\n import { PropOptions } from 'types\/options'\n-import { toggleObserving } from '..\/core\/observer'\n+import { popTarget, pushTarget } from '..\/core\/observer\/dep'\n import { def, invokeWithErrorHandling, isReserved, warn } from '..\/core\/util'\n import VNode from '..\/core\/vdom\/vnode'\n import {\n@@ -31,7 +31,7 @@ export function initSetup(vm: Component) {\n     const ctx = (vm._setupContext = createSetupContext(vm))\n \n     setCurrentInstance(vm)\n-    toggleObserving(false)\n+    pushTarget()\n     const setupResult = invokeWithErrorHandling(\n       setup,\n       null,\n@@ -39,7 +39,7 @@ export function initSetup(vm: Component) {\n       vm,\n       `setup`\n     )\n-    toggleObserving(true)\n+    popTarget()\n     setCurrentInstance()\n \n     if (isFunction(setupResult)) {\n\n---\n file path A: test\/unit\/features\/v3\/apiSetup.spec.ts | file path B: test\/unit\/features\/v3\/apiSetup.spec.ts\n\n@@ -267,4 +267,31 @@ describe('api: setup context', () => {\n       }\n     }).$mount()\n   })\n+\n+  it('should not track dep accessed in setup', async () => {\n+    const spy = vi.fn()\n+    const msg = ref('hi')\n+\n+    const Child = {\n+      setup: () => {\n+        msg.value\n+        return () => {}\n+      }\n+    }\n+\n+    new Vue({\n+      setup() {\n+        return h => {\n+          spy()\n+          return h(Child)\n+        }\n+      }\n+    }).$mount()\n+\n+    expect(spy).toHaveBeenCalledTimes(1)\n+\n+    msg.value = 'bye'\n+    await nextTick()\n+    expect(spy).toHaveBeenCalledTimes(1)\n+  })\n })\n\n\n###\n\n","completion":" fix: remove wrong observe toggle, properly disable tracking in setup()\n"}
{"prompt":" file path A: test\/unit\/features\/v3\/apiSetup.spec.ts | file path B: test\/unit\/features\/v3\/apiSetup.spec.ts\n\n@@ -249,7 +249,7 @@ describe('api: setup context', () => {\n   })\n \n   \/\/ #12561\n-  it.only('setup props should be reactive', () => {\n+  it('setup props should be reactive', () => {\n     const msg = ref('hi')\n \n     const Child = {\n\n\n###\n\n","completion":" chore: remove .only from tests\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/stylePlugins\/scoped.ts | file path B: packages\/compiler-sfc\/src\/stylePlugins\/scoped.ts\n\n@@ -81,8 +81,7 @@ function processRule(id: string, rule: Rule) {\n function rewriteSelector(\n   id: string,\n   selector: selectorParser.Selector,\n-  selectorRoot: selectorParser.Root,\n-  slotted = false\n+  selectorRoot: selectorParser.Root\n ) {\n   let node: selectorParser.Node | null = null\n   let shouldInject = true\n@@ -142,23 +141,22 @@ function rewriteSelector(\n         return false\n       }\n \n-      \/\/ slot: use selector inside `::v-slotted` and inject [id + '-s']\n-      \/\/ instead.\n+      \/\/ !!! Vue 2 does not have :slotted support\n       \/\/ ::v-slotted(.foo) -> .foo[xxxxxxx-s]\n-      if (value === ':slotted' || value === '::v-slotted') {\n-        rewriteSelector(id, n.nodes[0], selectorRoot, true \/* slotted *\/)\n-        let last: selectorParser.Selector['nodes'][0] = n\n-        n.nodes[0].each(ss => {\n-          selector.insertAfter(last, ss)\n-          last = ss\n-        })\n-        \/\/ selector.insertAfter(n, n.nodes[0])\n-        selector.removeChild(n)\n-        \/\/ since slotted attribute already scopes the selector there's no\n-        \/\/ need for the non-slot attribute.\n-        shouldInject = false\n-        return false\n-      }\n+      \/\/ if (value === ':slotted' || value === '::v-slotted') {\n+      \/\/   rewriteSelector(id, n.nodes[0], selectorRoot, true \/* slotted *\/)\n+      \/\/   let last: selectorParser.Selector['nodes'][0] = n\n+      \/\/   n.nodes[0].each(ss => {\n+      \/\/     selector.insertAfter(last, ss)\n+      \/\/     last = ss\n+      \/\/   })\n+      \/\/   \/\/ selector.insertAfter(n, n.nodes[0])\n+      \/\/   selector.removeChild(n)\n+      \/\/   \/\/ since slotted attribute already scopes the selector there's no\n+      \/\/   \/\/ need for the non-slot attribute.\n+      \/\/   shouldInject = false\n+      \/\/   return false\n+      \/\/ }\n \n       \/\/ global: replace with inner selector and do not inject [id].\n       \/\/ ::v-global(.foo) -> .foo\n@@ -184,14 +182,13 @@ function rewriteSelector(\n   }\n \n   if (shouldInject) {\n-    const idToAdd = slotted ? id + '-s' : id\n     selector.insertAfter(\n       \/\/ If node is null it means we need to inject [id] at the start\n       \/\/ insertAfter can handle `null` here\n       node as any,\n       selectorParser.attribute({\n-        attribute: idToAdd,\n-        value: idToAdd,\n+        attribute: id,\n+        value: id,\n         raws: {},\n         quoteMark: `\"`\n       })\n\n\n###\n\n","completion":" chore: remove code for non-supported :slotted feature\n"}
{"prompt":" file path A: src\/core\/instance\/state.ts | file path B: src\/core\/instance\/state.ts\n\n@@ -30,7 +30,7 @@ import {\n   isFunction\n } from '..\/util\/index'\n import type { Component } from 'types\/component'\n-import { TrackOpTypes } from '..\/..\/v3'\n+import { shallowReactive, TrackOpTypes } from 'v3'\n \n const sharedPropertyDefinition = {\n   enumerable: true,\n@@ -71,7 +71,7 @@ export function initState(vm: Component) {\n \n function initProps(vm: Component, propsOptions: Object) {\n   const propsData = vm.$options.propsData || {}\n-  const props = (vm._props = {})\n+  const props = (vm._props = shallowReactive({}))\n   \/\/ cache prop keys so that future props updates can iterate using Array\n   \/\/ instead of dynamic object key enumeration.\n   const keys: string[] = (vm.$options._propKeys = [])\n\n---\n file path A: src\/v3\/apiSetup.ts | file path B: src\/v3\/apiSetup.ts\n\n@@ -1,5 +1,6 @@\n import { Component } from 'types\/component'\n import { PropOptions } from 'types\/options'\n+import { toggleObserving } from '..\/core\/observer'\n import { def, invokeWithErrorHandling, isReserved, warn } from '..\/core\/util'\n import VNode from '..\/core\/vdom\/vnode'\n import {\n@@ -10,6 +11,7 @@ import {\n   isObject\n } from '..\/shared\/util'\n import { currentInstance, setCurrentInstance } from '.\/currentInstance'\n+import { shallowReactive } from '.\/reactivity\/reactive'\n import { isRef } from '.\/reactivity\/ref'\n \n \/**\n@@ -29,13 +31,15 @@ export function initSetup(vm: Component) {\n     const ctx = (vm._setupContext = createSetupContext(vm))\n \n     setCurrentInstance(vm)\n+    toggleObserving(false)\n     const setupResult = invokeWithErrorHandling(\n       setup,\n       null,\n-      [vm._props, ctx],\n+      [vm._props || shallowReactive({}), ctx],\n       vm,\n       `setup`\n     )\n+    toggleObserving(true)\n     setCurrentInstance()\n \n     if (isFunction(setupResult)) {\n\n---\n file path A: test\/unit\/features\/v3\/apiSetup.spec.ts | file path B: test\/unit\/features\/v3\/apiSetup.spec.ts\n\n@@ -1,4 +1,4 @@\n-import { h, ref, reactive } from 'v3'\n+import { h, ref, reactive, isReactive, toRef, isRef } from 'v3'\n import { nextTick } from 'core\/util'\n import { effect } from 'v3\/reactivity\/effect'\n import Vue from 'vue'\n@@ -247,4 +247,24 @@ describe('api: setup context', () => {\n     }).$mount()\n     expect(spy).toHaveBeenCalled()\n   })\n+\n+  \/\/ #12561\n+  it.only('setup props should be reactive', () => {\n+    const msg = ref('hi')\n+\n+    const Child = {\n+      props: ['msg'],\n+      setup: props => {\n+        expect(isReactive(props)).toBe(true)\n+        expect(isRef(toRef(props, 'foo'))).toBe(true)\n+        return () => {}\n+      }\n+    }\n+\n+    new Vue({\n+      setup() {\n+        return h => h(Child, { props: { msg } })\n+      }\n+    }).$mount()\n+  })\n })\n\n\n###\n\n","completion":" fix(setup): setup props should pass isReactive check\n"}
{"prompt":" file path A: src\/core\/vdom\/modules\/template-ref.ts | file path B: src\/core\/vdom\/modules\/template-ref.ts\n\n@@ -33,6 +33,7 @@ export function registerRef(vnode: VNodeWithData, isRemoval?: boolean) {\n   const vm = vnode.context\n   const refValue = vnode.componentInstance || vnode.elm\n   const value = isRemoval ? null : refValue\n+  const $refsValue = isRemoval ? undefined : refValue\n \n   if (isFunction(ref)) {\n     invokeWithErrorHandling(ref, vm, [value], vm, `template ref function`)\n@@ -67,14 +68,14 @@ export function registerRef(vnode: VNodeWithData, isRemoval?: boolean) {\n       if (isRemoval && refs[ref] !== refValue) {\n         return\n       }\n-      refs[ref] = value\n+      refs[ref] = $refsValue\n       setSetupRef(vm, ref, value)\n     } else if (_isRef) {\n       if (isRemoval && ref.value !== refValue) {\n         return\n       }\n       ref.value = value\n-      if (setupRefKey) refs[setupRefKey] = value\n+      if (setupRefKey) refs[setupRefKey] = $refsValue\n     } else if (__DEV__) {\n       warn(`Invalid template ref type: ${typeof ref}`)\n     }\n\n---\n file path A: test\/unit\/features\/template-ref.spec.ts | file path B: test\/unit\/features\/template-ref.spec.ts\n\n@@ -58,7 +58,7 @@ describe('ref', () => {\n     expect(vm.$refs.foo).toBe(vm.$el)\n     vm.value = 'bar'\n     waitForUpdate(() => {\n-      expect(vm.$refs.foo).toBe(null)\n+      expect(vm.$refs.foo).toBe(undefined)\n       expect(vm.$refs.bar).toBe(vm.$el)\n     }).then(done)\n   })\n@@ -101,7 +101,7 @@ describe('ref', () => {\n       vm.test = ''\n     })\n       .then(() => {\n-        expect(vm.$refs.test).toBe(null)\n+        expect(vm.$refs.test).toBe(undefined)\n       })\n       .then(done)\n   })\n\n\n###\n\n","completion":" fix(template-ref): preserve ref removal behavior in non-composition-api usage\n"}
{"prompt":" file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -279,7 +279,8 @@ function genConfig(name) {\n   const vars = {\n     __VERSION__: version,\n     __DEV__: `process.env.NODE_ENV !== 'production'`,\n-    __TEST__: false\n+    __TEST__: false,\n+    __GLOBAL__: opts.format === 'umd' || name.includes('browser')\n   }\n   \/\/ feature flags\n   Object.keys(featureFlags).forEach(key => {\n\n---\n file path A: src\/global.d.ts | file path B: src\/global.d.ts\n\n@@ -1,5 +1,6 @@\n declare const __DEV__: boolean\n declare const __TEST__: boolean\n+declare const __GLOBAL__: boolean\n \n interface Window {\n   __VUE_DEVTOOLS_GLOBAL_HOOK__: DevtoolsHook\n\n---\n file path A: src\/v3\/index.ts | file path B: src\/v3\/index.ts\n\n@@ -76,6 +76,8 @@ export { useSlots, useAttrs, mergeDefaults } from '.\/apiSetup'\n export { nextTick } from 'core\/util\/next-tick'\n export { set, del } from 'core\/observer'\n \n+export { useCssModule } from '.\/sfc-helpers\/useCssModule'\n+\n \/**\n  * @internal type is manually declared in <root>\/types\/v3-define-component.d.ts\n  *\/\n\n---\n file path A: None | file path B: src\/v3\/sfc-helpers\/useCssModule.ts\n\n@@ -0,0 +1,24 @@\n+import { emptyObject, warn } from '..\/..\/core\/util'\n+import { currentInstance } from '..\/currentInstance'\n+\n+export function useCssModule(name = '$style'): Record<string, string> {\n+  \/* istanbul ignore else *\/\n+  if (!__GLOBAL__) {\n+    if (!currentInstance) {\n+      __DEV__ && warn(`useCssModule must be called inside setup()`)\n+      return emptyObject\n+    }\n+    const mod = currentInstance[name]\n+    if (!mod) {\n+      __DEV__ &&\n+        warn(`Current instance does not have CSS module named \"${name}\".`)\n+      return emptyObject\n+    }\n+    return mod as Record<string, string>\n+  } else {\n+    if (__DEV__) {\n+      warn(`useCssModule() is not supported in the global build.`)\n+    }\n+    return emptyObject\n+  }\n+}\n\n\n###\n\n","completion":" feat: useCssModules\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/templateCompilerModules\/utils.ts | file path B: packages\/compiler-sfc\/src\/templateCompilerModules\/utils.ts\n\n@@ -14,8 +14,11 @@ export function urlToRequire(\n     url = url.slice(secondChar === '\/' ? 2 : 1)\n   }\n \n-  const uriParts = parseUriParts(url)\n+  if (isExternalUrl(url) || isDataUrl(url) || firstChar === '#') {\n+    return returnValue\n+  }\n \n+  const uriParts = parseUriParts(url)\n   if (transformAssetUrlsOption.base) {\n     \/\/ explicit base - directly rewrite the url into absolute url\n     \/\/ does not apply to absolute urls or urls that start with `@`\n@@ -67,3 +70,13 @@ function parseUriParts(urlString: string): UrlWithStringQuery {\n   }\n   return returnValue\n }\n+\n+const externalRE = \/^(https?:)?\\\/\\\/\/\n+function isExternalUrl(url: string): boolean {\n+  return externalRE.test(url)\n+}\n+\n+const dataUrlRE = \/^\\s*data:\/i\n+function isDataUrl(url: string): boolean {\n+  return dataUrlRE.test(url)\n+}\n\n---\n file path A: packages\/compiler-sfc\/test\/compileStyle.spec.ts | file path B: packages\/compiler-sfc\/test\/compileStyle.spec.ts\n\n@@ -9,7 +9,7 @@ test('preprocess less', () => {\n       '.color { color: @red; }\\n' +\n       '<\/style>\\n',\n     filename: 'example.vue',\n-    needMap: true\n+    sourceMap: true\n   }).styles[0]\n \n   const result = compileStyle({\n@@ -34,7 +34,7 @@ test('preprocess scss', () => {\n       '.color { color: $red; }\\n' +\n       '<\/style>\\n',\n     filename: 'example.vue',\n-    needMap: true\n+    sourceMap: true\n   }).styles[0]\n   const result = compileStyle({\n     id: 'v-scope-xxx',\n@@ -59,7 +59,7 @@ test('preprocess sass', () => {\n       '   color: $red\\n' +\n       '<\/style>\\n',\n     filename: 'example.vue',\n-    needMap: true\n+    sourceMap: true\n   }).styles[0]\n   const result = compileStyle({\n     id: 'v-scope-xxx',\n@@ -84,7 +84,7 @@ test('preprocess stylus', () => {\n       '   color: red-color\\n' +\n       '<\/style>\\n',\n     filename: 'example.vue',\n-    needMap: true\n+    sourceMap: true\n   }).styles[0]\n   const result = compileStyle({\n     id: 'v-scope-xxx',\n\n---\n file path A: packages\/compiler-sfc\/test\/compileTemplate.spec.ts | file path B: packages\/compiler-sfc\/test\/compileTemplate.spec.ts\n\n@@ -48,7 +48,7 @@ test('preprocess pug', () => {\n       '   p Cool Pug example!\\n' +\n       '<\/template>\\n',\n     filename: 'example.vue',\n-    needMap: true\n+    sourceMap: true\n   }).template as SFCBlock\n \n   const result = compileTemplate({\n@@ -103,7 +103,7 @@ test('warn missing preprocessor', () => {\n     source: '<template lang=\"unknownLang\">\\n' + '<\/template>\\n',\n \n     filename: 'example.vue',\n-    needMap: true\n+    sourceMap: true\n   }).template as SFCBlock\n \n   const result = compileTemplate({\n@@ -141,7 +141,6 @@ test('transform assetUrls', () => {\n })\n \n test('transform srcset', () => {\n-  \/\/ TODO:\n   const source = `\n <div>\n   <img src=\".\/logo.png\">\n@@ -227,3 +226,29 @@ test('transform assetUrls and srcset with base option', () => {\n     '\/base\/logo.png 2x, \/base\/logo.png 3x'\n   )\n })\n+\n+test('transform with includeAbsolute', () => {\n+  const source = `\n+  <div>\n+    <img src=\".\/logo.png\">\n+    <img src=\"\/logo.png\">\n+    <img src=\"https:\/\/foo.com\/logo.png\">\n+  <\/div>\n+  `\n+  const result = compileTemplate({\n+    filename: 'example.vue',\n+    source,\n+    transformAssetUrls: true,\n+    transformAssetUrlsOptions: { includeAbsolute: true }\n+  })\n+\n+  expect(result.errors.length).toBe(0)\n+\n+  const vnode = mockRender(result.code, {\n+    '.\/logo.png': 'relative',\n+    '\/logo.png': 'absolute'\n+  })\n+  expect(vnode.children[0].data.attrs.src).toBe('relative')\n+  expect(vnode.children[2].data.attrs.src).toBe('absolute')\n+  expect(vnode.children[4].data.attrs.src).toBe('https:\/\/foo.com\/logo.png')\n+})\n\n\n###\n\n","completion":" fix(compiler-sfc): do not transform external and data urls in templates\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/parseComponent.ts | file path B: packages\/compiler-sfc\/src\/parseComponent.ts\n\n@@ -125,6 +125,11 @@ export function parseComponent(\n           return cumulated\n         }, {})\n       }\n+\n+      if (typeof currentBlock.attrs.src === 'string') {\n+        currentBlock.src = currentBlock.attrs.src\n+      }\n+\n       if (isSpecialTag(tag)) {\n         checkAttrs(currentBlock, attrs)\n         if (tag === 'script') {\n@@ -162,9 +167,6 @@ export function parseComponent(\n       if (attr.name === 'module') {\n         block.module = attr.value || true\n       }\n-      if (attr.name === 'src') {\n-        block.src = attr.value\n-      }\n     }\n   }\n \n\n---\n file path A: packages\/compiler-sfc\/test\/parseComponent.spec.ts | file path B: packages\/compiler-sfc\/test\/parseComponent.spec.ts\n\n@@ -202,10 +202,11 @@ describe('Single File Component parser', () => {\n         }))\n       }\n       <\/test>\n+      <custom src=\".\/x.json\"><\/custom>\n     `,\n       { deindent: true }\n     )\n-    expect(res.customBlocks.length).toBe(3)\n+    expect(res.customBlocks.length).toBe(4)\n \n     const simpleExample = res.customBlocks[0]\n     expect(simpleExample.type).toBe('example')\n@@ -233,6 +234,9 @@ describe('Single File Component parser', () => {\n }`)\n     expect(simpleTest.attrs.name).toBe('simple')\n     expect(simpleTest.attrs.foo).toBe('bar')\n+\n+    const customWithSrc = res.customBlocks[3]\n+    expect(customWithSrc.src).toBe('.\/x.json')\n   })\n \n   \/\/ Regression #4289\n\n\n###\n\n","completion":" fix(compiler-sfc): expose src on custom blocks as well\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/templateCompilerModules\/assetUrl.ts | file path B: packages\/compiler-sfc\/src\/templateCompilerModules\/assetUrl.ts\n\n@@ -13,6 +13,10 @@ export interface TransformAssetUrlsOptions {\n    * imports, they will be directly rewritten to absolute urls.\n    *\/\n   base?: string\n+  \/**\n+   * If true, also processes absolute urls.\n+   *\/\n+  includeAbsolute?: boolean\n }\n \n const defaultOptions: AssetURLOptions = {\n\n---\n file path A: packages\/compiler-sfc\/src\/templateCompilerModules\/utils.ts | file path B: packages\/compiler-sfc\/src\/templateCompilerModules\/utils.ts\n\n@@ -31,7 +31,12 @@ export function urlToRequire(\n     return returnValue\n   }\n \n-  if (firstChar === '.' || firstChar === '~' || firstChar === '@') {\n+  if (\n+    transformAssetUrlsOption.includeAbsolute ||\n+    firstChar === '.' ||\n+    firstChar === '~' ||\n+    firstChar === '@'\n+  ) {\n     if (!uriParts.hash) {\n       return `require(\"${url}\")`\n     } else {\n\n\n###\n\n","completion":" feat(compiler-sfc): support includeAbsolute in transformAssetUrl\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/index.ts | file path B: packages\/compiler-sfc\/src\/index.ts\n\n@@ -4,9 +4,10 @@ export { compileTemplate } from '.\/compileTemplate'\n export { compileStyle, compileStyleAsync } from '.\/compileStyle'\n export { compileScript } from '.\/compileScript'\n export { generateCodeFrame } from 'compiler\/codeframe'\n+export { rewriteDefault } from '.\/rewriteDefault'\n \n \/\/ types\n-export { CompilerOptions } from 'types\/compiler'\n+export { CompilerOptions, WarningMessage } from 'types\/compiler'\n export { TemplateCompiler } from '.\/types'\n export {\n   SFCBlock,\n\n---\n file path A: packages\/compiler-sfc\/src\/parse.ts | file path B: packages\/compiler-sfc\/src\/parse.ts\n\n@@ -22,7 +22,7 @@ export interface ParseOptions {\n   compiler?: TemplateCompiler\n   compilerParseOptions?: VueTemplateCompilerParseOptions\n   sourceRoot?: string\n-  needMap?: boolean\n+  sourceMap?: boolean\n }\n \n export function parse(options: ParseOptions): SFCDescriptor {\n@@ -32,7 +32,7 @@ export function parse(options: ParseOptions): SFCDescriptor {\n     compiler,\n     compilerParseOptions = { pad: false } as VueTemplateCompilerParseOptions,\n     sourceRoot = '',\n-    needMap = true\n+    sourceMap = true\n   } = options\n   const cacheKey = hash(\n     filename + source + JSON.stringify(compilerParseOptions)\n@@ -55,7 +55,7 @@ export function parse(options: ParseOptions): SFCDescriptor {\n   output.shouldForceReload = prevImports =>\n     hmrShouldReload(prevImports, output!)\n \n-  if (needMap) {\n+  if (sourceMap) {\n     if (output.script && !output.script.src) {\n       output.script.map = generateSourceMap(\n         filename,\n\n---\n file path A: packages\/compiler-sfc\/src\/parseComponent.ts | file path B: packages\/compiler-sfc\/src\/parseComponent.ts\n\n@@ -17,12 +17,12 @@ export interface SFCCustomBlock {\n   attrs: { [key: string]: string | true }\n   start: number\n   end: number\n+  src?: string\n   map?: RawSourceMap\n }\n \n export interface SFCBlock extends SFCCustomBlock {\n   lang?: string\n-  src?: string\n   scoped?: boolean\n   module?: string | boolean\n }\n\n---\n file path A: None | file path B: packages\/compiler-sfc\/src\/rewriteDefault.ts\n\n@@ -0,0 +1,110 @@\n+import { parse, ParserPlugin } from '@babel\/parser'\n+import MagicString from 'magic-string'\n+\n+const defaultExportRE = \/((?:^|\\n|;)\\s*)export(\\s*)default\/\n+const namedDefaultExportRE = \/((?:^|\\n|;)\\s*)export(.+)(?:as)?(\\s*)default\/s\n+const exportDefaultClassRE =\n+  \/((?:^|\\n|;)\\s*)export\\s+default\\s+class\\s+([\\w$]+)\/\n+\n+\/**\n+ * Utility for rewriting `export default` in a script block into a variable\n+ * declaration so that we can inject things into it\n+ *\/\n+export function rewriteDefault(\n+  input: string,\n+  as: string,\n+  parserPlugins?: ParserPlugin[]\n+): string {\n+  if (!hasDefaultExport(input)) {\n+    return input + `\\nconst ${as} = {}`\n+  }\n+\n+  let replaced: string | undefined\n+\n+  const classMatch = input.match(exportDefaultClassRE)\n+  if (classMatch) {\n+    replaced =\n+      input.replace(exportDefaultClassRE, '$1class $2') +\n+      `\\nconst ${as} = ${classMatch[2]}`\n+  } else {\n+    replaced = input.replace(defaultExportRE, `$1const ${as} =`)\n+  }\n+  if (!hasDefaultExport(replaced)) {\n+    return replaced\n+  }\n+\n+  \/\/ if the script somehow still contains `default export`, it probably has\n+  \/\/ multi-line comments or template strings. fallback to a full parse.\n+  const s = new MagicString(input)\n+  const ast = parse(input, {\n+    sourceType: 'module',\n+    plugins: parserPlugins\n+  }).program.body\n+  ast.forEach(node => {\n+    if (node.type === 'ExportDefaultDeclaration') {\n+      s.overwrite(node.start!, node.declaration.start!, `const ${as} = `)\n+    }\n+    if (node.type === 'ExportNamedDeclaration') {\n+      for (const specifier of node.specifiers) {\n+        if (\n+          specifier.type === 'ExportSpecifier' &&\n+          specifier.exported.type === 'Identifier' &&\n+          specifier.exported.name === 'default'\n+        ) {\n+          if (node.source) {\n+            if (specifier.local.name === 'default') {\n+              const end = specifierEnd(input, specifier.local.end!, node.end)\n+              s.prepend(\n+                `import { default as __VUE_DEFAULT__ } from '${node.source.value}'\\n`\n+              )\n+              s.overwrite(specifier.start!, end, ``)\n+              s.append(`\\nconst ${as} = __VUE_DEFAULT__`)\n+              continue\n+            } else {\n+              const end = specifierEnd(input, specifier.exported.end!, node.end)\n+              s.prepend(\n+                `import { ${input.slice(\n+                  specifier.local.start!,\n+                  specifier.local.end!\n+                )} } from '${node.source.value}'\\n`\n+              )\n+              s.overwrite(specifier.start!, end, ``)\n+              s.append(`\\nconst ${as} = ${specifier.local.name}`)\n+              continue\n+            }\n+          }\n+          const end = specifierEnd(input, specifier.end!, node.end)\n+          s.overwrite(specifier.start!, end, ``)\n+          s.append(`\\nconst ${as} = ${specifier.local.name}`)\n+        }\n+      }\n+    }\n+  })\n+  return s.toString()\n+}\n+\n+export function hasDefaultExport(input: string): boolean {\n+  return defaultExportRE.test(input) || namedDefaultExportRE.test(input)\n+}\n+\n+function specifierEnd(\n+  input: string,\n+  end: number,\n+  nodeEnd: number | undefined | null\n+) {\n+  \/\/ export { default   , foo } ...\n+  let hasCommas = false\n+  let oldEnd = end\n+  while (end < nodeEnd!) {\n+    if (\/\\s\/.test(input.charAt(end))) {\n+      end++\n+    } else if (input.charAt(end) === ',') {\n+      end++\n+      hasCommas = true\n+      break\n+    } else if (input.charAt(end) === '}') {\n+      break\n+    }\n+  }\n+  return hasCommas ? end : oldEnd\n+}\n\n\n###\n\n","completion":" feat: further align compiler-sfc api + expose rewriteDefault\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/compileTemplate.ts | file path B: packages\/compiler-sfc\/src\/compileTemplate.ts\n\n@@ -1,8 +1,4 @@\n-import {\n-  BindingMetadata,\n-  VueTemplateCompiler,\n-  VueTemplateCompilerOptions\n-} from '.\/types'\n+import { BindingMetadata, TemplateCompiler } from '.\/types'\n import assetUrlsModule, {\n   AssetURLOptions,\n   TransformAssetUrlsOptions\n@@ -11,13 +7,13 @@ import srcsetModule from '.\/templateCompilerModules\/srcset'\n import consolidate from '@vue\/consolidate'\n import * as _compiler from 'web\/entry-compiler'\n import { prefixIdentifiers } from '.\/prefixIdentifiers'\n-import { WarningMessage } from 'types\/compiler'\n+import { CompilerOptions, WarningMessage } from 'types\/compiler'\n \n export interface SFCTemplateCompileOptions {\n   source: string\n   filename: string\n-  compiler?: VueTemplateCompiler\n-  compilerOptions?: VueTemplateCompilerOptions\n+  compiler?: TemplateCompiler\n+  compilerOptions?: CompilerOptions\n   transformAssetUrls?: AssetURLOptions | boolean\n   transformAssetUrlsOptions?: TransformAssetUrlsOptions\n   preprocessLang?: string\n@@ -31,7 +27,7 @@ export interface SFCTemplateCompileOptions {\n   bindings?: BindingMetadata\n }\n \n-export interface SFCTemplateCompileResult {\n+export interface SFCTemplateCompileResults {\n   ast: Object | undefined\n   code: string\n   source: string\n@@ -41,7 +37,7 @@ export interface SFCTemplateCompileResult {\n \n export function compileTemplate(\n   options: SFCTemplateCompileOptions\n-): SFCTemplateCompileResult {\n+): SFCTemplateCompileResults {\n   const { preprocessLang } = options\n   const preprocessor = preprocessLang && consolidate[preprocessLang]\n   if (preprocessor) {\n@@ -100,7 +96,7 @@ function preprocess(\n \n function actuallyCompile(\n   options: SFCTemplateCompileOptions\n-): SFCTemplateCompileResult {\n+): SFCTemplateCompileResults {\n   const {\n     source,\n     compiler = _compiler,\n\n---\n file path A: packages\/compiler-sfc\/src\/index.ts | file path B: packages\/compiler-sfc\/src\/index.ts\n\n@@ -6,10 +6,17 @@ export { compileScript } from '.\/compileScript'\n export { generateCodeFrame } from 'compiler\/codeframe'\n \n \/\/ types\n-export { SFCBlock, SFCCustomBlock, SFCDescriptor } from '.\/parseComponent'\n+export { CompilerOptions } from 'types\/compiler'\n+export { TemplateCompiler } from '.\/types'\n+export {\n+  SFCBlock,\n+  SFCCustomBlock,\n+  SFCScriptBlock,\n+  SFCDescriptor\n+} from '.\/parseComponent'\n export {\n   SFCTemplateCompileOptions,\n-  SFCTemplateCompileResult\n+  SFCTemplateCompileResults\n } from '.\/compileTemplate'\n export { SFCStyleCompileOptions, SFCStyleCompileResults } from '.\/compileStyle'\n export { SFCScriptCompileOptions } from '.\/compileScript'\n\n---\n file path A: packages\/compiler-sfc\/src\/parse.ts | file path B: packages\/compiler-sfc\/src\/parse.ts\n\n@@ -1,5 +1,5 @@\n import { SourceMapGenerator } from 'source-map'\n-import { RawSourceMap, VueTemplateCompiler } from '.\/types'\n+import { RawSourceMap, TemplateCompiler } from '.\/types'\n import {\n   parseComponent,\n   VueTemplateCompilerParseOptions,\n@@ -19,7 +19,7 @@ const emptyRE = \/^(?:\\\/\\\/)?\\s*$\/\n export interface ParseOptions {\n   source: string\n   filename?: string\n-  compiler?: VueTemplateCompiler\n+  compiler?: TemplateCompiler\n   compilerParseOptions?: VueTemplateCompilerParseOptions\n   sourceRoot?: string\n   needMap?: boolean\n\n---\n file path A: packages\/compiler-sfc\/src\/types.ts | file path B: packages\/compiler-sfc\/src\/types.ts\n\n@@ -14,27 +14,12 @@ export interface RawSourceMap extends StartOfSourceMap {\n   mappings: string\n }\n \n-export interface VueTemplateCompiler {\n+export interface TemplateCompiler {\n   parseComponent(source: string, options?: any): SFCDescriptor\n-\n-  compile(\n-    template: string,\n-    options: VueTemplateCompilerOptions\n-  ): VueTemplateCompilerResults\n-\n-  ssrCompile(\n-    template: string,\n-    options: VueTemplateCompilerOptions\n-  ): VueTemplateCompilerResults\n+  compile(template: string, options: CompilerOptions): CompiledResult\n+  ssrCompile(template: string, options: CompilerOptions): CompiledResult\n }\n \n-\/\/ we'll just shim this much for now - in the future these types\n-\/\/ should come from vue-template-compiler directly, or this package should be\n-\/\/ part of the vue monorepo.\n-export type VueTemplateCompilerOptions = CompilerOptions\n-\n-export type VueTemplateCompilerResults = CompiledResult\n-\n export const enum BindingTypes {\n   \/**\n    * returned from data()\n\n\n###\n\n","completion":" fix: further align types with v3\n"}
{"prompt":" file path A: packages\/compiler-sfc\/test\/prefixIdentifiers.spec.ts | file path B: packages\/compiler-sfc\/test\/prefixIdentifiers.spec.ts\n\n@@ -68,7 +68,7 @@ it('setup bindings', () => {\n     }\n   )\n \n-  expect(result).toMatch(`_setup = _vm._setupProxy`)\n+  expect(result).toMatch(`_setup = _vm._self._setupProxy`)\n   expect(result).toMatch(`_setup.count++`)\n   expect(result).toMatch(`_vm._s(_setup.count)`)\n \n@@ -76,7 +76,7 @@ it('setup bindings', () => {\n     \"function render() {\n       var _vm = this,\n         _c = _vm._self._c,\n-        _setup = _vm._setupProxy\n+        _setup = _vm._self._setupProxy\n       return _c(\n         \\\\\"div\\\\\",\n         {\n\n\n###\n\n","completion":" chore: fix snapshot\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/prefixIdentifiers.ts | file path B: packages\/compiler-sfc\/src\/prefixIdentifiers.ts\n\n@@ -64,7 +64,7 @@ export function prefixIdentifiers(\n           s.prependRight(\n             node.start!,\n             `var _vm=this,_c=_vm._self._c${\n-              isScriptSetup ? `,_setup=_vm._setupProxy;` : `;`\n+              isScriptSetup ? `,_setup=_vm._self._setupProxy;` : `;`\n             }`\n           )\n         }\n\n\n###\n\n","completion":" fix: avoid warning when accessing _setupProxy\n"}
{"prompt":" file path A: src\/core\/index.ts | file path B: src\/core\/index.ts\n\n@@ -2,6 +2,7 @@ import Vue from '.\/instance\/index'\n import { initGlobalAPI } from '.\/global-api\/index'\n import { isServerRendering } from 'core\/util\/env'\n import { FunctionalRenderContext } from 'core\/vdom\/create-functional-component'\n+import { version } from 'v3'\n \n initGlobalAPI(Vue)\n \n@@ -21,6 +22,6 @@ Object.defineProperty(Vue, 'FunctionalRenderContext', {\n   value: FunctionalRenderContext\n })\n \n-Vue.version = '__VERSION__'\n+Vue.version = version\n \n export default Vue\n\n---\n file path A: src\/v3\/index.ts | file path B: src\/v3\/index.ts\n\n@@ -1,3 +1,5 @@\n+export const version: string = '__VERSION__'\n+\n export {\n   ref,\n   shallowRef,\n\n\n###\n\n","completion":" feat: export version as named export\n"}
{"prompt":" file path A: src\/core\/vdom\/modules\/directives.ts | file path B: src\/core\/vdom\/modules\/directives.ts\n\n@@ -102,7 +102,10 @@ function normalizeDirectives(\n       dir.modifiers = emptyModifiers\n     }\n     res[getRawDirName(dir)] = dir\n-    dir.def = resolveAsset(vm.$options, 'directives', dir.name, true)\n+    if (vm._setupState && vm._setupState.__sfc) {\n+      dir.def = resolveAsset(vm, '_setupState', 'v-' + dir.name)\n+    }\n+    dir.def = dir.def || resolveAsset(vm.$options, 'directives', dir.name, true)\n   }\n   \/\/ $flow-disable-line\n   return res\n\n---\n file path A: test\/unit\/features\/v3\/apiSetup.spec.ts | file path B: test\/unit\/features\/v3\/apiSetup.spec.ts\n\n@@ -233,4 +233,18 @@ describe('api: setup context', () => {\n     await nextTick()\n     expect(vm.$el.outerHTML).toMatch(`<div>1<\/div>`)\n   })\n+\n+  it('directive resolution', () => {\n+    const spy = vi.fn()\n+    new Vue({\n+      setup: () => ({\n+        __sfc: true,\n+        vDir: {\n+          inserted: spy\n+        }\n+      }),\n+      template: `<div v-dir \/>`\n+    }).$mount()\n+    expect(spy).toHaveBeenCalled()\n+  })\n })\n\n\n###\n\n","completion":" feat: directive resolution for `<script setup>`\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/compileTemplate.ts | file path B: packages\/compiler-sfc\/src\/compileTemplate.ts\n\n@@ -132,6 +132,7 @@ function actuallyCompile(\n       filename: options.filename\n     })\n   }\n+  finalCompilerOptions.bindings = bindings\n \n   const { ast, render, staticRenderFns, tips, errors } = compile(\n     source,\n\n---\n file path A: packages\/compiler-sfc\/src\/types.ts | file path B: packages\/compiler-sfc\/src\/types.ts\n\n@@ -1,4 +1,4 @@\n-import { WarningMessage } from 'types\/compiler'\n+import { CompilerOptions, CompiledResult } from 'types\/compiler'\n import { SFCDescriptor } from '.\/parseComponent'\n \n export interface StartOfSourceMap {\n@@ -31,20 +31,9 @@ export interface VueTemplateCompiler {\n \/\/ we'll just shim this much for now - in the future these types\n \/\/ should come from vue-template-compiler directly, or this package should be\n \/\/ part of the vue monorepo.\n-export interface VueTemplateCompilerOptions {\n-  modules?: Object[]\n-  outputSourceRange?: boolean\n-  whitespace?: 'preserve' | 'condense'\n-  directives?: { [key: string]: Function }\n-}\n+export type VueTemplateCompilerOptions = CompilerOptions\n \n-export interface VueTemplateCompilerResults {\n-  ast: Object | undefined\n-  render: string\n-  staticRenderFns: string[]\n-  errors: (string | WarningMessage)[]\n-  tips: (string | WarningMessage)[]\n-}\n+export type VueTemplateCompilerResults = CompiledResult\n \n export const enum BindingTypes {\n   \/**\n\n---\n file path A: src\/compiler\/codegen\/index.ts | file path B: src\/compiler\/codegen\/index.ts\n\n@@ -1,6 +1,6 @@\n import { genHandlers } from '.\/events'\n import baseDirectives from '..\/directives\/index'\n-import { camelize, no, extend } from 'shared\/util'\n+import { camelize, no, extend, capitalize } from 'shared\/util'\n import { baseWarn, pluckModuleFunction } from '..\/helpers'\n import { emptySlotScopeToken } from '..\/parser\/index'\n import {\n@@ -13,6 +13,7 @@ import {\n   ASTText,\n   CompilerOptions\n } from 'types\/compiler'\n+import { BindingMetadata } from 'sfc\/types'\n \n type TransformFunction = (el: ASTElement, code: string) => string\n type DataGenFunction = (el: ASTElement) => string\n@@ -98,8 +99,19 @@ export function genElement(el: ASTElement, state: CodegenState): string {\n         data = genData(el, state)\n       }\n \n+      let tag: string | undefined\n+      \/\/ check if this is a component in <script setup>\n+      const bindings = state.options.bindings\n+      if (bindings && !bindings.__isScriptSetup) {\n+        tag =\n+          checkBindingType(bindings, el.tag) ||\n+          checkBindingType(bindings, camelize(el.tag)) ||\n+          checkBindingType(bindings, capitalize(camelize(el.tag)))\n+      }\n+      if (!tag) tag = `'${el.tag}'`\n+\n       const children = el.inlineTemplate ? null : genChildren(el, state, true)\n-      code = `_c('${el.tag}'${\n+      code = `_c(${tag}${\n         data ? `,${data}` : '' \/\/ data\n       }${\n         children ? `,${children}` : '' \/\/ children\n@@ -113,6 +125,13 @@ export function genElement(el: ASTElement, state: CodegenState): string {\n   }\n }\n \n+function checkBindingType(bindings: BindingMetadata, key: string) {\n+  const type = bindings[key]\n+  if (type && type.startsWith('setup')) {\n+    return key\n+  }\n+}\n+\n \/\/ hoist static sub-trees out\n function genStatic(el: ASTElement, state: CodegenState): string {\n   el.staticProcessed = true\n\n---\n file path A: src\/types\/compiler.ts | file path B: src\/types\/compiler.ts\n\n@@ -31,7 +31,8 @@ export type CompilerOptions = {\n   \/\/ for ssr optimization compiler\n   scopeId?: string\n \n-  bindingMetadata?: BindingMetadata\n+  \/\/ SFC analyzed script bindings from `compileScript()`\n+  bindings?: BindingMetadata\n }\n \n export type WarningMessage = {\n\n\n###\n\n","completion":" feat: resolve components from `<script setup>`\n"}
{"prompt":" file path A: packages\/compiler-sfc\/test\/prefixIdentifiers.spec.ts | file path B: packages\/compiler-sfc\/test\/prefixIdentifiers.spec.ts\n\n@@ -1,6 +1,7 @@\n import { prefixIdentifiers } from '..\/src\/prefixIdentifiers'\n import { compile } from 'web\/entry-compiler'\n import { format } from 'prettier'\n+import { BindingTypes } from '..\/src\/types'\n \n it('should work', () => {\n   const { render } = compile(`<div id=\"app\">\n@@ -53,3 +54,41 @@ it('should work', () => {\n     \"\n   `)\n })\n+\n+it('setup bindings', () => {\n+  const { render } = compile(`<div @click=\"count++\">{{ count }}<\/div>`)\n+\n+  const result = format(\n+    prefixIdentifiers(render, `render`, false, false, undefined, {\n+      count: BindingTypes.SETUP_REF\n+    }),\n+    {\n+      semi: false,\n+      parser: 'babel'\n+    }\n+  )\n+\n+  expect(result).toMatch(`_setup = _vm._setupProxy`)\n+  expect(result).toMatch(`_setup.count++`)\n+  expect(result).toMatch(`_vm._s(_setup.count)`)\n+\n+  expect(result).toMatchInlineSnapshot(`\n+    \"function render() {\n+      var _vm = this,\n+        _c = _vm._self._c,\n+        _setup = _vm._setupProxy\n+      return _c(\n+        \\\\\"div\\\\\",\n+        {\n+          on: {\n+            click: function (\\$event) {\n+              _setup.count++\n+            },\n+          },\n+        },\n+        [_vm._v(_vm._s(_setup.count))]\n+      )\n+    }\n+    \"\n+  `)\n+})\n\n\n###\n\n","completion":" test: test case for prefixIdentifiers w\/ bindings\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/compileScript.ts | file path B: packages\/compiler-sfc\/src\/compileScript.ts\n\n@@ -42,7 +42,7 @@ import { warnOnce } from '.\/warn'\n import { isReservedTag } from 'web\/util'\n import { dirRE } from 'compiler\/parser'\n import { parseText } from 'compiler\/parser\/text-parser'\n-import { DEFAULT_FILENAME } from '.\/parse'\n+import { DEFAULT_FILENAME } from '.\/parseComponent'\n \n \/\/ Special compiler macros\n const DEFINE_PROPS = 'defineProps'\n\n---\n file path A: packages\/compiler-sfc\/src\/parse.ts | file path B: packages\/compiler-sfc\/src\/parse.ts\n\n@@ -3,13 +3,13 @@ import { RawSourceMap, VueTemplateCompiler } from '.\/types'\n import {\n   parseComponent,\n   VueTemplateCompilerParseOptions,\n-  SFCDescriptor\n+  SFCDescriptor,\n+  DEFAULT_FILENAME\n } from '.\/parseComponent'\n \n import hash from 'hash-sum'\n import LRU from 'lru-cache'\n-\n-export const DEFAULT_FILENAME = 'anonymous.vue'\n+import { hmrShouldReload } from '.\/compileScript'\n \n const cache = new LRU<string, SFCDescriptor>(100)\n \n@@ -52,6 +52,8 @@ export function parse(options: ParseOptions): SFCDescriptor {\n   }\n \n   output.filename = filename\n+  output.shouldForceReload = prevImports =>\n+    hmrShouldReload(prevImports, output!)\n \n   if (needMap) {\n     if (output.script && !output.script.src) {\n\n---\n file path A: packages\/compiler-sfc\/src\/parseComponent.ts | file path B: packages\/compiler-sfc\/src\/parseComponent.ts\n\n@@ -3,8 +3,9 @@ import { parseHTML } from 'compiler\/parser\/html-parser'\n import { makeMap } from 'shared\/util'\n import { ASTAttr, WarningMessage } from 'types\/compiler'\n import { BindingMetadata, RawSourceMap } from '.\/types'\n-import { hmrShouldReload, ImportBinding } from '.\/compileScript'\n-import { DEFAULT_FILENAME } from '.\/parse'\n+import type { ImportBinding } from '.\/compileScript'\n+\n+export const DEFAULT_FILENAME = 'anonymous.vue'\n \n const splitRE = \/\\r?\\n\/g\n const replaceRE = \/.\/g\n@@ -84,7 +85,7 @@ export function parseComponent(\n     styles: [],\n     customBlocks: [],\n     errors: [],\n-    shouldForceReload: prevImports => hmrShouldReload(prevImports, sfc)\n+    shouldForceReload: null as any \/\/ attached in parse() by compiler-sfc\n   }\n   let depth = 0\n   let currentBlock: SFCBlock | null = null\n\n---\n file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -211,7 +211,6 @@ const builds = {\n     entry: resolve('packages\/compiler-sfc\/src\/index.ts'),\n     dest: resolve('packages\/compiler-sfc\/dist\/compiler-sfc.js'),\n     format: 'cjs',\n-    transpile: false,\n     external: Object.keys(\n       require('..\/packages\/compiler-sfc\/package.json').dependencies\n     ),\n@@ -251,7 +250,10 @@ function genConfig(name) {\n           compilerOptions: {\n             \/\/ if targeting browser, target es5\n             \/\/ if targeting node, es2017 means Node 8\n-            target: opts.transpile === false ? 'es2017' : 'es5'\n+            target:\n+              opts.transpile === false || opts.format === 'cjs'\n+                ? 'es2017'\n+                : 'es5'\n           },\n           exclude: ['test', 'test-dts']\n         }\n\n\n###\n\n","completion":" build: fix compiler build\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -87,6 +87,7 @@\n     \"csstype\": \"^3.1.0\"\n   },\n   \"devDependencies\": {\n+    \"@babel\/parser\": \"^7.18.4\",\n     \"@microsoft\/api-extractor\": \"^7.25.0\",\n     \"@rollup\/plugin-alias\": \"^3.1.9\",\n     \"@rollup\/plugin-commonjs\": \"^22.0.0\",\n@@ -109,10 +110,10 @@\n     \"karma-esbuild\": \"^2.2.4\",\n     \"karma-jasmine\": \"^5.0.1\",\n     \"lint-staged\": \"^12.5.0\",\n-    \"postcss\": \"^8.4.14\",\n     \"lodash\": \"^4.17.21\",\n     \"marked\": \"^4.0.16\",\n     \"minimist\": \"^1.2.6\",\n+    \"postcss\": \"^8.4.14\",\n     \"prettier\": \"^2.6.2\",\n     \"puppeteer\": \"^14.3.0\",\n     \"rimraf\": \"^3.0.2\",\n\n---\n file path A: packages\/compiler-sfc\/src\/parseComponent.ts | file path B: packages\/compiler-sfc\/src\/parseComponent.ts\n\n@@ -56,8 +56,8 @@ export interface SFCDescriptor {\n    * a reload vs. re-render.\n    *\n    * Note: this comparison assumes the prev\/next script are already identical,\n-   * and only checks the special case where <script setup lang=\"ts\"> unused import\n-   * pruning result changes due to template changes.\n+   * and only checks the special case where `<script setup lang=\"ts\">` unused\n+   * import pruning result changes due to template changes.\n    *\/\n   shouldForceReload: (prevImports: Record<string, ImportBinding>) => boolean\n }\n\n---\n file path A: packages\/compiler-sfc\/test\/parseComponent.spec.ts | file path B: packages\/compiler-sfc\/test\/parseComponent.spec.ts\n\n@@ -3,7 +3,8 @@ import { parseComponent } from '..\/src\/parseComponent'\n \n describe('Single File Component parser', () => {\n   it('should parse', () => {\n-    const res = parseComponent(`\n+    const res = parseComponent(\n+      `\n       <template>\n         <div>hi<\/div>\n       <\/template>\n@@ -24,7 +25,9 @@ describe('Single File Component parser', () => {\n       <div>\n         <style>nested should be ignored<\/style>\n       <\/div>\n-    `)\n+    `,\n+      { deindent: true }\n+    )\n     expect(res.template!.content.trim()).toBe('<div>hi<\/div>')\n     expect(res.styles.length).toBe(4)\n     expect(res.styles[0].src).toBe('.\/test.css')\n@@ -72,7 +75,10 @@ describe('Single File Component parser', () => {\n         h1 { color: red }\n       <\/style>\n     `\n-    const deindentDefault = parseComponent(content.trim(), { pad: false })\n+    const deindentDefault = parseComponent(content.trim(), {\n+      pad: false,\n+      deindent: true\n+    })\n     const deindentEnabled = parseComponent(content.trim(), {\n       pad: false,\n       deindent: true\n@@ -111,9 +117,18 @@ describe('Single File Component parser', () => {\n         h1 { color: red }\n       <\/style>\n `\n-    const padDefault = parseComponent(content.trim(), { pad: true })\n-    const padLine = parseComponent(content.trim(), { pad: 'line' })\n-    const padSpace = parseComponent(content.trim(), { pad: 'space' })\n+    const padDefault = parseComponent(content.trim(), {\n+      pad: true,\n+      deindent: true\n+    })\n+    const padLine = parseComponent(content.trim(), {\n+      pad: 'line',\n+      deindent: true\n+    })\n+    const padSpace = parseComponent(content.trim(), {\n+      pad: 'space',\n+      deindent: true\n+    })\n \n     expect(padDefault.script!.content).toBe(\n       Array(3 + 1).join('\/\/\\n') + '\\nexport default {}\\n'\n@@ -145,12 +160,15 @@ describe('Single File Component parser', () => {\n   })\n \n   it('should handle template blocks with lang as special text', () => {\n-    const res = parseComponent(`\n+    const res = parseComponent(\n+      `\n       <template lang=\"pug\">\n         div\n           h1(v-if='1 < 2') hello\n       <\/template>\n-    `)\n+    `,\n+      { deindent: true }\n+    )\n     expect(res.template!.content.trim()).toBe(`div\\n  h1(v-if='1 < 2') hello`)\n   })\n \n@@ -164,7 +182,8 @@ describe('Single File Component parser', () => {\n   })\n \n   it('should handle custom blocks without parsing them', () => {\n-    const res = parseComponent(`\n+    const res = parseComponent(\n+      `\n       <template>\n         <div><\/div>\n       <\/template>\n@@ -183,7 +202,9 @@ describe('Single File Component parser', () => {\n         }))\n       }\n       <\/test>\n-    `)\n+    `,\n+      { deindent: true }\n+    )\n     expect(res.customBlocks.length).toBe(3)\n \n     const simpleExample = res.customBlocks[0]\n\n---\n file path A: pnpm-lock.yaml | file path B: pnpm-lock.yaml\n\n@@ -4,6 +4,7 @@ importers:\n \n   .:\n     specifiers:\n+      '@babel\/parser': ^7.18.4\n       '@microsoft\/api-extractor': ^7.25.0\n       '@rollup\/plugin-alias': ^3.1.9\n       '@rollup\/plugin-commonjs': ^22.0.0\n@@ -50,6 +51,7 @@ importers:\n       '@vue\/compiler-sfc': link:packages\/compiler-sfc\n       csstype: 3.1.0\n     devDependencies:\n+      '@babel\/parser': 7.18.4\n       '@microsoft\/api-extractor': 7.25.0\n       '@rollup\/plugin-alias': 3.1.9_rollup@2.75.6\n       '@rollup\/plugin-commonjs': 22.0.0_rollup@2.75.6\n\n\n###\n\n","completion":" chore: fix tests\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/parseComponent.ts | file path B: packages\/compiler-sfc\/src\/parseComponent.ts\n\n@@ -14,7 +14,7 @@ export interface SFCCustomBlock {\n   content: string\n   attrs: { [key: string]: string | true }\n   start: number\n-  end?: number\n+  end: number\n   map?: RawSourceMap\n }\n \n@@ -115,6 +115,7 @@ export function parseComponent(\n         type: tag,\n         content: '',\n         start: end,\n+        end: 0, \/\/ will be set on tag close\n         attrs: attrs.reduce((cumulated, { name, value }) => {\n           cumulated[name] = value || true\n           return cumulated\n@@ -122,7 +123,15 @@ export function parseComponent(\n       }\n       if (isSpecialTag(tag)) {\n         checkAttrs(currentBlock, attrs)\n-        if (tag === 'style') {\n+        if (tag === 'script') {\n+          const block = currentBlock as SFCScriptBlock\n+          if (block.attrs.setup) {\n+            block.setup = currentBlock.attrs.setup\n+            sfc.scriptSetup = block\n+          } else {\n+            sfc.script = block\n+          }\n+        } else if (tag === 'style') {\n           sfc.styles.push(currentBlock)\n         } else {\n           sfc[tag] = currentBlock\n\n---\n file path A: src\/compiler\/parser\/html-parser.ts | file path B: src\/compiler\/parser\/html-parser.ts\n\n@@ -12,6 +12,7 @@\n import { makeMap, no } from 'shared\/util'\n import { isNonPhrasingTag } from 'web\/compiler\/util'\n import { unicodeRegExp } from 'core\/util\/lang'\n+import { ASTAttr, CompilerOptions } from 'types\/compiler'\n \n \/\/ Regular Expressions for parsing tags and attributes\n const attribute =\n@@ -54,7 +55,20 @@ function decodeAttr(value, shouldDecodeNewlines) {\n   return value.replace(re, match => decodingMap[match])\n }\n \n-export function parseHTML(html, options) {\n+export interface HTMLParserOptions extends CompilerOptions {\n+  start?: (\n+    tag: string,\n+    attrs: ASTAttr[],\n+    unary: boolean,\n+    start: number,\n+    end: number\n+  ) => void\n+  end?: (tag: string, start: number, end: number) => void\n+  chars?: (text: string, start?: number, end?: number) => void\n+  comment?: (content: string, start: number, end: number) => void\n+}\n+\n+export function parseHTML(html, options: HTMLParserOptions) {\n   const stack: any[] = []\n   const expectHTML = options.expectHTML\n   const isUnaryTag = options.isUnaryTag || no\n@@ -72,7 +86,7 @@ export function parseHTML(html, options) {\n           const commentEnd = html.indexOf('-->')\n \n           if (commentEnd >= 0) {\n-            if (options.shouldKeepComment) {\n+            if (options.shouldKeepComment && options.comment) {\n               options.comment(\n                 html.substring(4, commentEnd),\n                 index,\n@@ -242,7 +256,7 @@ export function parseHTML(html, options) {\n     const unary = isUnaryTag(tagName) || !!unarySlash\n \n     const l = match.attrs.length\n-    const attrs = new Array(l)\n+    const attrs: ASTAttr[] = new Array(l)\n     for (let i = 0; i < l; i++) {\n       const args = match.attrs[i]\n       const value = args[3] || args[4] || args[5] || ''\n\n---\n file path A: src\/compiler\/parser\/index.ts | file path B: src\/compiler\/parser\/index.ts\n\n@@ -252,10 +252,12 @@ export function parse(template: string, options: CompilerOptions): ASTElement {\n             warn(\n               `Invalid dynamic argument expression: attribute names cannot contain ` +\n                 `spaces, quotes, <, >, \/ or =.`,\n-              {\n-                start: attr.start + attr.name.indexOf(`[`),\n-                end: attr.start + attr.name.length\n-              }\n+              options.outputSourceRange\n+                ? {\n+                    start: attr.start! + attr.name.indexOf(`[`),\n+                    end: attr.start! + attr.name.length\n+                  }\n+                : undefined\n             )\n           }\n         })\n@@ -322,7 +324,7 @@ export function parse(template: string, options: CompilerOptions): ASTElement {\n       closeElement(element)\n     },\n \n-    chars(text: string, start: number, end: number) {\n+    chars(text: string, start?: number, end?: number) {\n       if (!currentParent) {\n         if (__DEV__) {\n           if (text === template) {\n\n---\n file path A: src\/types\/compiler.ts | file path B: src\/types\/compiler.ts\n\n@@ -20,6 +20,7 @@ export type CompilerOptions = {\n   shouldDecodeNewlines?: boolean\n   shouldDecodeNewlinesForHref?: boolean\n   outputSourceRange?: boolean\n+  shouldKeepComment?: boolean\n \n   \/\/ runtime user-configurable\n   delimiters?: [string, string] \/\/ template delimiters\n@@ -47,13 +48,13 @@ export type CompiledResult = {\n export type ModuleOptions = {\n   \/\/ transform an AST node before any attributes are processed\n   \/\/ returning an ASTElement from pre\/transforms replaces the element\n-  preTransformNode: (el: ASTElement) => ASTElement | null\n+  preTransformNode?: (el: ASTElement) => ASTElement | null | void\n   \/\/ transform an AST node after built-ins like v-if, v-for are processed\n-  transformNode: (el: ASTElement) => ASTElement | null\n+  transformNode?: (el: ASTElement) => ASTElement | null | void\n   \/\/ transform an AST node after its children have been processed\n   \/\/ cannot return replacement in postTransform because tree is already finalized\n-  postTransformNode: (el: ASTElement) => void\n-  genData: (el: ASTElement) => string \/\/ generate extra data string for an element\n+  postTransformNode?: (el: ASTElement) => void\n+  genData?: (el: ASTElement) => string \/\/ generate extra data string for an element\n   transformCode?: (el: ASTElement, code: string) => string \/\/ further transform generated code for an element\n   staticKeys?: Array<string> \/\/ AST properties to be considered static\n }\n\n\n###\n\n","completion":" refactor: add types for html parser options\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -30,7 +30,8 @@\n       \"require\": \".\/compiler-sfc\/index.js\"\n     },\n     \".\/dist\/*\": \".\/dist\/*\",\n-    \".\/types\/*\": \".\/types\/*\"\n+    \".\/types\/*\": \".\/types\/*\",\n+    \".\/package.json\": \".\/package.json\"\n   },\n   \"sideEffects\": false,\n   \"scripts\": {\n\n---\n file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -211,6 +211,7 @@ const builds = {\n     entry: resolve('packages\/compiler-sfc\/src\/index.ts'),\n     dest: resolve('packages\/compiler-sfc\/dist\/compiler-sfc.js'),\n     format: 'cjs',\n+    transpile: false,\n     external: Object.keys(\n       require('..\/packages\/compiler-sfc\/package.json').dependencies\n     ),\n\n\n###\n\n","completion":" build: fix compiler-sfc build\n"}
{"prompt":" file path A: packages\/compiler-sfc\/test\/compileStyle.spec.ts | file path B: packages\/compiler-sfc\/test\/compileStyle.spec.ts\n\n@@ -30,7 +30,7 @@ test('preprocess scss', () => {\n   const style = parse({\n     source:\n       '<style lang=\"scss\">\\n' +\n-      '$red: rgb(255, 0, 0);\\n' +\n+      '$red: red;\\n' +\n       '.color { color: $red; }\\n' +\n       '<\/style>\\n',\n     filename: 'example.vue',\n@@ -46,7 +46,7 @@ test('preprocess scss', () => {\n   })\n \n   expect(result.errors.length).toBe(0)\n-  expect(result.code).toEqual(expect.stringContaining('color: red;'))\n+  expect(result.code).toMatch('color: red;')\n   expect(result.map).toBeTruthy()\n })\n \n@@ -54,7 +54,7 @@ test('preprocess sass', () => {\n   const style = parse({\n     source:\n       '<style lang=\"sass\">\\n' +\n-      '$red: rgb(255, 0, 0)\\n' +\n+      '$red: red\\n' +\n       '.color\\n' +\n       '   color: $red\\n' +\n       '<\/style>\\n',\n@@ -71,7 +71,7 @@ test('preprocess sass', () => {\n   })\n \n   expect(result.errors.length).toBe(0)\n-  expect(result.code).toEqual(expect.stringContaining('color: red;'))\n+  expect(result.code).toMatch('color: red;')\n   expect(result.map).toBeTruthy()\n })\n \n\n\n###\n\n","completion":" chore: test pass\n"}
{"prompt":" file path A: packages\/compiler-sfc\/src\/templateCompilerModules\/assetUrl.ts | file path B: packages\/compiler-sfc\/src\/templateCompilerModules\/assetUrl.ts\n\n@@ -1,6 +1,7 @@\n \/\/ vue compiler module for transforming `<tag>:<attribute>` to `require`\n \n-import { urlToRequire, ASTNode, Attr } from '.\/utils'\n+import { urlToRequire } from '.\/utils'\n+import { ASTNode, ASTAttr } from 'types\/compiler'\n \n export interface AssetURLOptions {\n   [name: string]: string | string[]\n@@ -43,16 +44,19 @@ function transform(\n   options: AssetURLOptions,\n   transformAssetUrlsOption?: TransformAssetUrlsOptions\n ) {\n+  if (node.type !== 1 || !node.attrs) return\n   for (const tag in options) {\n-    if ((tag === '*' || node.tag === tag) && node.attrs) {\n+    if (tag === '*' || node.tag === tag) {\n       const attributes = options[tag]\n       if (typeof attributes === 'string') {\n-        node.attrs.some(attr =>\n+        node.attrs!.some(attr =>\n           rewrite(attr, attributes, transformAssetUrlsOption)\n         )\n       } else if (Array.isArray(attributes)) {\n         attributes.forEach(item =>\n-          node.attrs.some(attr => rewrite(attr, item, transformAssetUrlsOption))\n+          node.attrs!.some(attr =>\n+            rewrite(attr, item, transformAssetUrlsOption)\n+          )\n         )\n       }\n     }\n@@ -60,7 +64,7 @@ function transform(\n }\n \n function rewrite(\n-  attr: Attr,\n+  attr: ASTAttr,\n   name: string,\n   transformAssetUrlsOption?: TransformAssetUrlsOptions\n ) {\n\n---\n file path A: packages\/compiler-sfc\/src\/templateCompilerModules\/srcset.ts | file path B: packages\/compiler-sfc\/src\/templateCompilerModules\/srcset.ts\n\n@@ -1,7 +1,8 @@\n \/\/ vue compiler module for transforming `img:srcset` to a number of `require`s\n \n-import { urlToRequire, ASTNode } from '.\/utils'\n+import { urlToRequire } from '.\/utils'\n import { TransformAssetUrlsOptions } from '.\/assetUrl'\n+import { ASTNode } from 'types\/compiler'\n \n interface ImageCandidate {\n   require: string\n@@ -21,9 +22,11 @@ function transform(\n   node: ASTNode,\n   transformAssetUrlsOptions?: TransformAssetUrlsOptions\n ) {\n-  const tags = ['img', 'source']\n+  if (node.type !== 1 || !node.attrs) {\n+    return\n+  }\n \n-  if (tags.indexOf(node.tag) !== -1 && node.attrs) {\n+  if (node.tag === 'img' || node.tag === 'source') {\n     node.attrs.forEach(attr => {\n       if (attr.name === 'srcset') {\n         \/\/ same logic as in transform-require.js\n\n---\n file path A: packages\/compiler-sfc\/src\/templateCompilerModules\/utils.ts | file path B: packages\/compiler-sfc\/src\/templateCompilerModules\/utils.ts\n\n@@ -2,16 +2,6 @@ import { TransformAssetUrlsOptions } from '.\/assetUrl'\n import { UrlWithStringQuery, parse as uriParse } from 'url'\n import path from 'path'\n \n-export interface Attr {\n-  name: string\n-  value: string\n-}\n-\n-export interface ASTNode {\n-  tag: string\n-  attrs: Attr[]\n-}\n-\n export function urlToRequire(\n   url: string,\n   transformAssetUrlsOption: TransformAssetUrlsOptions = {}\n\n---\n file path A: packages\/compiler-sfc\/test\/compileTemplate.spec.ts | file path B: packages\/compiler-sfc\/test\/compileTemplate.spec.ts\n\n@@ -4,7 +4,6 @@ import { compileTemplate } from '..\/src\/compileTemplate'\n import Vue from 'vue'\n \n function mockRender(code: string, mocks: Record<string, any> = {}) {\n-  console.log(code)\n   const fn = new Function(\n     `require`,\n     `${code}; return { render, staticRenderFns }`\n\n\n###\n\n","completion":" refactor: use existing types\n"}
{"prompt":" file path A: scripts\/alias.js | file path B: scripts\/alias.js\n\n@@ -9,5 +9,5 @@ module.exports = {\n   shared: resolve('src\/shared'),\n   web: resolve('src\/platforms\/web'),\n   server: resolve('packages\/server-renderer\/src'),\n-  sfc: resolve('src\/sfc')\n+  sfc: resolve('packages\/compiler-sfc\/src')\n }\n\n\n###\n\n","completion":" build: fix build script alias\n"}
{"prompt":" file path A: src\/core\/instance\/render.ts | file path B: src\/core\/instance\/render.ts\n\n@@ -102,7 +102,8 @@ export function renderMixin(Vue: typeof Component) {\n       vm.$scopedSlots = normalizeScopedSlots(\n         vm.$parent!,\n         _parentVnode.data!.scopedSlots,\n-        vm.$slots\n+        vm.$slots,\n+        vm.$scopedSlots\n       )\n       if (vm._slotsProxy) {\n         syncSetupSlots(vm._slotsProxy, vm.$scopedSlots)\n\n---\n file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.ts | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.ts\n\n@@ -8,35 +8,40 @@ import { currentInstance, setCurrentInstance } from 'v3\/currentInstance'\n \n export function normalizeScopedSlots(\n   ownerVm: Component,\n-  slots: { [key: string]: Function } | void,\n-  normalSlots: { [key: string]: VNode[] }\n+  scopedSlots: { [key: string]: Function } | undefined,\n+  normalSlots: { [key: string]: VNode[] },\n+  prevScopedSlots?: { [key: string]: Function }\n ): any {\n   let res\n-  const prevSlots = ownerVm.$scopedSlots\n   const hasNormalSlots = Object.keys(normalSlots).length > 0\n-  const isStable = slots ? !!slots.$stable : !hasNormalSlots\n-  const key = slots && slots.$key\n-  if (!slots) {\n+  const isStable = scopedSlots ? !!scopedSlots.$stable : !hasNormalSlots\n+  const key = scopedSlots && scopedSlots.$key\n+  if (!scopedSlots) {\n     res = {}\n-  } else if (slots._normalized) {\n+  } else if (scopedSlots._normalized) {\n     \/\/ fast path 1: child component re-render only, parent did not change\n-    return slots._normalized\n+    return scopedSlots._normalized\n   } else if (\n     isStable &&\n-    prevSlots &&\n-    prevSlots !== emptyObject &&\n-    key === prevSlots.$key &&\n+    prevScopedSlots &&\n+    prevScopedSlots !== emptyObject &&\n+    key === prevScopedSlots.$key &&\n     !hasNormalSlots &&\n-    !prevSlots.$hasNormal\n+    !prevScopedSlots.$hasNormal\n   ) {\n     \/\/ fast path 2: stable scoped slots w\/ no normal slots to proxy,\n     \/\/ only need to normalize once\n-    return prevSlots\n+    return prevScopedSlots\n   } else {\n     res = {}\n-    for (const key in slots) {\n-      if (slots[key] && key[0] !== '$') {\n-        res[key] = normalizeScopedSlot(ownerVm, normalSlots, key, slots[key])\n+    for (const key in scopedSlots) {\n+      if (scopedSlots[key] && key[0] !== '$') {\n+        res[key] = normalizeScopedSlot(\n+          ownerVm,\n+          normalSlots,\n+          key,\n+          scopedSlots[key]\n+        )\n       }\n     }\n   }\n@@ -48,8 +53,8 @@ export function normalizeScopedSlots(\n   }\n   \/\/ avoriaz seems to mock a non-extensible $scopedSlots object\n   \/\/ and when that is passed down this would cause an error\n-  if (slots && Object.isExtensible(slots)) {\n-    slots._normalized = res\n+  if (scopedSlots && Object.isExtensible(scopedSlots)) {\n+    scopedSlots._normalized = res\n   }\n   def(res, '$stable', isStable)\n   def(res, '$key', key)\n\n---\n file path A: test\/unit\/features\/component\/component-slot.spec.ts | file path B: test\/unit\/features\/component\/component-slot.spec.ts\n\n@@ -1044,4 +1044,33 @@ describe('Component slot', () => {\n \n     expect(vm.$el.innerHTML).toBe(`<!----><span>b<\/span>`)\n   })\n+\n+  \/\/ regression 2.7.0-alpha.4\n+  it('passing scoped slots through nested parent chain', () => {\n+    const Foo = {\n+      template: `\n+        <div><slot>foo default<\/slot><\/div>\n+      `\n+    }\n+\n+    const Bar = {\n+      components: { Foo },\n+      template: `<Foo><slot name=\"bar\"\/><\/Foo>`\n+    }\n+\n+    const App = {\n+      components: { Bar },\n+      template: `<Bar>\n+        <template #bar>\n+          <span>App content for Bar#bar<\/span>\n+        <\/template>\n+      <\/Bar>`\n+    }\n+\n+    const vm = new Vue({\n+      render: h => h(App)\n+    }).$mount()\n+\n+    expect(vm.$el.innerHTML).toMatch(`App content for Bar#bar`)\n+  })\n })\n\n\n###\n\n","completion":" fix: fix scopedSlots regression\n"}
{"prompt":" file path A: None | file path B: .git-blame-ignore-revs\n\n@@ -0,0 +1,4 @@\n+# chore: move to typescript\n+af9fc2bcff31d5baa413039818a9b3e011deccaf\n+# workflow: remove eslint, apply prettier\n+72aed6a149b94b5b929fb47370a7a6d4cb7491c5\n\n\n###\n\n","completion":" chore: exclude trivial refactors from `git blame` results (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/inject.ts | file path B: src\/core\/instance\/inject.ts\n\n@@ -1,4 +1,4 @@\n-import { warn, hasSymbol, isFunction } from '..\/util\/index'\n+import { warn, hasSymbol, isFunction, isObject } from '..\/util\/index'\n import { defineReactive, toggleObserving } from '..\/observer\/index'\n import type { Component } from 'types\/component'\n import { provide } from 'v3\/apiInject'\n@@ -10,6 +10,9 @@ export function initProvide(vm: Component) {\n     const provided = isFunction(provideOption)\n       ? provideOption.call(vm)\n       : provideOption\n+    if (!isObject(provided)) {\n+      return\n+    }\n     const keys = hasSymbol ? Reflect.ownKeys(provided) : Object.keys(provided)\n     setCurrentInstance(vm)\n     for (let i = 0; i < keys.length; i++) {\n\n\n###\n\n","completion":" fix: guard against non-object provide value\n"}
{"prompt":" file path A: vitest.config.ts | file path B: vitest.config.ts\n\n@@ -9,7 +9,7 @@ export default defineConfig({\n       compiler: resolve('src\/compiler'),\n       core: resolve('src\/core'),\n       server: resolve('packages\/server-renderer\/src'),\n-      sfc: resolve('src\/sfc'),\n+      sfc: resolve('packages\/compiler-sfc\/src'),\n       shared: resolve('src\/shared'),\n       web: resolve('src\/platforms\/web'),\n       v3: resolve('src\/v3'),\n\n\n###\n\n","completion":" chore: fix test alias\n"}
{"prompt":" file path A: packages\/server-renderer\/package.json | file path B: packages\/server-renderer\/package.json\n\n@@ -34,10 +34,11 @@\n     \"source-map\": \"0.5.6\"\n   },\n   \"devDependencies\": {\n+    \"@types\/webpack\": \"^4.41.32\",\n+    \"file-loader\": \"^3.0.1\",\n     \"memory-fs\": \"^0.5.0\",\n     \"vue\": \"file:..\/..\",\n-    \"webpack\": \"^4.46.0\",\n-    \"file-loader\": \"^3.0.1\"\n+    \"webpack\": \"^4.46.0\"\n   },\n   \"homepage\": \"https:\/\/github.com\/vuejs\/vue\/tree\/dev\/packages\/vue-server-renderer#readme\"\n }\n\n---\n file path A: types\/test\/ssr-test.ts | file path B: packages\/server-renderer\/types\/test.ts\n\n@@ -1,12 +1,9 @@\n-import Vue, { VNode, VNodeDirective } from '..\/index'\n-import VueSSRClientPlugin = require('..\/..\/packages\/vue-server-renderer\/client-plugin')\n-import VueSSRServerPlugin = require('..\/..\/packages\/vue-server-renderer\/server-plugin')\n-import webpack = require('webpack')\n+import Vue, { VNode, VNodeDirective } from '..\/..\/..\/types\/index'\n+import VueSSRClientPlugin from '..\/client-plugin'\n+import VueSSRServerPlugin from '..\/server-plugin'\n+import webpack from 'webpack'\n import { readFileSync } from 'fs'\n-import {\n-  createRenderer,\n-  createBundleRenderer\n-} from '..\/..\/packages\/vue-server-renderer'\n+import { createRenderer, createBundleRenderer } from '.'\n \n function createApp(context: any) {\n   return new Vue({\n\n---\n file path A: packages\/server-renderer\/types\/tsconfig.json | file path B: packages\/server-renderer\/types\/tsconfig.json\n\n@@ -5,6 +5,7 @@\n     \"moduleResolution\": \"node\",\n     \"strict\": true,\n     \"noEmit\": true,\n+    \"allowSyntheticDefaultImports\": true,\n     \"paths\": {\n       \"vue\": [\"..\/..\/..\/types\/index.d.ts\"]\n     }\n\n---\n file path A: pnpm-lock.yaml | file path B: pnpm-lock.yaml\n\n@@ -128,6 +128,7 @@ importers:\n \n   packages\/server-renderer:\n     specifiers:\n+      '@types\/webpack': ^4.41.32\n       chalk: ^4.0.0\n       file-loader: ^3.0.1\n       hash-sum: ^2.0.0\n@@ -150,6 +151,7 @@ importers:\n       serialize-javascript: 6.0.0\n       source-map: 0.5.6\n     devDependencies:\n+      '@types\/webpack': 4.41.32\n       file-loader: 3.0.1_webpack@4.46.0\n       memory-fs: 0.5.0\n       vue: 'file:'\n@@ -492,6 +494,39 @@ packages:\n       '@types\/node': 17.0.36\n     dev: true\n \n+  \/@types\/source-list-map\/0.1.2:\n+    resolution: {integrity: sha512-K5K+yml8LTo9bWJI\/rECfIPrGgxdpeNbj+d53lwN4QjW1MCwlkhUms+gtdzigTeUyBr09+u8BwOIY3MXvHdcsA==}\n+    dev: true\n+\n+  \/@types\/tapable\/1.0.8:\n+    resolution: {integrity: sha512-ipixuVrh2OdNmauvtT51o3d8z12p6LtFW9in7U79der\/kwejjdNchQC5UMn5u\/KxNoM7VHHOs\/l8KS8uHxhODQ==}\n+    dev: true\n+\n+  \/@types\/uglify-js\/3.13.2:\n+    resolution: {integrity: sha512-\/xFrPIo+4zOeNGtVMbf9rUm0N+i4pDf1ynExomqtokIJmVzR3962lJ1UE+MmexMkA0cmN9oTzg5Xcbwge0Ij2Q==}\n+    dependencies:\n+      source-map: 0.6.1\n+    dev: true\n+\n+  \/@types\/webpack-sources\/3.2.0:\n+    resolution: {integrity: sha512-Ft7YH3lEVRQ6ls8k4Ff1oB4jN6oy\/XmU6tQISKdhfh+1mR+viZFphS6WL0IrtDOzvefmJg5a0s7ZQoRXwqTEFg==}\n+    dependencies:\n+      '@types\/node': 17.0.36\n+      '@types\/source-list-map': 0.1.2\n+      source-map: 0.7.3\n+    dev: true\n+\n+  \/@types\/webpack\/4.41.32:\n+    resolution: {integrity: sha512-cb+0ioil\/7oz5\/\/7tZUSwbrSAN\/NWHrQylz5cW8G0dWTcF\/g+\/dSdMlKVZspBYuMAN1+WnwHrkxiRrLcwd0Heg==}\n+    dependencies:\n+      '@types\/node': 17.0.36\n+      '@types\/tapable': 1.0.8\n+      '@types\/uglify-js': 3.13.2\n+      '@types\/webpack-sources': 3.2.0\n+      anymatch: 3.1.2\n+      source-map: 0.6.1\n+    dev: true\n+\n   \/@types\/yauzl\/2.10.0:\n     resolution: {integrity: sha512-Cn6WYCm0tXv8p6k+A8PvbDG763EDpBoTzHdA+Q\/MF6H3sapGjCm9NzoaJncJS9tUKSuCoDs9XHxYYsQDgxR6kw==}\n     requiresBuild: true\n@@ -4083,7 +4118,7 @@ packages:\n     dev: true\n \n   \/normalize-path\/2.1.1:\n-    resolution: {integrity: sha1-GrKLVW4Zg2Oowab35vogE3\/mrtk=}\n+    resolution: {integrity: sha512-3pKJwH184Xo\/lnH6oyP1q2pMd7HcypqqmRs91\/6\/i2CGtWwIKGCkOOMTm\/zXbgTEWHw1uNpNi\/igc3ePOYHb6w==}\n     engines: {node: '>=0.10.0'}\n     dependencies:\n       remove-trailing-separator: 1.1.0\n@@ -5300,6 +5335,11 @@ packages:\n     resolution: {integrity: sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz\/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==}\n     engines: {node: '>=0.10.0'}\n \n+  \/source-map\/0.7.3:\n+    resolution: {integrity: sha512-CkCj6giN3S+n9qrYiBTX5gystlENnRW5jZeNLHpe6aue+SrHcG5VYwujhW9s4dY31mEGsxBDrHR6oI69fTXsaQ==}\n+    engines: {node: '>= 8'}\n+    dev: true\n+\n   \/sourcemap-codec\/1.4.8:\n     resolution: {integrity: sha512-9NykojV5Uih4lgo5So5dtw+f0JgJX30KCNI8gwhz2J9A15wD0Ml6tjHKwf6fTSa6fAdVBdZeNOs9eJ71qCk8vA==}\n     dev: true\n@@ -6375,7 +6415,7 @@ packages:\n   'file:':\n     resolution: {directory: '', type: directory}\n     name: vue\n-    version: 2.6.14\n+    version: 2.7.0-alpha.3\n     dependencies:\n       '@vue\/compiler-sfc': link:packages\/compiler-sfc\n     dev: true\n\n---\n file path A: types\/index.d.ts | file path B: types\/index.d.ts\n\n@@ -11,8 +11,8 @@ export {\n   ComponentOptions,\n   FunctionalComponentOptions,\n   RenderContext,\n-  \/\/ PropType,\n-  \/\/ PropOptions,\n+  PropType,\n+  PropOptions,\n   ComputedOptions,\n   WatchHandler,\n   WatchOptions,\n@@ -52,8 +52,8 @@ export {\n   ComponentRenderProxy\n } from '.\/v3-component-proxy'\n export {\n-  PropType,\n-  PropOptions,\n+  \/\/ PropType,\n+  \/\/ PropOptions,\n   ExtractPropTypes,\n   ExtractDefaultPropTypes\n } from '.\/v3-component-props'\n\n---\n file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -250,10 +250,22 @@ export interface RenderContext<Props = DefaultProps> {\n   injections: any\n }\n \n-import { PropOptions, PropType } from '.\/v3-component-props'\n+export type Prop<T> =\n+  | { (): T }\n+  | { new (...args: never[]): T & object }\n+  | { new (...args: string[]): Function }\n+\n+export type PropType<T> = Prop<T> | Prop<T>[]\n \n export type PropValidator<T> = PropOptions<T> | PropType<T>\n \n+export interface PropOptions<T = any> {\n+  type?: PropType<T>\n+  required?: boolean\n+  default?: T | null | undefined | (() => T | null | undefined)\n+  validator?(value: unknown): boolean\n+}\n+\n export type RecordPropsDefinition<T> = {\n   [K in keyof T]: PropValidator<T[K]>\n }\n\n---\n file path A: types\/test\/v3\/setup-test.ts | file path B: types\/test\/v3\/setup-test.ts\n\n@@ -1,4 +1,4 @@\n-import Vue, { defineComponent } from '..\/..\/index'\n+import Vue, { defineComponent, PropType } from '..\/..\/index'\n \n \/\/ object props\n Vue.extend({\n@@ -78,3 +78,18 @@ defineComponent({\n     }\n   }\n })\n+\n+defineComponent({\n+  props: {\n+    foo: null as any as PropType<{ a: number }>\n+  },\n+  data() {\n+    this.foo?.a\n+  },\n+  setup(props) {\n+    const res = props.foo?.a.toFixed(2)\n+    \/\/ @ts-expect-error\n+    res.charAt(1)\n+    res?.charAt(1)\n+  }\n+})\n\n---\n file path A: types\/v3-component-props.d.ts | file path B: types\/v3-component-props.d.ts\n\n@@ -22,8 +22,8 @@ export interface PropOptions<T = any, D = T> {\n export type PropType<T> = PropConstructor<T> | PropConstructor<T>[]\n \n type PropConstructor<T> =\n-  | { new (...args: any[]): T & object }\n   | { (): T }\n+  | { new (...args: never[]): T & object }\n   | { new (...args: string[]): Function }\n \n type RequiredKeys<T> = {\n\n\n###\n\n","completion":" chore: fix type tests\n"}
{"prompt":" file path A: src\/sfc\/parser.ts | file path B: packages\/compiler-sfc\/src\/parser.ts\n\n\n\n###\n\n","completion":" chore: move sfc parser\n"}
{"prompt":" file path A: api-extractor.tsconfig.json | file path B: api-extractor.tsconfig.json\n\n@@ -1,36 +1,8 @@\n {\n+  \"extends\": \".\/tsconfig.json\",\n   \"compilerOptions\": {\n     \"baseUrl\": \".\/temp\",\n-    \"outDir\": \"dist\",\n-    \"sourceMap\": true,\n-    \"target\": \"esnext\",\n-    \"module\": \"ESNext\",\n-    \"moduleResolution\": \"node\",\n-    \"strict\": true,\n-\n-    \"allowJs\": true,\n-    \"noImplicitAny\": false,\n-    \"noImplicitThis\": false,\n-\n-    \"noUnusedLocals\": true,\n-    \"experimentalDecorators\": true,\n-    \"resolveJsonModule\": true,\n-    \"esModuleInterop\": true,\n-    \"removeComments\": false,\n-    \"jsx\": \"preserve\",\n-    \"lib\": [\"esnext\", \"dom\"],\n-    \"paths\": {\n-      \"compiler\/*\": [\"src\/compiler\/*\"],\n-      \"core\/*\": [\"src\/core\/*\"],\n-      \"server\/*\": [\"src\/server\/*\"],\n-      \"sfc\/*\": [\"src\/sfc\/*\"],\n-      \"shared\/*\": [\"src\/shared\/*\"],\n-      \"web\/*\": [\"src\/platforms\/web\/*\"],\n-      \"v3\": [\"src\/v3\/index\"],\n-      \"v3\/*\": [\"src\/v3\/*\"],\n-      \"types\/*\": [\"src\/types\/*\"],\n-      \"vue\": [\"src\/platforms\/web\/entry-runtime-with-compiler\"]\n-    }\n+    \"types\": []\n   },\n   \"include\": [\"src\"]\n }\n\n---\n file path A: None | file path B: packages\/server-renderer\/test\/tsconfig.json\n\n@@ -0,0 +1,7 @@\n+{\n+  \"extends\": \"..\/..\/..\/tsconfig.json\",\n+  \"compilerOptions\": {\n+    \"types\": [\"node\", \"vitest\/globals\"]\n+  },\n+  \"include\": [\".\", \"..\/..\/..\/test\/test-env.d.ts\"]\n+}\n\n---\n file path A: packages\/server-renderer\/tsconfig.json | file path B: None\n\n@@ -1,37 +0,0 @@\n-{\n-  \"compilerOptions\": {\n-    \"baseUrl\": \".\",\n-    \"outDir\": \"dist\",\n-    \"sourceMap\": true,\n-    \"target\": \"esnext\",\n-    \"module\": \"ESNext\",\n-    \"moduleResolution\": \"node\",\n-    \"strict\": true,\n-\n-    \"allowJs\": true,\n-    \"noImplicitAny\": false,\n-    \"noImplicitThis\": false,\n-\n-    \"noUnusedLocals\": true,\n-    \"experimentalDecorators\": true,\n-    \"resolveJsonModule\": true,\n-    \"esModuleInterop\": true,\n-    \"removeComments\": false,\n-    \"jsx\": \"preserve\",\n-    \"lib\": [\"esnext\", \"dom\"],\n-    \"types\": [\"node\", \"vitest\/globals\"],\n-    \"paths\": {\n-      \"compiler\/*\": [\"..\/..\/src\/compiler\/*\"],\n-      \"core\/*\": [\"..\/..\/src\/core\/*\"],\n-      \"server\/*\": [\".\/src\/*\"],\n-      \"sfc\/*\": [\"..\/..\/src\/sfc\/*\"],\n-      \"shared\/*\": [\"..\/..\/src\/shared\/*\"],\n-      \"web\/*\": [\"..\/..\/src\/platforms\/web\/*\"],\n-      \"v3\": [\"..\/..\/src\/v3\/index\"],\n-      \"v3\/*\": [\"..\/..\/src\/v3\/*\"],\n-      \"types\/*\": [\"..\/..\/src\/types\/*\"],\n-      \"vue\": [\"..\/..\/src\/platforms\/web\/entry-runtime-with-compiler\"]\n-    }\n-  },\n-  \"include\": [\"..\/..\/src\", \"..\/..\/test\/test-env.d.ts\", \".\"]\n-}\n\n---\n file path A: test\/tsconfig.json | file path B: test\/tsconfig.json\n\n@@ -1,37 +1,7 @@\n {\n+  \"extends\": \"..\/tsconfig.json\",\n   \"compilerOptions\": {\n-    \"baseUrl\": \".\",\n-    \"outDir\": \"dist\",\n-    \"sourceMap\": true,\n-    \"target\": \"esnext\",\n-    \"module\": \"ESNext\",\n-    \"moduleResolution\": \"node\",\n-    \"strict\": true,\n-\n-    \"allowJs\": true,\n-    \"noImplicitAny\": false,\n-    \"noImplicitThis\": false,\n-\n-    \"noUnusedLocals\": true,\n-    \"experimentalDecorators\": true,\n-    \"resolveJsonModule\": true,\n-    \"esModuleInterop\": true,\n-    \"removeComments\": false,\n-    \"jsx\": \"preserve\",\n-    \"lib\": [\"esnext\", \"dom\"],\n-    \"types\": [\"node\", \"vitest\/globals\"],\n-    \"paths\": {\n-      \"compiler\/*\": [\"..\/src\/compiler\/*\"],\n-      \"core\/*\": [\"..\/src\/core\/*\"],\n-      \"server\/*\": [\"..\/packages\/server-renderer\/src\/*\"],\n-      \"sfc\/*\": [\"..\/src\/sfc\/*\"],\n-      \"shared\/*\": [\"..\/src\/shared\/*\"],\n-      \"web\/*\": [\"..\/src\/platforms\/web\/*\"],\n-      \"v3\": [\"..\/src\/v3\/index\"],\n-      \"v3\/*\": [\"..\/src\/v3\/*\"],\n-      \"types\/*\": [\"..\/src\/types\/*\"],\n-      \"vue\": [\"..\/src\/platforms\/web\/entry-runtime-with-compiler\"]\n-    }\n+    \"types\": [\"node\", \"vitest\/globals\"]\n   },\n   \"include\": [\"..\/src\", \".\"]\n }\n\n---\n file path A: tsconfig.json | file path B: tsconfig.json\n\n@@ -24,7 +24,7 @@\n       \"compiler\/*\": [\"src\/compiler\/*\"],\n       \"core\/*\": [\"src\/core\/*\"],\n       \"server\/*\": [\"packages\/server-renderer\/src\/*\"],\n-      \"sfc\/*\": [\"src\/sfc\/*\"],\n+      \"sfc\/*\": [\"packages\/compiler-sfc\/src\/*\"],\n       \"shared\/*\": [\"src\/shared\/*\"],\n       \"web\/*\": [\"src\/platforms\/web\/*\"],\n       \"v3\": [\"src\/v3\/index\"],\n@@ -33,5 +33,5 @@\n       \"vue\": [\"src\/platforms\/web\/entry-runtime-with-compiler\"]\n     }\n   },\n-  \"include\": [\"src\", \"packages\/server-renderer\/src\"],\n+  \"include\": [\"src\", \"packages\/*\/src\"]\n }\n\n\n###\n\n","completion":" build: use extended tsconfig\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -11,6 +11,7 @@\n   \"files\": [\n     \"src\",\n     \"dist\/*.js\",\n+    \"dist\/*.mjs\",\n     \"types\/*.d.ts\",\n     \"compiler-sfc\",\n     \"packages\/compiler-sfc\"\n\n\n###\n\n","completion":" build: fix mjs build publish\n"}
{"prompt":" file path A: api-extractor.json | file path B: api-extractor.json\n\n@@ -11,6 +11,7 @@\n \n   \"dtsRollup\": {\n     \"enabled\": true,\n+    \"untrimmedFilePath\": \"\",\n     \"publicTrimmedFilePath\": \".\/types\/v3-generated.d.ts\"\n   },\n \n\n\n###\n\n","completion":" chore: avoid generating unused dts\n"}
{"prompt":" file path A: None | file path B: compiler-sfc\/index.mjs\n\n@@ -0,0 +1 @@\n+export * from '@vue\/compiler-sfc'\n\n---\n file path A: compiler-sfc\/package.json | file path B: compiler-sfc\/package.json\n\n@@ -1,4 +1,5 @@\n {\n   \"main\": \"index.js\",\n+  \"module\": \"index.mjs\",\n   \"types\": \"index.d.ts\"\n }\n\n---\n file path A: package.json | file path B: package.json\n\n@@ -15,6 +15,22 @@\n     \"compiler-sfc\",\n     \"packages\/compiler-sfc\"\n   ],\n+  \"exports\": {\n+    \".\": {\n+      \"import\": {\n+        \"node\": \".\/dist\/vue.runtime.mjs\",\n+        \"default\": \".\/dist\/vue.runtime.esm.js\"\n+      },\n+      \"require\": \".\/dist\/vue.runtime.common.js\",\n+      \"types\": \".\/types\/index.d.ts\"\n+    },\n+    \".\/compiler-sfc\": {\n+      \"import\": \".\/compiler-sfc\/index.mjs\",\n+      \"require\": \".\/compiler-sfc\/index.js\"\n+    },\n+    \".\/dist\/*\": \".\/dist\/*\",\n+    \".\/types\/*\": \".\/types\/*\"\n+  },\n   \"sideEffects\": false,\n   \"scripts\": {\n     \"dev\": \"rollup -w -c scripts\/config.js --environment TARGET:full-dev\",\n\n---\n file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -65,6 +65,13 @@ const builds = {\n     format: 'es',\n     banner\n   },\n+  \/\/ Runtime only ES modules build (for Node)\n+  'runtime-mjs': {\n+    entry: resolve('web\/entry-runtime-esm.ts'),\n+    dest: resolve('dist\/vue.runtime.mjs'),\n+    format: 'es',\n+    banner\n+  },\n   \/\/ Runtime+compiler ES modules build (for bundlers)\n   'full-esm': {\n     entry: resolve('web\/entry-runtime-with-compiler-esm.ts'),\n\n\n###\n\n","completion":" feat: add exports field + mjs build\n"}
{"prompt":" file path A: src\/core\/observer\/index.ts | file path B: src\/core\/observer\/index.ts\n\n@@ -225,8 +225,10 @@ export function defineReactive(\n  * triggers change notification if the property doesn't\n  * already exist.\n  *\/\n+export function set<T>(array: T[], key: number, value: T): T\n+export function set<T>(object: object, key: string | number, value: T): T\n export function set(\n-  target: Array<any> | Record<string, any>,\n+  target: any[] | Record<string, any>,\n   key: any,\n   val: any\n ): any {\n@@ -279,7 +281,9 @@ export function set(\n \/**\n  * Delete a property and trigger change if necessary.\n  *\/\n-export function del(target: Array<any> | Object, key: any) {\n+export function del<T>(array: T[], key: number): void\n+export function del(object: object, key: string | number): void\n+export function del(target: any[] | object, key: any) {\n   if (__DEV__ && (isUndef(target) || isPrimitive(target))) {\n     warn(\n       `Cannot delete reactive property on undefined, null, or primitive value: ${target}`\n\n---\n file path A: src\/v3\/index.ts | file path B: src\/v3\/index.ts\n\n@@ -72,5 +72,6 @@ export { h } from '.\/h'\n export { getCurrentInstance } from '.\/currentInstance'\n export { useSlots, useAttrs } from '.\/apiSetup'\n export { nextTick } from 'core\/util\/next-tick'\n+export { set, del } from 'core\/observer'\n \n export * from '.\/apiLifecycle'\n\n---\n file path A: types\/test\/v3\/reactivity-test.ts | file path B: types\/test\/v3\/reactivity-test.ts\n\n@@ -11,7 +11,9 @@ import {\n   shallowReactive,\n   readonly,\n   markRaw,\n-  shallowReadonly\n+  shallowReadonly,\n+  set,\n+  del\n } from '..\/..\/index'\n import { describe, expectType } from '..\/utils'\n \n@@ -371,3 +373,15 @@ describe('shallowReadonly ref unwrap', () => {\n   expectType<Ref>(r.count.n)\n   r.count.n.value = 123\n })\n+\n+describe('set\/del', () => {\n+  set({}, 1, 'hi')\n+  set([], 1, 'bye')\n+  del({}, 'foo')\n+  del([], 1)\n+\n+  \/\/ @ts-expect-error\n+  set({}, 1)\n+  \/\/ @ts-expect-error\n+  del([], 'fse', 123)\n+})\n\n\n###\n\n","completion":" feat: expose set\/del as named exports\n"}
{"prompt":" file path A: test\/unit\/modules\/server-compiler\/compiler-options.spec.ts | file path B: test\/unit\/modules\/server-compiler\/compiler-options.spec.ts\n\n@@ -1,4 +1,4 @@\n-import { ssrCompile } from 'web\/server\/compiler'\n+import { ssrCompile } from 'server\/compiler'\n \n describe('ssrCompile options', () => {\n   it('comments', () => {\n\n\n###\n\n","completion":" chore: fix unit test\n"}
{"prompt":" file path A: src\/core\/util\/perf.ts | file path B: src\/core\/util\/perf.ts\n\n@@ -8,9 +8,13 @@ if (__DEV__) {\n   \/* istanbul ignore if *\/\n   if (\n     perf &&\n+    \/\/ @ts-ignore\n     perf.mark &&\n+    \/\/ @ts-ignore\n     perf.measure &&\n+    \/\/ @ts-ignore\n     perf.clearMarks &&\n+    \/\/ @ts-ignore\n     perf.clearMeasures\n   ) {\n     mark = tag => perf.mark(tag)\n\n\n###\n\n","completion":" chore: fix TS 4.7 error\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -65,7 +65,7 @@\n   },\n   \"homepage\": \"https:\/\/github.com\/vuejs\/vue#readme\",\n   \"dependencies\": {\n-    \"@vue\/compiler-sfc\": \"2.6.14\"\n+    \"@vue\/compiler-sfc\": \"workspace:*\"\n   },\n   \"devDependencies\": {\n     \"@microsoft\/api-extractor\": \"^7.24.2\",\n\n---\n file path A: pnpm-lock.yaml | file path B: pnpm-lock.yaml\n\n@@ -11,6 +11,7 @@ importers:\n       '@rollup\/plugin-replace': ^4.0.0\n       '@types\/he': ^1.1.2\n       '@types\/node': ^17.0.30\n+      '@vue\/compiler-sfc': workspace:*\n       chalk: ^4.0.0\n       commitizen: ^4.2.4\n       conventional-changelog: ^3.1.25\n@@ -42,6 +43,8 @@ importers:\n       typescript: ^4.6.4\n       vitest: ^0.12.6\n       yorkie: ^2.0.0\n+    dependencies:\n+      '@vue\/compiler-sfc': link:packages\/compiler-sfc\n     devDependencies:\n       '@microsoft\/api-extractor': 7.24.2\n       '@rollup\/plugin-alias': 3.1.9_rollup@2.75.3\n@@ -6798,4 +6801,6 @@ packages:\n     resolution: {directory: '', type: directory}\n     name: vue\n     version: 2.6.14\n+    dependencies:\n+      '@vue\/compiler-sfc': link:packages\/compiler-sfc\n     dev: true\n\n\n###\n\n","completion":" chore: fix dep\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -23,7 +23,7 @@\n     \"build\": \"node scripts\/build.js\",\n     \"build:ssr\": \"npm run build -- web-runtime-cjs,web-server-renderer\",\n     \"build:types\": \"rimraf temp && tsc --declaration --emitDeclarationOnly --outDir temp && api-extractor run\",\n-    \"test\": \"npm run lint && npm run ts-check && npm run test:types && npm run test:unit && npm run test:e2e\",\n+    \"test\": \"npm run ts-check && npm run test:types && npm run test:unit && npm run test:e2e && npm run test:ssr\",\n     \"test:unit\": \"vitest run test\/unit\",\n     \"test:ssr\": \"npm run build:ssr && vitest run test\/ssr\",\n     \"test:e2e\": \"npm run build -- web-full-prod,web-server-renderer-basic && vitest run test\/e2e\",\n\n\n###\n\n","completion":" chore: fix test script [ci skip]\n"}
{"prompt":" file path A: src\/core\/vdom\/modules\/index.ts | file path B: src\/core\/vdom\/modules\/index.ts\n\n@@ -1,4 +1,4 @@\n import directives from '.\/directives'\n-import ref from '.\/ref'\n+import ref from '.\/template-ref'\n \n export default [ref, directives]\n\n---\n file path A: src\/core\/vdom\/modules\/ref.ts | file path B: src\/core\/vdom\/modules\/template-ref.ts\n\n\n---\n file path A: src\/core\/vdom\/patch.ts | file path B: src\/core\/vdom\/patch.ts\n\n@@ -13,7 +13,7 @@\n import VNode, { cloneVNode } from '.\/vnode'\n import config from '..\/config'\n import { SSR_ATTR } from 'shared\/constants'\n-import { registerRef } from '.\/modules\/ref'\n+import { registerRef } from '.\/modules\/template-ref'\n import { traverse } from '..\/observer\/traverse'\n import { activeInstance } from '..\/instance\/lifecycle'\n import { isTextInputType } from 'web\/util\/element'\n\n\n###\n\n","completion":" chore: rename template ref module\n"}
{"prompt":" file path A: src\/core\/observer\/index.ts | file path B: src\/core\/observer\/index.ts\n\n@@ -19,6 +19,8 @@ import { isReadonly, isRef } from '..\/..\/v3'\n \n const arrayKeys = Object.getOwnPropertyNames(arrayMethods)\n \n+const NO_INIITIAL_VALUE = {}\n+\n \/**\n  * In some cases we may want to disable observation inside a component's\n  * update computation.\n@@ -67,7 +69,7 @@ export class Observer {\n     const keys = Object.keys(obj)\n     for (let i = 0; i < keys.length; i++) {\n       const key = keys[i]\n-      defineReactive(obj, key, obj[key], undefined, shallow)\n+      defineReactive(obj, key, NO_INIITIAL_VALUE, undefined, shallow)\n     }\n   }\n \n@@ -149,7 +151,10 @@ export function defineReactive(\n   \/\/ cater for pre-defined getter\/setters\n   const getter = property && property.get\n   const setter = property && property.set\n-  if ((!getter || setter) && arguments.length === 2) {\n+  if (\n+    (!getter || setter) &&\n+    (val === NO_INIITIAL_VALUE || arguments.length === 2)\n+  ) {\n     val = obj[key]\n   }\n \n\n---\n file path A: test\/unit\/features\/directives\/class.spec.ts | file path B: test\/unit\/features\/directives\/class.spec.ts\n\n@@ -1,4 +1,5 @@\n import Vue from 'vue'\n+import { isFunction } from 'core\/util'\n \n function assertClass(assertions, done) {\n   const vm = new Vue({\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.ts | file path B: test\/unit\/modules\/compiler\/codegen.spec.ts\n\n@@ -1,7 +1,7 @@\n import { parse } from 'compiler\/parser\/index'\n import { optimize } from 'compiler\/optimizer'\n import { generate } from 'compiler\/codegen'\n-import { isObject, extend } from 'shared\/util'\n+import { isObject, isFunction, extend } from 'shared\/util'\n import { isReservedTag } from 'web\/util\/index'\n import { baseOptions } from 'web\/compiler\/options'\n \n\n\n###\n\n","completion":" chore: fix unit tests\n"}
{"prompt":" file path A: src\/core\/instance\/state.ts | file path B: src\/core\/instance\/state.ts\n\n@@ -60,7 +60,8 @@ export function initState(vm: Component) {\n   if (opts.data) {\n     initData(vm)\n   } else {\n-    observe((vm._data = {}))!.vmCount++\n+    const ob = observe((vm._data = {}))\n+    ob && ob.vmCount++\n   }\n   if (opts.computed) initComputed(vm, opts.computed)\n   if (opts.watch && opts.watch !== nativeWatch) {\n@@ -154,7 +155,8 @@ function initData(vm: Component) {\n     }\n   }\n   \/\/ observe data\n-  observe(data)!.vmCount++\n+  const ob = observe(data)\n+  ob && ob.vmCount++\n }\n \n export function getData(data: Function, vm: Component): any {\n\n\n###\n\n","completion":" chore: fix ssr tests\n"}
{"prompt":" file path A: test\/transition\/karma.conf.js | file path B: test\/transition\/karma.conf.js\n\n@@ -2,6 +2,7 @@ const featureFlags = require('..\/..\/scripts\/feature-flags')\n process.env.CHROME_BIN = require('puppeteer').executablePath()\n \n const define = {\n+  __DEV__: true,\n   'process.env.CI': !!process.env.CI\n }\n \n\n\n###\n\n","completion":" ci: __DEV__ flag for e2e tests\n"}
{"prompt":" file path A: .github\/workflows\/ci.yml | file path B: .github\/workflows\/ci.yml\n\n@@ -67,7 +67,7 @@ jobs:\n       - name: Run transition tests\n         run: pnpm run test:transition\n \n-  lint-and-test-dts:\n+  type-test:\n     runs-on: ubuntu-latest\n     steps:\n       - uses: actions\/checkout@v2\n@@ -86,8 +86,5 @@ jobs:\n       - name: Run srouce type check\n         run: pnpm run ts-check\n \n-      - name: Run eslint\n-        run: pnpm run lint\n-\n       - name: Run type declaration tests\n         run: pnpm run test:types\n\n---\n file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -238,7 +238,8 @@ function genConfig(name) {\n \n   \/\/ built-in vars\n   const vars = {\n-    __VERSION__: version\n+    __VERSION__: version,\n+    __DEV__: `process.env.NODE_ENV !== 'production'`\n   }\n   \/\/ feature flags\n   Object.keys(featureFlags).forEach(key => {\n\n\n###\n\n","completion":" ci: fix ci\n"}
{"prompt":" file path A: src\/composition-api\/reactivity\/computed.ts | file path B: src\/composition-api\/reactivity\/computed.ts\n\n@@ -13,7 +13,7 @@ export interface ComputedRef<T = any> extends WritableComputedRef<T> {\n }\n \n export interface WritableComputedRef<T> extends Ref<T> {\n-  readonly effect: { stop(): void }\n+  readonly effect: Watcher\n }\n \n export type ComputedGetter<T> = (...args: any[]) => T\n@@ -53,54 +53,31 @@ export function computed<T>(\n     setter = getterOrOptions.set\n   }\n \n-  return new ComputedRefImpl(\n-    getter,\n-    setter,\n-    onlyGetter,\n-    isServerRendering()\n-  ) as any\n-}\n-\n-class ComputedRefImpl<T> {\n-  public dep?: Dep = undefined\n-\n-  public readonly __v_isRef = true\n-  public readonly effect\n-\n-  private _watcher: Watcher | null\n-\n-  constructor(\n-    private _getter: ComputedGetter<T>,\n-    private readonly _setter: ComputedSetter<T>,\n-    public readonly __v_isReadonly: boolean,\n-    isSSR: boolean\n-  ) {\n-    const watcher = (this._watcher = isSSR\n-      ? null\n-      : new Watcher(currentInstance, _getter, noop, { lazy: true }))\n-    this.effect = {\n-      stop() {\n-        watcher && watcher.teardown()\n-      }\n-    }\n-  }\n+  const watcher = isServerRendering()\n+    ? null\n+    : new Watcher(currentInstance, getter, noop, { lazy: true })\n \n-  get value() {\n-    const watcher = this._watcher\n-    if (watcher) {\n-      if (watcher.dirty) {\n-        watcher.evaluate()\n-      }\n-      if (Dep.target) {\n-        watcher.depend()\n+  return {\n+    __v_isRef: true,\n+    __v_isReadonly: onlyGetter,\n+    \/\/ some libs rely on the presence effect for checking computed refs\n+    \/\/ from normal refs, but the implementation doesn't matter\n+    effect: watcher,\n+    get value() {\n+      if (watcher) {\n+        if (watcher.dirty) {\n+          watcher.evaluate()\n+        }\n+        if (Dep.target) {\n+          watcher.depend()\n+        }\n+        return watcher.value\n+      } else {\n+        return getter()\n       }\n-      return watcher.value\n-    } else {\n-      return this._getter()\n+    },\n+    set value(newVal) {\n+      setter(newVal)\n     }\n-  }\n-\n-  set value(newValue: T) {\n-    this._setter(newValue)\n-  }\n+  } as any\n }\n\n---\n file path A: src\/composition-api\/reactivity\/ref.ts | file path B: src\/composition-api\/reactivity\/ref.ts\n\n@@ -76,33 +76,21 @@ export type CustomRefFactory<T> = (\n   set: (value: T) => void\n }\n \n-class CustomRefImpl<T> {\n-  public dep = new Dep()\n-  private readonly _get: ReturnType<CustomRefFactory<T>>['get']\n-  private readonly _set: ReturnType<CustomRefFactory<T>>['set']\n-\n-  public readonly __v_isRef = true\n-\n-  constructor(factory: CustomRefFactory<T>) {\n-    const { get, set } = factory(\n-      () => this.dep.depend(),\n-      () => this.dep.notify()\n-    )\n-    this._get = get\n-    this._set = set\n-  }\n-\n-  get value() {\n-    return this._get()\n-  }\n-\n-  set value(newVal) {\n-    this._set(newVal)\n-  }\n-}\n-\n export function customRef<T>(factory: CustomRefFactory<T>): Ref<T> {\n-  return new CustomRefImpl(factory) as any\n+  const dep = new Dep()\n+  const { get, set } = factory(\n+    () => dep.depend(),\n+    () => dep.notify()\n+  )\n+  return {\n+    __v_isRef: true,\n+    get value() {\n+      return get()\n+    },\n+    set value(newVal) {\n+      set(newVal)\n+    }\n+  } as any\n }\n \n export type ToRefs<T = any> = {\n@@ -120,25 +108,6 @@ export function toRefs<T extends object>(object: T): ToRefs<T> {\n   return ret\n }\n \n-class ObjectRefImpl<T extends object, K extends keyof T> {\n-  public readonly __v_isRef = true\n-\n-  constructor(\n-    private readonly _object: T,\n-    private readonly _key: K,\n-    private readonly _defaultValue?: T[K]\n-  ) {}\n-\n-  get value() {\n-    const val = this._object[this._key]\n-    return val === undefined ? (this._defaultValue as T[K]) : val\n-  }\n-\n-  set value(newVal) {\n-    this._object[this._key] = newVal\n-  }\n-}\n-\n export type ToRef<T> = IfAny<T, Ref<T>, [T] extends [Ref] ? T : Ref<T>>\n \n export function toRef<T extends object, K extends keyof T>(\n@@ -158,9 +127,19 @@ export function toRef<T extends object, K extends keyof T>(\n   defaultValue?: T[K]\n ): ToRef<T[K]> {\n   const val = object[key]\n-  return isRef(val)\n-    ? val\n-    : (new ObjectRefImpl(object, key, defaultValue) as any)\n+  if (isRef(val)) {\n+    return val as any\n+  }\n+  return {\n+    __v_isRef: true,\n+    get value() {\n+      const val = object[key]\n+      return val === undefined ? (defaultValue as T[K]) : val\n+    },\n+    set value(newVal) {\n+      object[key] = newVal\n+    }\n+  } as any\n }\n \n \/**\n\n---\n file path A: test\/unit\/features\/composition-api\/reactivity\/computed.spec.ts | file path B: test\/unit\/features\/composition-api\/reactivity\/computed.spec.ts\n\n@@ -131,7 +131,7 @@ describe('reactivity\/computed', () => {\n     expect(dummy).toBe(undefined)\n     value.foo = 1\n     expect(dummy).toBe(1)\n-    cValue.effect.stop()\n+    cValue.effect.teardown()\n     value.foo = 2\n     expect(dummy).toBe(1)\n   })\n@@ -221,7 +221,7 @@ describe('reactivity\/computed', () => {\n \n   it('should expose value when stopped', () => {\n     const x = computed(() => 1)\n-    x.effect.stop()\n+    x.effect.teardown()\n     expect(x.value).toBe(1)\n   })\n \n\n\n###\n\n","completion":" refactor: simplify implementations\n"}
{"prompt":" file path A: src\/composition-api\/apiWatch.ts | file path B: src\/composition-api\/apiWatch.ts\n\n@@ -1,7 +1,6 @@\n import { isRef, Ref } from '.\/reactivity\/ref'\n import { ComputedRef } from '.\/reactivity\/computed'\n import { isReactive, isShallow } from '.\/reactivity\/reactive'\n-import { TrackOpTypes, TriggerOpTypes } from '.\/reactivity\/operations'\n import {\n   warn,\n   noop,\n@@ -14,7 +13,11 @@ import {\n } from 'core\/util'\n import { currentInstance } from '.\/currentInstance'\n import { traverse } from 'core\/observer\/traverse'\n-import { EffectScheduler, ReactiveEffect } from '.\/reactivity\/effect'\n+import {\n+  EffectScheduler,\n+  ReactiveEffect,\n+  DebuggerEvent\n+} from '.\/reactivity\/effect'\n \n const WATCHER = `watcher`\n const WATCHER_CB = `${WATCHER} callback`\n@@ -54,19 +57,6 @@ export interface DebuggerOptions {\n   onTrigger?: (event: DebuggerEvent) => void\n }\n \n-export type DebuggerEvent = {\n-  \/\/ TODO effect: ReactiveEffect\n-} & DebuggerEventExtraInfo\n-\n-export type DebuggerEventExtraInfo = {\n-  target: object\n-  type: TrackOpTypes | TriggerOpTypes\n-  key: any\n-  newValue?: any\n-  oldValue?: any\n-  oldTarget?: Map<any, any> | Set<any>\n-}\n-\n export interface WatchOptions<Immediate = boolean> extends WatchOptionsBase {\n   immediate?: Immediate\n   deep?: boolean\n\n---\n file path A: src\/composition-api\/index.ts | file path B: src\/composition-api\/index.ts\n\n@@ -47,6 +47,5 @@ export {\n   watch,\n   watchEffect,\n   watchPostEffect,\n-  watchSyncEffect,\n-  DebuggerEvent\n+  watchSyncEffect\n } from '.\/apiWatch'\n\n\n###\n\n","completion":" chore: remove duplicated types\n"}
{"prompt":" file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -212,7 +212,9 @@ function genConfig(name) {\n         cacheRoot: path.resolve(__dirname, '..\/', 'node_modules\/.rts2_cache'),\n         tsconfigOverride: {\n           compilerOptions: {\n-            target: opts.transpile === false ? 'esnext' : 'es5'\n+            \/\/ if targeting browser, target es5\n+            \/\/ if targeting node, es2017 means Node 8\n+            target: opts.transpile === false ? 'es2017' : 'es5'\n           },\n           exclude: ['test', 'test-dts']\n         }\n\n\n###\n\n","completion":" build: target es2017 \/ node 8 for cjs files\n"}
{"prompt":" file path A: .github\/workflows\/ci.yml | file path B: .github\/workflows\/ci.yml\n\n@@ -63,6 +63,8 @@ jobs:\n \n       - name: Run e2e tests\n         run: pnpm run test:e2e\n+\n+      - name: Run transition tests\n         run: pnpm run test:transition\n \n   lint-and-test-dts:\n\n\n###\n\n","completion":" chore: fix ci script\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -25,7 +25,7 @@\n     \"test\": \"npm run lint && npm run ts-check && npm run test:types && npm run test:unit && npm run test:e2e\",\n     \"test:unit\": \"vitest run test\/unit\",\n     \"test:ssr\": \"npm run build:ssr && vitest run test\/ssr\",\n-    \"test:e2e\": \"npm run build -- web-full-prod,web-server-basic-renderer && vitest run test\/e2e\",\n+    \"test:e2e\": \"npm run build -- web-full-prod,web-server-renderer-basic && vitest run test\/e2e\",\n     \"test:types\": \"tsc -p .\/types\/tsconfig.json\",\n     \"lint\": \"eslint src scripts test\",\n     \"ts-check\": \"tsc -p tsconfig.json --noEmit\",\n\n\n###\n\n","completion":" ci: fix e2e build script\n"}
{"prompt":" file path A: test\/e2e\/modal.ts | file path B: None\n\n@@ -1,27 +0,0 @@\n-module.exports = {\n-  'modal': function (browser) {\n-    browser\n-    .url('http:\/\/localhost:8080\/examples\/modal\/')\n-      .waitForElementVisible('#app', 1000)\n-      .assert.elementNotPresent('.modal-mask')\n-      .click('#show-modal')\n-      .assert.elementPresent('.modal-mask')\n-      .assert.elementPresent('.modal-wrapper')\n-      .assert.elementPresent('.modal-container')\n-      .waitFor(50)\n-      .assert.cssClassPresent('.modal-mask', 'modal-enter-active')\n-      .waitFor(300)\n-      .assert.cssClassNotPresent('.modal-mask', 'modal-enter-active')\n-      .assert.containsText('.modal-header h3', 'custom header')\n-      .assert.containsText('.modal-body', 'default body')\n-      .assert.containsText('.modal-footer', 'default footer')\n-      .click('.modal-default-button')\n-      \/\/ should have transition\n-      .assert.elementPresent('.modal-mask')\n-      .waitFor(50)\n-      .assert.cssClassPresent('.modal-mask', 'modal-leave-active')\n-      .waitFor(300)\n-      .assert.elementNotPresent('.modal-mask')\n-      .end()\n-  }\n-}\n\n---\n file path A: test\/e2e\/select2.ts | file path B: None\n\n@@ -1,47 +0,0 @@\n-declare const vm: any \n-\n-module.exports = {\n-  'select2': function (browser) {\n-    browser\n-    .url('http:\/\/localhost:8080\/examples\/select2\/')\n-      .waitForElementVisible('.select2', 1000)\n-      .assert.elementPresent('select')\n-      .assert.containsText('p', 'Selected: 0')\n-      .assert.containsText('span.select2', 'Select one')\n-\n-      .click('.select2-selection__rendered')\n-      .assert.count('.select2-results__option', 3)\n-      .assert.containsText('.select2-results__option:nth-child(1)', 'Select one')\n-      .assert.containsText('.select2-results__option:nth-child(2)', 'Hello')\n-      .assert.containsText('.select2-results__option:nth-child(3)', 'World')\n-      .assert.attributePresent('.select2-results__option:nth-child(1)', 'aria-disabled')\n-\n-      .click('.select2-results__option:nth-child(2)')\n-      .assert.count('.select2-results__option', 0)\n-      .assert.containsText('p', 'Selected: 1')\n-      .assert.containsText('span.select2', 'Hello')\n-\n-      \/\/ test dynamic options\n-      .execute(function () {\n-        vm.options.push({ id: 3, text: 'Vue' })\n-      })\n-      .click('.select2-selection__rendered')\n-      .assert.count('.select2-results__option', 4)\n-      .assert.containsText('.select2-results__option:nth-child(1)', 'Select one')\n-      .assert.containsText('.select2-results__option:nth-child(2)', 'Hello')\n-      .assert.containsText('.select2-results__option:nth-child(3)', 'World')\n-      .assert.containsText('.select2-results__option:nth-child(4)', 'Vue')\n-\n-      .click('.select2-results__option:nth-child(4)')\n-      .assert.count('.select2-results__option', 0)\n-      .assert.containsText('p', 'Selected: 3')\n-      .assert.containsText('span.select2', 'Vue')\n-\n-      .execute(function () {\n-        vm.selected = 2\n-      })\n-      .assert.containsText('p', 'Selected: 2')\n-      .assert.containsText('span.select2', 'World')\n-      .end()\n-  }\n-}\n\n\n###\n\n","completion":" chore: remove stale tests [ci skip]\n"}
{"prompt":" file path A: None | file path B: dist\/vue.common.js\n\n@@ -0,0 +1,5 @@\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('.\/vue.common.prod.js')\n+} else {\n+  module.exports = require('.\/vue.common.dev.js')\n+}\n\n---\n file path A: None | file path B: dist\/vue.runtime.common.js\n\n@@ -0,0 +1,5 @@\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('.\/vue.runtime.common.prod.js')\n+} else {\n+  module.exports = require('.\/vue.runtime.common.dev.js')\n+}\n\n\n###\n\n","completion":" build: restore cjs entry files\n"}
{"prompt":" file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -151,18 +151,24 @@ const builds = {\n     dest: resolve('packages\/vue-server-renderer\/build.dev.js'),\n     format: 'cjs',\n     env: 'development',\n-    external: Object.keys(\n-      require('..\/packages\/vue-server-renderer\/package.json').dependencies\n-    )\n+    external: [\n+      'stream',\n+      ...Object.keys(\n+        require('..\/packages\/vue-server-renderer\/package.json').dependencies\n+      )\n+    ]\n   },\n   'web-server-renderer-prod': {\n     entry: resolve('web\/entry-server-renderer.ts'),\n     dest: resolve('packages\/vue-server-renderer\/build.prod.js'),\n     format: 'cjs',\n     env: 'production',\n-    external: Object.keys(\n-      require('..\/packages\/vue-server-renderer\/package.json').dependencies\n-    )\n+    external: [\n+      'stream',\n+      ...Object.keys(\n+        require('..\/packages\/vue-server-renderer\/package.json').dependencies\n+      )\n+    ]\n   },\n   'web-server-renderer-basic': {\n     entry: resolve('web\/entry-server-basic-renderer.ts'),\n\n\n###\n\n","completion":" build: externalize stream to avoid warning\n"}
{"prompt":" file path A: test\/ssr\/ssr-bundle-render.spec.ts | file path B: test\/ssr\/ssr-bundle-render.spec.ts\n\n@@ -1,7 +1,7 @@\n import LRU from 'lru-cache'\n import { compileWithWebpack } from '.\/compile-with-webpack'\n-import { createBundleRenderer } from '..\/..\/packages\/vue-server-renderer'\n-import VueSSRServerPlugin from '..\/..\/packages\/vue-server-renderer\/server-plugin'\n+import { createBundleRenderer } from 'web\/entry-server-renderer'\n+import VueSSRServerPlugin from 'server\/webpack-plugin\/server'\n \n ;(global as any).__SSR_TEST__ = true\n \n\n---\n file path A: test\/ssr\/ssr-template.spec.ts | file path B: test\/ssr\/ssr-template.spec.ts\n\n@@ -1,7 +1,7 @@\n-import Vue from '..\/..\/dist\/vue.runtime.common.js'\n+import Vue from 'vue'\n import { compileWithWebpack } from '.\/compile-with-webpack'\n-import { createRenderer } from '..\/..\/packages\/vue-server-renderer'\n-import VueSSRClientPlugin from '..\/..\/packages\/vue-server-renderer\/client-plugin'\n+import { createRenderer } from 'web\/entry-server-renderer'\n+import VueSSRClientPlugin from 'server\/webpack-plugin\/client'\n import { createRenderer as createBundleRenderer } from '.\/ssr-bundle-render.spec.js'\n \n ;(global as any).__SSR_TEST__ = true\n\n\n###\n\n","completion":" test: fix ssr test imports\n"}
{"prompt":" file path A: src\/server\/webpack-plugin\/client.js | file path B: None\n\n@@ -1,67 +0,0 @@\n-const hash = require('hash-sum')\n-const uniq = require('lodash.uniq')\n-import { isJS, isCSS, getAssetName, onEmit, stripModuleIdHash } from '.\/util'\n-\n-export default class VueSSRClientPlugin {\n-  constructor (options = {}) {\n-    this.options = Object.assign({\n-      filename: 'vue-ssr-client-manifest.json'\n-    }, options)\n-  }\n-\n-  apply (compiler) {\n-    const stage = 'PROCESS_ASSETS_STAGE_ADDITIONAL'\n-    onEmit(compiler, 'vue-client-plugin', stage, (compilation, cb) => {\n-      const stats = compilation.getStats().toJson()\n-\n-      const allFiles = uniq(stats.assets\n-        .map(a => a.name))\n-\n-      const initialFiles = uniq(Object.keys(stats.entrypoints)\n-        .map(name => stats.entrypoints[name].assets)\n-        .reduce((assets, all) => all.concat(assets), [])\n-        .map(getAssetName)\n-        .filter((file) => isJS(file) || isCSS(file)))\n-\n-      const asyncFiles = allFiles\n-        .filter((file) => isJS(file) || isCSS(file))\n-        .filter(file => initialFiles.indexOf(file) < 0)\n-\n-      const manifest = {\n-        publicPath: stats.publicPath,\n-        all: allFiles,\n-        initial: initialFiles,\n-        async: asyncFiles,\n-        modules: { \/* [identifier: string]: Array<index: number> *\/ }\n-      }\n-\n-      const assetModules = stats.modules.filter(m => m.assets.length)\n-      const fileToIndex = asset => manifest.all.indexOf(getAssetName(asset))\n-      stats.modules.forEach(m => {\n-        \/\/ ignore modules duplicated in multiple chunks\n-        if (m.chunks.length === 1) {\n-          const cid = m.chunks[0]\n-          const chunk = stats.chunks.find(c => c.id === cid)\n-          if (!chunk || !chunk.files) {\n-            return\n-          }\n-          const id = stripModuleIdHash(m.identifier)\n-          const files = manifest.modules[hash(id)] = chunk.files.map(fileToIndex)\n-          \/\/ find all asset modules associated with the same chunk\n-          assetModules.forEach(m => {\n-            if (m.chunks.some(id => id === cid)) {\n-              files.push.apply(files, m.assets.map(fileToIndex))\n-            }\n-          })\n-        }\n-      })\n-\n-      const json = JSON.stringify(manifest, null, 2)\n-      compilation.assets[this.options.filename] = {\n-        source: () => json,\n-        size: () => json.length\n-      }\n-      cb()\n-    })\n-  }\n-}\n\n\n###\n\n","completion":" chore: remove stale js file\n"}
{"prompt":" file path A: test\/helpers\/to-have-warned.ts | file path B: test\/helpers\/to-have-warned.ts\n\n@@ -62,15 +62,37 @@ expect.extend({\n           `expected \"${received}\" to have been warned ${n} times but got ${found}.`\n       }\n     }\n+  },\n+\n+  toHaveBeenTipped(received: string) {\n+    const passed = tip.mock.calls.some((args) => args[0].includes(received))\n+    if (passed) {\n+      return {\n+        pass: true,\n+        message: () => `expected \"${received}\" not to have been tipped.`\n+      }\n+    } else {\n+      const msgs = warn.mock.calls.map((args) => args[0]).join('\\n - ')\n+      return {\n+        pass: false,\n+        message: () =>\n+          `expected \"${received}\" to have been tipped` +\n+          (msgs.length\n+            ? `.\\n\\nActual messages:\\n\\n - ${msgs}`\n+            : ` but no tip was recorded.`)\n+      }\n+    }\n   }\n })\n \n let warn: SpyInstance\n+let tip: SpyInstance\n const asserted: Set<string> = new Set()\n \n beforeEach(() => {\n   asserted.clear()\n   warn = vi.spyOn(console, 'error')\n+  tip = vi.spyOn(console, 'warn').mockImplementation(() => {})\n   warn.mockImplementation(() => {})\n })\n \n\n---\n file path A: test\/test-env.d.ts | file path B: test\/test-env.d.ts\n\n@@ -20,6 +20,7 @@ declare namespace jest {\n     toHaveBeenWarned(): R\n     toHaveBeenWarnedLast(): R\n     toHaveBeenWarnedTimes(n: number): R\n+    toHaveBeenTipped(): R\n     toHaveClass(cls: string): R\n   }\n }\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.ts | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.ts\n\n@@ -746,14 +746,14 @@ describe('Component scoped slot', () => {\n       })\n \n       it('should warn v-slot usage on non-component elements', () => {\n-        const vm = new Vue({\n+        new Vue({\n           template: `<div ${syntax}=\"foo\"\/>`\n         }).$mount()\n         expect(`v-slot can only be used on components or <template>`).toHaveBeenWarned()\n       })\n \n       it('should warn mixed usage', () => {\n-        const vm = new Vue({\n+        new Vue({\n           template: `<foo><bar slot=\"one\" slot-scope=\"bar\" ${syntax}=\"bar\"><\/bar><\/foo>`,\n           components: { Foo, Bar }\n         }).$mount()\n@@ -802,7 +802,7 @@ describe('Component scoped slot', () => {\n     })\n \n     it('should warn mixed root-default and named slots', () => {\n-      const vm = new Vue({\n+      new Vue({\n         template: `\n           <foo #default=\"foo\">\n             {{ foo }}\n@@ -938,7 +938,6 @@ describe('Component scoped slot', () => {\n   \/\/ #9432: async components inside a scoped slot should trigger update of the\n   \/\/ component that invoked the scoped slot, not the lexical context component.\n   it('async component inside scoped slot', done => {\n-    let p\n     const vm = new Vue({\n       template: `\n         <foo>\n\n---\n file path A: test\/vitest.setup.ts | file path B: test\/vitest.setup.ts\n\n@@ -1,4 +1,5 @@\n-(global as any).__WEEX__ = false\n+;(global as any).__WEEX__ = false\n+process.env.NEW_SLOT_SYNTAX = 'true'\n \n import '.\/helpers\/shim-done'\n import '.\/helpers\/to-have-warned'\n\n\n###\n\n","completion":" test: unit\/features\/component passing\n"}
{"prompt":" file path A: test\/vitest.setup.ts | file path B: test\/vitest.setup.ts\n\n@@ -1,3 +1,5 @@\n+(global as any).__WEEX__ = false\n+\n import '.\/helpers\/shim-done'\n import '.\/helpers\/to-have-warned'\n import '.\/helpers\/wait-for-update'\n\n---\n file path A: vitest.config.ts | file path B: vitest.config.ts\n\n@@ -16,9 +16,6 @@ export default defineConfig({\n       vue: resolve('src\/platforms\/web\/entry-runtime-with-compiler')\n     }\n   },\n-  define: {\n-    __WEEX__: false\n-  },\n   test: {\n     globals: true,\n     environment: 'jsdom',\n\n\n###\n\n","completion":" test: move __WEEX__ flag to runtime for tests\n"}
{"prompt":" file path A: test\/unit\/features\/component\/component-async.spec.ts | file path B: test\/unit\/features\/component\/component-async.spec.ts\n\n@@ -21,6 +21,10 @@ describe('Component async', () => {\n   beforeAll(function () {\n     \/\/ @ts-expect-error\n     global.setTimeout = function (func, delay) {\n+      if (delay >= 1000) {\n+        \/\/ skip vitest internal timeouts\n+        return\n+      }\n       const id = oldSetTimeout(function () {\n         delete timeoutsPending[id]\n         func()\n\n\n###\n\n","completion":" test: first full test suite passing\n"}
{"prompt":" file path A: packages\/weex-template-compiler\/yarn.lock | file path B: None\n\n@@ -1,97 +0,0 @@\n-# THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.\n-# yarn lockfile v1\n-\n-\n-acorn-walk@^8.0.2:\n-  version \"8.0.2\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/acorn-walk\/-\/acorn-walk-8.0.2.tgz#d4632bfc63fd93d0f15fd05ea0e984ffd3f5a8c3\"\n-  integrity sha512-+bpA9MJsHdZ4bgfDcpk0ozQyhhVct7rzOmO0s1IIr0AGGgKBljss8n2zp11rRP2wid5VGeh04CgeKzgat5\/25A==\n-\n-acorn@^8.1.0:\n-  version \"8.1.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/acorn\/-\/acorn-8.1.0.tgz#52311fd7037ae119cbb134309e901aa46295b3fe\"\n-  integrity sha512-LWCF\/Wn0nfHOmJ9rzQApGnxnvgfROzGilS8936rqN\/lfcYkY9MYZzdMqN+2NJ4SlTc+m5HiSa+kNfDtI64dwUA==\n-\n-deep-is@~0.1.3:\n-  version \"0.1.3\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/deep-is\/-\/deep-is-0.1.3.tgz#b369d6fb5dbc13eecf524f91b070feedc357cf34\"\n-  integrity sha1-s2nW+128E+7PUk+RsHD+7cNXzzQ=\n-\n-escodegen@^1.8.1:\n-  version \"1.14.3\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/escodegen\/-\/escodegen-1.14.3.tgz#4e7b81fba61581dc97582ed78cab7f0e8d63f503\"\n-  integrity sha512-qFcX0XJkdg+PB3xjZZG\/wKSuT1PnQWx57+TVSjIMmILd2yC\/6ByYElPwJnslDsuWuSAp4AwJGumarAAmJch5Kw==\n-  dependencies:\n-    esprima \"^4.0.1\"\n-    estraverse \"^4.2.0\"\n-    esutils \"^2.0.2\"\n-    optionator \"^0.8.1\"\n-  optionalDependencies:\n-    source-map \"~0.6.1\"\n-\n-esprima@^4.0.1:\n-  version \"4.0.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/esprima\/-\/esprima-4.0.1.tgz#13b04cdb3e6c5d19df91ab6987a8695619b0aa71\"\n-  integrity sha512-eGuFFw7Upda+g4p+QHvnW0RyTX\/SVeJBDM\/gCtMARO0cLuT2HcEKnTPvhjV6aGeqrCB\/sbNop0Kszm0jsaWU4A==\n-\n-estraverse@^4.2.0:\n-  version \"4.3.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/estraverse\/-\/estraverse-4.3.0.tgz#398ad3f3c5a24948be7725e83d11a7de28cdbd1d\"\n-  integrity sha512-39nnKffWz8xN1BU\/2c79n9nB9HDzo0niYUqx6xyqUnyoAnQyyWpOTdZEeiCch8BBu515t4wp9ZmgVfVhn9EBpw==\n-\n-esutils@^2.0.2:\n-  version \"2.0.3\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/esutils\/-\/esutils-2.0.3.tgz#74d2eb4de0b8da1293711910d50775b9b710ef64\"\n-  integrity sha512-kVscqXk4OCp68SZ0dkgEKVi6\/8ij300KBWTJq32P\/dYeWTSwK41WyTxalN1eRmA5Z9UU\/LX9D7FWSmV9SAYx6g==\n-\n-fast-levenshtein@~2.0.6:\n-  version \"2.0.6\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/fast-levenshtein\/-\/fast-levenshtein-2.0.6.tgz#3d8a5c66883a16a30ca8643e851f19baa7797917\"\n-  integrity sha1-PYpcZog6FqMMqGQ+hR8Zuqd5eRc=\n-\n-he@^1.1.0:\n-  version \"1.2.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/he\/-\/he-1.2.0.tgz#84ae65fa7eafb165fddb61566ae14baf05664f0f\"\n-  integrity sha512-F\/1DnUGPopORZi0ni+CvrCgHQ5FyEAHRLSApuYWMmrbSwoN2Mn\/7k+Gl38gJnR7yyDZk6WLXwiGod1JOWNDKGw==\n-\n-levn@~0.3.0:\n-  version \"0.3.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/levn\/-\/levn-0.3.0.tgz#3b09924edf9f083c0490fdd4c0bc4421e04764ee\"\n-  integrity sha1-OwmSTt+fCDwEkP3UwLxEIeBHZO4=\n-  dependencies:\n-    prelude-ls \"~1.1.2\"\n-    type-check \"~0.3.2\"\n-\n-optionator@^0.8.1:\n-  version \"0.8.3\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/optionator\/-\/optionator-0.8.3.tgz#84fa1d036fe9d3c7e21d99884b601167ec8fb495\"\n-  integrity sha512-+IW9pACdk3XWmmTXG8m3upGUJst5XRGzxMRjXzAuJ1XnIFNvfhjjIuYkDvysnPQ7qzqVzLt78BCruntqRhWQbA==\n-  dependencies:\n-    deep-is \"~0.1.3\"\n-    fast-levenshtein \"~2.0.6\"\n-    levn \"~0.3.0\"\n-    prelude-ls \"~1.1.2\"\n-    type-check \"~0.3.2\"\n-    word-wrap \"~1.2.3\"\n-\n-prelude-ls@~1.1.2:\n-  version \"1.1.2\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/prelude-ls\/-\/prelude-ls-1.1.2.tgz#21932a549f5e52ffd9a827f570e04be62a97da54\"\n-  integrity sha1-IZMqVJ9eUv\/ZqCf1cOBL5iqX2lQ=\n-\n-source-map@~0.6.1:\n-  version \"0.6.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/source-map\/-\/source-map-0.6.1.tgz#74722af32e9614e9c287a8d0bbde48b5e2f1a263\"\n-  integrity sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz\/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==\n-\n-type-check@~0.3.2:\n-  version \"0.3.2\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/type-check\/-\/type-check-0.3.2.tgz#5884cab512cf1d355e3fb784f30804b2b520db72\"\n-  integrity sha1-WITKtRLPHTVeP7eE8wgEsrUg23I=\n-  dependencies:\n-    prelude-ls \"~1.1.2\"\n-\n-word-wrap@~1.2.3:\n-  version \"1.2.3\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/word-wrap\/-\/word-wrap-1.2.3.tgz#610636f6b1f703891bd34771ccb17fb93b47079c\"\n-  integrity sha512-Hz\/mrNwitNRh\/HUAtM\/VT\/5VH+ygD6DV7mYKZAtHOrbs8U7lvPS6xf7EJKMF0uW1KJCl0H701g3ZGus+muE5vQ==\n\n\n###\n\n","completion":" build: remove stale lockfile\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -87,7 +87,7 @@\n     \"eslint\": \"^8.14.0\",\n     \"fsevents\": \"2.3.2\",\n     \"hash-sum\": \"^2.0.0\",\n-    \"he\": \"^1.1.1\",\n+    \"he\": \"^1.2.0\",\n     \"http-server\": \"^14.1.0\",\n     \"lint-staged\": \"^12.4.1\",\n     \"lodash\": \"^4.17.21\",\n\n---\n file path A: packages\/vue-server-renderer\/package.json | file path B: packages\/vue-server-renderer\/package.json\n\n@@ -19,13 +19,13 @@\n     \"url\": \"https:\/\/github.com\/vuejs\/vue\/issues\"\n   },\n   \"dependencies\": {\n-    \"chalk\": \"^1.1.3\",\n-    \"hash-sum\": \"^1.0.2\",\n-    \"he\": \"^1.1.0\",\n+    \"chalk\": \"^4.0.0\",\n+    \"hash-sum\": \"^2.0.0\",\n+    \"he\": \"^1.2.0\",\n     \"lodash.template\": \"^4.5.0\",\n     \"lodash.uniq\": \"^4.5.0\",\n-    \"resolve\": \"^1.2.0\",\n-    \"serialize-javascript\": \"^3.1.0\",\n+    \"resolve\": \"^1.22.0\",\n+    \"serialize-javascript\": \"^6.0.0\",\n     \"source-map\": \"0.5.6\"\n   },\n   \"devDependencies\": {\n\n---\n file path A: packages\/vue-template-compiler\/package.json | file path B: packages\/vue-template-compiler\/package.json\n\n@@ -22,7 +22,7 @@\n   },\n   \"homepage\": \"https:\/\/github.com\/vuejs\/vue\/tree\/dev\/packages\/vue-template-compiler#readme\",\n   \"dependencies\": {\n-    \"he\": \"^1.1.0\",\n+    \"he\": \"^1.2.0\",\n     \"de-indent\": \"^1.0.2\"\n   },\n   \"devDependencies\": {\n\n---\n file path A: pnpm-lock.yaml | file path B: pnpm-lock.yaml\n\n@@ -21,7 +21,7 @@ specifiers:\n   eslint: ^8.14.0\n   fsevents: 2.3.2\n   hash-sum: ^2.0.0\n-  he: ^1.1.1\n+  he: ^1.2.0\n   http-server: ^14.1.0\n   lint-staged: ^12.4.1\n   lodash: ^4.17.21\n\n\n###\n\n","completion":" build: sort deps again\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -14,15 +14,15 @@\n   ],\n   \"sideEffects\": false,\n   \"scripts\": {\n-    \"dev\": \"rollup -w -c scripts\/config.ts --environment TARGET:web-full-dev\",\n-    \"dev:cjs\": \"rollup -w -c scripts\/config.ts --environment TARGET:web-runtime-cjs-dev\",\n-    \"dev:esm\": \"rollup -w -c scripts\/config.ts --environment TARGET:web-runtime-esm\",\n+    \"dev\": \"rollup -w -c scripts\/config.js --environment TARGET:web-full-dev\",\n+    \"dev:cjs\": \"rollup -w -c scripts\/config.js --environment TARGET:web-runtime-cjs-dev\",\n+    \"dev:esm\": \"rollup -w -c scripts\/config.js --environment TARGET:web-runtime-esm\",\n     \"dev:test\": \"karma start test\/unit\/karma.dev.config.ts\",\n-    \"dev:ssr\": \"rollup -w -c scripts\/config.ts --environment TARGET:web-server-renderer\",\n-    \"dev:compiler\": \"rollup -w -c scripts\/config.ts --environment TARGET:web-compiler \",\n-    \"dev:weex\": \"rollup -w -c scripts\/config.ts --environment TARGET:weex-framework\",\n-    \"dev:weex:factory\": \"rollup -w -c scripts\/config.ts --environment TARGET:weex-factory\",\n-    \"dev:weex:compiler\": \"rollup -w -c scripts\/config.ts --environment TARGET:weex-compiler \",\n+    \"dev:ssr\": \"rollup -w -c scripts\/config.js --environment TARGET:web-server-renderer\",\n+    \"dev:compiler\": \"rollup -w -c scripts\/config.js --environment TARGET:web-compiler \",\n+    \"dev:weex\": \"rollup -w -c scripts\/config.js --environment TARGET:weex-framework\",\n+    \"dev:weex:factory\": \"rollup -w -c scripts\/config.js --environment TARGET:weex-factory\",\n+    \"dev:weex:compiler\": \"rollup -w -c scripts\/config.js --environment TARGET:weex-compiler \",\n     \"build\": \"node scripts\/build.js\",\n     \"build:ssr\": \"npm run build -- web-runtime-cjs,web-server-renderer\",\n     \"build:weex\": \"npm run build -- weex\",\n\n\n###\n\n","completion":" chore: fix dev scripts\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -50,8 +50,7 @@\n   },\n   \"lint-staged\": {\n     \"*.js\": [\n-      \"eslint --fix\",\n-      \"git add\"\n+      \"eslint --fix\"\n     ]\n   },\n   \"repository\": {\n\n\n###\n\n","completion":" chore: remove git add from lint-staged script\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -945,11 +945,11 @@ ajv-keywords@^3.1.0:\n   integrity sha1-6GuBnGAs+IIa1jdBNpjx3sAhhHo=\n \n ajv@^6.1.0, ajv@^6.5.3, ajv@^6.5.5, ajv@^6.6.1:\n-  version \"6.6.2\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/ajv\/-\/ajv-6.6.2.tgz#caceccf474bf3fc3ce3b147443711a24063cc30d\"\n-  integrity sha512-FBHEW6Jf5TB9MGBgUUA9XHkTbjXYfAUjY43ACMfmdMRHniyoMHjHjzD50OK8LGDWQwp4rWEsIq5kEqq7rvIM1g==\n+  version \"6.12.6\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/ajv\/-\/ajv-6.12.6.tgz#baf5a62e802b07d977034586f8c3baf5adf26df4\"\n+  integrity sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==\n   dependencies:\n-    fast-deep-equal \"^2.0.1\"\n+    fast-deep-equal \"^3.1.1\"\n     fast-json-stable-stringify \"^2.0.0\"\n     json-schema-traverse \"^0.4.1\"\n     uri-js \"^4.2.2\"\n@@ -3246,15 +3246,15 @@ extsprintf@^1.2.0:\n   resolved \"https:\/\/registry.yarnpkg.com\/extsprintf\/-\/extsprintf-1.4.0.tgz#e2689f8f356fad62cca65a3a91c5df5f9551692f\"\n   integrity sha1-4mifjzVvrWLMplo6kcXfX5VRaS8=\n \n-fast-deep-equal@^2.0.1:\n-  version \"2.0.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/fast-deep-equal\/-\/fast-deep-equal-2.0.1.tgz#7b05218ddf9667bf7f370bf7fdb2cb15fdd0aa49\"\n-  integrity sha1-ewUhjd+WZ79\/Nwv3\/bLLFf3Qqkk=\n+fast-deep-equal@^3.1.1:\n+  version \"3.1.3\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/fast-deep-equal\/-\/fast-deep-equal-3.1.3.tgz#3a7d56b559d6cbc3eb512325244e619a65c6c525\"\n+  integrity sha512-f3qQ9oQy9j2AhBe\/H9VC91wLmKBCCU\/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==\n \n fast-json-stable-stringify@^2.0.0:\n-  version \"2.0.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/fast-json-stable-stringify\/-\/fast-json-stable-stringify-2.0.0.tgz#d5142c0caee6b1189f87d3a76111064f86c8bbf2\"\n-  integrity sha1-1RQsDK7msRifh9OnYREGT4bIu\/I=\n+  version \"2.1.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/fast-json-stable-stringify\/-\/fast-json-stable-stringify-2.1.0.tgz#874bf69c6f404c2b5d99c481341399fd55892633\"\n+  integrity sha512-lhd\/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==\n \n fast-levenshtein@~2.0.4:\n   version \"2.0.6\"\n@@ -8076,9 +8076,9 @@ upath@^1.0.5:\n   integrity sha512-bzpH\/oBhoS\/QI\/YtbkqCg6VEiPYjSZtrHQM6\/QnJS6OL9pKUFLqb3aFh4Scvwm45+7iAgiMkLhSbaZxUqmrprw==\n \n uri-js@^4.2.2:\n-  version \"4.2.2\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/uri-js\/-\/uri-js-4.2.2.tgz#94c540e1ff772956e2299507c010aea6c8838eb0\"\n-  integrity sha512-KY9Frmirql91X2Qgjry0Wd4Y+YTdrdZheS8TFwvkbLWf\/G5KNJDCh6pKL5OZctEW4+0Baa5idK2ZQuELRwPznQ==\n+  version \"4.4.1\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/uri-js\/-\/uri-js-4.4.1.tgz#9b1a52595225859e55f669d928f88c6c57f2a77e\"\n+  integrity sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==\n   dependencies:\n     punycode \"^2.1.0\"\n \n\n\n###\n\n","completion":" build(deps): bump ajv from 6.6.2 to 6.12.6 (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -5247,15 +5247,10 @@ lodash@4.17.5:\n   resolved \"https:\/\/registry.yarnpkg.com\/lodash\/-\/lodash-4.17.5.tgz#99a92d65c0272debe8c96b6057bc8fbfa3bed511\"\n   integrity sha512-svL3uiZf1RwhH+cWrfZn3A4+U58wbP0tGVTLQPbjplZxZ8ROD9VLuNgsRniTlLe7OlSqR79RUehXgpBW\/s0IQw==\n \n-lodash@^4.0.1, lodash@^4.16.6, lodash@^4.17.0, lodash@^4.17.10, lodash@^4.17.11, lodash@^4.17.14, lodash@^4.17.5, lodash@^4.2.1, lodash@^4.3.0, lodash@^4.5.0:\n-  version \"4.17.20\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/lodash\/-\/lodash-4.17.20.tgz#b44a9b6297bcb698f1c51a3545a2b3b368d59c52\"\n-  integrity sha512-PlhdFcillOINfeV7Ni6oF1TAEayyZBoZ8bcshTHqOYJYlrqzRK5hagpagky5o4HfCzzd1TRkXPMFq6cKk9rGmA==\n-\n-lodash@^4.17.4:\n-  version \"4.17.19\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/lodash\/-\/lodash-4.17.19.tgz#e48ddedbe30b3321783c5b4301fbd353bc1e4a4b\"\n-  integrity sha512-JNvd8XER9GQX0v2qJgsaN\/mzFCNA5BRe\/j8JN9d+tWyGLSodKQHKFicdwNYzWwI3wjRnaKPsGj1XkBjx\/F96DQ==\n+lodash@^4.0.1, lodash@^4.16.6, lodash@^4.17.0, lodash@^4.17.10, lodash@^4.17.11, lodash@^4.17.14, lodash@^4.17.4, lodash@^4.17.5, lodash@^4.2.1, lodash@^4.3.0, lodash@^4.5.0:\n+  version \"4.17.21\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/lodash\/-\/lodash-4.17.21.tgz#679591c564c3bffaae8454cf0b3df370c3d6911c\"\n+  integrity sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==\n \n log-symbols@^1.0.2:\n   version \"1.0.2\"\n\n\n###\n\n","completion":" build(deps-dev): bump lodash from 4.17.19 to 4.17.21 (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -505,13 +505,17 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Peter Imburg\n - Johnny Ray Austin\n - Wasim Khamlichi\n+- Hayden Bickerton\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n \n <!--10 start-->\n+- Anun\n+- Victor Tolbert\n+- Shawn Bird\n - Dave Mount\n-- Keisuke Kita\n+- Rodolfo Cavallari\n - Santiago Arizti\n - Sven Gntner\n - Theo Ephraim\n@@ -523,6 +527,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - WhereJuly\n - Fontis \n - Jack \n+- Artur Baka\n - Pierre Baron\n - Donghai Gai\n - Aleksander Figiel\n@@ -539,9 +544,9 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Alfonso Herrera\n - Bichinger Software & Consulting\n - Pierre Lebrun\n-- Peter Matkovsky\n+- James Macon\n -  \n-- Rodolfo Cavallari\n+- Nick Dandakis\n - Yusuke Kawabata\n - Shawn Wildermuth\n - Elon Hung\n@@ -571,8 +576,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Barbara Liau\n - Wen-Tien Chang\n - Stephen Hartley\n-- Victor Tolbert\n-- Nick Dandakis\n+- Peter Matkovsky\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -3453,9 +3453,9 @@ flush-write-stream@^1.0.0:\n     readable-stream \"^2.0.4\"\n \n follow-redirects@^1.0.0:\n-  version \"1.13.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/follow-redirects\/-\/follow-redirects-1.13.0.tgz#b42e8d93a2a7eea5ed88633676d6597bc8e384db\"\n-  integrity sha512-aq6gF1BEKje4a9i9+5jimNFIpq4Q1WiwBToeRK5NvZBd\/TRsmW8BsJfOEGkr76TbOyPVD3OVDN910EcUNtRYEA==\n+  version \"1.14.7\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/follow-redirects\/-\/follow-redirects-1.14.7.tgz#2004c02eb9436eee9a21446a6477debf17e81685\"\n+  integrity sha512-+hbxoLbFMbRKDwohX8GkTataGqO6Jb7jGwpAlwgy2bIz25XtRm7KEzJM76R1WiNT5SwZkX4Y75SwBolkpmE7iQ==\n \n for-in@^1.0.1, for-in@^1.0.2:\n   version \"1.0.2\"\n\n\n###\n\n","completion":" build(deps): bump follow-redirects from 1.13.0 to 1.14.7 (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -501,65 +501,63 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <h2 align=\"center\">Generous Backers via Patreon ($50+)<\/h2>\n \n <!--50 start-->\n-\n - Yoshitaka M\n - Peter Imburg\n+- Johnny Ray Austin\n - Wasim Khamlichi\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n \n <!--10 start-->\n-\n-- Theo Ephraim\n+- Dave Mount\n - Keisuke Kita\n+- Santiago Arizti\n+- Sven Gntner\n+- Theo Ephraim\n+- Mok Wang Quan\n - Jeffrey Rennie\n - Meinhard Dam\n -  \n - Alex Riviere\n - WhereJuly\n-- Fontis\n-- Jack\n-- Artur Baka\n-- Traversy Media\n+- Fontis \n+- Jack \n - Pierre Baron\n - Donghai Gai\n - Aleksander Figiel\n-- wickedwei\n+- wickedwei \n - Sunny Yuen\n-- Jules\n+- Jules \n - Zeth Odderskov\n - Thomas Wiedemann\n - Nobuhide Esaki\n - Nat Dunn\n-- Roy Segall\n - Allan McKernan\n - Diana Bergholz\n-- Philip John Basile\n - Riki Fridrich\n - Alfonso Herrera\n - Bichinger Software & Consulting\n - Pierre Lebrun\n - Peter Matkovsky\n-- \n-- Nick Dandakis\n-- Mok Wang Quan\n+-  \n+- Rodolfo Cavallari\n+- Yusuke Kawabata\n - Shawn Wildermuth\n - Elon Hung\n - Juan Bermudez\n - Daniel Mattingley\n-- Matt Sencenbaugh\n - Jaeyoung Lee\n - David Kaplan\n - David Ang\n - Wakana Seki\n - Jere Sjroos\n - Donald Fischer\n-- Eric\n+- Eric \n - tyler madsen\n - Joe Gregory\n - Masahiro Tanaka\n-- Tyler\n+- Tyler \n - Jim Raden\n - Haim Yulzari\n - Asaf Yishai\n@@ -574,7 +572,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Wen-Tien Chang\n - Stephen Hartley\n - Victor Tolbert\n-- Yusuke Kawabata\n+- Nick Dandakis\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/hbuilder.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -83,7 +83,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.authing.cn\/welcome?utm_source=Vuejs&utm_medium=CPT&utm_campaign=EN&utm_term=page-EN\" target=\"_blank\">\n+        <a href=\"https:\/\/www.authing.cn\/welcome?utm_source=Vuejs&utm_medium=CPT&utm_campaign=GitHub&utm_term=readme\" target=\"_blank\">\n           <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/authing.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/hbuilder.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -93,7 +93,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.authing.cn\/welcome?utm_source=Vuejs&utm_medium=CPT&utm_campaign=EN&utm_term=page-EN\" target=\"_blank\">\n+        <a href=\"https:\/\/www.authing.cn\/welcome?utm_source=Vuejs&utm_medium=CPT&utm_campaign=GitHub&utm_term=readme\" target=\"_blank\">\n           <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/authing.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n\n\n###\n\n","completion":" chore: update sponsor links\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/hbuilder.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -40,23 +40,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vehikl.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/retool.com\/?utm_source=sponsor&utm_campaign=vue\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/retool.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.storyblok.com\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storyblok.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/ionicframework.com\/vue?utm_source=partner&utm_medium=referral&utm_campaign=vuesponsorship&utm_content=vuedocs\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/ionic.png\">\n@@ -67,6 +62,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nuxt.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.refurbed.org\/?utm_source=vuejs\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/refurbed.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -78,13 +78,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n   <tbody>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"http:\/\/www.dcloud.io\/?hmsr=vuejsorg&hmpl=&hmcu=&hmkw=&hmci=\" target=\"_blank\">\n+        <a href=\"https:\/\/www.dcloud.io\/hbuilderx.html?hmsr=vue-en&hmpl=&hmcu=&hmkw=&hmci=\" target=\"_blank\">\n           <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/hbuilder.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.authing.cn\/welcome?utm_source=Vuejs&utm_medium=CPT&utm_campaign=GitHub&utm_term=readme\" target=\"_blank\">\n-          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/authing.svg\">\n+        <a href=\"https:\/\/www.authing.cn\/welcome?utm_source=Vuejs&utm_medium=CPT&utm_campaign=EN&utm_term=page-EN\" target=\"_blank\">\n+          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/authing.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -50,23 +50,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vehikl.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/retool.com\/?utm_source=sponsor&utm_campaign=vue\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/retool.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.storyblok.com\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storyblok.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/ionicframework.com\/vue?utm_source=partner&utm_medium=referral&utm_campaign=vuesponsorship&utm_content=vuedocs\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/ionic.png\">\n@@ -77,6 +72,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nuxt.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.refurbed.org\/?utm_source=vuejs\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/refurbed.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -88,8 +88,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n   <tbody>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"http:\/\/www.dcloud.io\/?hmsr=vuejsorg&hmpl=&hmcu=&hmkw=&hmci=\" target=\"_blank\">\n-          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dcloud.gif\">\n+        <a href=\"https:\/\/www.dcloud.io\/hbuilderx.html?hmsr=vue-en&hmpl=&hmcu=&hmkw=&hmci=\" target=\"_blank\">\n+          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/hbuilder.png\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.authing.cn\/welcome?utm_source=Vuejs&utm_medium=CPT&utm_campaign=EN&utm_term=page-EN\" target=\"_blank\">\n+          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/authing.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -83,7 +83,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/authing.cn\/welcome?from=vuejs\" target=\"_blank\">\n+        <a href=\"https:\/\/www.authing.cn\/welcome?utm_source=Vuejs&utm_medium=CPT&utm_campaign=GitHub&utm_term=readme\" target=\"_blank\">\n           <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/authing.svg\">\n         <\/a>\n       <\/td>\n@@ -496,6 +496,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <h2 align=\"center\">Generous Backers via Patreon ($50+)<\/h2>\n \n <!--50 start-->\n+\n - Yoshitaka M\n - Peter Imburg\n - Wasim Khamlichi\n@@ -504,6 +505,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <h2 align=\"center\">Backers via Patreon<\/h2>\n \n <!--10 start-->\n+\n - Theo Ephraim\n - Keisuke Kita\n - Jeffrey Rennie\n\n\n###\n\n","completion":" chore: update sponsor link\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/hbuilder.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -79,7 +79,12 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.dcloud.io\/?hmsr=vuejsorg&hmpl=&hmcu=&hmkw=&hmci=\" target=\"_blank\">\n-          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dcloud.gif\">\n+          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/hbuilder.png\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/authing.cn\/welcome?from=vuejs\" target=\"_blank\">\n+          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/authing.svg\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n@@ -506,16 +511,16 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n -  \n - Alex Riviere\n - WhereJuly\n-- Fontis \n-- Jack \n+- Fontis\n+- Jack\n - Artur Baka\n - Traversy Media\n - Pierre Baron\n - Donghai Gai\n - Aleksander Figiel\n-- wickedwei \n+- wickedwei\n - Sunny Yuen\n-- Jules \n+- Jules\n - Zeth Odderskov\n - Thomas Wiedemann\n - Nobuhide Esaki\n@@ -529,7 +534,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Bichinger Software & Consulting\n - Pierre Lebrun\n - Peter Matkovsky\n--  \n+- \n - Nick Dandakis\n - Mok Wang Quan\n - Shawn Wildermuth\n@@ -543,11 +548,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Wakana Seki\n - Jere Sjroos\n - Donald Fischer\n-- Eric \n+- Eric\n - tyler madsen\n - Joe Gregory\n - Masahiro Tanaka\n-- Tyler \n+- Tyler\n - Jim Raden\n - Haim Yulzari\n - Asaf Yishai\n\n\n###\n\n","completion":" chore: update backers.md\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -321,6 +321,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/finclip.com\/?from=vue\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/finclip.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -326,6 +326,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/finclip.com\/?from=vue\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/finclip.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: packages\/weex-template-compiler\/build.js | file path B: packages\/weex-template-compiler\/build.js\n\n@@ -1516,7 +1516,7 @@ function parse (\n       }\n     },\n     comment: function comment (text, start, end) {\n-      \/\/ adding anyting as a sibling to the root node is forbidden\n+      \/\/ adding anything as a sibling to the root node is forbidden\n       \/\/ comments should still be allowed, but ignored\n       if (currentParent) {\n         var child = {\n\n\n###\n\n","completion":" chore: typo [skip ci] (#<issue-num>)\n"}
{"prompt":" file path A: test\/unit\/features\/global-api\/set-delete.spec.js | file path B: test\/unit\/features\/global-api\/set-delete.spec.js\n\n@@ -14,7 +14,7 @@ describe('Global API: set\/delete', () => {\n       }).then(done)\n     })\n \n-    it('should update a observing object', done => {\n+    it('should update an observing object', done => {\n       const vm = new Vue({\n         template: '<div>{{foo.x}}<\/div>',\n         data: { foo: { x: 1 }}\n@@ -26,7 +26,7 @@ describe('Global API: set\/delete', () => {\n       }).then(done)\n     })\n \n-    it('should update a observing array', done => {\n+    it('should update an observing array', done => {\n       const vm = new Vue({\n         template: '<div><div v-for=\"v,k in list\">{{k}}-{{v}}<\/div><\/div>',\n         data: { list: ['a', 'b', 'c'] }\n\n\n###\n\n","completion":" chore: fix typo (#<issue-num>) [skip ci]\n"}
{"prompt":" file path A: src\/shared\/util.js | file path B: src\/shared\/util.js\n\n@@ -35,7 +35,7 @@ export function isPrimitive (value: any): boolean %checks {\n \n \/**\n  * Quick object check - this is primarily used to tell\n- * Objects from primitive values when we know the value\n+ * objects from primitive values when we know the value\n  * is a JSON-compliant type.\n  *\/\n export function isObject (obj: mixed): boolean %checks {\n\n\n###\n\n","completion":" chore: comment typo [skip ci] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -67,11 +67,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nuxt.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.daskeyboard.com\/?utm_source=vuejs&utm_medium=sponsorship\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/das_keyboard.png\">\n-        <\/a>\n-      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -320,6 +315,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/flowdash.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.fenetre.nl\/english\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fen_tre_online_solutions.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -77,11 +77,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nuxt.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.daskeyboard.com\/?utm_source=vuejs&utm_medium=sponsorship\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/das_keyboard.png\">\n-        <\/a>\n-      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -325,6 +320,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/flowdash.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.fenetre.nl\/english\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fen_tre_online_solutions.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -486,16 +486,14 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--50 start-->\n - Yoshitaka M\n - Peter Imburg\n-- Johnny Ray Austin\n - Wasim Khamlichi\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n \n <!--10 start-->\n-- Kevin Lpez Brante\n+- Theo Ephraim\n - Keisuke Kita\n-- Mok Wang Quan\n - Jeffrey Rennie\n - Meinhard Dam\n -  \n@@ -522,12 +520,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Riki Fridrich\n - Alfonso Herrera\n - Bichinger Software & Consulting\n-- username\n - Pierre Lebrun\n - Peter Matkovsky\n -  \n-- Theo Ephraim\n-- Yusuke Kawabata\n+- Nick Dandakis\n+- Mok Wang Quan\n - Shawn Wildermuth\n - Elon Hung\n - Juan Bermudez\n@@ -558,7 +555,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Wen-Tien Chang\n - Stephen Hartley\n - Victor Tolbert\n-- Nick Dandakis\n+- Yusuke Kawabata\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -315,6 +315,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/lendio.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/flowdash.com\/?utm_source=vue&utm_medium=sponsor&utm_campaign=open-source\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/flowdash.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -320,6 +320,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/lendio.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/flowdash.com\/?utm_source=vue&utm_medium=sponsor&utm_campaign=open-source\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/flowdash.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -305,6 +305,16 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tatvasoft.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.aceonlinecasino.co.uk\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/onyx_gaming_limited.svg?sanitize=true\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"http:\/\/www.lendio.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/lendio.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -374,6 +384,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/doximity.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.empiricus.com.br\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/empiricus.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -310,6 +310,16 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tatvasoft.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.aceonlinecasino.co.uk\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/onyx_gaming_limited.svg?sanitize=true\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"http:\/\/www.lendio.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/lendio.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -296,10 +296,15 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <\/tr><tr><\/tr>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/ww.emqx.com\" target=\"_blank\">\n+        <a href=\"https:\/\/www.emqx.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/emq.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.tatvasoft.com\/software-development-technology\/vue-js-development-services\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tatvasoft.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -301,10 +301,15 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <\/tr><tr><\/tr>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/ww.emqx.com\" target=\"_blank\">\n+        <a href=\"https:\/\/www.emqx.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/emq.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.tatvasoft.com\/software-development-technology\/vue-js-development-services\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tatvasoft.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -462,26 +462,27 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Yoshitaka M\n - Peter Imburg\n - Johnny Ray Austin\n-- errorrik \n - Wasim Khamlichi\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n \n <!--10 start-->\n-- Felix Mok\n+- Kevin Lpez Brante\n - Keisuke Kita\n+- Mok Wang Quan\n+- Jeffrey Rennie\n - Meinhard Dam\n -  \n - Alex Riviere\n - WhereJuly\n - Fontis \n - Jack \n+- Artur Baka\n - Traversy Media\n - Pierre Baron\n - Donghai Gai\n - Aleksander Figiel\n-- Dennis Zanetti\n - wickedwei \n - Sunny Yuen\n - Jules \n@@ -492,6 +493,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Roy Segall\n - Allan McKernan\n - Diana Bergholz\n+- Philip John Basile\n - Riki Fridrich\n - Alfonso Herrera\n - Bichinger Software & Consulting\n@@ -499,8 +501,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Pierre Lebrun\n - Peter Matkovsky\n -  \n-- Nick Dandakis\n-- Jeffrey Rennie\n+- Theo Ephraim\n+- Yusuke Kawabata\n - Shawn Wildermuth\n - Elon Hung\n - Juan Bermudez\n@@ -531,7 +533,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Wen-Tien Chang\n - Stephen Hartley\n - Victor Tolbert\n-- Yusuke Kawabata\n+- Nick Dandakis\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: test\/ssr\/ssr-basic-renderer.spec.js | file path B: test\/ssr\/ssr-basic-renderer.spec.js\n\n@@ -52,7 +52,7 @@ describe('SSR: basicRenderer', () => {\n   })\n \n   \/\/ #5941\n-  it('should work peoperly when accessing $ssrContext in root component', done => {\n+  it('should work properly when accessing $ssrContext in root component', done => {\n     let ssrContext\n     renderToString(new Vue({\n       template: `\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1327,7 +1327,7 @@ describe('Component scoped slot', () => {\n   })\n \n   \/\/ #11652\n-  it('should update when swtching between two components with slot and without slot', done => {\n+  it('should update when switching between two components with slot and without slot', done => {\n     const Child = {\n       template: `<div><slot\/><\/div>`\n     }\n\n---\n file path A: test\/unit\/features\/directives\/on.spec.js | file path B: test\/unit\/features\/directives\/on.spec.js\n\n@@ -218,7 +218,7 @@ describe('Directive v-on', () => {\n   })\n \n   \/\/ ctrl, shift, alt, meta\n-  it('should support system modifers', () => {\n+  it('should support system modifiers', () => {\n     vm = new Vue({\n       el,\n       template: `\n\n\n###\n\n","completion":" chore: fix typo in  test (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -294,6 +294,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/ww.emqx.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/emq.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n@@ -357,6 +364,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/takt.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/technology.doximity.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/doximity.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -299,6 +299,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/ww.emqx.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/emq.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -458,7 +458,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n \n <!--10 start-->\n - Felix Mok\n-- Jeffrey Rennie\n+- Keisuke Kita\n - Meinhard Dam\n -  \n - Alex Riviere\n@@ -488,7 +488,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Peter Matkovsky\n -  \n - Nick Dandakis\n-- Yusuke Kawabata\n+- Jeffrey Rennie\n - Shawn Wildermuth\n - Elon Hung\n - Juan Bermudez\n@@ -519,7 +519,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Wen-Tien Chang\n - Stephen Hartley\n - Victor Tolbert\n-- Keisuke Kita\n+- Yusuke Kawabata\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/compiler\/modules\/class.js | file path B: src\/platforms\/web\/compiler\/modules\/class.js\n\n@@ -23,7 +23,7 @@ function transformNode (el: ASTElement, options: CompilerOptions) {\n     }\n   }\n   if (staticClass) {\n-    el.staticClass = JSON.stringify(staticClass)\n+    el.staticClass = JSON.stringify(staticClass.replace(\/\\s+\/g, ' ').trim())\n   }\n   const classBinding = getBindingAttr(el, 'class', false \/* getStatic *\/)\n   if (classBinding) {\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -1351,7 +1351,7 @@ describe('SSR: renderToString', () => {\n       <\/div>\n       `\n     }, result => {\n-      expect(result).toContain(`<div class=\"a\\nb\"><\/div>`)\n+      expect(result).toContain(`<div class=\"a b\"><\/div>`)\n       done()\n     })\n   })\n\n---\n file path A: test\/unit\/features\/directives\/class.spec.js | file path B: test\/unit\/features\/directives\/class.spec.js\n\n@@ -152,6 +152,39 @@ describe('Directive v-bind:class', () => {\n     }).then(done)\n   })\n \n+  \/\/ css static classes should only contain a single space in between,\n+  \/\/ as all the text inside of classes is shipped as a JS string\n+  \/\/ and this could lead to useless spacing in static classes\n+  it('condenses whitespace in staticClass', done => {\n+    const vm = new Vue({\n+      template: '<div class=\" test1\\ntest2\\ttest3 test4   test5 \\n \\n \\ntest6\\t\"><\/div>',\n+    }).$mount()\n+    expect(vm.$el.className).toBe('test1 test2 test3 test4 test5 test6')\n+    done()\n+  })\n+\n+  it('condenses whitespace in staticClass merge in a component', done => {\n+    const vm = new Vue({\n+      template: `\n+        <component1 class=\"\\n\\t staticClass \\t\\n\" :class=\"componentClass1\">\n+        <\/component1>\n+      `,\n+      data: {\n+        componentClass1: 'componentClass1',\n+      },\n+      components: {\n+        component1: {\n+          template: '<div class=\"\\n\\t test \\t\\n\"><\/div>'\n+        },\n+      }\n+    }).$mount()\n+    expect(vm.$el.className).toBe('test staticClass componentClass1')\n+    vm.componentClass1 = 'c1'\n+    waitForUpdate(() => {\n+      expect(vm.$el.className).toBe('test staticClass c1')\n+    }).then(done)\n+  })\n+\n   \/\/ a vdom patch edge case where the user has several un-keyed elements of the\n   \/\/ same tag next to each other, and toggling them.\n   it('properly remove staticClass for toggling un-keyed children', done => {\n\n\n###\n\n","completion":" feat(compiler): condenses staticClass whitespace (fix #12113) (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -17,8 +17,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--special start-->\n \n <p align=\"center\">\n-  <a href=\"https:\/\/autocode.com\/\" target=\"_blank\">\n-    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg?sanitize=true\">\n+  <a href=\"https:\/\/www.dcloud.io\/hbuilderx.html?hmsr=vue-en&hmpl=&hmcu=&hmkw=&hmci=\" target=\"_blank\">\n+    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/hbuilder.png\">\n   <\/a>\n <\/p>\n   \n@@ -67,6 +67,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nuxt.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.daskeyboard.com\/?utm_source=vuejs&utm_medium=sponsorship\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/das_keyboard.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -82,11 +87,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dcloud.gif\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/authing.cn\/welcome?from=vuejs\" target=\"_blank\">\n-          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/cn.vuejs.org\/master\/themes\/vue\/source\/images\/authing.png\">\n-        <\/a>\n-      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -288,6 +288,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webreinvent_technologies_pvt_ltd.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.dronahq.com\/?ref=github_Vuejs\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dronahq.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -27,8 +27,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--special start-->\n \n <p align=\"center\">\n-  <a href=\"https:\/\/autocode.com\/\" target=\"_blank\">\n-    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg?sanitize=true\">\n+  <a href=\"https:\/\/www.dcloud.io\/hbuilderx.html?hmsr=vue-en&hmpl=&hmcu=&hmkw=&hmci=\" target=\"_blank\">\n+    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/hbuilder.png\">\n   <\/a>\n <\/p>\n   \n@@ -77,6 +77,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nuxt.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.daskeyboard.com\/?utm_source=vuejs&utm_medium=sponsorship\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/das_keyboard.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -92,11 +97,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dcloud.gif\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/authing.cn\/welcome?from=vuejs\" target=\"_blank\">\n-          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/cn.vuejs.org\/master\/themes\/vue\/source\/images\/authing.png\">\n-        <\/a>\n-      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -293,6 +293,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webreinvent_technologies_pvt_ltd.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.dronahq.com\/?ref=github_Vuejs\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dronahq.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -442,36 +442,36 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <h2 align=\"center\">Generous Backers via Patreon ($50+)<\/h2>\n \n <!--50 start-->\n-\n - Yoshitaka M\n - Peter Imburg\n - Johnny Ray Austin\n-- errorrik\n+- errorrik \n - Wasim Khamlichi\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n \n <!--10 start-->\n-\n+- Felix Mok\n - Jeffrey Rennie\n-- Keisuke Kita\n+- Meinhard Dam\n -  \n - Alex Riviere\n-- Fontis\n-- Jack\n-- Nick Carr\n+- WhereJuly\n+- Fontis \n+- Jack \n - Traversy Media\n - Pierre Baron\n - Donghai Gai\n - Aleksander Figiel\n - Dennis Zanetti\n-- wickedwei\n+- wickedwei \n - Sunny Yuen\n-- Jules\n+- Jules \n - Zeth Odderskov\n - Thomas Wiedemann\n - Nobuhide Esaki\n+- Nat Dunn\n - Roy Segall\n - Allan McKernan\n - Diana Bergholz\n@@ -481,11 +481,12 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - username\n - Pierre Lebrun\n - Peter Matkovsky\n-- \n+-  \n - Nick Dandakis\n - Yusuke Kawabata\n - Shawn Wildermuth\n-- Meinhard Dam\n+- Elon Hung\n+- Juan Bermudez\n - Daniel Mattingley\n - Matt Sencenbaugh\n - Jaeyoung Lee\n@@ -494,16 +495,15 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Wakana Seki\n - Jere Sjroos\n - Donald Fischer\n-- Eric\n+- Eric \n - tyler madsen\n - Joe Gregory\n - Masahiro Tanaka\n-- Tyler\n+- Tyler \n - Jim Raden\n - Haim Yulzari\n - Asaf Yishai\n - Jon Hobbs-Smith\n-- Pierre Vanhulst\n - Zoran Knezevic\n - Bernhard E. Reiter\n - Guy Gavergun\n@@ -514,9 +514,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Wen-Tien Chang\n - Stephen Hartley\n - Victor Tolbert\n-- Lars Andreas Ness\n-- Benjamin Listwon\n-- Elon Hung\n+- Keisuke Kita\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -1810,7 +1810,7 @@ chokidar@^2.0.2, chokidar@^2.0.3:\n   optionalDependencies:\n     fsevents \"^1.2.2\"\n \n-chownr@^1.1.1:\n+chownr@^1.1.1, chownr@^1.1.4:\n   version \"1.1.4\"\n   resolved \"https:\/\/registry.yarnpkg.com\/chownr\/-\/chownr-1.1.4.tgz#6fc9d7b42d32a583596337666e7d08084da2cc6b\"\n   integrity sha512-jJ0bqzaylmJtVnNgzTeSOs8DPavpbYgEr\/b0YL8\/2GO3xJEhInFmhKMUnEJQjZumK7KXGFhUy89PrsJWlakBVg==\n@@ -3519,7 +3519,7 @@ fs-extra@^1.0.0:\n     jsonfile \"^2.1.0\"\n     klaw \"^1.0.0\"\n \n-fs-minipass@^1.2.5:\n+fs-minipass@^1.2.7:\n   version \"1.2.7\"\n   resolved \"https:\/\/registry.yarnpkg.com\/fs-minipass\/-\/fs-minipass-1.2.7.tgz#ccff8570841e7fe4265693da88936c55aed7f7c7\"\n   integrity sha512-GWSSJGFy4e9GUeCcbIkED+bgAoFyj7XF1mV8rma3QW4NIqX9Kyx79N\/PF61H5udOV3aY1IaMLs6pGbH71nlCTA==\n@@ -5569,7 +5569,7 @@ minimist@~0.0.1:\n   resolved \"https:\/\/registry.yarnpkg.com\/minimist\/-\/minimist-0.0.10.tgz#de3f98543dbf96082be48ad1a0c7cda836301dcf\"\n   integrity sha1-3j+YVD2\/lggr5IrRoMfNqDYwHc8=\n \n-minipass@^2.6.0, minipass@^2.8.6, minipass@^2.9.0:\n+minipass@^2.6.0, minipass@^2.9.0:\n   version \"2.9.0\"\n   resolved \"https:\/\/registry.yarnpkg.com\/minipass\/-\/minipass-2.9.0.tgz#e713762e7d3e32fed803115cf93e04bca9fcc9a6\"\n   integrity sha512-wxfUjg9WebH+CUDX\/CdbRlh5SmfZiy\/hpkxaRI16Y9W56Pa75sWgd\/rvFilSgrauD9NyFymP\/+JFV3KwzIsJeg==\n@@ -5577,7 +5577,7 @@ minipass@^2.6.0, minipass@^2.8.6, minipass@^2.9.0:\n     safe-buffer \"^5.1.2\"\n     yallist \"^3.0.0\"\n \n-minizlib@^1.2.1:\n+minizlib@^1.3.3:\n   version \"1.3.3\"\n   resolved \"https:\/\/registry.yarnpkg.com\/minizlib\/-\/minizlib-1.3.3.tgz#2290de96818a34c29551c8a8d301216bd65a861d\"\n   integrity sha512-6ZYMOEnmVsdCeTJVE0W9ZD+pVnE8h9Hma\/iOwwRDsdQoePpoX56\/8B6z3P9VNwppJuBKNRuFDRNRqRWexT9G9Q==\n@@ -5615,7 +5615,7 @@ mkdirp@0.5.1:\n   dependencies:\n     minimist \"0.0.8\"\n \n-mkdirp@0.5.x, mkdirp@^0.5.0, mkdirp@^0.5.1, mkdirp@^0.5.5, mkdirp@~0.5.0:\n+mkdirp@0.5.x, mkdirp@^0.5.1, mkdirp@^0.5.5, mkdirp@~0.5.0:\n   version \"0.5.5\"\n   resolved \"https:\/\/registry.yarnpkg.com\/mkdirp\/-\/mkdirp-0.5.5.tgz#d91cefd62d1436ca0f41620e251288d420099def\"\n   integrity sha512-NKmAlESf6jMGym1++R0Ra7wvhV+wFW63FaSOFPwRahvea0gMUcGUhVeAg\/0BC0wiv9ih5NYPB1Wn1UEI1\/L+xQ==\n@@ -7098,7 +7098,7 @@ rxjs@^6.1.0, rxjs@^6.3.3:\n   dependencies:\n     tslib \"^1.9.0\"\n \n-safe-buffer@^5.0.1, safe-buffer@^5.1.0, safe-buffer@^5.1.1, safe-buffer@^5.1.2:\n+safe-buffer@^5.0.1, safe-buffer@^5.1.0, safe-buffer@^5.1.1, safe-buffer@^5.1.2, safe-buffer@^5.2.1:\n   version \"5.2.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/safe-buffer\/-\/safe-buffer-5.2.1.tgz#1eaf9fa9bdb1fdd4ec75f58f9cdb4e6b7827eec6\"\n   integrity sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==\n@@ -7759,17 +7759,17 @@ tapable@^1.0.0, tapable@^1.1.0:\n   integrity sha512-9I2ydhj8Z9veORCw5PRm4u9uebCn0mcCa6scWoNcbZ6dAtoo2618u9UUzxgmsCOreJpqDDuv61LvwofW7hLcBA==\n \n tar@^4:\n-  version \"4.4.15\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/tar\/-\/tar-4.4.15.tgz#3caced4f39ebd46ddda4d6203d48493a919697f8\"\n-  integrity sha512-ItbufpujXkry7bHH9NpQyTXPbJ72iTlXgkBAYsAjDXk3Ds8t\/3NfO5P4xZGy7u+sYuQUbimgzswX4uQIEeNVOA==\n+  version \"4.4.19\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/tar\/-\/tar-4.4.19.tgz#2e4d7263df26f2b914dee10c825ab132123742f3\"\n+  integrity sha512-a20gEsvHnWe0ygBY8JbxoM4w3SJdhc7ZAuxkLqh+nvNQN2IOt0B5lLgM490X5Hl8FF0dl0tOf2ewFYAlIFgzVA==\n   dependencies:\n-    chownr \"^1.1.1\"\n-    fs-minipass \"^1.2.5\"\n-    minipass \"^2.8.6\"\n-    minizlib \"^1.2.1\"\n-    mkdirp \"^0.5.0\"\n-    safe-buffer \"^5.1.2\"\n-    yallist \"^3.0.3\"\n+    chownr \"^1.1.4\"\n+    fs-minipass \"^1.2.7\"\n+    minipass \"^2.9.0\"\n+    minizlib \"^1.3.3\"\n+    mkdirp \"^0.5.5\"\n+    safe-buffer \"^5.2.1\"\n+    yallist \"^3.1.1\"\n \n tcp-port-used@^1.0.1:\n   version \"1.0.1\"\n@@ -8386,7 +8386,7 @@ yallist@^2.1.2:\n   resolved \"https:\/\/registry.yarnpkg.com\/yallist\/-\/yallist-2.1.2.tgz#1c11f9218f076089a47dd512f93c6699a6a81d52\"\n   integrity sha1-HBH5IY8HYImkfdUS+TxmmaaoHVI=\n \n-yallist@^3.0.0, yallist@^3.0.2, yallist@^3.0.3:\n+yallist@^3.0.0, yallist@^3.0.2, yallist@^3.1.1:\n   version \"3.1.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/yallist\/-\/yallist-3.1.1.tgz#dbb7daf9bfd8bac9ab45ebf602b8cbad0d5d08fd\"\n   integrity sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==\n\n\n###\n\n","completion":" build(deps): bump tar from 4.4.15 to 4.4.19 (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -82,6 +82,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dcloud.gif\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/authing.cn\/welcome?from=vuejs\" target=\"_blank\">\n+          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/cn.vuejs.org\/master\/themes\/vue\/source\/images\/authing.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -437,31 +442,33 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <h2 align=\"center\">Generous Backers via Patreon ($50+)<\/h2>\n \n <!--50 start-->\n+\n - Yoshitaka M\n - Peter Imburg\n - Johnny Ray Austin\n-- errorrik \n+- errorrik\n - Wasim Khamlichi\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n \n <!--10 start-->\n+\n - Jeffrey Rennie\n - Keisuke Kita\n -  \n - Alex Riviere\n-- Fontis \n-- Jack \n+- Fontis\n+- Jack\n - Nick Carr\n - Traversy Media\n - Pierre Baron\n - Donghai Gai\n - Aleksander Figiel\n - Dennis Zanetti\n-- wickedwei \n+- wickedwei\n - Sunny Yuen\n-- Jules \n+- Jules\n - Zeth Odderskov\n - Thomas Wiedemann\n - Nobuhide Esaki\n@@ -474,7 +481,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - username\n - Pierre Lebrun\n - Peter Matkovsky\n--  \n+- \n - Nick Dandakis\n - Yusuke Kawabata\n - Shawn Wildermuth\n@@ -487,11 +494,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Wakana Seki\n - Jere Sjroos\n - Donald Fischer\n-- Eric \n+- Eric\n - tyler madsen\n - Joe Gregory\n - Masahiro Tanaka\n-- Tyler \n+- Tyler\n - Jim Raden\n - Haim Yulzari\n - Asaf Yishai\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -92,6 +92,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dcloud.gif\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/authing.cn\/welcome?from=vuejs\" target=\"_blank\">\n+          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/cn.vuejs.org\/master\/themes\/vue\/source\/images\/authing.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: sponsors [ci skip]\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -278,6 +278,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/troypoint.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/webreinvent.com?utm_source=vuejs.org&utm_medium=logo&utm_campaign=patreon-sponsors\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webreinvent_technologies_pvt_ltd.svg?sanitize=true\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -283,6 +283,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/troypoint.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/webreinvent.com?utm_source=vuejs.org&utm_medium=logo&utm_campaign=patreon-sponsors\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webreinvent_technologies_pvt_ltd.svg?sanitize=true\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -270,7 +270,12 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/plaid.co.jp\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/plaid_inc_.svg?sanitize=true\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/plaid__inc_.svg?sanitize=true\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/troypoint.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/troypoint.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n@@ -331,6 +336,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.takt.io\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/takt.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--silver end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -275,7 +275,12 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/plaid.co.jp\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/plaid_inc_.svg?sanitize=true\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/plaid__inc_.svg?sanitize=true\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/troypoint.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/troypoint.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -432,13 +432,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--10 start-->\n - Jeffrey Rennie\n - Keisuke Kita\n-- Sara McVey\n -  \n - Alex Riviere\n - Fontis \n - Jack \n - Nick Carr\n-- Artur Baka\n - Traversy Media\n - Pierre Baron\n - Donghai Gai\n@@ -463,7 +461,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Nick Dandakis\n - Yusuke Kawabata\n - Shawn Wildermuth\n-- Elon Hung\n - Meinhard Dam\n - Daniel Mattingley\n - Matt Sencenbaugh\n@@ -478,14 +475,12 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Joe Gregory\n - Masahiro Tanaka\n - Tyler \n-- IMGNRY \n - Jim Raden\n - Haim Yulzari\n - Asaf Yishai\n - Jon Hobbs-Smith\n - Pierre Vanhulst\n - Zoran Knezevic\n-- Luiz \n - Bernhard E. Reiter\n - Guy Gavergun\n - Matt Jones\n@@ -497,7 +492,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Victor Tolbert\n - Lars Andreas Ness\n - Benjamin Listwon\n-- Juan Bermudez\n+- Elon Hung\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -5,6 +5,7 @@ import { updateListeners } from 'core\/vdom\/helpers\/index'\n import { isIE, isFF, supportsPassive, isUsingMicroTask } from 'core\/util\/index'\n import { RANGE_TOKEN, CHECKBOX_RADIO_TOKEN } from 'web\/compiler\/directives\/model'\n import { currentFlushTimestamp } from 'core\/observer\/scheduler'\n+import { emptyNode } from 'core\/vdom\/patch'\n \n \/\/ normalize v-model event tokens that can only be determined at runtime.\n \/\/ it's important to place the event as the first in the array because\n@@ -108,7 +109,9 @@ function updateDOMListeners (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n   }\n   const on = vnode.data.on || {}\n   const oldOn = oldVnode.data.on || {}\n-  target = vnode.elm\n+  \/\/ vnode is empty when removing all listeners,\n+  \/\/ and use old vnode dom element\n+  target = vnode.elm || oldVnode.elm\n   normalizeEvents(on)\n   updateListeners(on, oldOn, add, remove, createOnceHandler, vnode.context)\n   target = undefined\n@@ -116,5 +119,6 @@ function updateDOMListeners (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n \n export default {\n   create: updateDOMListeners,\n-  update: updateDOMListeners\n+  update: updateDOMListeners,\n+  destroy: (vnode: VNodeWithData) => updateDOMListeners(vnode, emptyNode)\n }\n\n---\n file path A: test\/unit\/features\/component\/component-keep-alive.spec.js | file path B: test\/unit\/features\/component\/component-keep-alive.spec.js\n\n@@ -1249,5 +1249,37 @@ describe('Component keep-alive', () => {\n         }).then(done)\n       }\n     })\n+\n+    \/\/ #10083\n+    it('should not attach event handler repeatedly', done => {\n+      const vm = new Vue({\n+        template: `\n+          <keep-alive>\n+            <btn v-if=\"showBtn\" @click.native=\"add\" \/>\n+          <\/keep-alive>\n+        `,\n+        data: { showBtn: true, n: 0 },\n+        methods: {\n+          add () {\n+            this.n++\n+          }\n+        },\n+        components: {\n+          btn: { template: '<button>add 1<\/button>' }\n+        }\n+      }).$mount()\n+\n+      const btn = vm.$el\n+      expect(vm.n).toBe(0)\n+      btn.click()\n+      expect(vm.n).toBe(1)\n+      vm.showBtn = false\n+      waitForUpdate(() => {\n+        vm.showBtn = true\n+      }).then(() => {\n+        btn.click()\n+        expect(vm.n).toBe(2)\n+      }).then(done)\n+    })\n   }\n })\n\n\n###\n\n","completion":" fix(v-on): add removing all dom event listeners when vnode destroyed (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -1811,9 +1811,9 @@ chokidar@^2.0.2, chokidar@^2.0.3:\n     fsevents \"^1.2.2\"\n \n chownr@^1.1.1:\n-  version \"1.1.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/chownr\/-\/chownr-1.1.1.tgz#54726b8b8fff4df053c42187e801fb4412df1494\"\n-  integrity sha512-j38EvO5+LHX84jlo6h4UzmOwi0UgW61WRyPtJz4qaadK5eY3BTS5TY\/S1Stc3Uk2lIM6TPevAlULiEJwie860g==\n+  version \"1.1.4\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/chownr\/-\/chownr-1.1.4.tgz#6fc9d7b42d32a583596337666e7d08084da2cc6b\"\n+  integrity sha512-jJ0bqzaylmJtVnNgzTeSOs8DPavpbYgEr\/b0YL8\/2GO3xJEhInFmhKMUnEJQjZumK7KXGFhUy89PrsJWlakBVg==\n \n chrome-trace-event@^1.0.0:\n   version \"1.0.0\"\n@@ -3520,11 +3520,11 @@ fs-extra@^1.0.0:\n     klaw \"^1.0.0\"\n \n fs-minipass@^1.2.5:\n-  version \"1.2.5\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/fs-minipass\/-\/fs-minipass-1.2.5.tgz#06c277218454ec288df77ada54a03b8702aacb9d\"\n-  integrity sha512-JhBl0skXjUPCFH7x6x61gQxrKyXsxB5gcgePLZCwfyCGGsTISMoIeObbrvVeP6Xmyaudw4TT43qV2Gz+iyd2oQ==\n+  version \"1.2.7\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/fs-minipass\/-\/fs-minipass-1.2.7.tgz#ccff8570841e7fe4265693da88936c55aed7f7c7\"\n+  integrity sha512-GWSSJGFy4e9GUeCcbIkED+bgAoFyj7XF1mV8rma3QW4NIqX9Kyx79N\/PF61H5udOV3aY1IaMLs6pGbH71nlCTA==\n   dependencies:\n-    minipass \"^2.2.1\"\n+    minipass \"^2.6.0\"\n \n fs-write-stream-atomic@^1.0.8:\n   version \"1.0.10\"\n@@ -5569,20 +5569,20 @@ minimist@~0.0.1:\n   resolved \"https:\/\/registry.yarnpkg.com\/minimist\/-\/minimist-0.0.10.tgz#de3f98543dbf96082be48ad1a0c7cda836301dcf\"\n   integrity sha1-3j+YVD2\/lggr5IrRoMfNqDYwHc8=\n \n-minipass@^2.2.1, minipass@^2.3.4:\n-  version \"2.3.5\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/minipass\/-\/minipass-2.3.5.tgz#cacebe492022497f656b0f0f51e2682a9ed2d848\"\n-  integrity sha512-Gi1W4k059gyRbyVUZQ4mEqLm0YIUiGYfvxhF6SIlk3ui1WVxMTGfGdQ2SInh3PDrRTVvPKgULkpJtT4RH10+VA==\n+minipass@^2.6.0, minipass@^2.8.6, minipass@^2.9.0:\n+  version \"2.9.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/minipass\/-\/minipass-2.9.0.tgz#e713762e7d3e32fed803115cf93e04bca9fcc9a6\"\n+  integrity sha512-wxfUjg9WebH+CUDX\/CdbRlh5SmfZiy\/hpkxaRI16Y9W56Pa75sWgd\/rvFilSgrauD9NyFymP\/+JFV3KwzIsJeg==\n   dependencies:\n     safe-buffer \"^5.1.2\"\n     yallist \"^3.0.0\"\n \n-minizlib@^1.1.1:\n-  version \"1.2.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/minizlib\/-\/minizlib-1.2.1.tgz#dd27ea6136243c7c880684e8672bb3a45fd9b614\"\n-  integrity sha512-7+4oTUOWKg7AuL3vloEWekXY2\/D20cevzsrNT2kGWm+39J9hGTCBv8VI5Pm5lXZ\/o3\/mdR4f8rflAPhnQb8mPA==\n+minizlib@^1.2.1:\n+  version \"1.3.3\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/minizlib\/-\/minizlib-1.3.3.tgz#2290de96818a34c29551c8a8d301216bd65a861d\"\n+  integrity sha512-6ZYMOEnmVsdCeTJVE0W9ZD+pVnE8h9Hma\/iOwwRDsdQoePpoX56\/8B6z3P9VNwppJuBKNRuFDRNRqRWexT9G9Q==\n   dependencies:\n-    minipass \"^2.2.1\"\n+    minipass \"^2.9.0\"\n \n mississippi@^3.0.0:\n   version \"3.0.0\"\n@@ -5608,14 +5608,14 @@ mixin-deep@^1.2.0:\n     for-in \"^1.0.2\"\n     is-extendable \"^1.0.1\"\n \n-mkdirp@0.5.1, mkdirp@0.5.x, mkdirp@^0.5.0, mkdirp@^0.5.1, mkdirp@~0.5.0:\n+mkdirp@0.5.1:\n   version \"0.5.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/mkdirp\/-\/mkdirp-0.5.1.tgz#30057438eac6cf7f8c4767f38648d6697d75c903\"\n   integrity sha1-MAV0OOrGz3+MR2fzhkjWaX11yQM=\n   dependencies:\n     minimist \"0.0.8\"\n \n-mkdirp@^0.5.5:\n+mkdirp@0.5.x, mkdirp@^0.5.0, mkdirp@^0.5.1, mkdirp@^0.5.5, mkdirp@~0.5.0:\n   version \"0.5.5\"\n   resolved \"https:\/\/registry.yarnpkg.com\/mkdirp\/-\/mkdirp-0.5.5.tgz#d91cefd62d1436ca0f41620e251288d420099def\"\n   integrity sha512-NKmAlESf6jMGym1++R0Ra7wvhV+wFW63FaSOFPwRahvea0gMUcGUhVeAg\/0BC0wiv9ih5NYPB1Wn1UEI1\/L+xQ==\n@@ -7098,7 +7098,12 @@ rxjs@^6.1.0, rxjs@^6.3.3:\n   dependencies:\n     tslib \"^1.9.0\"\n \n-safe-buffer@^5.0.1, safe-buffer@^5.1.0, safe-buffer@^5.1.1, safe-buffer@^5.1.2, safe-buffer@~5.1.0, safe-buffer@~5.1.1:\n+safe-buffer@^5.0.1, safe-buffer@^5.1.0, safe-buffer@^5.1.1, safe-buffer@^5.1.2:\n+  version \"5.2.1\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/safe-buffer\/-\/safe-buffer-5.2.1.tgz#1eaf9fa9bdb1fdd4ec75f58f9cdb4e6b7827eec6\"\n+  integrity sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==\n+\n+safe-buffer@~5.1.0, safe-buffer@~5.1.1:\n   version \"5.1.2\"\n   resolved \"https:\/\/registry.yarnpkg.com\/safe-buffer\/-\/safe-buffer-5.1.2.tgz#991ec69d296e0313747d59bdfd2b745c35f8828d\"\n   integrity sha512-Gd2UZBJDkXlY7GbJxfsE8\/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud\/wPtojys4G6+g==\n@@ -7754,17 +7759,17 @@ tapable@^1.0.0, tapable@^1.1.0:\n   integrity sha512-9I2ydhj8Z9veORCw5PRm4u9uebCn0mcCa6scWoNcbZ6dAtoo2618u9UUzxgmsCOreJpqDDuv61LvwofW7hLcBA==\n \n tar@^4:\n-  version \"4.4.8\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/tar\/-\/tar-4.4.8.tgz#b19eec3fde2a96e64666df9fdb40c5ca1bc3747d\"\n-  integrity sha512-LzHF64s5chPQQS0IYBn9IN5h3i98c12bo4NCO7e0sGM2llXQ3p2FGC5sdENN4cTW48O915Sh+x+EXx7XW96xYQ==\n+  version \"4.4.15\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/tar\/-\/tar-4.4.15.tgz#3caced4f39ebd46ddda4d6203d48493a919697f8\"\n+  integrity sha512-ItbufpujXkry7bHH9NpQyTXPbJ72iTlXgkBAYsAjDXk3Ds8t\/3NfO5P4xZGy7u+sYuQUbimgzswX4uQIEeNVOA==\n   dependencies:\n     chownr \"^1.1.1\"\n     fs-minipass \"^1.2.5\"\n-    minipass \"^2.3.4\"\n-    minizlib \"^1.1.1\"\n+    minipass \"^2.8.6\"\n+    minizlib \"^1.2.1\"\n     mkdirp \"^0.5.0\"\n     safe-buffer \"^5.1.2\"\n-    yallist \"^3.0.2\"\n+    yallist \"^3.0.3\"\n \n tcp-port-used@^1.0.1:\n   version \"1.0.1\"\n@@ -8381,10 +8386,10 @@ yallist@^2.1.2:\n   resolved \"https:\/\/registry.yarnpkg.com\/yallist\/-\/yallist-2.1.2.tgz#1c11f9218f076089a47dd512f93c6699a6a81d52\"\n   integrity sha1-HBH5IY8HYImkfdUS+TxmmaaoHVI=\n \n-yallist@^3.0.0, yallist@^3.0.2:\n-  version \"3.0.3\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/yallist\/-\/yallist-3.0.3.tgz#b4b049e314be545e3ce802236d6cd22cd91c3de9\"\n-  integrity sha512-S+Zk8DEWE6oKpV+vI3qWkaK+jSbIK86pCwe2IF\/xwIpQ8jEuxpw9NyaGjmp9+BoJv5FV2piqCDcoCtStppiq2A==\n+yallist@^3.0.0, yallist@^3.0.2, yallist@^3.0.3:\n+  version \"3.1.1\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/yallist\/-\/yallist-3.1.1.tgz#dbb7daf9bfd8bac9ab45ebf602b8cbad0d5d08fd\"\n+  integrity sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==\n \n yauzl@2.4.1:\n   version \"2.4.1\"\n\n\n###\n\n","completion":" build(deps): bump tar from 4.4.8 to 4.4.15 (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -205,7 +205,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.layer0.co\/\" target=\"_blank\">\n+        <a href=\"https:\/\/www.layer0.co\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/layer0.png\">\n         <\/a>\n       <\/td>\n@@ -268,6 +268,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/exmax.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/plaid.co.jp\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/plaid_inc_.svg?sanitize=true\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -210,7 +210,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.layer0.co\/\" target=\"_blank\">\n+        <a href=\"https:\/\/www.layer0.co\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/layer0.png\">\n         <\/a>\n       <\/td>\n@@ -273,6 +273,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/exmax.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/plaid.co.jp\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/plaid_inc_.svg?sanitize=true\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -417,7 +417,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--50 start-->\n - Yoshitaka M\n - Peter Imburg\n-- Sean Ferguson\n - Johnny Ray Austin\n - errorrik \n - Wasim Khamlichi\n@@ -431,7 +430,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Sara McVey\n -  \n - Alex Riviere\n-- WhereJuly\n - Fontis \n - Jack \n - Nick Carr\n@@ -460,10 +458,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Nick Dandakis\n - Yusuke Kawabata\n - Shawn Wildermuth\n-- Andrew Willis\n+- Elon Hung\n - Meinhard Dam\n-- Princeyesuraj Edward\n-- Juan Bermudez\n - Daniel Mattingley\n - Matt Sencenbaugh\n - Jaeyoung Lee\n@@ -496,7 +492,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Victor Tolbert\n - Lars Andreas Ness\n - Benjamin Listwon\n-- Elon Hung\n+- Juan Bermudez\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -205,8 +205,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"http:\/\/moovweb.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/moovweb.png\">\n+        <a href=\"https:\/\/www.layer0.co\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/layer0.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -210,8 +210,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"http:\/\/moovweb.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/moovweb.png\">\n+        <a href=\"https:\/\/www.layer0.co\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/layer0.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -310,16 +310,16 @@ Vue.js supports all browsers that are [ES5-compliant](https:\/\/kangax.github.io\/c\n \n ## Ecosystem\n \n-| Project | Status | Description |\n-|---------|--------|-------------|\n-| [vue-router]          | [![vue-router-status]][vue-router-package] | Single-page application routing |\n-| [vuex]                | [![vuex-status]][vuex-package] | Large-scale state management |\n-| [vue-cli]             | [![vue-cli-status]][vue-cli-package] | Project scaffolding |\n-| [vue-loader]          | [![vue-loader-status]][vue-loader-package] | Single File Component (`*.vue` file) loader for webpack |\n-| [vue-server-renderer] | [![vue-server-renderer-status]][vue-server-renderer-package] | Server-side rendering support |\n-| [vue-class-component] | [![vue-class-component-status]][vue-class-component-package] | TypeScript decorator for a class-based API |\n-| [vue-rx]              | [![vue-rx-status]][vue-rx-package] | RxJS integration |\n-| [vue-devtools]        | [![vue-devtools-status]][vue-devtools-package] | Browser DevTools extension |\n+| Project               | Status                                                       | Description                                             |\n+| --------------------- | ------------------------------------------------------------ | ------------------------------------------------------- |\n+| [vue-router]          | [![vue-router-status]][vue-router-package]                   | Single-page application routing                         |\n+| [vuex]                | [![vuex-status]][vuex-package]                               | Large-scale state management                            |\n+| [vue-cli]             | [![vue-cli-status]][vue-cli-package]                         | Project scaffolding                                     |\n+| [vue-loader]          | [![vue-loader-status]][vue-loader-package]                   | Single File Component (`*.vue` file) loader for webpack |\n+| [vue-server-renderer] | [![vue-server-renderer-status]][vue-server-renderer-package] | Server-side rendering support                           |\n+| [vue-class-component] | [![vue-class-component-status]][vue-class-component-package] | TypeScript decorator for a class-based API              |\n+| [vue-rx]              | [![vue-rx-status]][vue-rx-package]                           | RxJS integration                                        |\n+| [vue-devtools]        | [![vue-devtools-status]][vue-devtools-package]               | Browser DevTools extension                              |\n \n [vue-router]: https:\/\/github.com\/vuejs\/vue-router\n [vuex]: https:\/\/github.com\/vuejs\/vuex\n@@ -328,8 +328,7 @@ Vue.js supports all browsers that are [ES5-compliant](https:\/\/kangax.github.io\/c\n [vue-server-renderer]: https:\/\/github.com\/vuejs\/vue\/tree\/dev\/packages\/vue-server-renderer\n [vue-class-component]: https:\/\/github.com\/vuejs\/vue-class-component\n [vue-rx]: https:\/\/github.com\/vuejs\/vue-rx\n-[vue-devtools]:  https:\/\/github.com\/vuejs\/vue-devtools\n-\n+[vue-devtools]: https:\/\/github.com\/vuejs\/vue-devtools\n [vue-router-status]: https:\/\/img.shields.io\/npm\/v\/vue-router.svg\n [vuex-status]: https:\/\/img.shields.io\/npm\/v\/vuex.svg\n [vue-cli-status]: https:\/\/img.shields.io\/npm\/v\/@vue\/cli.svg\n@@ -338,7 +337,6 @@ Vue.js supports all browsers that are [ES5-compliant](https:\/\/kangax.github.io\/c\n [vue-class-component-status]: https:\/\/img.shields.io\/npm\/v\/vue-class-component.svg\n [vue-rx-status]: https:\/\/img.shields.io\/npm\/v\/vue-rx.svg\n [vue-devtools-status]: https:\/\/img.shields.io\/chrome-web-store\/v\/nhdogjmejiglipccpnnnanhbledajbpd.svg\n-\n [vue-router-package]: https:\/\/npmjs.com\/package\/vue-router\n [vuex-package]: https:\/\/npmjs.com\/package\/vuex\n [vue-cli-package]: https:\/\/npmjs.com\/package\/@vue\/cli\n@@ -378,7 +376,6 @@ Thank you to all the people who already contributed to Vue!\n \n <a href=\"https:\/\/github.com\/vuejs\/vue\/graphs\/contributors\"><img src=\"https:\/\/opencollective.com\/vuejs\/contributors.svg?width=890\" \/><\/a>\n \n-\n ## License\n \n [MIT](https:\/\/opensource.org\/licenses\/MIT)\n\n\n###\n\n","completion":" chore: sponsor update [ci skip]\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -130,11 +130,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/vuejobs.com\/?ref=vuejs\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/tidelift.com\/subscription\/npm\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n@@ -160,13 +155,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\/hire-vuejs-developer\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -192,6 +187,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/storekit.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storekit.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -135,11 +135,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/vuejobs.com\/?ref=vuejs\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/tidelift.com\/subscription\/npm\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n@@ -165,13 +160,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\/hire-vuejs-developer\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -197,6 +192,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/storekit.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storekit.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -440,6 +440,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Pierre Baron\n - Donghai Gai\n - Aleksander Figiel\n+- Dennis Zanetti\n - wickedwei \n - Sunny Yuen\n - Jules \n@@ -467,6 +468,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Matt Sencenbaugh\n - Jaeyoung Lee\n - David Kaplan\n+- David Ang\n - Wakana Seki\n - Jere Sjroos\n - Donald Fischer\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -426,10 +426,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <h2 align=\"center\">Backers via Patreon<\/h2>\n \n <!--10 start-->\n-- Sara McVey\n+- Jeffrey Rennie\n - Keisuke Kita\n+- Sara McVey\n+-  \n - Alex Riviere\n-- Thomas Sittig\n - WhereJuly\n - Fontis \n - Jack \n@@ -439,17 +440,14 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Pierre Baron\n - Donghai Gai\n - Aleksander Figiel\n-- Faizal Andyka\n - wickedwei \n - Sunny Yuen\n - Jules \n - Zeth Odderskov\n-- Santi Sanchez Canals\n - Thomas Wiedemann\n - Nobuhide Esaki\n - Roy Segall\n - Allan McKernan\n--  \n - Diana Bergholz\n - Riki Fridrich\n - Alfonso Herrera\n@@ -462,15 +460,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Yusuke Kawabata\n - Shawn Wildermuth\n - Andrew Willis\n-- Elon Hung\n--  \n+- Meinhard Dam\n+- Princeyesuraj Edward\n - Juan Bermudez\n-- Hannes Kochni\n - Daniel Mattingley\n - Matt Sencenbaugh\n - Jaeyoung Lee\n - David Kaplan\n-- David Ang\n - Wakana Seki\n - Jere Sjroos\n - Donald Fischer\n@@ -482,7 +478,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - IMGNRY \n - Jim Raden\n - Haim Yulzari\n-- Anthony Estebe\n - Asaf Yishai\n - Jon Hobbs-Smith\n - Pierre Vanhulst\n@@ -495,11 +490,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Matsumoto Takamasa\n - Barbara Liau\n - Wen-Tien Chang\n-- Stephen Michael Hartley\n+- Stephen Hartley\n - Victor Tolbert\n - Lars Andreas Ness\n - Benjamin Listwon\n-- Chris Calo\n+- Elon Hung\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.13\",\n+  \"version\": \"2.6.14\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.14\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -12,9 +12,10 @@ export type Component<Data=DefaultData<never>, Methods=DefaultMethods<never>, Co\n   | FunctionalComponentOptions<Props>\n   | ComponentOptions<never, Data, Methods, Computed, Props>\n \n-interface EsModuleComponent {\n-  default: Component\n-}\n+type EsModule<T> = T | { default: T }\n+\n+type ImportedComponent<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps>\n+  = EsModule<Component<Data, Methods, Computed, Props>>\n \n export type AsyncComponent<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps>\n   = AsyncComponentPromise<Data, Methods, Computed, Props>\n@@ -23,12 +24,12 @@ export type AsyncComponent<Data=DefaultData<never>, Methods=DefaultMethods<never\n export type AsyncComponentPromise<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps> = (\n   resolve: (component: Component<Data, Methods, Computed, Props>) => void,\n   reject: (reason?: any) => void\n-) => Promise<Component | EsModuleComponent> | void;\n+) => Promise<ImportedComponent<Data, Methods, Computed, Props>> | void;\n \n export type AsyncComponentFactory<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps> = () => {\n-  component: AsyncComponentPromise<Data, Methods, Computed, Props>;\n-  loading?: Component | EsModuleComponent;\n-  error?: Component | EsModuleComponent;\n+  component: Promise<ImportedComponent<Data, Methods, Computed, Props>>;\n+  loading?: ImportedComponent;\n+  error?: ImportedComponent;\n   delay?: number;\n   timeout?: number;\n }\n\n---\n file path A: None | file path B: types\/test\/async-component-test.ts\n\n@@ -0,0 +1,44 @@\n+import Vue, { AsyncComponent, Component } from \"..\/index\";\n+\n+const a: AsyncComponent = () => ({\n+  component: new Promise<Component>((res, rej) => {\n+    res({ template: \"\" })\n+  })\n+})\n+\n+const b: AsyncComponent = () => ({\n+  \/\/ @ts-expect-error component has to be a Promise that resolves to a component\n+  component: () =>\n+    new Promise<Component>((res, rej) => {\n+      res({ template: \"\" })\n+    })\n+})\n+\n+const c: AsyncComponent = () =>\n+  new Promise<Component>((res, rej) => {\n+    res({\n+      template: \"\"\n+    })\n+  })\n+\n+const d: AsyncComponent = () =>\n+  new Promise<{ default: Component }>((res, rej) => {\n+    res({\n+      default: {\n+        template: \"\"\n+      }\n+    })\n+  })\n+\n+const e: AsyncComponent = () => ({\n+  component: new Promise<{ default: Component }>((res, rej) => {\n+    res({\n+      default: {\n+        template: \"\"\n+      }\n+    })\n+  })\n+})\n+\n+\/\/ Test that Vue.component accepts any AsyncComponent\n+Vue.component(\"async-compponent1\", a)\n\n\n###\n\n","completion":" fix(types): async Component types (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/webpack-plugin\/client.js | file path B: src\/server\/webpack-plugin\/client.js\n\n@@ -1,6 +1,6 @@\n const hash = require('hash-sum')\n const uniq = require('lodash.uniq')\n-import { isJS, isCSS, onEmit } from '.\/util'\n+import { isJS, isCSS, getAssetName, onEmit, stripModuleIdHash } from '.\/util'\n \n export default class VueSSRClientPlugin {\n   constructor (options = {}) {\n@@ -10,7 +10,8 @@ export default class VueSSRClientPlugin {\n   }\n \n   apply (compiler) {\n-    onEmit(compiler, 'vue-client-plugin', (compilation, cb) => {\n+    const stage = 'PROCESS_ASSETS_STAGE_ADDITIONAL'\n+    onEmit(compiler, 'vue-client-plugin', stage, (compilation, cb) => {\n       const stats = compilation.getStats().toJson()\n \n       const allFiles = uniq(stats.assets\n@@ -19,6 +20,7 @@ export default class VueSSRClientPlugin {\n       const initialFiles = uniq(Object.keys(stats.entrypoints)\n         .map(name => stats.entrypoints[name].assets)\n         .reduce((assets, all) => all.concat(assets), [])\n+        .map(getAssetName)\n         .filter((file) => isJS(file) || isCSS(file)))\n \n       const asyncFiles = allFiles\n@@ -34,7 +36,7 @@ export default class VueSSRClientPlugin {\n       }\n \n       const assetModules = stats.modules.filter(m => m.assets.length)\n-      const fileToIndex = file => manifest.all.indexOf(file)\n+      const fileToIndex = asset => manifest.all.indexOf(getAssetName(asset))\n       stats.modules.forEach(m => {\n         \/\/ ignore modules duplicated in multiple chunks\n         if (m.chunks.length === 1) {\n@@ -43,7 +45,7 @@ export default class VueSSRClientPlugin {\n           if (!chunk || !chunk.files) {\n             return\n           }\n-          const id = m.identifier.replace(\/\\s\\w+$\/, '') \/\/ remove appended hash\n+          const id = stripModuleIdHash(m.identifier)\n           const files = manifest.modules[hash(id)] = chunk.files.map(fileToIndex)\n           \/\/ find all asset modules associated with the same chunk\n           assetModules.forEach(m => {\n\n---\n file path A: src\/server\/webpack-plugin\/server.js | file path B: src\/server\/webpack-plugin\/server.js\n\n@@ -1,4 +1,4 @@\n-import { validate, isJS, onEmit } from '.\/util'\n+import { validate, isJS, getAssetName, onEmit } from '.\/util'\n \n export default class VueSSRServerPlugin {\n   constructor (options = {}) {\n@@ -10,7 +10,8 @@ export default class VueSSRServerPlugin {\n   apply (compiler) {\n     validate(compiler)\n \n-    onEmit(compiler, 'vue-server-plugin', (compilation, cb) => {\n+    const stage = 'PROCESS_ASSETS_STAGE_OPTIMIZE_TRANSFER'\n+    onEmit(compiler, 'vue-server-plugin', stage, (compilation, cb) => {\n       const stats = compilation.getStats().toJson()\n       const entryName = Object.keys(stats.entrypoints)[0]\n       const entryInfo = stats.entrypoints[entryName]\n@@ -20,7 +21,9 @@ export default class VueSSRServerPlugin {\n         return cb()\n       }\n \n-      const entryAssets = entryInfo.assets.filter(isJS)\n+      const entryAssets = entryInfo.assets\n+        .map(getAssetName)\n+        .filter(isJS)\n \n       if (entryAssets.length > 1) {\n         throw new Error(\n@@ -42,14 +45,14 @@ export default class VueSSRServerPlugin {\n         maps: {}\n       }\n \n-      stats.assets.forEach(asset => {\n-        if (isJS(asset.name)) {\n-          bundle.files[asset.name] = compilation.assets[asset.name].source()\n-        } else if (asset.name.match(\/\\.js\\.map$\/)) {\n-          bundle.maps[asset.name.replace(\/\\.map$\/, '')] = JSON.parse(compilation.assets[asset.name].source())\n+      Object.keys(compilation.assets).forEach(name => {\n+        if (isJS(name)) {\n+          bundle.files[name] = compilation.assets[name].source()\n+        } else if (name.match(\/\\.js\\.map$\/)) {\n+          bundle.maps[name.replace(\/\\.map$\/, '')] = JSON.parse(compilation.assets[name].source())\n         }\n         \/\/ do not emit anything else for server\n-        delete compilation.assets[asset.name]\n+        delete compilation.assets[name]\n       })\n \n       const json = JSON.stringify(bundle, null, 2)\n\n---\n file path A: src\/server\/webpack-plugin\/util.js | file path B: src\/server\/webpack-plugin\/util.js\n\n@@ -1,16 +1,27 @@\n const { red, yellow } = require('chalk')\n+const webpack = require('webpack')\n \n const prefix = `[vue-server-renderer-webpack-plugin]`\n const warn = exports.warn = msg => console.error(red(`${prefix} ${msg}\\n`))\n const tip = exports.tip = msg => console.log(yellow(`${prefix} ${msg}\\n`))\n \n+const isWebpack5 = !!(webpack.version && webpack.version[0] > 4)\n+\n export const validate = compiler => {\n   if (compiler.options.target !== 'node') {\n     warn('webpack config `target` should be \"node\".')\n   }\n \n-  if (compiler.options.output && compiler.options.output.libraryTarget !== 'commonjs2') {\n-    warn('webpack config `output.libraryTarget` should be \"commonjs2\".')\n+  if (compiler.options.output) {\n+    if (compiler.options.output.library) {\n+      \/\/ Webpack >= 5.0.0\n+      if (compiler.options.output.library.type !== 'commonjs2') {\n+        warn('webpack config `output.library.type` should be \"commonjs2\".')\n+      }\n+    } else if (compiler.options.output.libraryTarget !== 'commonjs2') {\n+      \/\/ Webpack < 5.0.0\n+      warn('webpack config `output.libraryTarget` should be \"commonjs2\".')\n+    }\n   }\n \n   if (!compiler.options.externals) {\n@@ -21,8 +32,20 @@ export const validate = compiler => {\n   }\n }\n \n-export const onEmit = (compiler, name, hook) => {\n-  if (compiler.hooks) {\n+export const onEmit = (compiler, name, stageName, hook) => {\n+  if (isWebpack5) {\n+    \/\/ Webpack >= 5.0.0\n+    compiler.hooks.compilation.tap(name, compilation => {\n+      if (compilation.compiler !== compiler) {\n+        \/\/ Ignore child compilers\n+        return\n+      }\n+      const stage = webpack.Compilation[stageName]\n+      compilation.hooks.processAssets.tapAsync({ name, stage }, (assets, cb) => {\n+        hook(compilation, cb)\n+      })\n+    })\n+  } else if (compiler.hooks) {\n     \/\/ Webpack >= 4.0.0\n     compiler.hooks.emit.tapAsync(name, hook)\n   } else {\n@@ -31,4 +54,20 @@ export const onEmit = (compiler, name, hook) => {\n   }\n }\n \n+export const stripModuleIdHash = id => {\n+  if (isWebpack5) {\n+    \/\/ Webpack >= 5.0.0\n+    return id.replace(\/\\|\\w+$\/, '')\n+  }\n+  \/\/ Webpack < 5.0.0\n+  return id.replace(\/\\s\\w+$\/, '')\n+}\n+\n+export const getAssetName = asset => {\n+  if (typeof asset === 'string') {\n+    return asset\n+  }\n+  return asset.name\n+}\n+\n export { isJS, isCSS } from '..\/util'\n\n\n###\n\n","completion":" feat(ssr): vue-ssr-webpack-plugin compatible with webpack 5 (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -61,10 +61,10 @@ function normalizeScopedSlot(normalSlots, key, fn) {\n     res = res && typeof res === 'object' && !Array.isArray(res)\n       ? [res] \/\/ single vnode\n       : normalizeChildren(res)\n-    let vnode: VNode = res && res[0]\n+    let vnode: ?VNode = res && res[0]\n     return res && (\n       !vnode ||\n-      (vnode.isComment && !isAsyncPlaceholder(vnode)) \/\/ #9658, #10391\n+      (res.length === 1 && vnode.isComment && !isAsyncPlaceholder(vnode)) \/\/ #9658, #10391\n     ) ? undefined\n       : res\n   }\n\n---\n file path A: test\/unit\/features\/component\/component-slot.spec.js | file path B: test\/unit\/features\/component\/component-slot.spec.js\n\n@@ -986,4 +986,18 @@ describe('Component slot', () => {\n       expect(vm.$el.firstChild.innerHTML).toBe('<span><b>2<\/b><\/span>')\n     }).then(done)\n   })\n+\n+  \/\/ #12102\n+  it('v-if inside scoped slot', () => {\n+    const vm = new Vue({\n+      template: `<test><template #custom><span v-if=\"false\">a<\/span><span>b<\/span><\/template><\/test>`,\n+      components: {\n+        test: {\n+          template: `<div><slot name=\"custom\"\/><\/div>`\n+        }\n+      }\n+    }).$mount()\n+\n+    expect(vm.$el.innerHTML).toBe(`<!----><span>b<\/span>`)\n+  })\n })\n\n\n###\n\n","completion":" fix(v-slot): fix scoped slot normalization combined with v-if (#<issue-num>)\n"}
{"prompt":" file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -694,6 +694,34 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n+  \/\/ #11963, #10391\n+  it('renders async children passed in slots', done => {\n+    const Parent = {\n+      template: `<div><slot name=\"child\"\/><\/div>`\n+    }\n+    const Child = {\n+      template: `<p>child<\/p>`\n+    }\n+    renderVmWithOptions({\n+      template: `\n+      <Parent>\n+        <template #child>\n+          <Child\/>\n+        <\/template>\n+      <\/Parent>\n+      `,\n+      components: {\n+        Parent,\n+        Child: () => Promise.resolve(Child)\n+      }\n+    }, result => {\n+      expect(result).toContain(\n+        `<div data-server-rendered=\"true\"><p>child<\/p><\/div>`\n+      )\n+      done()\n+    })\n+  })\n+\n   it('everything together', done => {\n     renderVmWithOptions({\n       template: `\n\n\n###\n\n","completion":" test(ssr): add missing test for async component in slot\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.12\",\n+  \"version\": \"2.6.13\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.13\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/render-slot.js | file path B: src\/core\/instance\/render-helpers\/render-slot.js\n\n@@ -24,13 +24,11 @@ export function renderSlot (\n     }\n     nodes =\n       scopedSlotFn(props) ||\n-      (fallbackRender &&\n-        (Array.isArray(fallbackRender) ? fallbackRender : fallbackRender()))\n+      (typeof fallbackRender === 'function' ? fallbackRender() : fallbackRender)\n   } else {\n     nodes =\n       this.$slots[name] ||\n-      (fallbackRender &&\n-        (Array.isArray(fallbackRender) ? fallbackRender : fallbackRender()))\n+      (typeof fallbackRender === 'function' ? fallbackRender() : fallbackRender)\n   }\n \n   const target = props && props.slot\n\n\n###\n\n","completion":" refactor: check is function for fallback slots\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -292,6 +292,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/2\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/2\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n <a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/3\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/3\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n <a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/4\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/4\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/5\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/5\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/6\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/6\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/7\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/7\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/8\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/8\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/9\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/9\/avatar.svg?sanitize=true\" height=\"60px\"><\/a><a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/10\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/10\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n \n ---\n \n\n\n###\n\n","completion":" chore: display more oc sponsors on readme [ci skip]\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -17,7 +17,7 @@ Vue.js is an MIT-licensed open source project with its ongoing development made\n \n - [Become a backer or sponsor on Patreon](https:\/\/www.patreon.com\/evanyou).\n - [Become a backer or sponsor on Open Collective](https:\/\/opencollective.com\/vuejs).\n-- [One-time donation via PayPal or crypto-currencies.](https:\/\/vuejs.org\/support-vuejs\/#One-time-Donations)\n+- [One-time donation via PayPal or crypto-currencies](https:\/\/vuejs.org\/support-vuejs\/#One-time-Donations).\n \n #### What's the difference between Patreon and OpenCollective?\n \n\n\n###\n\n","completion":" chore: fix typo in README.md [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -263,6 +263,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/line_corporation.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/exmax.it\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/exmax.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -268,6 +268,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/line_corporation.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/exmax.it\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/exmax.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -330,6 +330,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/0\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/0\/avatar.svg\"><\/a>\n <a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/1\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/1\/avatar.svg\"><\/a>\n <a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/2\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/2\/avatar.svg\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/3\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/3\/avatar.svg\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/4\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/4\/avatar.svg\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/5\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/5\/avatar.svg\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/6\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/6\/avatar.svg\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/7\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/7\/avatar.svg\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/8\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/8\/avatar.svg\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/9\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/9\/avatar.svg\"><\/a>\n \n <h2 align=\"center\">Bronze via Patreon<\/h2>\n \n\n\n###\n\n","completion":" chore: fix opencollective silver sponsors in backers.md [ci skip]\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -3269,9 +3269,9 @@ fd-slicer@~1.0.1:\n     pend \"~1.2.0\"\n \n figgy-pudding@^3.5.1:\n-  version \"3.5.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/figgy-pudding\/-\/figgy-pudding-3.5.1.tgz#862470112901c727a0e495a80744bd5baa1d6790\"\n-  integrity sha512-vNKxJHTEKNThjfrdJwHc7brvM6eVevuO5nTj6ez8ZQ1qbXTvGthucRF7S4vf2cr71QVnT70V34v0S1DyQsti0w==\n+  version \"3.5.2\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/figgy-pudding\/-\/figgy-pudding-3.5.2.tgz#b4eee8148abb01dcf1d1ac34367d59e12fa61d6e\"\n+  integrity sha512-0btnI\/H8f2pavGMN8w40mlSKOfTK2SVJmBfBeVIj3kNw0swwgzyRq0d5TJVOwodFmtvpPeWPN\/MCcfuWF0Ezbw==\n \n figures@^1.3.5, figures@^1.7.0:\n   version \"1.7.0\"\n@@ -7531,9 +7531,9 @@ sshpk@^1.7.0:\n     tweetnacl \"~0.14.0\"\n \n ssri@^6.0.1:\n-  version \"6.0.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/ssri\/-\/ssri-6.0.1.tgz#2a3c41b28dd45b62b63676ecb74001265ae9edd8\"\n-  integrity sha512-3Wge10hNcT1Kur4PDFwEieXSCMCJs\/7WvSACcrMYrNp+b8kDL1\/0wJch5Ni2WrtwEa2IO8OsVfeKIciKCDx\/QA==\n+  version \"6.0.2\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/ssri\/-\/ssri-6.0.2.tgz#157939134f20464e7301ddba3e90ffa8f7728ac5\"\n+  integrity sha512-cepbSq\/neFK7xB6A50KHN0xHDotYzq58wWCa5LeWqnPrHG8GzfEjO\/4O8kpmcGW+oaxkvhEJCWgbgNk4\/ZV93Q==\n   dependencies:\n     figgy-pudding \"^3.5.1\"\n \n\n\n###\n\n","completion":" build(deps): bump ssri from 6.0.1 to 6.0.2 (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -257,6 +257,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/linecorp.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/line_corporation.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -262,6 +262,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/linecorp.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/line_corporation.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/components\/keep-alive.js | file path B: src\/core\/components\/keep-alive.js\n\n@@ -3,7 +3,13 @@\n import { isRegExp, remove } from 'shared\/util'\n import { getFirstComponentChild } from 'core\/vdom\/helpers\/index'\n \n-type VNodeCache = { [key: string]: ?VNode };\n+type CacheEntry = {\n+  name: ?string;\n+  tag: ?string;\n+  componentInstance: Component;\n+};\n+\n+type CacheEntryMap = { [key: string]: ?CacheEntry };\n \n function getComponentName (opts: ?VNodeComponentOptions): ?string {\n   return opts && (opts.Ctor.options.name || opts.tag)\n@@ -24,9 +30,9 @@ function matches (pattern: string | RegExp | Array<string>, name: string): boole\n function pruneCache (keepAliveInstance: any, filter: Function) {\n   const { cache, keys, _vnode } = keepAliveInstance\n   for (const key in cache) {\n-    const cachedNode: ?VNode = cache[key]\n-    if (cachedNode) {\n-      const name: ?string = getComponentName(cachedNode.componentOptions)\n+    const entry: ?CacheEntry = cache[key]\n+    if (entry) {\n+      const name: ?string = entry.name\n       if (name && !filter(name)) {\n         pruneCacheEntry(cache, key, keys, _vnode)\n       }\n@@ -35,14 +41,14 @@ function pruneCache (keepAliveInstance: any, filter: Function) {\n }\n \n function pruneCacheEntry (\n-  cache: VNodeCache,\n+  cache: CacheEntryMap,\n   key: string,\n   keys: Array<string>,\n   current?: VNode\n ) {\n-  const cached = cache[key]\n-  if (cached && (!current || cached.tag !== current.tag)) {\n-    cached.componentInstance.$destroy()\n+  const entry: ?CacheEntry = cache[key]\n+  if (entry && (!current || entry.tag !== current.tag)) {\n+    entry.componentInstance.$destroy()\n   }\n   cache[key] = null\n   remove(keys, key)\n@@ -60,6 +66,26 @@ export default {\n     max: [String, Number]\n   },\n \n+  methods: {\n+    cacheVNode() {\n+      const { cache, keys, vnodeToCache, keyToCache } = this\n+      if (vnodeToCache) {\n+        const { tag, componentInstance, componentOptions } = vnodeToCache\n+        cache[keyToCache] = {\n+          name: getComponentName(componentOptions),\n+          tag,\n+          componentInstance,\n+        }\n+        keys.push(keyToCache)\n+        \/\/ prune oldest entry\n+        if (this.max && keys.length > parseInt(this.max)) {\n+          pruneCacheEntry(cache, keys[0], keys, this._vnode)\n+        }\n+        this.vnodeToCache = null\n+      }\n+    }\n+  },\n+\n   created () {\n     this.cache = Object.create(null)\n     this.keys = []\n@@ -72,6 +98,7 @@ export default {\n   },\n \n   mounted () {\n+    this.cacheVNode()\n     this.$watch('include', val => {\n       pruneCache(this, name => matches(val, name))\n     })\n@@ -80,6 +107,10 @@ export default {\n     })\n   },\n \n+  updated () {\n+    this.cacheVNode()\n+  },\n+\n   render () {\n     const slot = this.$slots.default\n     const vnode: VNode = getFirstComponentChild(slot)\n@@ -109,12 +140,9 @@ export default {\n         remove(keys, key)\n         keys.push(key)\n       } else {\n-        cache[key] = vnode\n-        keys.push(key)\n-        \/\/ prune oldest entry\n-        if (this.max && keys.length > parseInt(this.max)) {\n-          pruneCacheEntry(cache, keys[0], keys, this._vnode)\n-        }\n+        \/\/ delay setting the cache until update\n+        this.vnodeToCache = vnode\n+        this.keyToCache = key\n       }\n \n       vnode.data.keepAlive = true\n\n---\n file path A: test\/unit\/features\/component\/component-keep-alive.spec.js | file path B: test\/unit\/features\/component\/component-keep-alive.spec.js\n\n@@ -572,6 +572,73 @@ describe('Component keep-alive', () => {\n     }).then(done)\n   })\n \n+  it('max=1', done => {\n+    const spyA = jasmine.createSpy()\n+    const spyB = jasmine.createSpy()\n+    const spyC = jasmine.createSpy()\n+    const spyAD = jasmine.createSpy()\n+    const spyBD = jasmine.createSpy()\n+    const spyCD = jasmine.createSpy()\n+\n+    function assertCount (calls) {\n+      expect([\n+        spyA.calls.count(),\n+        spyAD.calls.count(),\n+        spyB.calls.count(),\n+        spyBD.calls.count(),\n+        spyC.calls.count(),\n+        spyCD.calls.count()\n+      ]).toEqual(calls)\n+    }\n+\n+    const vm = new Vue({\n+      template: `\n+        <keep-alive max=\"1\">\n+          <component :is=\"n\"><\/component>\n+        <\/keep-alive>\n+      `,\n+      data: {\n+        n: 'aa'\n+      },\n+      components: {\n+        aa: {\n+          template: '<div>a<\/div>',\n+          created: spyA,\n+          destroyed: spyAD\n+        },\n+        bb: {\n+          template: '<div>bbb<\/div>',\n+          created: spyB,\n+          destroyed: spyBD\n+        },\n+        cc: {\n+          template: '<div>ccc<\/div>',\n+          created: spyC,\n+          destroyed: spyCD\n+        }\n+      }\n+    }).$mount()\n+\n+    assertCount([1, 0, 0, 0, 0, 0])\n+    vm.n = 'bb'\n+    waitForUpdate(() => {\n+      \/\/ should prune A because max cache reached\n+      assertCount([1, 1, 1, 0, 0, 0])\n+      vm.n = 'cc'\n+    }).then(() => {\n+      \/\/ should prune B because max cache reached\n+      assertCount([1, 1, 1, 1, 1, 0])\n+      vm.n = 'bb'\n+    }).then(() => {\n+      \/\/ B is recreated\n+      assertCount([1, 1, 2, 1, 1, 1])\n+      vm.n = 'aa'\n+    }).then(() => {\n+      \/\/ B is destroyed and A recreated\n+      assertCount([2, 1, 2, 2, 1, 1])\n+    }).then(done)\n+  })\n+\n   it('should warn unknown component inside', () => {\n     new Vue({\n       template: `<keep-alive><foo\/><\/keep-alive>`\n\n\n###\n\n","completion":" fix(keep-alive): cache what is really needed not the whole VNode data (#<issue-num>)\n"}
{"prompt":" file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -26,7 +26,7 @@ export interface Vue {\n   readonly $parent: Vue;\n   readonly $root: Vue;\n   readonly $children: Vue[];\n-  readonly $refs: { [key: string]: Vue | Element | Vue[] | Element[] };\n+  readonly $refs: { [key: string]: Vue | Element | (Vue | Element)[] | undefined };\n   readonly $slots: { [key: string]: VNode[] | undefined };\n   readonly $scopedSlots: { [key: string]: NormalizedScopedSlot | undefined };\n   readonly $isServer: boolean;\n\n\n###\n\n","completion":" fix(types): make $refs undefined possible (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/patch.js | file path B: src\/core\/vdom\/patch.js\n\n@@ -34,7 +34,8 @@ const hooks = ['create', 'activate', 'update', 'remove', 'destroy']\n \n function sameVnode (a, b) {\n   return (\n-    a.key === b.key && (\n+    a.key === b.key &&\n+    a.asyncFactory === b.asyncFactory && (\n       (\n         a.tag === b.tag &&\n         a.isComment === b.isComment &&\n@@ -42,7 +43,6 @@ function sameVnode (a, b) {\n         sameInputType(a, b)\n       ) || (\n         isTrue(a.isAsyncPlaceholder) &&\n-        a.asyncFactory === b.asyncFactory &&\n         isUndef(b.asyncFactory.error)\n       )\n     )\n\n---\n file path A: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js | file path B: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js\n\n@@ -1,4 +1,5 @@\n import Vue from 'vue'\n+import { SSR_ATTR } from 'shared\/constants'\n \n describe('vdom patch: edge cases', () => {\n   \/\/ exposed by #3406\n@@ -432,4 +433,22 @@ describe('vdom patch: edge cases', () => {\n       expect(vm.$el.textContent).not.toMatch('Infinity')\n     }).then(done)\n   })\n+\n+  it('should not throw when hydrated pending async component is patched by v-if=\"false\"', done => {\n+    const PendingAsyncComponent = () => new Promise(() => {})\n+    const ssrAsyncComponent = document.createElement('div')\n+    ssrAsyncComponent.setAttribute(SSR_ATTR, 'true')\n+    const vm = new Vue({\n+      data: {\n+        visible: true\n+      },\n+      components: {\n+        PendingAsyncComponent\n+      },\n+      template: '<pending-async-component v-if=\"visible\"><\/pending-async-component>'\n+    }).$mount(ssrAsyncComponent)\n+\n+    vm.visible = false\n+    vm.$nextTick(done)\n+  })\n })\n\n\n###\n\n","completion":" fix(core): fix sameVnode for async component (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/state.js | file path B: src\/core\/instance\/state.js\n\n@@ -25,7 +25,8 @@ import {\n   validateProp,\n   isPlainObject,\n   isServerRendering,\n-  isReservedAttribute\n+  isReservedAttribute,\n+  invokeWithErrorHandling\n } from '..\/util\/index'\n \n const sharedPropertyDefinition = {\n@@ -357,12 +358,9 @@ export function stateMixin (Vue: Class<Component>) {\n     options.user = true\n     const watcher = new Watcher(vm, expOrFn, cb, options)\n     if (options.immediate) {\n+      const info = `callback for immediate watcher \"${watcher.expression}\"`\n       pushTarget()\n-      try {\n-        cb.call(vm, watcher.value)\n-      } catch (error) {\n-        handleError(error, vm, `callback for immediate watcher \"${watcher.expression}\"`)\n-      }\n+      invokeWithErrorHandling(cb, vm, [watcher.value], vm, info)\n       popTarget()\n     }\n     return function unwatchFn () {\n\n---\n file path A: src\/core\/observer\/watcher.js | file path B: src\/core\/observer\/watcher.js\n\n@@ -7,6 +7,7 @@ import {\n   parsePath,\n   _Set as Set,\n   handleError,\n+  invokeWithErrorHandling,\n   noop\n } from '..\/util\/index'\n \n@@ -191,11 +192,8 @@ export default class Watcher {\n         const oldValue = this.value\n         this.value = value\n         if (this.user) {\n-          try {\n-            this.cb.call(this.vm, value, oldValue)\n-          } catch (e) {\n-            handleError(e, this.vm, `callback for watcher \"${this.expression}\"`)\n-          }\n+          const info = `callback for watcher \"${this.expression}\"`\n+          invokeWithErrorHandling(this.cb, this.vm, [value, oldValue], this.vm, info)\n         } else {\n           this.cb.call(this.vm, value, oldValue)\n         }\n\n---\n file path A: test\/unit\/features\/error-handling.spec.js | file path B: test\/unit\/features\/error-handling.spec.js\n\n@@ -127,25 +127,25 @@ describe('Error handling', () => {\n     }).then(done)\n   })\n \n-  it('should recover from errors in user watcher callback', done => {\n-    const vm = createTestInstance(components.userWatcherCallback)\n-    vm.n++\n-    waitForUpdate(() => {\n-      expect(`Error in callback for watcher \"n\"`).toHaveBeenWarned()\n-      expect(`Error: userWatcherCallback`).toHaveBeenWarned()\n-    }).thenWaitFor(next => {\n-      assertBothInstancesActive(vm).end(next)\n-    }).then(done)\n-  })\n+  ;[\n+    ['userWatcherCallback', 'watcher'],\n+    ['userImmediateWatcherCallback', 'immediate watcher']\n+  ].forEach(([type, description]) => {\n+    it(`should recover from errors in user ${description} callback`, done => {\n+      const vm = createTestInstance(components[type])\n+      assertBothInstancesActive(vm).then(() => {\n+        expect(`Error in callback for ${description} \"n\"`).toHaveBeenWarned()\n+        expect(`Error: ${type} error`).toHaveBeenWarned()\n+      }).then(done)\n+    })\n \n-  it('should recover from errors in user immediate watcher callback', done => {\n-    const vm = createTestInstance(components.userImmediateWatcherCallback)\n-    waitForUpdate(() => {\n-      expect(`Error in callback for immediate watcher \"n\"`).toHaveBeenWarned()\n-      expect(`Error: userImmediateWatcherCallback error`).toHaveBeenWarned()\n-    }).thenWaitFor(next => {\n-      assertBothInstancesActive(vm).end(next)\n-    }).then(done)\n+    it(`should recover from promise errors in user ${description} callback`, done => {\n+      const vm = createTestInstance(components[`${type}Async`])\n+      assertBothInstancesActive(vm).then(() => {\n+        expect(`Error in callback for ${description} \"n\" (Promise\/async)`).toHaveBeenWarned()\n+        expect(`Error: ${type} error`).toHaveBeenWarned()\n+      }).then(done)\n+    })\n   })\n \n   it('config.errorHandler should capture render errors', done => {\n@@ -359,6 +359,33 @@ function createErrorTestComponents () {\n     }\n   }\n \n+  components.userWatcherCallbackAsync = {\n+    props: ['n'],\n+    watch: {\n+      n () {\n+        return Promise.reject(new Error('userWatcherCallback error'))\n+      }\n+    },\n+    render (h) {\n+      return h('div', this.n)\n+    }\n+  }\n+\n+  components.userImmediateWatcherCallbackAsync = {\n+    props: ['n'],\n+    watch: {\n+      n: {\n+        immediate: true,\n+        handler () {\n+          return Promise.reject(new Error('userImmediateWatcherCallback error'))\n+        }\n+      }\n+    },\n+    render (h) {\n+      return h('div', this.n)\n+    }\n+  }\n+\n   \/\/ event errors\n   components.event = {\n     beforeCreate () {\n\n---\n file path A: test\/unit\/features\/options\/errorCaptured.spec.js | file path B: test\/unit\/features\/options\/errorCaptured.spec.js\n\n@@ -247,4 +247,152 @@ describe('Options errorCaptured', () => {\n       expect(store.errors[0]).toEqual(new Error('render error'))\n     }).then(done)\n   })\n+\n+  it('should capture error from watcher', done => {\n+    const spy = jasmine.createSpy()\n+\n+    let child\n+    let err\n+    const Child = {\n+      data () {\n+        return {\n+          foo: null\n+        }\n+      },\n+      watch: {\n+        foo () {\n+          err = new Error('userWatcherCallback error')\n+          throw err\n+        }\n+      },\n+      created () {\n+        child = this\n+      },\n+      render () {}\n+    }\n+\n+    new Vue({\n+      errorCaptured: spy,\n+      render: h => h(Child)\n+    }).$mount()\n+\n+    child.foo = 'bar'\n+\n+    waitForUpdate(() => {\n+      expect(spy).toHaveBeenCalledWith(err, child, 'callback for watcher \"foo\"')\n+      expect(globalSpy).toHaveBeenCalledWith(err, child, 'callback for watcher \"foo\"')\n+    }).then(done)\n+  })\n+\n+  it('should capture promise error from watcher', done => {\n+    const spy = jasmine.createSpy()\n+\n+    let child\n+    let err\n+    const Child = {\n+      data () {\n+        return {\n+          foo: null\n+        }\n+      },\n+      watch: {\n+        foo () {\n+          err = new Error('userWatcherCallback error')\n+          return Promise.reject(err)\n+        }\n+      },\n+      created () {\n+        child = this\n+      },\n+      render () {}\n+    }\n+\n+    new Vue({\n+      errorCaptured: spy,\n+      render: h => h(Child)\n+    }).$mount()\n+\n+    child.foo = 'bar'\n+\n+    child.$nextTick(() => {\n+      waitForUpdate(() => {\n+        expect(spy).toHaveBeenCalledWith(err, child, 'callback for watcher \"foo\" (Promise\/async)')\n+        expect(globalSpy).toHaveBeenCalledWith(err, child, 'callback for watcher \"foo\" (Promise\/async)')\n+      }).then(done)\n+    })\n+  })\n+\n+  it('should capture error from immediate watcher', done => {\n+    const spy = jasmine.createSpy()\n+\n+    let child\n+    let err\n+    const Child = {\n+      data () {\n+        return {\n+          foo: 'foo'\n+        }\n+      },\n+      watch: {\n+        foo: {\n+          immediate: true,\n+          handler () {\n+            err = new Error('userImmediateWatcherCallback error')\n+            throw err\n+          }\n+        }\n+      },\n+      created () {\n+        child = this\n+      },\n+      render () {}\n+    }\n+\n+    new Vue({\n+      errorCaptured: spy,\n+      render: h => h(Child)\n+    }).$mount()\n+\n+    waitForUpdate(() => {\n+      expect(spy).toHaveBeenCalledWith(err, child, 'callback for immediate watcher \"foo\"')\n+      expect(globalSpy).toHaveBeenCalledWith(err, child, 'callback for immediate watcher \"foo\"')\n+    }).then(done)\n+  })\n+\n+  it('should capture promise error from immediate watcher', done => {\n+    const spy = jasmine.createSpy()\n+\n+    let child\n+    let err\n+    const Child = {\n+      data () {\n+        return {\n+          foo: 'foo'\n+        }\n+      },\n+      watch: {\n+        foo: {\n+          immediate: true,\n+          handler () {\n+            err = new Error('userImmediateWatcherCallback error')\n+            return Promise.reject(err)\n+          }\n+        }\n+      },\n+      created () {\n+        child = this\n+      },\n+      render () {}\n+    }\n+\n+    new Vue({\n+      errorCaptured: spy,\n+      render: h => h(Child)\n+    }).$mount()\n+\n+    waitForUpdate(() => {\n+      expect(spy).toHaveBeenCalledWith(err, child, 'callback for immediate watcher \"foo\" (Promise\/async)')\n+      expect(globalSpy).toHaveBeenCalledWith(err, child, 'callback for immediate watcher \"foo\" (Promise\/async)')\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix(errorHandler): async error handling for watchers (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/state.js | file path B: src\/core\/instance\/state.js\n\n@@ -202,6 +202,8 @@ function initComputed (vm: Component, computed: Object) {\n         warn(`The computed property \"${key}\" is already defined in data.`, vm)\n       } else if (vm.$options.props && key in vm.$options.props) {\n         warn(`The computed property \"${key}\" is already defined as a prop.`, vm)\n+      } else if (vm.$options.methods && key in vm.$options.methods) {\n+        warn(`The computed property \"${key}\" is already defined as a method.`, vm)\n       }\n     }\n   }\n\n---\n file path A: test\/unit\/features\/options\/computed.spec.js | file path B: test\/unit\/features\/options\/computed.spec.js\n\n@@ -206,6 +206,18 @@ describe('Options computed', () => {\n     expect(`computed property \"a\" is already defined as a prop`).toHaveBeenWarned()\n   })\n \n+  it('warn conflict with methods', () => {\n+    new Vue({\n+      computed: {\n+        a: () => 2\n+      },\n+      methods: {\n+        a: () => {}\n+      }\n+    })\n+    expect(`computed property \"a\" is already defined as a method`).toHaveBeenWarned()\n+  })\n+\n   it('rethrow computed error', () => {\n     const vm = new Vue({\n       computed: {\n\n\n###\n\n","completion":" feat(warn): warn computed conflict with methods (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/check-keycodes.js | file path B: src\/core\/instance\/render-helpers\/check-keycodes.js\n\n@@ -31,4 +31,5 @@ export function checkKeyCodes (\n   } else if (eventKeyName) {\n     return hyphenate(eventKeyName) !== key\n   }\n+  return eventKeyCode === undefined\n }\n\n---\n file path A: test\/unit\/features\/directives\/on.spec.js | file path B: test\/unit\/features\/directives\/on.spec.js\n\n@@ -976,6 +976,17 @@ describe('Directive v-on', () => {\n     expect(value).toBe(1)\n   })\n \n+  it('should not execute callback if modifiers are present', () => {\n+    vm = new Vue({\n+      el,\n+      template: '<input @keyup.?=\"foo\">',\n+      methods: { foo: spy }\n+    })\n+    \/\/ simulating autocomplete event (Event object with type keyup but without keyCode)\n+    triggerEvent(vm.$el, 'keyup')\n+    expect(spy.calls.count()).toBe(0)\n+  })\n+\n   describe('dynamic arguments', () => {\n     it('basic', done => {\n       const spy = jasmine.createSpy()\n\n\n###\n\n","completion":" fix(v-on): avoid events with empty keyCode (autocomplete) (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -547,7 +547,7 @@ export function genComment (comment: ASTText): string {\n function genSlot (el: ASTElement, state: CodegenState): string {\n   const slotName = el.slotName || '\"default\"'\n   const children = genChildren(el, state)\n-  let res = `_t(${slotName}${children ? `,${children}` : ''}`\n+  let res = `_t(${slotName}${children ? `,function(){return ${children}}` : ''}`\n   const attrs = el.attrs || el.dynamicAttrs\n     ? genProps((el.attrs || []).concat(el.dynamicAttrs || []).map(attr => ({\n         \/\/ slot props are camelized\n\n---\n file path A: src\/core\/instance\/render-helpers\/render-slot.js | file path B: src\/core\/instance\/render-helpers\/render-slot.js\n\n@@ -7,26 +7,30 @@ import { extend, warn, isObject } from 'core\/util\/index'\n  *\/\n export function renderSlot (\n   name: string,\n-  fallback: ?Array<VNode>,\n+  fallbackRender: ?((() => Array<VNode>) | Array<VNode>),\n   props: ?Object,\n   bindObject: ?Object\n ): ?Array<VNode> {\n   const scopedSlotFn = this.$scopedSlots[name]\n   let nodes\n-  if (scopedSlotFn) { \/\/ scoped slot\n+  if (scopedSlotFn) {\n+    \/\/ scoped slot\n     props = props || {}\n     if (bindObject) {\n       if (process.env.NODE_ENV !== 'production' && !isObject(bindObject)) {\n-        warn(\n-          'slot v-bind without argument expects an Object',\n-          this\n-        )\n+        warn('slot v-bind without argument expects an Object', this)\n       }\n       props = extend(extend({}, bindObject), props)\n     }\n-    nodes = scopedSlotFn(props) || fallback\n+    nodes =\n+      scopedSlotFn(props) ||\n+      (fallbackRender &&\n+        (Array.isArray(fallbackRender) ? fallbackRender : fallbackRender()))\n   } else {\n-    nodes = this.$slots[name] || fallback\n+    nodes =\n+      this.$slots[name] ||\n+      (fallbackRender &&\n+        (Array.isArray(fallbackRender) ? fallbackRender : fallbackRender()))\n   }\n \n   const target = props && props.slot\n\n---\n file path A: test\/unit\/features\/component\/component-slot.spec.js | file path B: test\/unit\/features\/component\/component-slot.spec.js\n\n@@ -109,6 +109,47 @@ describe('Component slot', () => {\n     expect(child.$el.children[1].textContent).toBe('slot b')\n   })\n \n+ it('it should work with previous versions of the templates', () => {\n+   const Test = {\n+      render() {\n+        var _vm = this;\n+        var _h = _vm.$createElement;\n+        var _c = _vm._self._c || vm._h;\n+        return _c('div', [_vm._t(\"default\", [_c('p', [_vm._v(\"slot default\")])])], 2)\n+      }\n+    }\n+    let vm = new Vue({\n+      template: `<test\/>`,\n+      components: { Test }\n+    }).$mount()\n+    expect(vm.$el.textContent).toBe('slot default')\n+    vm = new Vue({\n+      template: `<test>custom content<\/test>`,\n+      components: { Test }\n+    }).$mount()\n+    expect(vm.$el.textContent).toBe('custom content')\n+  })\n+\n+  it('fallback content should not be evaluated when the parent is providing it', () => {\n+    const test = jasmine.createSpy('test')\n+    const vm = new Vue({\n+      template: '<test>slot default<\/test>',\n+      components: {\n+        test: {\n+          template: '<div><slot>{{test()}}<\/slot><\/div>',\n+          methods: {\n+            test () {\n+              test()\n+              return 'test'\n+            }\n+          }\n+        }\n+      }\n+    }).$mount()\n+    expect(vm.$el.textContent).toBe('slot default')\n+    expect(test).not.toHaveBeenCalled()\n+  })\n+\n   it('selector matching multiple elements', () => {\n     mount({\n       childTemplate: '<div><slot name=\"t\"><\/slot><\/div>',\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -196,7 +196,7 @@ describe('codegen', () => {\n   it('generate slot fallback content', () => {\n     assertCodegen(\n       '<div><slot><div>hi<\/div><\/slot><\/div>',\n-      `with(this){return _c('div',[_t(\"default\",[_c('div',[_v(\"hi\")])])],2)}`\n+      `with(this){return _c('div',[_t(\"default\",function(){return [_c('div',[_v(\"hi\")])]})],2)}`\n     )\n   })\n \n\n\n###\n\n","completion":" fix(slot): add a function to return the slot fallback content (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/lifecycle.js | file path B: src\/core\/instance\/lifecycle.js\n\n@@ -234,7 +234,8 @@ export function updateChildComponent (\n   const hasDynamicScopedSlot = !!(\n     (newScopedSlots && !newScopedSlots.$stable) ||\n     (oldScopedSlots !== emptyObject && !oldScopedSlots.$stable) ||\n-    (newScopedSlots && vm.$scopedSlots.$key !== newScopedSlots.$key)\n+    (newScopedSlots && vm.$scopedSlots.$key !== newScopedSlots.$key) ||\n+    (!newScopedSlots && vm.$scopedSlots.$key)\n   )\n \n   \/\/ Any static slot children from the parent may have changed during parent's\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1325,4 +1325,28 @@ describe('Component scoped slot', () => {\n       expect(vm.$el.textContent).toMatch(`1`)\n     }).then(done)\n   })\n+\n+  \/\/ #11652\n+  it('should update when swtching between two components with slot and without slot', done => {\n+    const Child = {\n+      template: `<div><slot\/><\/div>`\n+    }\n+\n+    const parent = new Vue({\n+      template: `<div>\n+        <child v-if=\"flag\"><template #default>foo<\/template><\/child>\n+        <child v-else><\/child>\n+      <\/div>`,\n+      data: {\n+        flag: true\n+      },\n+      components: { Child }\n+    }).$mount()\n+\n+    expect(parent.$el.textContent).toMatch(`foo`)\n+    parent.flag=false\n+    waitForUpdate(()=>{\n+      expect(parent.$el.textContent).toMatch(``)\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: force update between two components with and without slot (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -3,6 +3,7 @@\n import { def } from 'core\/util\/lang'\n import { normalizeChildren } from 'core\/vdom\/helpers\/normalize-children'\n import { emptyObject } from 'shared\/util'\n+import { isAsyncPlaceholder } from '.\/is-async-placeholder'\n \n export function normalizeScopedSlots (\n   slots: { [key: string]: Function } | void,\n@@ -60,9 +61,10 @@ function normalizeScopedSlot(normalSlots, key, fn) {\n     res = res && typeof res === 'object' && !Array.isArray(res)\n       ? [res] \/\/ single vnode\n       : normalizeChildren(res)\n+    let vnode: VNode = res && res[0]\n     return res && (\n-      res.length === 0 ||\n-      (res.length === 1 && res[0].isComment) \/\/ #9658\n+      !vnode ||\n+      (vnode.isComment && !isAsyncPlaceholder(vnode)) \/\/ #9658, #10391\n     ) ? undefined\n       : res\n   }\n\n\n###\n\n","completion":" fix: handle async placeholders in normalizeScopedSlot (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -86,8 +86,12 @@ export function parse (\n   platformMustUseProp = options.mustUseProp || no\n   platformGetTagNamespace = options.getTagNamespace || no\n   const isReservedTag = options.isReservedTag || no\n-  maybeComponent = (el: ASTElement) => !!el.component || !isReservedTag(el.tag)\n-\n+  maybeComponent = (el: ASTElement) => !!(\n+    el.component ||\n+    el.attrsMap[':is'] ||\n+    el.attrsMap['v-bind:is'] ||\n+    !(el.attrsMap.is ? isReservedTag(el.attrsMap.is) : isReservedTag(el.tag))\n+  )\n   transforms = pluckModuleFunction(options.modules, 'transformNode')\n   preTransforms = pluckModuleFunction(options.modules, 'preTransformNode')\n   postTransforms = pluckModuleFunction(options.modules, 'postTransformNode')\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -909,4 +909,20 @@ describe('parser', () => {\n     expect(ast.children[2].type).toBe(3)\n     expect(ast.children[2].text).toBe('\\ndef')\n   })\n+\n+  \/\/ #10152\n+  it('not warn when scoped slot used inside of dynamic component on regular element', () => {\n+    parse(`\n+      <div>\n+        <div is=\"customComp\" v-slot=\"slotProps\"><\/div>\n+        <div :is=\"'customComp'\" v-slot=\"slotProps\"><\/div>\n+        <div v-bind:is=\"'customComp'\" v-slot=\"slotProps\"><\/div>\n+      <\/div>\n+    `, baseOptions)\n+    expect('v-slot can only be used on components or <template>').not.toHaveBeenWarned()\n+\n+    parse(`<div is=\"customComp\"><template v-slot=\"slotProps\"><\/template><\/div>`, baseOptions)\n+    expect(`<template v-slot> can only appear at the root level inside the receiving the component`)\n+      .not.toHaveBeenWarned()\n+  })\n })\n\n\n###\n\n","completion":" fix(warns): modify `maybeComponent` function in parser (#<issue-num>)\n"}
{"prompt":" file path A: types\/vnode.d.ts | file path B: types\/vnode.d.ts\n\n@@ -20,7 +20,7 @@ export interface VNode {\n   elm?: Node;\n   ns?: string;\n   context?: Vue;\n-  key?: string | number;\n+  key?: string | number | symbol | boolean;\n   componentOptions?: VNodeComponentOptions;\n   componentInstance?: Vue;\n   parent?: VNode;\n\n\n###\n\n","completion":" fix(types): allow symbol &  boolean for vnode key (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -408,7 +408,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n \n <!--10 start-->\n - Sara McVey\n--  \n+- Keisuke Kita\n - Alex Riviere\n - Thomas Sittig\n - WhereJuly\n@@ -444,7 +444,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Shawn Wildermuth\n - Andrew Willis\n - Elon Hung\n-- Chris Calo\n+-  \n - Juan Bermudez\n - Hannes Kochni\n - Daniel Mattingley\n@@ -456,11 +456,9 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Jere Sjroos\n - Donald Fischer\n - Eric \n-- Marcos Moura\n - tyler madsen\n - Joe Gregory\n - Masahiro Tanaka\n-- Guilherme S L de Souza\n - Tyler \n - IMGNRY \n - Jim Raden\n@@ -482,7 +480,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Victor Tolbert\n - Lars Andreas Ness\n - Benjamin Listwon\n-- Keisuke Kita\n+- Chris Calo\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -118,23 +118,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/frontendlove.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/onsen.io\/vue\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/onsen_ui.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/neds.com.au\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/neds.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/icons8.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/icons_8.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vuejobs.com\/?ref=vuejs\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n@@ -160,13 +155,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\/hire-vuejs-developer\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n@@ -192,13 +187,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.foo.software\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/foo.png\">\n@@ -224,13 +219,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tendermint.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.okayhq.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/okay.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpsserver.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpsserver_com.png\">\n@@ -256,8 +251,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/lowdefy.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/quickbookstoolhub.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/quickbooks_tool_hub.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -123,23 +123,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/frontendlove.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/onsen.io\/vue\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/onsen_ui.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/neds.com.au\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/neds.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/icons8.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/icons_8.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vuejobs.com\/?ref=vuejs\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n@@ -165,13 +160,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\/hire-vuejs-developer\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n@@ -197,13 +192,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.foo.software\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/foo.png\">\n@@ -229,13 +224,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tendermint.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.okayhq.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/okay.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpsserver.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpsserver_com.png\">\n@@ -261,8 +256,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/lowdefy.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/quickbookstoolhub.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/quickbooks_tool_hub.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -403,92 +403,93 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <h2 align=\"center\">Generous Backers via Patreon ($50+)<\/h2>\n \n <!--50 start-->\n-- Wasim Khamlichi\n-- errorrik \n+- Yoshitaka M\n+- Peter Imburg\n - Sean Ferguson\n - Johnny Ray Austin\n-- Peter Imburg\n+- errorrik \n+- Wasim Khamlichi\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n \n <!--10 start-->\n-- Masahiro Tanaka\n+- Sara McVey\n+-  \n+- Alex Riviere\n+- Thomas Sittig\n+- WhereJuly\n+- Fontis \n+- Jack \n+- Nick Carr\n+- Artur Baka\n+- Traversy Media\n+- Pierre Baron\n+- Donghai Gai\n+- Aleksander Figiel\n+- Faizal Andyka\n+- wickedwei \n+- Sunny Yuen\n+- Jules \n+- Zeth Odderskov\n+- Santi Sanchez Canals\n+- Thomas Wiedemann\n+- Nobuhide Esaki\n+- Roy Segall\n+- Allan McKernan\n+-  \n+- Diana Bergholz\n+- Riki Fridrich\n+- Alfonso Herrera\n+- Bichinger Software & Consulting\n+- username\n+- Pierre Lebrun\n+- Peter Matkovsky\n+-  \n+- Nick Dandakis\n+- Yusuke Kawabata\n - Shawn Wildermuth\n-- Keisuke Kita\n-- Benjamin Listwon\n-- Lars Andreas Ness\n-- Kirk Lewis\n-- Wen-Tien Chang\n-- Stephen Michael Hartley\n-- Victor Tolbert\n-- username \n-- Luiz \n-- James J. Ye\n-- Barbara Liau\n-- Asaf Yishai\n-- Matsumoto Takamasa\n-- Guy Gavergun\n-- Matt Jones\n-- Niannian Modisette\n-- Bernhard E. Reiter\n-- Zoran Knezevic\n-- Jon Hobbs-Smith\n-- Pierre Vanhulst\n-- Haim Yulzari\n-- Anthony Estebe\n-- Jim Raden\n-- IMGNRY \n-- Guilherme S L de Souza\n-- Tyler \n-- Jordan Oroshiba\n-- Joe Gregory\n-- Marcos Moura\n-- Eric \n-- Jere Sjroos\n-- Wakana Seki\n-- Donald Fischer\n-- David Ang\n-- Oskar Lindgren\n-- Jaeyoung Lee\n-- David Kaplan\n-- Philip John Basile\n-- Matt Sencenbaugh\n+- Andrew Willis\n+- Elon Hung\n - Chris Calo\n - Juan Bermudez\n - Hannes Kochni\n - Daniel Mattingley\n-- Elon Hung\n-- Andrew Willis\n-- Yusuke Kawabata\n--  \n-- Peter Matkovsky\n-- Nick Dandakis\n-- Pierre Lebrun\n-- Ryan Brewer\n-- Bichinger Software & Consulting\n-- Alfonso Herrera\n-- Afif Sohaili\n-- Riki Fridrich\n-- Diana Bergholz\n--  \n-- Parham Saidi\n-- Allan McKernan\n-- Roy Segall\n-- Abhay \n-- Nobuhide Esaki\n-- Thomas Wiedemann\n-- Santi Sanchez Canals\n-- lucien144 \n-- Evgeny Zislis\n-- Zeth Odderskov\n-- Kirill Tyurin\n-- Jules \n-- Sunny Yuen\n-- wickedwei \n-- Dennis Zanetti\n-- Faizal Andyka\n-- Aleksander Figiel\n+- Matt Sencenbaugh\n+- Jaeyoung Lee\n+- David Kaplan\n+- David Ang\n+- Wakana Seki\n+- Jere Sjroos\n+- Donald Fischer\n+- Eric \n+- Marcos Moura\n+- tyler madsen\n+- Joe Gregory\n+- Masahiro Tanaka\n+- Guilherme S L de Souza\n+- Tyler \n+- IMGNRY \n+- Jim Raden\n+- Haim Yulzari\n+- Anthony Estebe\n+- Asaf Yishai\n+- Jon Hobbs-Smith\n+- Pierre Vanhulst\n+- Zoran Knezevic\n+- Luiz \n+- Bernhard E. Reiter\n+- Guy Gavergun\n+- Matt Jones\n+- Niannian Modisette\n+- Matsumoto Takamasa\n+- Barbara Liau\n+- Wen-Tien Chang\n+- Stephen Michael Hartley\n+- Victor Tolbert\n+- Lars Andreas Ness\n+- Benjamin Listwon\n+- Keisuke Kita\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -8372,9 +8372,9 @@ xtend@^4.0.0, xtend@~4.0.1:\n   integrity sha1-pcbVMr5lbiPbgg77lDofBJmNY68=\n \n y18n@^4.0.0:\n-  version \"4.0.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/y18n\/-\/y18n-4.0.0.tgz#95ef94f85ecc81d007c264e190a120f0a3c8566b\"\n-  integrity sha512-r9S\/ZyXu\/Xu9q1tYlpsLIsa3EeLXXk0VwlxqTcFRfg9EhMW+17kbt9G0NrgCmhGb5vT2hyhJZLfDGx+7+5Uj\/w==\n+  version \"4.0.1\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/y18n\/-\/y18n-4.0.1.tgz#8db2b83c31c5d75099bb890b23f3094891e247d4\"\n+  integrity sha512-wNcy4NvjMYL8gogWWYAO7ZFWFfHcbdbE57tZO8e4cbpj8tfUcwrwqSl3ad8HxpYWCdXcJUCeKKZS62Av1affwQ==\n \n yallist@^2.1.2:\n   version \"2.1.2\"\n\n\n###\n\n","completion":" build(deps): bump y18n from 4.0.0 to 4.0.1 (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/util\/element.js | file path B: src\/platforms\/web\/util\/element.js\n\n@@ -26,7 +26,7 @@ export const isHTMLTag = makeMap(\n \/\/ contain child elements.\n export const isSVG = makeMap(\n   'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,' +\n-  'foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,' +\n+  'foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,' +\n   'polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view',\n   true\n )\n\n\n###\n\n","completion":" fix: give correct namespace in foreignObject (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/server\/modules\/attrs.js | file path B: src\/platforms\/web\/server\/modules\/attrs.js\n\n@@ -25,6 +25,10 @@ export default function renderAttrs (node: VNodeWithData): string {\n   if (isUndef(opts) || opts.Ctor.options.inheritAttrs !== false) {\n     let parent = node.parent\n     while (isDef(parent)) {\n+      \/\/ Stop fallthrough in case parent has inheritAttrs option set to false\n+      if (parent.componentOptions && parent.componentOptions.Ctor.options.inheritAttrs === false) {\n+        break;\n+      }\n       if (isDef(parent.data) && isDef(parent.data.attrs)) {\n         attrs = extend(extend({}, attrs), parent.data.attrs)\n       }\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -1613,6 +1613,31 @@ describe('SSR: renderToString', () => {\n       done()\n     })\n   })\n+\n+  it('Options inheritAttrs in parent component', done => {\n+    const childComponent = {\n+      template: `<div>{{ someProp }}<\/div>`,\n+      props: {\n+        someProp: {}\n+      },\n+    }\n+    const parentComponent = {\n+      template: `<childComponent v-bind=\"$attrs\" \/>`,\n+      components: { childComponent },\n+      inheritAttrs: false\n+    }\n+    renderVmWithOptions({\n+      template: `\n+        <div>\n+          <parentComponent some-prop=\"some-val\" \/>\n+        <\/div>\n+        `,\n+      components: { parentComponent }\n+    }, result => {\n+      expect(result).toContain('<div data-server-rendered=\"true\"><div>some-val<\/div><\/div>')\n+      done()\n+    })\n+  })\n })\n \n function renderVmWithOptions (options, cb) {\n\n\n###\n\n","completion":" fix(ssr): inheritAttrs false adds attributes to html (#<issue-num>)\n"}
{"prompt":" file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -121,6 +121,10 @@ export interface VueConstructor<V extends Vue = Vue> {\n \n   observable<T>(obj: T): T;\n \n+  util: {\n+    warn(msg: string, vm?: InstanceType<VueConstructor>): void;\n+  };\n+\n   config: VueConfiguration;\n   version: string;\n }\n\n\n###\n\n","completion":" fix(types): add types for Vue.util.warn function (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/state.js | file path B: src\/core\/instance\/state.js\n\n@@ -355,11 +355,13 @@ export function stateMixin (Vue: Class<Component>) {\n     options.user = true\n     const watcher = new Watcher(vm, expOrFn, cb, options)\n     if (options.immediate) {\n+      pushTarget()\n       try {\n         cb.call(vm, watcher.value)\n       } catch (error) {\n         handleError(error, vm, `callback for immediate watcher \"${watcher.expression}\"`)\n       }\n+      popTarget()\n     }\n     return function unwatchFn () {\n       watcher.teardown()\n\n---\n file path A: test\/unit\/features\/instance\/methods-lifecycle.spec.js | file path B: test\/unit\/features\/instance\/methods-lifecycle.spec.js\n\n@@ -53,6 +53,38 @@ describe('Instance methods lifecycle', () => {\n         }\n       }).$mount()\n     })\n+\n+    it('Dep.target should be undefined during invocation of child immediate watcher', done => {\n+      let calls = 0\n+      const childData = { a: 1 }\n+      const parentUpdate = jasmine.createSpy()\n+      new Vue({\n+        template: '<div><my-component><\/my-component><\/div>',\n+        updated: parentUpdate,\n+        components: {\n+          myComponent: {\n+            template: '<div>{{ a }}<\/div>',\n+            data() {\n+              return childData\n+            },\n+            watch: {\n+              anything: {\n+                handler() {\n+                  ++calls\n+                  this.a\n+                },\n+                immediate: true\n+              }\n+            }\n+          }\n+        }\n+      }).$mount()\n+      expect(calls).toBe(1)\n+      childData.a++\n+      waitForUpdate(() => {\n+        expect(parentUpdate).not.toHaveBeenCalled()\n+      }).then(done)\n+    })\n   })\n \n   describe('$destroy', () => {\n\n\n###\n\n","completion":" fix: pause dep collection during immediate watcher invocation (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -45,7 +45,8 @@ export function generate (\n   options: CompilerOptions\n ): CodegenResult {\n   const state = new CodegenState(options)\n-  const code = ast ? genElement(ast, state) : '_c(\"div\")'\n+  \/\/ fix #11483, Root level <script> tags should not be rendered.\n+  const code = ast ? (ast.tag === 'script' ? 'null' : genElement(ast, state)) : '_c(\"div\")'\n   return {\n     render: `with(this){return ${code}}`,\n     staticRenderFns: state.staticRenderFns\n\n---\n file path A: test\/unit\/features\/component\/component.spec.js | file path B: test\/unit\/features\/component\/component.spec.js\n\n@@ -426,4 +426,17 @@ describe('Component', () => {\n       vm.$destroy()\n     }).then(done)\n   })\n+\n+  it('render vnode with <script> tag as root element', () => {\n+    const vm = new Vue({\n+      template: '<scriptTest><\/scriptTest>',\n+      components: {\n+        scriptTest: {\n+          template: '<script>console.log(1)<\/script>'\n+        }\n+      }\n+    }).$mount()\n+    expect(vm.$el.nodeName).toBe('#comment')\n+    expect('Templates should only be responsible for mapping the state').toHaveBeenWarned()\n+  })\n })\n\n\n###\n\n","completion":" fix(vdom): avoid executing root level script tags (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/props.js | file path B: src\/core\/util\/props.js\n\n@@ -147,7 +147,7 @@ function assertProp (\n   }\n }\n \n-const simpleCheckRE = \/^(String|Number|Boolean|Function|Symbol)$\/\n+const simpleCheckRE = \/^(String|Number|Boolean|Function|Symbol|BigInt)$\/\n \n function assertType (value: any, type: Function, vm: ?Component): {\n   valid: boolean;\n\n---\n file path A: test\/unit\/features\/options\/props.spec.js | file path B: test\/unit\/features\/options\/props.spec.js\n\n@@ -252,6 +252,16 @@ describe('Options props', () => {\n         expect('Expected String, Number, got Symbol').toHaveBeenWarned()\n       })\n     }\n+\t\n+    if (typeof BigInt !== 'undefined') {\n+      \/* global BigInt *\/\n+      it('bigint', () => {\n+        makeInstance(BigInt(100), BigInt)\n+        expect(console.error.calls.count()).toBe(0)\n+        makeInstance({}, BigInt)\n+        expect('Expected BigInt, got Object').toHaveBeenWarned()\n+      })\n+    }\n \n     it('custom constructor', () => {\n       function Class () {}\n\n\n###\n\n","completion":" fix(props): support BigInt in props type validation (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/proxy.js | file path B: src\/core\/instance\/proxy.js\n\n@@ -9,7 +9,7 @@ if (process.env.NODE_ENV !== 'production') {\n   const allowedGlobals = makeMap(\n     'Infinity,undefined,NaN,isFinite,isNaN,' +\n     'parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,' +\n-    'Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,' +\n+    'Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,' +\n     'require' \/\/ for Webpack\/Browserify\n   )\n \n\n---\n file path A: test\/unit\/features\/filter\/filter.spec.js | file path B: test\/unit\/features\/filter\/filter.spec.js\n\n@@ -194,4 +194,11 @@ describe('Filters', () => {\n   it('support template string', () => {\n     expect(parseFilters('`a | ${b}c` | d')).toBe('_f(\"d\")(`a | ${b}c`)')\n   })\n+\n+  it('bigint support', () => {\n+    const vm = new Vue({\n+      template: `<div>{{ BigInt(BigInt(10000000)) + BigInt(2000000000n) * 3000000n }}<\/div>`\n+    }).$mount()\n+    expect(vm.$el.textContent).toBe('6000000010000000')\n+  })\n })\n\n\n###\n\n","completion":" fix(compiler): Allow BigInt usage in templates (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/props.js | file path B: src\/core\/util\/props.js\n\n@@ -122,13 +122,14 @@ function assertProp (\n       type = [type]\n     }\n     for (let i = 0; i < type.length && !valid; i++) {\n-      const assertedType = assertType(value, type[i])\n+      const assertedType = assertType(value, type[i], vm)\n       expectedTypes.push(assertedType.expectedType || '')\n       valid = assertedType.valid\n     }\n   }\n \n-  if (!valid) {\n+  const haveExpectedTypes = expectedTypes.some(t => t)\n+  if (!valid && haveExpectedTypes) {\n     warn(\n       getInvalidTypeMessage(name, value, expectedTypes),\n       vm\n@@ -148,7 +149,7 @@ function assertProp (\n \n const simpleCheckRE = \/^(String|Number|Boolean|Function|Symbol)$\/\n \n-function assertType (value: any, type: Function): {\n+function assertType (value: any, type: Function, vm: ?Component): {\n   valid: boolean;\n   expectedType: string;\n } {\n@@ -166,7 +167,12 @@ function assertType (value: any, type: Function): {\n   } else if (expectedType === 'Array') {\n     valid = Array.isArray(value)\n   } else {\n-    valid = value instanceof type\n+    try {\n+      valid = value instanceof type\n+    } catch (e) {\n+      warn('Invalid prop type: \"' + String(type) + '\" is not a constructor', vm);\n+      valid = false;\n+    }\n   }\n   return {\n     valid,\n\n---\n file path A: test\/unit\/features\/options\/props.spec.js | file path B: test\/unit\/features\/options\/props.spec.js\n\n@@ -553,4 +553,20 @@ describe('Options props', () => {\n     expect(vm.$refs.test.$props.booleanOrString).toBe(true)\n     expect(vm.$refs.test.$props.stringOrBoolean).toBe('')\n   })\n+\n+  it('should warn when a prop type is not a constructor', () => {\n+    const vm = new Vue({\n+      template: '<div>{{a}}<\/div>',\n+      props: {\n+        a: {\n+          type: 'String',\n+          default: 'test'\n+        }\n+      }\n+    }).$mount()\n+    expect(\n+      'Invalid prop type: \"String\" is not a constructor'\n+    ).toHaveBeenWarned()\n+  })\n+\n })\n\n\n###\n\n","completion":" fix(warn): better message with no constructors props (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -482,3 +482,20 @@ Vue.component('functional-component-v-model', {\n \n \n Vue.component('async-es-module-component', () => import('.\/es-module'))\n+\n+Vue.component('directive-expression-optional-string', {\n+  render(createElement) {\n+    return createElement(\"div\", {\n+      directives: [\n+        {\n+          name: 'has-expression',\n+          value: 2,\n+          expression: '1 + 1',\n+        }, {\n+          name: 'no-expression',\n+          value: 'foo',\n+        },\n+      ],\n+    })\n+  }\n+});\n\n---\n file path A: types\/vnode.d.ts | file path B: types\/vnode.d.ts\n\n@@ -69,7 +69,7 @@ export interface VNodeDirective {\n   name: string;\n   value?: any;\n   oldValue?: any;\n-  expression?: any;\n+  expression?: string;\n   arg?: string;\n   oldArg?: string;\n   modifiers?: { [key: string]: boolean };\n\n\n###\n\n","completion":" fix(types): changed expression type to optional string (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/props.js | file path B: src\/core\/util\/props.js\n\n@@ -174,13 +174,15 @@ function assertType (value: any, type: Function): {\n   }\n }\n \n+const functionTypeCheckRE = \/^\\s*function (\\w+)\/\n+\n \/**\n  * Use function string name to check built-in types,\n  * because a simple equality check will fail when running\n  * across different vms \/ iframes.\n  *\/\n function getType (fn) {\n-  const match = fn && fn.toString().match(\/^\\s*function (\\w+)\/)\n+  const match = fn && fn.toString().match(functionTypeCheckRE)\n   return match ? match[1] : ''\n }\n \n\n\n###\n\n","completion":" perf: preinitialize typeCheck RegExp (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -38,7 +38,7 @@ const modifierRE = \/\\.[^.\\]]+(?=[^\\]]*$)\/g\n const slotRE = \/^v-slot(:|$)|^#\/\n \n const lineBreakRE = \/[\\r\\n]\/\n-const whitespaceRE = \/\\s+\/g\n+const whitespaceRE = \/[ \\f\\t\\r\\n]+\/g\n \n const invalidAttributeRE = \/[\\s\"'<>\\\/=]\/\n \n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -865,6 +865,14 @@ describe('parser', () => {\n     expect(ast.children[4].children[0].text).toBe('. Have fun! ')\n   })\n \n+  it(`maintains &nbsp; with whitespace: 'condense'`, () => {\n+    const options = extend({}, condenseOptions)\n+    const ast = parse('<span>&nbsp;<\/span>', options)\n+    const code = ast.children[0]\n+    expect(code.type).toBe(3)\n+    expect(code.text).toBe('\\xA0')\n+  })\n+\n   it(`preserve whitespace in <pre> tag with whitespace: 'condense'`, function () {\n     const options = extend({}, condenseOptions)\n     const ast = parse('<pre><code>  \\n<span>hi<\/span>\\n  <\/code><span> <\/span><\/pre>', options)\n\n\n###\n\n","completion":" fix(compiler): avoid converting &nbps; to spaces (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/create-element.js | file path B: src\/core\/vdom\/create-element.js\n\n@@ -98,7 +98,7 @@ export function _createElement (\n     ns = (context.$vnode && context.$vnode.ns) || config.getTagNamespace(tag)\n     if (config.isReservedTag(tag)) {\n       \/\/ platform built-in elements\n-      if (process.env.NODE_ENV !== 'production' && isDef(data) && isDef(data.nativeOn)) {\n+      if (process.env.NODE_ENV !== 'production' && isDef(data) && isDef(data.nativeOn) && data.tag !== 'component') {\n         warn(\n           `The .native modifier for v-on is only valid on components but it was used on <${tag}>.`,\n           context\n\n---\n file path A: test\/unit\/features\/directives\/on.spec.js | file path B: test\/unit\/features\/directives\/on.spec.js\n\n@@ -474,6 +474,20 @@ describe('Directive v-on', () => {\n     expect(spy.calls.count()).toBe(0)\n   })\n \n+  it('should not throw a warning if native modifier is used on a dynamic component', () => {\n+    vm = new Vue({\n+      el,\n+      template: `\n+        <component is=\"div\" @click.native=\"foo('native')\" @click=\"foo('regular')\"\/>\n+      `,\n+      methods: { foo: spy },\n+    })\n+\n+    triggerEvent(vm.$el, 'click')\n+    expect(`The .native modifier for v-on is only valid on components but it was used on <div>.`).not.toHaveBeenWarned()\n+    expect(spy.calls.allArgs()).toEqual([['regular']]); \/\/ Regular @click should work for dynamic components resolved to native HTML elements.\n+  })\n+\n   it('.once modifier should work with child components', () => {\n     vm = new Vue({\n       el,\n\n\n###\n\n","completion":" feat(warns): avoid warning native modifiers on dynamic components (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -241,6 +241,28 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/aussiecasinohex.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/litslink.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/litslink.png\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/newicon.net\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/newicon.png\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/lowdefy.com?k=w432\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/lowdefy.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/quickbookstoolhub.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/quickbooks_tool_hub.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -246,6 +246,28 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/aussiecasinohex.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/litslink.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/litslink.png\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/newicon.net\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/newicon.png\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/lowdefy.com?k=w432\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/lowdefy.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/quickbookstoolhub.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/quickbooks_tool_hub.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -5247,16 +5247,16 @@ lodash@4.17.5:\n   resolved \"https:\/\/registry.yarnpkg.com\/lodash\/-\/lodash-4.17.5.tgz#99a92d65c0272debe8c96b6057bc8fbfa3bed511\"\n   integrity sha512-svL3uiZf1RwhH+cWrfZn3A4+U58wbP0tGVTLQPbjplZxZ8ROD9VLuNgsRniTlLe7OlSqR79RUehXgpBW\/s0IQw==\n \n-lodash@^4.0.1, lodash@^4.16.6, lodash@^4.17.0, lodash@^4.17.10, lodash@^4.17.11, lodash@^4.17.4, lodash@^4.17.5, lodash@^4.2.1, lodash@^4.3.0, lodash@^4.5.0:\n-  version \"4.17.13\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/lodash\/-\/lodash-4.17.13.tgz#0bdc3a6adc873d2f4e0c4bac285df91b64fc7b93\"\n-  integrity sha512-vm3\/XWXfWtRua0FkUyEHBZy8kCPjErNBT9fJx8Zvs+U6zjqPbTUOpkaoum3O5uiA8sm+yNMHXfYkTUHFoMxFNA==\n-\n-lodash@^4.17.14:\n+lodash@^4.0.1, lodash@^4.16.6, lodash@^4.17.0, lodash@^4.17.10, lodash@^4.17.11, lodash@^4.17.14, lodash@^4.17.5, lodash@^4.2.1, lodash@^4.3.0, lodash@^4.5.0:\n   version \"4.17.20\"\n   resolved \"https:\/\/registry.yarnpkg.com\/lodash\/-\/lodash-4.17.20.tgz#b44a9b6297bcb698f1c51a3545a2b3b368d59c52\"\n   integrity sha512-PlhdFcillOINfeV7Ni6oF1TAEayyZBoZ8bcshTHqOYJYlrqzRK5hagpagky5o4HfCzzd1TRkXPMFq6cKk9rGmA==\n \n+lodash@^4.17.4:\n+  version \"4.17.19\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/lodash\/-\/lodash-4.17.19.tgz#e48ddedbe30b3321783c5b4301fbd353bc1e4a4b\"\n+  integrity sha512-JNvd8XER9GQX0v2qJgsaN\/mzFCNA5BRe\/j8JN9d+tWyGLSodKQHKFicdwNYzWwI3wjRnaKPsGj1XkBjx\/F96DQ==\n+\n log-symbols@^1.0.2:\n   version \"1.0.2\"\n   resolved \"https:\/\/registry.yarnpkg.com\/log-symbols\/-\/log-symbols-1.0.2.tgz#376ff7b58ea3086a0f09facc74617eca501e1a18\"\n\n\n###\n\n","completion":" build(deps-dev): bump lodash from 4.17.13 to 4.17.19 (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -2469,13 +2469,6 @@ debug@4.1.0:\n   dependencies:\n     ms \"^2.1.1\"\n \n-debug@=3.1.0, debug@~3.1.0:\n-  version \"3.1.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/debug\/-\/debug-3.1.0.tgz#5bb5a0672628b64149566ba16819e61518c67261\"\n-  integrity sha512-OX8XqP7\/1a9cqkxYw2yXss15f26NKWBpDXQd0\/uK\/KPqdQhxbPa994hnzjcE2VqQpDslf55723cKPUOGSmMY3g==\n-  dependencies:\n-    ms \"2.0.0\"\n-\n debug@^3.1.0:\n   version \"3.2.6\"\n   resolved \"https:\/\/registry.yarnpkg.com\/debug\/-\/debug-3.2.6.tgz#e83d17de16d8a7efb7717edbe5fb10135eee629b\"\n@@ -2497,6 +2490,13 @@ debug@^4.0.1, debug@^4.1.0:\n   dependencies:\n     ms \"^2.1.1\"\n \n+debug@~3.1.0:\n+  version \"3.1.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/debug\/-\/debug-3.1.0.tgz#5bb5a0672628b64149566ba16819e61518c67261\"\n+  integrity sha512-OX8XqP7\/1a9cqkxYw2yXss15f26NKWBpDXQd0\/uK\/KPqdQhxbPa994hnzjcE2VqQpDslf55723cKPUOGSmMY3g==\n+  dependencies:\n+    ms \"2.0.0\"\n+\n decamelize-keys@^1.0.0:\n   version \"1.1.0\"\n   resolved \"https:\/\/registry.yarnpkg.com\/decamelize-keys\/-\/decamelize-keys-1.1.0.tgz#d171a87933252807eb3cb61dc1c1445d078df2d9\"\n@@ -3053,11 +3053,6 @@ esutils@^2.0.2:\n   resolved \"https:\/\/registry.yarnpkg.com\/esutils\/-\/esutils-2.0.2.tgz#0abf4f1caa5bcb1f7a9d8acc6dea4faaa04bac9b\"\n   integrity sha1-Cr9PHKpbyx96nYrMbepPqqBLrJs=\n \n-eventemitter3@^3.0.0:\n-  version \"3.1.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/eventemitter3\/-\/eventemitter3-3.1.0.tgz#090b4d6cdbd645ed10bf750d4b5407942d7ba163\"\n-  integrity sha512-ivIvhpq\/Y0uSjcHDcOIccjmYjGLcP09MFGE7ysAwkAvkXfpZlC985pH2\/ui64DKazbTW\/4kN3yqozUxlXzI6cA==\n-\n eventemitter3@^4.0.0:\n   version \"4.0.7\"\n   resolved \"https:\/\/registry.yarnpkg.com\/eventemitter3\/-\/eventemitter3-4.0.7.tgz#2de9b68f6528d5644ef5c59526a1b4a07306169f\"\n@@ -3458,11 +3453,9 @@ flush-write-stream@^1.0.0:\n     readable-stream \"^2.0.4\"\n \n follow-redirects@^1.0.0:\n-  version \"1.6.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/follow-redirects\/-\/follow-redirects-1.6.1.tgz#514973c44b5757368bad8bddfe52f81f015c94cb\"\n-  integrity sha512-t2JCjbzxQpWvbhts3l6SH1DKzSrx8a+SsaVf4h6bG4kOXUuPYS\/kg2Lr4gQSb7eemaHqJkOThF1BGyjlUkO1GQ==\n-  dependencies:\n-    debug \"=3.1.0\"\n+  version \"1.13.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/follow-redirects\/-\/follow-redirects-1.13.0.tgz#b42e8d93a2a7eea5ed88633676d6597bc8e384db\"\n+  integrity sha512-aq6gF1BEKje4a9i9+5jimNFIpq4Q1WiwBToeRK5NvZBd\/TRsmW8BsJfOEGkr76TbOyPVD3OVDN910EcUNtRYEA==\n \n for-in@^1.0.1, for-in@^1.0.2:\n   version \"1.0.2\"\n@@ -3993,16 +3986,7 @@ http-proxy-agent@1:\n     debug \"2\"\n     extend \"3\"\n \n-http-proxy@^1.13.0:\n-  version \"1.17.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/http-proxy\/-\/http-proxy-1.17.0.tgz#7ad38494658f84605e2f6db4436df410f4e5be9a\"\n-  integrity sha512-Taqn+3nNvYRfJ3bGvKfBSRwy1v6eePlm3oc\/aWVxZp57DQr5Eq3xhKJi7Z4hZpS8PC3H4qI+Yly5EmFacGuA\/g==\n-  dependencies:\n-    eventemitter3 \"^3.0.0\"\n-    follow-redirects \"^1.0.0\"\n-    requires-port \"^1.0.0\"\n-\n-http-proxy@^1.18.0:\n+http-proxy@^1.13.0, http-proxy@^1.18.0:\n   version \"1.18.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/http-proxy\/-\/http-proxy-1.18.1.tgz#401541f0534884bbf95260334e72f88ee3976549\"\n   integrity sha512-7mz\/721AbnJwIVbnaSv1Cz3Am0ZLT\/UBwkC92VlxhXv\/k\/BBQfM2fXElQNC27BVGr0uwUpplYPQM9LnaBMR5NQ==\n\n\n###\n\n","completion":" build(deps): bump http-proxy from 1.17.0 to 1.18.1 (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -1958,11 +1958,6 @@ combined-stream@^1.0.6, combined-stream@~1.0.6:\n   dependencies:\n     delayed-stream \"~1.0.0\"\n \n-commander@2.20.0:\n-  version \"2.20.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/commander\/-\/commander-2.20.0.tgz#d58bb2b5c1ee8f87b0d340027e9e94e222c5a422\"\n-  integrity sha512-7j2y+40w61zy6YC2iRNpUe\/NwhNyoXrYpHMrSunaMG64nRnaf96zO\/KMQR4OyN\/UnE5KLyEBnKHd4aG3rskjpQ==\n-\n commander@2.9.0:\n   version \"2.9.0\"\n   resolved \"https:\/\/registry.yarnpkg.com\/commander\/-\/commander-2.9.0.tgz#9c99094176e12240cb22d6c5146098400fe0f7d4\"\n@@ -3818,13 +3813,14 @@ growl@1.9.2:\n   integrity sha1-Dqd0NxXbjY3ixe3hd14bRayFwC8=\n \n handlebars@^4.0.1, handlebars@^4.0.2:\n-  version \"4.4.3\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/handlebars\/-\/handlebars-4.4.3.tgz#180bae52c1d0e9ec0c15d7e82a4362d662762f6e\"\n-  integrity sha512-B0W4A2U1ww3q7VVthTKfh+epHx+q4mCt6iK+zEAzbMBpWQAwxCeKxEGpj\/1oQTpzPXDNSOG7hmG14TsISH50yw==\n+  version \"4.7.7\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/handlebars\/-\/handlebars-4.7.7.tgz#9ce33416aad02dbd6c8fafa8240d5d98004945a1\"\n+  integrity sha512-aAcXm5OAfE\/8IXkcZvCepKU3VzW1\/39Fb5ZuqMtgI\/hT8X2YgoMvBY5dLhq\/cpOvw7Lk1nK\/UF71aLG\/ZnVYRA==\n   dependencies:\n+    minimist \"^1.2.5\"\n     neo-async \"^2.6.0\"\n-    optimist \"^0.6.1\"\n     source-map \"^0.6.1\"\n+    wordwrap \"^1.0.0\"\n   optionalDependencies:\n     uglify-js \"^3.1.4\"\n \n@@ -5574,12 +5570,12 @@ minimist@0.0.8:\n   resolved \"https:\/\/registry.yarnpkg.com\/minimist\/-\/minimist-0.0.8.tgz#857fcabfc3397d2625b8228262e86aa7a011b05d\"\n   integrity sha1-hX\/Kv8M5fSYluCKCYuhqp6ARsF0=\n \n-minimist@1.2.0, minimist@^1.1.0, minimist@^1.1.3, minimist@^1.2.0:\n+minimist@1.2.0:\n   version \"1.2.0\"\n   resolved \"https:\/\/registry.yarnpkg.com\/minimist\/-\/minimist-1.2.0.tgz#a35008b20f41383eec1fb914f4cd5df79a264284\"\n   integrity sha1-o1AIsg9BOD7sH7kU9M1d95omQoQ=\n \n-minimist@^1.2.5:\n+minimist@^1.1.0, minimist@^1.1.3, minimist@^1.2.0, minimist@^1.2.5:\n   version \"1.2.5\"\n   resolved \"https:\/\/registry.yarnpkg.com\/minimist\/-\/minimist-1.2.5.tgz#67d66014b66a6a8aaa0c083c5fd58df4e4e97602\"\n   integrity sha512-FM9nNUYrRBAELZQT3xeZQ7fmMOBg6nWNmJKTcgsJeaLstP\/UODVpGsr5OhXhhXg6f+qtJ8uiZ+PUxkDWcgIXLw==\n@@ -5748,9 +5744,9 @@ negotiator@0.6.1:\n   integrity sha1-KzJxhOiZIQEXeyhWP7XnECrNDKk=\n \n neo-async@^2.5.0, neo-async@^2.6.0:\n-  version \"2.6.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/neo-async\/-\/neo-async-2.6.1.tgz#ac27ada66167fa8849a6addd837f6b189ad2081c\"\n-  integrity sha512-iyam8fBuCUpWeKPGpaNMetEocMt364qkCsfL9JuhjXX6dRnguRVOfk2GZaDpPjcOKiiXCPINZC1GczQ7iTq3Zw==\n+  version \"2.6.2\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/neo-async\/-\/neo-async-2.6.2.tgz#b4aafb93e3aeb2d8174ca53cf163ab7d7308305f\"\n+  integrity sha512-Yd3UES5mWCSqR+qNT93S3UoYUkqAZ9lLg8a7g9rimsWmYGK8cVToA4\/sF3RrshdyV3sAGMXVUmpMYOw+dLpOuw==\n \n netmask@~1.0.4:\n   version \"1.0.6\"\n@@ -8014,12 +8010,9 @@ typescript@^3.6.4:\n   integrity sha512-unoCll1+l+YK4i4F8f22TaNVPRHcD9PA3yCuZ8g5e0qGqlVlJ\/8FSateOLLSagn+Yg5+ZwuPkL8LFUc0Jcvksg==\n \n uglify-js@^3.1.4:\n-  version \"3.6.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/uglify-js\/-\/uglify-js-3.6.1.tgz#ae7688c50e1bdcf2f70a0e162410003cf9798311\"\n-  integrity sha512-+dSJLJpXBb6oMHP+Yvw8hUgElz4gLTh82XuX68QiJVTXaE5ibl6buzhNkQdYhBlIhozWOC9ge16wyRmjG4TwVQ==\n-  dependencies:\n-    commander \"2.20.0\"\n-    source-map \"~0.6.1\"\n+  version \"3.13.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/uglify-js\/-\/uglify-js-3.13.0.tgz#66ed69f7241f33f13531d3d51d5bcebf00df7f69\"\n+  integrity sha512-TWYSWa9T2pPN4DIJYbU9oAjQx+5qdV5RUDxwARg8fmJZrD\/V27Zj0JngW5xg1DFz42G0uDYl2XhzF6alSzD62w==\n \n ultron@~1.1.0:\n   version \"1.1.1\"\n\n\n###\n\n","completion":" build(deps): bump handlebars from 4.4.3 to 4.7.7 (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -4157,9 +4157,9 @@ inherits@2.0.3:\n   integrity sha1-Yzwsg+PaQqUC9SRmAiSA9CCCYd4=\n \n ini@^1.3.2, ini@^1.3.4, ini@~1.3.0:\n-  version \"1.3.5\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/ini\/-\/ini-1.3.5.tgz#eee25f56db1c9ec6085e0c22778083f596abf927\"\n-  integrity sha512-RZY5huIKCMRWDUqZlEi72f\/lmXKMvuszcMBduliQ3nnWbx9X\/ZBQO7DijMEYS9EhHBb2qacRUMtC7svLwe0lcw==\n+  version \"1.3.8\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/ini\/-\/ini-1.3.8.tgz#a29da425b48806f34767a4efce397269af28432c\"\n+  integrity sha512-JV\/yugV2uzW5iMRSiZAyDtQd+nxtUnjeLt0acNdw98kKLrvuRVyB80tsREOE7yvGVgalhZ6RNXCmEHkUKBKxew==\n \n inquirer@1.2.3:\n   version \"1.2.3\"\n\n\n###\n\n","completion":" build(deps): bump ini from 1.3.5 to 1.3.8 (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -1455,10 +1455,10 @@ bluebird@^3.3.0, bluebird@^3.5.3:\n   resolved \"https:\/\/registry.yarnpkg.com\/bluebird\/-\/bluebird-3.5.3.tgz#7d01c6f9616c9a51ab0f8c549a79dfe6ec33efa7\"\n   integrity sha512-\/qKPUQlaW1OyR51WeCPBvRnAlnZFUJkCSG5HzGnuIqhgyJtF+T94lFnn33eiazjRm2LAHVy2guNnaq48X9SJuw==\n \n-bn.js@^4.0.0, bn.js@^4.1.0, bn.js@^4.1.1, bn.js@^4.4.0:\n-  version \"4.11.9\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/bn.js\/-\/bn.js-4.11.9.tgz#26d556829458f9d1e81fc48952493d0ba3507828\"\n-  integrity sha512-E6QoYqCKZfgatHTdHzs1RRKP7ip4vvm+EyRUeE2RF0NblwVvb0p6jSVeNTOFxPn26QXN2o6SMfNxKp6kU8zQaw==\n+bn.js@^4.0.0, bn.js@^4.1.0, bn.js@^4.1.1, bn.js@^4.11.9:\n+  version \"4.12.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/bn.js\/-\/bn.js-4.12.0.tgz#775b3f278efbb9718eec7361f483fb36fbbfea88\"\n+  integrity sha512-c98Bf3tPniI+scsdk237ku1Dc3ujXQTSgyiPUDEOe7tRkhrqridvh8klBv0HCEso1OLOYcHuCv\/cS6DNxKH+ZA==\n \n body-parser@^1.16.1:\n   version \"1.18.3\"\n@@ -1516,7 +1516,7 @@ braces@^2.3.0, braces@^2.3.1:\n     split-string \"^3.0.2\"\n     to-regex \"^3.0.1\"\n \n-brorand@^1.0.1:\n+brorand@^1.0.1, brorand@^1.1.0:\n   version \"1.1.0\"\n   resolved \"https:\/\/registry.yarnpkg.com\/brorand\/-\/brorand-1.1.0.tgz#12c25efe40a45e3c323eb8675a0a0ce57b22371f\"\n   integrity sha1-EsJe\/kCkXjwyPrhnWgoM5XsiNx8=\n@@ -2736,17 +2736,17 @@ elegant-spinner@^1.0.1:\n   integrity sha1-2wQ1IcldfjA\/2PNFvtwzSc+wcp4=\n \n elliptic@^6.0.0:\n-  version \"6.5.3\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/elliptic\/-\/elliptic-6.5.3.tgz#cb59eb2efdaf73a0bd78ccd7015a62ad6e0f93d6\"\n-  integrity sha512-IMqzv5wNQf+E6aHeIqATs0tOLeOTwj1QKbRcS3jBbYkl5oLAserA8yJTT7\/VyHUYG91PRmPyeQDObKLPpeS4dw==\n+  version \"6.5.4\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/elliptic\/-\/elliptic-6.5.4.tgz#da37cebd31e79a1367e941b592ed1fbebd58abbb\"\n+  integrity sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==\n   dependencies:\n-    bn.js \"^4.4.0\"\n-    brorand \"^1.0.1\"\n+    bn.js \"^4.11.9\"\n+    brorand \"^1.1.0\"\n     hash.js \"^1.0.0\"\n-    hmac-drbg \"^1.0.0\"\n-    inherits \"^2.0.1\"\n-    minimalistic-assert \"^1.0.0\"\n-    minimalistic-crypto-utils \"^1.0.0\"\n+    hmac-drbg \"^1.0.1\"\n+    inherits \"^2.0.4\"\n+    minimalistic-assert \"^1.0.1\"\n+    minimalistic-crypto-utils \"^1.0.1\"\n \n emojis-list@^2.0.0:\n   version \"2.1.0\"\n@@ -3952,7 +3952,7 @@ he@^1.1.1:\n   resolved \"https:\/\/registry.yarnpkg.com\/he\/-\/he-1.2.0.tgz#84ae65fa7eafb165fddb61566ae14baf05664f0f\"\n   integrity sha512-F\/1DnUGPopORZi0ni+CvrCgHQ5FyEAHRLSApuYWMmrbSwoN2Mn\/7k+Gl38gJnR7yyDZk6WLXwiGod1JOWNDKGw==\n \n-hmac-drbg@^1.0.0:\n+hmac-drbg@^1.0.1:\n   version \"1.0.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/hmac-drbg\/-\/hmac-drbg-1.0.1.tgz#d2745701025a6c775a6c545793ed502fc0c649a1\"\n   integrity sha1-0nRXAQJabHdabFRXk+1QL8DGSaE=\n@@ -4141,7 +4141,7 @@ inflight@^1.0.4:\n     once \"^1.3.0\"\n     wrappy \"1\"\n \n-inherits@2, inherits@^2.0.1, inherits@^2.0.3, inherits@~2.0.1, inherits@~2.0.3:\n+inherits@2, inherits@^2.0.1, inherits@^2.0.3, inherits@^2.0.4, inherits@~2.0.1, inherits@~2.0.3:\n   version \"2.0.4\"\n   resolved \"https:\/\/registry.yarnpkg.com\/inherits\/-\/inherits-2.0.4.tgz#0fa2c64f932917c3433a0ded55363aae37416b7c\"\n   integrity sha512-k\/vGaX4\/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==\n@@ -5542,7 +5542,7 @@ minimalistic-assert@^1.0.0, minimalistic-assert@^1.0.1:\n   resolved \"https:\/\/registry.yarnpkg.com\/minimalistic-assert\/-\/minimalistic-assert-1.0.1.tgz#2e194de044626d4a10e7f7fbc00ce73e83e4d5c7\"\n   integrity sha512-UtJcAD4yEaGtjPezWuO9wC4nwUnVH\/8\/Im3yEHQP4b67cXlD\/Qr9hdITCU1xDbSEXg2XKNaP8jsReV7vQd00\/A==\n \n-minimalistic-crypto-utils@^1.0.0, minimalistic-crypto-utils@^1.0.1:\n+minimalistic-crypto-utils@^1.0.1:\n   version \"1.0.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/minimalistic-crypto-utils\/-\/minimalistic-crypto-utils-1.0.1.tgz#f6c00c1c0b082246e5c4d99dfb8c7c083b2b582a\"\n   integrity sha1-9sAMHAsIIkblxNmd+4x8CDsrWCo=\n\n\n###\n\n","completion":" build(deps): bump elliptic from 6.5.3 to 6.5.4 (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -62,6 +62,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/ionic.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/nuxtjs.org\/\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nuxt.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -72,6 +72,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/ionic.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/nuxtjs.org\/\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nuxt.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -58,7 +58,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/ionicframework.com\/\" target=\"_blank\">\n+        <a href=\"https:\/\/ionicframework.com\/vue?utm_source=partner&utm_medium=referral&utm_campaign=vuesponsorship&utm_content=vuedocs\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/ionic.png\">\n         <\/a>\n       <\/td>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -68,7 +68,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/ionicframework.com\/\" target=\"_blank\">\n+        <a href=\"https:\/\/ionicframework.com\/vue?utm_source=partner&utm_medium=referral&utm_campaign=vuesponsorship&utm_content=vuedocs\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/ionic.png\">\n         <\/a>\n       <\/td>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -57,6 +57,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storyblok.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/ionicframework.com\/\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/ionic.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -67,6 +67,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storyblok.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/ionicframework.com\/\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/ionic.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -283,6 +283,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/free_bets_us.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/betting.bet\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/betting_bet.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -120,6 +120,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/icons8.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/icons_8.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vuejobs.com\/?ref=vuejs\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n@@ -145,13 +150,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\/hire-vuejs-developer\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n@@ -177,13 +182,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.foo.software\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/foo.png\">\n@@ -209,13 +214,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tendermint.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.okayhq.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/okay.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpsserver.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpsserver_com.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -125,6 +125,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/icons8.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/icons_8.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vuejobs.com\/?ref=vuejs\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n@@ -150,13 +155,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\/hire-vuejs-developer\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n@@ -182,13 +187,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.foo.software\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/foo.png\">\n@@ -214,13 +219,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tendermint.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.okayhq.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/okay.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpsserver.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpsserver_com.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -221,6 +221,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpsserver_com.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/aussiecasinohex.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/aussiecasinohex.svg?sanitize=true\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -264,10 +269,15 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"teamextension.io\" target=\"_blank\">\n+        <a href=\"https:\/\/teamextension.io\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/team_extension_north_america_inc.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/freebets.us\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/free_bets_us.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -305,6 +315,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webucator.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/memberful.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/memberful.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -226,6 +226,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpsserver_com.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/aussiecasinohex.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/aussiecasinohex.svg?sanitize=true\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -263,6 +263,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isolutions_uk_limited.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"teamextension.io\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/team_extension_north_america_inc.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -101,7 +101,7 @@\n     \"flow-bin\": \"^0.61.0\",\n     \"hash-sum\": \"^1.0.2\",\n     \"he\": \"^1.1.1\",\n-    \"http-server\": \"^0.11.1\",\n+    \"http-server\": \"^0.12.3\",\n     \"jasmine\": \"^2.99.0\",\n     \"jasmine-core\": \"^2.99.0\",\n     \"karma\": \"^3.1.1\",\n\n\n###\n\n","completion":" chore: fix npm test on Windows (#<issue-num>)\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -254,7 +254,7 @@ Vue (pronounced `\/vju\/`, like view) is a **progressive framework** for buildin\n \n #### Browser Compatibility\n \n-Vue.js supports all browsers that are [ES5-compliant](http:\/\/kangax.github.io\/compat-table\/es5\/) (IE8 and below are not supported).\n+Vue.js supports all browsers that are [ES5-compliant](https:\/\/kangax.github.io\/compat-table\/es5\/) (IE8 and below are not supported).\n \n ## Ecosystem\n \n@@ -302,7 +302,7 @@ To check out [live examples](https:\/\/vuejs.org\/v2\/examples\/) and docs, visit [vu\n \n ## Questions\n \n-For questions and support please use [the official forum](http:\/\/forum.vuejs.org) or [community chat](https:\/\/chat.vuejs.org\/). The issue list of this repo is **exclusively** for bug reports and feature requests.\n+For questions and support please use [the official forum](https:\/\/forum.vuejs.org) or [community chat](https:\/\/chat.vuejs.org\/). The issue list of this repo is **exclusively** for bug reports and feature requests.\n \n ## Issues\n \n@@ -329,6 +329,6 @@ Thank you to all the people who already contributed to Vue!\n \n ## License\n \n-[MIT](http:\/\/opensource.org\/licenses\/MIT)\n+[MIT](https:\/\/opensource.org\/licenses\/MIT)\n \n Copyright (c) 2013-present, Yuxi (Evan) You\n\n\n###\n\n","completion":" chore: update HTTP -> HTTPS (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -215,6 +215,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.vpsserver.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpsserver_com.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -220,6 +220,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.vpsserver.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpsserver_com.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/create-component.js | file path B: src\/core\/vdom\/create-component.js\n\n@@ -206,8 +206,10 @@ export function createComponent (\n }\n \n export function createComponentInstanceForVnode (\n-  vnode: any, \/\/ we know it's MountedComponentVNode but flow doesn't\n-  parent: any \/\/ activeInstance in lifecycle state\n+  \/\/ we know it's MountedComponentVNode but flow doesn't\n+  vnode: any,\n+  \/\/ activeInstance in lifecycle state\n+  parent: any\n ): Component {\n   const options: InternalComponentOptions = {\n     _isComponent: true,\n\n\n###\n\n","completion":" build: unexpected token when running dev (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/attrs.js | file path B: src\/platforms\/web\/runtime\/modules\/attrs.js\n\n@@ -39,7 +39,7 @@ function updateAttrs (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n     cur = attrs[key]\n     old = oldAttrs[key]\n     if (old !== cur) {\n-      setAttr(elm, key, cur)\n+      setAttr(elm, key, cur, vnode.data.pre)\n     }\n   }\n   \/\/ #4391: in IE9, setting type can reset value for input[type=radio]\n@@ -59,8 +59,8 @@ function updateAttrs (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n   }\n }\n \n-function setAttr (el: Element, key: string, value: any) {\n-  if (el.tagName.indexOf('-') > -1) {\n+function setAttr (el: Element, key: string, value: any, isInPre: any) {\n+  if (isInPre || el.tagName.indexOf('-') > -1) {\n     baseSetAttr(el, key, value)\n   } else if (isBooleanAttr(key)) {\n     \/\/ set attribute for blank value\n\n---\n file path A: test\/unit\/features\/directives\/pre.spec.js | file path B: test\/unit\/features\/directives\/pre.spec.js\n\n@@ -42,4 +42,13 @@ describe('Directive v-pre', function () {\n     vm.$mount()\n     expect(vm.$el.firstChild.tagName).toBe('VTEST')\n   })\n+\n+  \/\/ #10087\n+  it('should not compile attributes', function () {\n+    const vm = new Vue({\n+      template: '<div v-pre><p open=\"hello\">A Test<\/p><\/div>'\n+    })\n+    vm.$mount()\n+    expect(vm.$el.firstChild.getAttribute('open')).toBe('hello')\n+  })\n })\n\n\n###\n\n","completion":" fix(v-pre): do not alter attributes (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/util\/attrs.js | file path B: src\/platforms\/web\/util\/attrs.js\n\n@@ -35,7 +35,7 @@ export const isBooleanAttr = makeMap(\n   'default,defaultchecked,defaultmuted,defaultselected,defer,disabled,' +\n   'enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,' +\n   'muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,' +\n-  'required,reversed,scoped,seamless,selected,sortable,translate,' +\n+  'required,reversed,scoped,seamless,selected,sortable,' +\n   'truespeed,typemustmatch,visible'\n )\n \n\n\n###\n\n","completion":" fix(attrs): do not consider translate attribute as boolean (#<issue-num>)\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -76,7 +76,7 @@ export interface ComponentOptions<\n   propsData?: object;\n   computed?: Accessors<Computed>;\n   methods?: Methods;\n-  watch?: Record<string, WatchOptionsWithHandler<any> | WatchHandler<any> | string>;\n+  watch?: Record<string, WatchOptionsWithHandler<any> | WatchHandler<any>>;\n \n   el?: Element | string;\n   template?: string;\n@@ -169,7 +169,7 @@ export interface ComputedOptions<T> {\n   cache?: boolean;\n }\n \n-export type WatchHandler<T> = (val: T, oldVal: T) => void;\n+export type WatchHandler<T> = string | ((val: T, oldVal: T) => void);\n \n export interface WatchOptions {\n   deep?: boolean;\n\n---\n file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -168,6 +168,10 @@ Vue.component('component', {\n         this.a = val\n       },\n       deep: true\n+    },\n+    d: {\n+      handler: 'someMethod',\n+      immediate: true\n     }\n   },\n   el: \"#app\",\n\n\n###\n\n","completion":" fix(types): allow string for watch handlers in options (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/server\/modules\/dom-props.js | file path B: src\/platforms\/web\/server\/modules\/dom-props.js\n\n@@ -2,7 +2,7 @@\n \n import VNode from 'core\/vdom\/vnode'\n import { renderAttr } from '.\/attrs'\n-import { isDef, isUndef, extend } from 'shared\/util'\n+import { isDef, isUndef, extend, toString } from 'shared\/util'\n import { propsToAttrMap, isRenderableAttr } from '..\/util'\n \n export default function renderDOMProps (node: VNodeWithData): string {\n@@ -28,7 +28,7 @@ export default function renderDOMProps (node: VNodeWithData): string {\n     } else if (key === 'textContent') {\n       setText(node, props[key], false)\n     } else if (key === 'value' && node.tag === 'textarea') {\n-      setText(node, props[key], false)\n+      setText(node, toString(props[key]), false)\n     } else {\n       \/\/ $flow-disable-line (WTF?)\n       const attr = propsToAttrMap[key] || key.toLowerCase()\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -1594,6 +1594,25 @@ describe('SSR: renderToString', () => {\n \n     renderToString(vueInstance, err => done(err))\n   })\n+\n+  it('undefined v-model with textarea', done => {\n+    renderVmWithOptions({\n+      render (h) {\n+        return h('div', [\n+          h('textarea', {\n+            domProps: {\n+              value: null\n+            }\n+          })\n+        ])\n+      }\n+    }, result => {\n+      expect(result).toContain(\n+        '<div data-server-rendered=\"true\"><textarea><\/textarea><\/div>'\n+      )\n+      done()\n+    })\n+  })\n })\n \n function renderVmWithOptions (options, cb) {\n\n\n###\n\n","completion":" fix(ssr): textarea keeps undefined\/null values (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -15,7 +15,7 @@ import { unicodeRegExp } from 'core\/util\/lang'\n \n \/\/ Regular Expressions for parsing tags and attributes\n const attribute = \/^\\s*([^\\s\"'<>\\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?\/\n-const dynamicArgAttribute = \/^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+\\][^\\s\"'<>\\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?\/\n+const dynamicArgAttribute = \/^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?\/\n const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*`\n const qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\n const startTagOpen = new RegExp(`^<${qnameCapture}`)\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -569,6 +569,26 @@ describe('parser', () => {\n     })\n   })\n \n+  \/\/ #9781\n+  it('multiple dynamic slot names without warning', () => {\n+    const ast = parse(`<my-component>\n+      <template #[foo]>foo<\/template>\n+      <template #[data]=\"scope\">scope<\/template>\n+      <template #[bar]>bar<\/template>\n+    <\/my-component>`, baseOptions)\n+\n+    expect(`Invalid dynamic argument expression`).not.toHaveBeenWarned()\n+    expect(ast.scopedSlots.foo).not.toBeUndefined()\n+    expect(ast.scopedSlots.data).not.toBeUndefined()\n+    expect(ast.scopedSlots.bar).not.toBeUndefined()\n+    expect(ast.scopedSlots.foo.type).toBe(1)\n+    expect(ast.scopedSlots.data.type).toBe(1)\n+    expect(ast.scopedSlots.bar.type).toBe(1)\n+    expect(ast.scopedSlots.foo.attrsMap['#[foo]']).toBe('')\n+    expect(ast.scopedSlots.bar.attrsMap['#[bar]']).toBe('')\n+    expect(ast.scopedSlots.data.attrsMap['#[data]']).toBe('scope')\n+  })\n+\n   \/\/ #6887\n   it('special case static attribute that must be props', () => {\n     const ast = parse('<video muted><\/video>', baseOptions)\n\n\n###\n\n","completion":" fix(parser): allow multiple slots with new syntax (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/props.js | file path B: src\/core\/util\/props.js\n\n@@ -205,18 +205,19 @@ function getInvalidTypeMessage (name, value, expectedTypes) {\n     ` Expected ${expectedTypes.map(capitalize).join(', ')}`\n   const expectedType = expectedTypes[0]\n   const receivedType = toRawType(value)\n-  const expectedValue = styleValue(value, expectedType)\n-  const receivedValue = styleValue(value, receivedType)\n   \/\/ check if we need to specify expected value\n-  if (expectedTypes.length === 1 &&\n-      isExplicable(expectedType) &&\n-      !isBoolean(expectedType, receivedType)) {\n-    message += ` with value ${expectedValue}`\n+  if (\n+    expectedTypes.length === 1 &&\n+    isExplicable(expectedType) &&\n+    isExplicable(typeof value) &&\n+    !isBoolean(expectedType, receivedType)\n+  ) {\n+    message += ` with value ${styleValue(value, expectedType)}`\n   }\n   message += `, got ${receivedType} `\n   \/\/ check if we need to specify received value\n   if (isExplicable(receivedType)) {\n-    message += `with value ${receivedValue}.`\n+    message += `with value ${styleValue(value, receivedType)}.`\n   }\n   return message\n }\n@@ -231,9 +232,9 @@ function styleValue (value, type) {\n   }\n }\n \n+const EXPLICABLE_TYPES = ['string', 'number', 'boolean']\n function isExplicable (value) {\n-  const explicitTypes = ['string', 'number', 'boolean']\n-  return explicitTypes.some(elem => value.toLowerCase() === elem)\n+  return EXPLICABLE_TYPES.some(elem => value.toLowerCase() === elem)\n }\n \n function isBoolean (...args) {\n\n---\n file path A: test\/unit\/features\/options\/props.spec.js | file path B: test\/unit\/features\/options\/props.spec.js\n\n@@ -241,6 +241,16 @@ describe('Options props', () => {\n         makeInstance({}, Symbol)\n         expect('Expected Symbol, got Object').toHaveBeenWarned()\n       })\n+\n+      it('warns when expected an explicable type but Symbol was provided', () => {\n+        makeInstance(Symbol('foo'), String)\n+        expect('Expected String, got Symbol').toHaveBeenWarned()\n+      })\n+\n+      it('warns when expected an explicable type but Symbol was provided', () => {\n+        makeInstance(Symbol('foo'), [String, Number])\n+        expect('Expected String, Number, got Symbol').toHaveBeenWarned()\n+      })\n     }\n \n     it('custom constructor', () => {\n\n\n###\n\n","completion":" fix(props): correctly warn when a provided prop is Symbol (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/template-renderer\/create-async-file-mapper.js | file path B: src\/server\/template-renderer\/create-async-file-mapper.js\n\n@@ -44,7 +44,11 @@ function mapIdToFile (id, clientManifest) {\n     fileIndices.forEach(index => {\n       const file = clientManifest.all[index]\n       \/\/ only include async files or non-js, non-css assets\n-      if (clientManifest.async.indexOf(file) > -1 || !(\/\\.(js|css)($|\\?)\/.test(file))) {\n+      if (\n+        file &&\n+        (clientManifest.async.indexOf(file) > -1 ||\n+          !\/\\.(js|css)($|\\?)\/.test(file))\n+      ) {\n         files.push(file)\n       }\n     })\n\n\n###\n\n","completion":" fix(ssr): avoid missing files in manifest (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/create-component.js | file path B: src\/core\/vdom\/create-component.js\n\n@@ -207,7 +207,7 @@ export function createComponent (\n \n export function createComponentInstanceForVnode (\n   vnode: any, \/\/ we know it's MountedComponentVNode but flow doesn't\n-  parent: any, \/\/ activeInstance in lifecycle state\n+  parent: any \/\/ activeInstance in lifecycle state\n ): Component {\n   const options: InternalComponentOptions = {\n     _isComponent: true,\n\n\n###\n\n","completion":" fix(core): remove trailing comma in function signature (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -209,6 +209,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tendermint.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.okayhq.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/okay.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tendermint.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.okayhq.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/okay.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -204,6 +204,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpn_review.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/cosmos.network\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tendermint.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -209,6 +209,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpn_review.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/cosmos.network\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tendermint.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -199,6 +199,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/moovweb.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/vpn-review.com\/netflix-vpn\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpn_review.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -204,6 +204,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/moovweb.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/vpn-review.com\/netflix-vpn\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpn_review.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.11\",\n+  \"version\": \"2.6.12\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.12\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -133,7 +133,7 @@\n     \"rollup-plugin-node-resolve\": \"^4.0.0\",\n     \"rollup-plugin-replace\": \"^2.0.0\",\n     \"selenium-server\": \"^2.53.1\",\n-    \"serialize-javascript\": \"^2.1.2\",\n+    \"serialize-javascript\": \"^3.1.0\",\n     \"shelljs\": \"^0.8.1\",\n     \"terser\": \"^3.10.2\",\n     \"typescript\": \"^3.6.4\",\n\n---\n file path A: packages\/vue-server-renderer\/package.json | file path B: packages\/vue-server-renderer\/package.json\n\n@@ -25,7 +25,7 @@\n     \"lodash.template\": \"^4.5.0\",\n     \"lodash.uniq\": \"^4.5.0\",\n     \"resolve\": \"^1.2.0\",\n-    \"serialize-javascript\": \"^2.1.2\",\n+    \"serialize-javascript\": \"^3.1.0\",\n     \"source-map\": \"0.5.6\"\n   },\n   \"devDependencies\": {\n\n---\n file path A: yarn.lock | file path B: yarn.lock\n\n@@ -6596,6 +6596,13 @@ randombytes@^2.0.0, randombytes@^2.0.1, randombytes@^2.0.5:\n   dependencies:\n     safe-buffer \"^5.1.0\"\n \n+randombytes@^2.1.0:\n+  version \"2.1.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/randombytes\/-\/randombytes-2.1.0.tgz#df6f84372f0270dc65cdf6291349ab7a473d4f2a\"\n+  integrity sha512-vYl3iOX+4CKUWuxGi9Ukhie6fsqXqS9FE2Zaic4tNFD2N2QQaXOMFbuKK4QmDHC0JO6B1Zp41J0LpT0oR68amQ==\n+  dependencies:\n+    safe-buffer \"^5.1.0\"\n+\n randomfill@^1.0.3:\n   version \"1.0.4\"\n   resolved \"https:\/\/registry.yarnpkg.com\/randomfill\/-\/randomfill-1.0.4.tgz#c92196fc86ab42be983f1bf31778224931d61458\"\n@@ -7151,10 +7158,12 @@ serialize-javascript@^1.4.0:\n   resolved \"https:\/\/registry.yarnpkg.com\/serialize-javascript\/-\/serialize-javascript-1.6.1.tgz#4d1f697ec49429a847ca6f442a2a755126c4d879\"\n   integrity sha512-A5MOagrPFga4YaKQSWHryl7AXvbQkEqpw4NNYMTNYUNV51bA8ABHgYFpqKx+YFFrw59xMV1qGH1R4AgoNIVgCw==\n \n-serialize-javascript@^2.1.2:\n-  version \"2.1.2\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/serialize-javascript\/-\/serialize-javascript-2.1.2.tgz#ecec53b0e0317bdc95ef76ab7074b7384785fa61\"\n-  integrity sha512-rs9OggEUF0V4jUSecXazOYsLfu7OGK2qIn3c7IPBiffz32XniEp\/TX9Xmc9LQfK2nQ2QKHvZ2oygKUGU0lG4jQ==\n+serialize-javascript@^3.1.0:\n+  version \"3.1.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/serialize-javascript\/-\/serialize-javascript-3.1.0.tgz#8bf3a9170712664ef2561b44b691eafe399214ea\"\n+  integrity sha512-JIJT1DGiWmIKhzRsG91aS6Ze4sFUrYbltlkg2onR5OrnNM02Kl\/hnY\/T4FN2omvyeBbQmMJv+K4cPOpGzOTFBg==\n+  dependencies:\n+    randombytes \"^2.1.0\"\n \n set-blocking@~2.0.0:\n   version \"2.0.0\"\n\n\n###\n\n","completion":" fix(security): upgrade serialize-javascript (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -194,6 +194,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/flatlogic_templates.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"http:\/\/moovweb.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/moovweb.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -199,6 +199,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/flatlogic_templates.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"http:\/\/moovweb.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/moovweb.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -1444,9 +1444,9 @@ bluebird@^3.3.0, bluebird@^3.5.3:\n   integrity sha512-\/qKPUQlaW1OyR51WeCPBvRnAlnZFUJkCSG5HzGnuIqhgyJtF+T94lFnn33eiazjRm2LAHVy2guNnaq48X9SJuw==\n \n bn.js@^4.0.0, bn.js@^4.1.0, bn.js@^4.1.1, bn.js@^4.4.0:\n-  version \"4.11.8\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/bn.js\/-\/bn.js-4.11.8.tgz#2cde09eb5ee341f484746bb0309b3253b1b1442f\"\n-  integrity sha512-ItfYfPLkWHUjckQCk8xC+LwxgK8NYcXywGigJgSwOP8Y2iyWT4f2vsZnoOXTTbo+o5yXmIUJ4gn5538SO5S3gA==\n+  version \"4.11.9\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/bn.js\/-\/bn.js-4.11.9.tgz#26d556829458f9d1e81fc48952493d0ba3507828\"\n+  integrity sha512-E6QoYqCKZfgatHTdHzs1RRKP7ip4vvm+EyRUeE2RF0NblwVvb0p6jSVeNTOFxPn26QXN2o6SMfNxKp6kU8zQaw==\n \n body-parser@^1.16.1:\n   version \"1.18.3\"\n@@ -2717,9 +2717,9 @@ elegant-spinner@^1.0.1:\n   integrity sha1-2wQ1IcldfjA\/2PNFvtwzSc+wcp4=\n \n elliptic@^6.0.0:\n-  version \"6.4.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/elliptic\/-\/elliptic-6.4.1.tgz#c2d0b7776911b86722c632c3c06c60f2f819939a\"\n-  integrity sha512-BsXLz5sqX8OHcsh7CqBMztyXARmGQ3LWPtGjJi6DiJHq5C\/qvi9P3OqgswKSDftbu8+IoI\/QDTAm2fFnQ9SZSQ==\n+  version \"6.5.3\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/elliptic\/-\/elliptic-6.5.3.tgz#cb59eb2efdaf73a0bd78ccd7015a62ad6e0f93d6\"\n+  integrity sha512-IMqzv5wNQf+E6aHeIqATs0tOLeOTwj1QKbRcS3jBbYkl5oLAserA8yJTT7\/VyHUYG91PRmPyeQDObKLPpeS4dw==\n   dependencies:\n     bn.js \"^4.4.0\"\n     brorand \"^1.0.1\"\n@@ -4106,16 +4106,21 @@ inflight@^1.0.4:\n     once \"^1.3.0\"\n     wrappy \"1\"\n \n-inherits@2, inherits@2.0.3, inherits@^2.0.1, inherits@^2.0.3, inherits@~2.0.1, inherits@~2.0.3:\n-  version \"2.0.3\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/inherits\/-\/inherits-2.0.3.tgz#633c2c83e3da42a502f52466022480f4208261de\"\n-  integrity sha1-Yzwsg+PaQqUC9SRmAiSA9CCCYd4=\n+inherits@2, inherits@^2.0.1, inherits@^2.0.3, inherits@~2.0.1, inherits@~2.0.3:\n+  version \"2.0.4\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/inherits\/-\/inherits-2.0.4.tgz#0fa2c64f932917c3433a0ded55363aae37416b7c\"\n+  integrity sha512-k\/vGaX4\/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==\n \n inherits@2.0.1:\n   version \"2.0.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/inherits\/-\/inherits-2.0.1.tgz#b17d08d326b4423e568eff719f91b0b1cbdf69f1\"\n   integrity sha1-sX0I0ya0Qj5Wjv9xn5GwscvfafE=\n \n+inherits@2.0.3:\n+  version \"2.0.3\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/inherits\/-\/inherits-2.0.3.tgz#633c2c83e3da42a502f52466022480f4208261de\"\n+  integrity sha1-Yzwsg+PaQqUC9SRmAiSA9CCCYd4=\n+\n ini@^1.3.2, ini@^1.3.4, ini@~1.3.0:\n   version \"1.3.5\"\n   resolved \"https:\/\/registry.yarnpkg.com\/ini\/-\/ini-1.3.5.tgz#eee25f56db1c9ec6085e0c22778083f596abf927\"\n\n\n###\n\n","completion":" build(deps): bump elliptic from 6.4.1 to 6.5.3 (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -185,18 +185,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <\/tr><tr><\/tr>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.vuetraining.net\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuetraining_net__note__since_i_m_not_sure_where_else_to_put_it____this_is_replacing_vuescreencasts___they_re_both_run_by_me__i_m_just_switching_where_i_want_my_sponsorship_to_point_.png\">\n-        <\/a>\n-      <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.primefaces.org\/primevue\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/primevue.png\">\n+        <a href=\"https:\/\/www.foo.software\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/foo.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.foo.software\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/foo.png\">\n+        <a href=\"https:\/\/flatlogic.com\/templates\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/flatlogic_templates.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -190,18 +190,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <\/tr><tr><\/tr>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.vuetraining.net\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuetraining_net__note__since_i_m_not_sure_where_else_to_put_it____this_is_replacing_vuescreencasts___they_re_both_run_by_me__i_m_just_switching_where_i_want_my_sponsorship_to_point_.png\">\n-        <\/a>\n-      <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.primefaces.org\/primevue\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/primevue.png\">\n+        <a href=\"https:\/\/www.foo.software\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/foo.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.foo.software\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/foo.png\">\n+        <a href=\"https:\/\/flatlogic.com\/templates\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/flatlogic_templates.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n---\n file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -320,6 +320,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/philip_john_basile.gif\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/writersperhour.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/writers_per_hour.jpg\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip]\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -321,10 +321,9 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--50 start-->\n - Wasim Khamlichi\n - errorrik \n-- Konstantin Levinski\n - Sean Ferguson\n - Johnny Ray Austin\n-- Manuel Guzman\n+- Peter Imburg\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n@@ -333,85 +332,79 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Masahiro Tanaka\n - Shawn Wildermuth\n - Keisuke Kita\n-- Lars Andreas Ness\n - Benjamin Listwon\n+- Lars Andreas Ness\n - Kirk Lewis\n-- Victor Tolbert\n - Wen-Tien Chang\n - Stephen Michael Hartley\n+- Victor Tolbert\n+- username \n - Luiz \n - James J. Ye\n - Barbara Liau\n+- Asaf Yishai\n - Matsumoto Takamasa\n - Guy Gavergun\n - Matt Jones\n - Niannian Modisette\n - Bernhard E. Reiter\n-- Asaf Yishai\n-- username \n - Zoran Knezevic\n - Jon Hobbs-Smith\n - Pierre Vanhulst\n-- Akiho Nagao\n-- Anthony Estebe\n - Haim Yulzari\n+- Anthony Estebe\n - Jim Raden\n-- Jeremy Tan\n - IMGNRY \n-- Tyler \n - Guilherme S L de Souza\n-- Vivekanandhan Natarajan\n-- Joe Gregory\n+- Tyler \n - Jordan Oroshiba\n+- Joe Gregory\n - Marcos Moura\n-- Jessie Hernandez\n - Eric \n-- Bohdan Kokotko\n-- Oskar Lindgren\n - Jere Sjroos\n-- Donald Fischer\n-- Alexander Weiher\n - Wakana Seki\n+- Donald Fischer\n - David Ang\n+- Oskar Lindgren\n - Jaeyoung Lee\n - David Kaplan\n-- Andy \n - Philip John Basile\n - Matt Sencenbaugh\n-- Juan Bermudez\n-- Elon Hung\n - Chris Calo\n-- Daniel Mattingley\n+- Juan Bermudez\n - Hannes Kochni\n-- Soichiro Isshiki\n+- Daniel Mattingley\n+- Elon Hung\n - Andrew Willis\n - Yusuke Kawabata\n-- Nick Dandakis\n-- Peter Matkovsky\n -  \n-- Fabien GuySake Ungerer\n-- Bill Condo\n+- Peter Matkovsky\n+- Nick Dandakis\n - Pierre Lebrun\n - Ryan Brewer\n-- Martin Bastien\n-- Alfonso Herrera\n - Bichinger Software & Consulting\n+- Alfonso Herrera\n - Afif Sohaili\n-- Nicolaas \n - Riki Fridrich\n-- Tomasz Kleszczewski\n--  \n - Diana Bergholz\n-- Parham \n+-  \n+- Parham Saidi\n - Allan McKernan\n - Roy Segall\n-- Ronni Lin\n-- Thomas Wiedemann\n-- lucien144 \n+- Abhay \n - Nobuhide Esaki\n+- Thomas Wiedemann\n - Santi Sanchez Canals\n-- Zeth Odderskov\n+- lucien144 \n - Evgeny Zislis\n+- Zeth Odderskov\n+- Kirill Tyurin\n+- Jules \n+- Sunny Yuen\n+- wickedwei \n+- Dennis Zanetti\n+- Faizal Andyka\n+- Aleksander Figiel\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -17,7 +17,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--special start-->\n \n <p align=\"center\">\n-  <a href=\"https:\/\/autocode.com\" target=\"_blank\">\n+  <a href=\"https:\/\/autocode.com\/\" target=\"_blank\">\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg?sanitize=true\">\n   <\/a>\n <\/p>\n@@ -120,11 +120,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/icons8.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/icons_8.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vuejobs.com\/?ref=vuejs\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n@@ -150,13 +145,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\/hire-vuejs-developer\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n@@ -182,21 +177,16 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n-        <\/a>\n-      <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.vuescreencasts.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/happy_programmer_llc.png\">\n+        <a href=\"https:\/\/www.vuetraining.net\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuetraining_net__note__since_i_m_not_sure_where_else_to_put_it____this_is_replacing_vuescreencasts___they_re_both_run_by_me__i_m_just_switching_where_i_want_my_sponsorship_to_point_.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -205,8 +195,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/cooltechzone.com\/netflix-vpn\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/netflix_vpn.png\">\n+        <a href=\"https:\/\/www.foo.software\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/foo.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -27,7 +27,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--special start-->\n \n <p align=\"center\">\n-  <a href=\"https:\/\/autocode.com\" target=\"_blank\">\n+  <a href=\"https:\/\/autocode.com\/\" target=\"_blank\">\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg?sanitize=true\">\n   <\/a>\n <\/p>\n@@ -125,11 +125,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/icons8.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/icons_8.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vuejobs.com\/?ref=vuejs\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n@@ -155,13 +150,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\/hire-vuejs-developer\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n@@ -187,21 +182,16 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n-        <\/a>\n-      <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.vuescreencasts.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/happy_programmer_llc.png\">\n+        <a href=\"https:\/\/www.vuetraining.net\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuetraining_net__note__since_i_m_not_sure_where_else_to_put_it____this_is_replacing_vuescreencasts___they_re_both_run_by_me__i_m_just_switching_where_i_want_my_sponsorship_to_point_.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -210,8 +200,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/cooltechzone.com\/netflix-vpn\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/netflix_vpn.png\">\n+        <a href=\"https:\/\/www.foo.software\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/foo.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: flow\/weex.js | file path B: flow\/weex.js\n\n@@ -28,7 +28,7 @@ declare type WeexEnvironment = {\n   appName: string; \/\/ mobile app name or browser name\n   appVersion: string;\n \n-  \/\/ informations of current running device\n+  \/\/ information about current running device\n   deviceModel: string; \/\/ phone device model\n   deviceWidth: number;\n   deviceHeight: number;\n\n---\n file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -380,7 +380,7 @@ export function parse (\n       }\n     },\n     comment (text: string, start, end) {\n-      \/\/ adding anyting as a sibling to the root node is forbidden\n+      \/\/ adding anything as a sibling to the root node is forbidden\n       \/\/ comments should still be allowed, but ignored\n       if (currentParent) {\n         const child: ASTText = {\n\n---\n file path A: test\/unit\/features\/directives\/on.spec.js | file path B: test\/unit\/features\/directives\/on.spec.js\n\n@@ -280,7 +280,7 @@ describe('Directive v-on', () => {\n     expect(spy.calls.count()).toBe(1)\n   })\n \n-  it('should support system modifers with exact', () => {\n+  it('should support system modifiers with exact', () => {\n     vm = new Vue({\n       el,\n       template: `\n@@ -405,7 +405,7 @@ describe('Directive v-on', () => {\n     Vue.config.keyCodes = Object.create(null)\n   })\n \n-  it('should override build-in keyCode', () => {\n+  it('should override built-in keyCode', () => {\n     Vue.config.keyCodes.up = [1, 87]\n     vm = new Vue({\n       el,\n@@ -420,7 +420,7 @@ describe('Directive v-on', () => {\n       e.keyCode = 1\n     })\n     expect(spy).toHaveBeenCalledTimes(2)\n-    \/\/ should not affect build-in down keycode\n+    \/\/ should not affect built-in down keycode\n     triggerEvent(vm.$el, 'keyup', e => {\n       e.keyCode = 40\n     })\n\n---\n file path A: types\/umd.d.ts | file path B: types\/umd.d.ts\n\n@@ -7,7 +7,7 @@ import {\n   PropsDefinition\n } from \".\/options\";\n \n-\/\/ Expose some types for backword compatibility...\n+\/\/ Expose some types for backward compatibility...\n declare namespace Vue {\n   \/\/ vue.d.ts\n   export type CreateElement = V.CreateElement;\n\n\n###\n\n","completion":" chore: spelling and grammar (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -157,6 +157,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.bacancytechnology.com\/hire-vuejs-developer\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -177,13 +182,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -162,6 +162,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.bacancytechnology.com\/hire-vuejs-developer\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -182,13 +187,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -241,6 +241,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/inkoop.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.thecasinodb.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isolutions_uk_limited.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -189,11 +189,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/unicorn.io\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vuescreencasts.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/happy_programmer_llc.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -194,11 +194,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/unicorn.io\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vuescreencasts.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/happy_programmer_llc.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: dist\/README.md | file path B: dist\/README.md\n\n@@ -90,9 +90,7 @@ module.exports = {\n   plugins: [\n     \/\/ ...\n     new webpack.DefinePlugin({\n-      'process.env': {\n-        NODE_ENV: JSON.stringify('production')\n-      }\n+      'process.env.NODE_ENV': JSON.stringify('production')\n     })\n   ]\n }\n\n\n###\n\n","completion":" chore: improve note about DefinePlugin (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -204,6 +204,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/primevue.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/cooltechzone.com\/netflix-vpn\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/netflix_vpn.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -209,6 +209,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/primevue.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/cooltechzone.com\/netflix-vpn\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/netflix_vpn.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: .github\/ISSUE_TEMPLATE.md | file path B: None\n\n@@ -1,16 +0,0 @@\n-<!--\n-IMPORTANT: Please use the following link to create a new issue:\n-\n-  https:\/\/new-issue.vuejs.org\/\n-\n-If your issue was not created using the app above, it will be closed immediately.\n-\n-\n- issue issue \n--->\n-\n-<!--\n-Love vuejs? Please consider supporting us via Patreon or OpenCollective:\n-  https:\/\/www.patreon.com\/evanyou\n-  https:\/\/opencollective.com\/vuejs\/donate\n--->\n\n---\n file path A: None | file path B: .github\/ISSUE_TEMPLATE\/config.yml\n\n@@ -0,0 +1,11 @@\n+blank_issues_enabled: false\n+contact_links:\n+  - name: Create new issue\n+    url: https:\/\/new-issue.vuejs.org\/\n+    about: Please use the following link to create a new issue.\n+  - name: Patreon\n+    url: https:\/\/www.patreon.com\/evanyou\n+    about: Love Vue.js? Please consider supporting us via Patreon.\n+  - name: Open Collective\n+    url: https:\/\/opencollective.com\/vuejs\/donate\n+    about: Love Vue.js? Please consider supporting us via Open Collective.\n\n\n###\n\n","completion":" chore: add issue template config.yml (#<issue-num>) [ci skip]\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -18,7 +18,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n \n <p align=\"center\">\n   <a href=\"https:\/\/autocode.com\" target=\"_blank\">\n-    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg\">\n+    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg?sanitize=true\">\n   <\/a>\n <\/p>\n   \n@@ -135,11 +135,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/devsquad.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devsquad.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.firesticktricks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/firestick_tricks.png\">\n@@ -150,23 +145,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -182,11 +172,9 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devexpress.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -194,9 +182,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg?sanitize=true\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -140,11 +140,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/devsquad.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devsquad.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.firesticktricks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/firestick_tricks.png\">\n@@ -155,23 +150,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -187,8 +177,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devexpress.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n@@ -199,6 +187,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -330,7 +330,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n \n <!--50 start-->\n - Wasim Khamlichi\n-- errorrik\n+- errorrik \n - Konstantin Levinski\n - Sean Ferguson\n - Johnny Ray Austin\n@@ -343,86 +343,85 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Masahiro Tanaka\n - Shawn Wildermuth\n - Keisuke Kita\n-- Benjamin Listwon\n - Lars Andreas Ness\n+- Benjamin Listwon\n - Kirk Lewis\n+- Victor Tolbert\n - Wen-Tien Chang\n - Stephen Michael Hartley\n-- Victor Tolbert\n-- Luiz Tanure\n-- Barbara Liau\n+- Luiz \n - James J. Ye\n+- Barbara Liau\n - Matsumoto Takamasa\n-- Matt Jones\n - Guy Gavergun\n+- Matt Jones\n - Niannian Modisette\n - Bernhard E. Reiter\n-- Zoran Knezevic\n - Asaf Yishai\n-- username\n+- username \n+- Zoran Knezevic\n - Jon Hobbs-Smith\n - Pierre Vanhulst\n+- Akiho Nagao\n - Anthony Estebe\n - Haim Yulzari\n-- Akiho Nagao\n - Jim Raden\n - Jeremy Tan\n-- IMGNRY\n-- Tyler\n-- Mickal Andrieu\n+- IMGNRY \n+- Tyler \n - Guilherme S L de Souza\n - Vivekanandhan Natarajan\n - Joe Gregory\n - Jordan Oroshiba\n - Marcos Moura\n - Jessie Hernandez\n-- Eric\n+- Eric \n - Bohdan Kokotko\n+- Oskar Lindgren\n - Jere Sjroos\n - Donald Fischer\n-- David Ang\n-- Oskar Lindgren\n-- Wakana Seki\n - Alexander Weiher\n+- Wakana Seki\n+- David Ang\n - Jaeyoung Lee\n - David Kaplan\n+- Andy \n - Philip John Basile\n-- Andy\n - Matt Sencenbaugh\n+- Juan Bermudez\n - Elon Hung\n+- Chris Calo\n - Daniel Mattingley\n - Hannes Kochni\n-- Juan Bermudez\n-- Chris Calo\n - Soichiro Isshiki\n - Andrew Willis\n - Yusuke Kawabata\n - Nick Dandakis\n - Peter Matkovsky\n-- \n+-  \n - Fabien GuySake Ungerer\n - Bill Condo\n-- Nathan Mallison\n - Pierre Lebrun\n - Ryan Brewer\n - Martin Bastien\n - Alfonso Herrera\n - Bichinger Software & Consulting\n-- Nicolaas\n-- Riki Fridrich\n - Afif Sohaili\n-- Parham\n+- Nicolaas \n+- Riki Fridrich\n - Tomasz Kleszczewski\n-- \n-- Allan McKernan\n+-  \n - Diana Bergholz\n-- Ronni Lin\n+- Parham \n+- Allan McKernan\n - Roy Segall\n-- Santi Sanchez Canals\n+- Ronni Lin\n - Thomas Wiedemann\n+- lucien144 \n - Nobuhide Esaki\n-- lucien144\n+- Santi Sanchez Canals\n - Zeth Odderskov\n+- Evgeny Zislis\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/dom-props.js | file path B: src\/platforms\/web\/runtime\/modules\/dom-props.js\n\n@@ -63,7 +63,7 @@ function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n       \/\/ skip the update if old and new VDOM state is the same.\n       \/\/ `value` is handled separately because the DOM value may be temporarily\n       \/\/ out of sync with VDOM state due to focus, composition and modifiers.\n-      \/\/ This  #4521 by skipping the unnecesarry `checked` update.\n+      \/\/ This  #4521 by skipping the unnecessary `checked` update.\n       cur !== oldProps[key]\n     ) {\n       \/\/ some property updates can throw\n\n\n###\n\n","completion":" chore: typo unnecesarry -> unnecessary (#<issue-num>)\n"}
{"prompt":" file path A: .editorconfig | file path B: .editorconfig\n\n@@ -1,4 +1,4 @@\n-# http:\/\/editorconfig.org\n+# https:\/\/editorconfig.org\n \n root = true\n \n\n\n###\n\n","completion":" chore: https link to editorconfig.org (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/bind-dynamic-keys.js | file path B: src\/core\/instance\/render-helpers\/bind-dynamic-keys.js\n\n@@ -3,7 +3,7 @@\n \/\/ helper to process dynamic keys for dynamic arguments in v-bind and v-on.\n \/\/ For example, the following template:\n \/\/\n-\/\/ <div id=\"foo\" :[key]=\"value\">\n+\/\/ <div id=\"app\" :[key]=\"value\">\n \/\/\n \/\/ compiles to the following:\n \/\/\n\n\n###\n\n","completion":" chore: fix typo in `bind-dynamic-keys.js` comment (#<issue-num>)\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -1,12 +1,12 @@\n <p align=\"center\"><a href=\"https:\/\/vuejs.org\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"100\" src=\"https:\/\/vuejs.org\/images\/logo.png\" alt=\"Vue logo\"><\/a><\/p>\n \n <p align=\"center\">\n-  <a href=\"https:\/\/circleci.com\/gh\/vuejs\/vue\/tree\/dev\"><img src=\"https:\/\/img.shields.io\/circleci\/project\/github\/vuejs\/vue\/dev.svg\" alt=\"Build Status\"><\/a>\n-  <a href=\"https:\/\/codecov.io\/github\/vuejs\/vue?branch=dev\"><img src=\"https:\/\/img.shields.io\/codecov\/c\/github\/vuejs\/vue\/dev.svg\" alt=\"Coverage Status\"><\/a>\n-  <a href=\"https:\/\/npmcharts.com\/compare\/vue?minimal=true\"><img src=\"https:\/\/img.shields.io\/npm\/dm\/vue.svg\" alt=\"Downloads\"><\/a>\n-  <a href=\"https:\/\/www.npmjs.com\/package\/vue\"><img src=\"https:\/\/img.shields.io\/npm\/v\/vue.svg\" alt=\"Version\"><\/a>\n-  <a href=\"https:\/\/www.npmjs.com\/package\/vue\"><img src=\"https:\/\/img.shields.io\/npm\/l\/vue.svg\" alt=\"License\"><\/a>\n-  <a href=\"https:\/\/chat.vuejs.org\/\"><img src=\"https:\/\/img.shields.io\/badge\/chat-on%20discord-7289da.svg\" alt=\"Chat\"><\/a>\n+  <a href=\"https:\/\/circleci.com\/gh\/vuejs\/vue\/tree\/dev\"><img src=\"https:\/\/img.shields.io\/circleci\/project\/github\/vuejs\/vue\/dev.svg?sanitize=true\" alt=\"Build Status\"><\/a>\n+  <a href=\"https:\/\/codecov.io\/github\/vuejs\/vue?branch=dev\"><img src=\"https:\/\/img.shields.io\/codecov\/c\/github\/vuejs\/vue\/dev.svg?sanitize=true\" alt=\"Coverage Status\"><\/a>\n+  <a href=\"https:\/\/npmcharts.com\/compare\/vue?minimal=true\"><img src=\"https:\/\/img.shields.io\/npm\/dm\/vue.svg?sanitize=true\" alt=\"Downloads\"><\/a>\n+  <a href=\"https:\/\/www.npmjs.com\/package\/vue\"><img src=\"https:\/\/img.shields.io\/npm\/v\/vue.svg?sanitize=true\" alt=\"Version\"><\/a>\n+  <a href=\"https:\/\/www.npmjs.com\/package\/vue\"><img src=\"https:\/\/img.shields.io\/npm\/l\/vue.svg?sanitize=true\" alt=\"License\"><\/a>\n+  <a href=\"https:\/\/chat.vuejs.org\/\"><img src=\"https:\/\/img.shields.io\/badge\/chat-on%20discord-7289da.svg?sanitize=true\" alt=\"Chat\"><\/a>\n   <br>\n   <a href=\"https:\/\/app.saucelabs.com\/builds\/50f8372d79f743a3b25fb6ca4851ca4c\"><img src=\"https:\/\/app.saucelabs.com\/buildstatus\/vuejs\" alt=\"Build Status\"><\/a>\n <\/p>\n@@ -28,10 +28,10 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n \n <p align=\"center\">\n   <a href=\"https:\/\/autocode.com\" target=\"_blank\">\n-    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg\">\n+    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg?sanitize=true\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -191,7 +191,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -201,7 +201,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -228,16 +228,16 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n \n <h4 align=\"center\">Platinum<\/h4>\n \n-<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/platinum-sponsors\/0\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/platinum-sponsors\/0\/avatar.svg\"><\/a>\n-<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/platinum-sponsors\/1\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/platinum-sponsors\/1\/avatar.svg\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/platinum-sponsors\/0\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/platinum-sponsors\/0\/avatar.svg?sanitize=true\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/platinum-sponsors\/1\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/platinum-sponsors\/1\/avatar.svg?sanitize=true\"><\/a>\n \n <h4 align=\"center\">Gold<\/h4>\n \n-<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/0\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/0\/avatar.svg\" height=\"60px\"><\/a>\n-<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/1\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/1\/avatar.svg\" height=\"60px\"><\/a>\n-<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/2\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/2\/avatar.svg\" height=\"60px\"><\/a>\n-<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/3\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/3\/avatar.svg\" height=\"60px\"><\/a>\n-<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/4\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/4\/avatar.svg\" height=\"60px\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/0\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/0\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/1\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/1\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/2\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/2\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/3\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/3\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/4\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/gold-sponsors\/4\/avatar.svg?sanitize=true\" height=\"60px\"><\/a>\n \n ---\n \n\n\n###\n\n","completion":" chore: fix svg logos\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -157,6 +157,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n@@ -177,13 +182,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devexpress.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -28,7 +28,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n \n <p align=\"center\">\n   <a href=\"https:\/\/autocode.com\" target=\"_blank\">\n-    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg?sanitize=true\">\n+    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg\">\n   <\/a>\n <\/p>\n   \n@@ -162,6 +162,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n@@ -182,13 +187,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devexpress.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n@@ -196,7 +201,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -135,11 +135,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/opteo.com\/vue\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/devsquad.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devsquad.png\">\n@@ -150,13 +145,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/firestick_tricks.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/intygrate.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n@@ -182,28 +177,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devexpress.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.dailynow.co\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n-        <\/a>\n-      <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/storekit.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storekit.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg\">\n@@ -214,13 +199,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\" https:\/\/programmers.io\/vuejs\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vuescreencasts.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/happy_programmer_llc.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -140,11 +140,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/opteo.com\/vue\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/devsquad.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devsquad.png\">\n@@ -155,13 +150,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/firestick_tricks.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/intygrate.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n@@ -187,28 +182,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devexpress.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.dailynow.co\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n-        <\/a>\n-      <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/storekit.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storekit.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n@@ -219,13 +204,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\" https:\/\/programmers.io\/vuejs\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vuescreencasts.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/happy_programmer_llc.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -360,81 +360,86 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Masahiro Tanaka\n - Shawn Wildermuth\n - Keisuke Kita\n-- Lars Andreas Ness\n - Benjamin Listwon\n+- Lars Andreas Ness\n - Kirk Lewis\n+- Wen-Tien Chang\n - Stephen Michael Hartley\n - Victor Tolbert\n-- Wen-Tien Chang\n-- Luiz\n-- James J. Ye\n+- Luiz Tanure\n - Barbara Liau\n+- James J. Ye\n - Matsumoto Takamasa\n-- Niannian Modisette\n-- Guy Gavergun\n - Matt Jones\n+- Guy Gavergun\n+- Niannian Modisette\n - Bernhard E. Reiter\n - Zoran Knezevic\n+- Asaf Yishai\n+- username\n - Jon Hobbs-Smith\n - Pierre Vanhulst\n-- Akiho Nagao\n-- Asaf Yishai\n-- Haim Yulzari\n - Anthony Estebe\n+- Haim Yulzari\n+- Akiho Nagao\n - Jim Raden\n - Jeremy Tan\n-- username\n - IMGNRY\n - Tyler\n-- Guilherme S L de Souza\n - Mickal Andrieu\n+- Guilherme S L de Souza\n+- Vivekanandhan Natarajan\n - Joe Gregory\n - Jordan Oroshiba\n - Marcos Moura\n - Jessie Hernandez\n - Eric\n - Bohdan Kokotko\n-- Alexander Weiher\n+- Jere Sjroos\n+- Donald Fischer\n - David Ang\n - Oskar Lindgren\n-- Donald Fischer\n-- Jere Sjroos\n - Wakana Seki\n+- Alexander Weiher\n - Jaeyoung Lee\n - David Kaplan\n+- Philip John Basile\n - Andy\n - Matt Sencenbaugh\n-- Juan Bermudez\n-- Chris Calo\n - Elon Hung\n-- Hannes Kochni\n - Daniel Mattingley\n+- Hannes Kochni\n+- Juan Bermudez\n+- Chris Calo\n - Soichiro Isshiki\n - Andrew Willis\n - Yusuke Kawabata\n-- Princeyesuraj Edward\n-- \n-- Peter Matkovsky\n - Nick Dandakis\n+- Peter Matkovsky\n+- \n - Fabien GuySake Ungerer\n-- Nathan Mallison\n - Bill Condo\n+- Nathan Mallison\n - Pierre Lebrun\n - Ryan Brewer\n - Martin Bastien\n - Alfonso Herrera\n - Bichinger Software & Consulting\n-- Afif Sohaili\n - Nicolaas\n - Riki Fridrich\n-- Diana Bergholz\n-- darkbluewalrus\n+- Afif Sohaili\n - Parham\n-- Allan McKernan\n-- \n - Tomasz Kleszczewski\n-- Roy Segall\n+- \n+- Allan McKernan\n+- Diana Bergholz\n - Ronni Lin\n+- Roy Segall\n+- Santi Sanchez Canals\n+- Thomas Wiedemann\n+- Nobuhide Esaki\n+- lucien144\n+- Zeth Odderskov\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -28,7 +28,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n \n <p align=\"center\">\n   <a href=\"https:\/\/autocode.com\" target=\"_blank\">\n-    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg\">\n+    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg?sanitize=true\">\n   <\/a>\n <\/p>\n   \n@@ -191,7 +191,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -211,7 +211,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n\n###\n\n","completion":" chore(readme): svg not displayed  (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -17,11 +17,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--special start-->\n \n <p align=\"center\">\n-  <a href=\"https:\/\/stdlib.com\/\" target=\"_blank\">\n-    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n+  <a href=\"https:\/\/autocode.com\" target=\"_blank\">\n+    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -51,6 +51,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.storyblok.com\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storyblok.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--platinum end-->\n@@ -210,7 +217,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <\/tr><tr><\/tr>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.programmers.io\/vuejs\/\" target=\"_blank\">\n+        <a href=\" https:\/\/programmers.io\/vuejs\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n         <\/a>\n       <\/td>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -27,11 +27,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--special start-->\n \n <p align=\"center\">\n-  <a href=\"https:\/\/stdlib.com\/\" target=\"_blank\">\n-    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n+  <a href=\"https:\/\/autocode.com\" target=\"_blank\">\n+    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/autocode.svg\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -61,6 +61,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.storyblok.com\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storyblok.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--platinum end-->\n@@ -184,7 +191,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -204,7 +211,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -215,7 +222,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <\/tr><tr><\/tr>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.programmers.io\/vuejs\/\" target=\"_blank\">\n+        <a href=\" https:\/\/programmers.io\/vuejs\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n         <\/a>\n       <\/td>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/server\/util.js | file path B: src\/platforms\/web\/server\/util.js\n\n@@ -5,9 +5,9 @@ import { makeMap } from 'shared\/util'\n const isAttr = makeMap(\n   'accept,accept-charset,accesskey,action,align,alt,async,autocomplete,' +\n   'autofocus,autoplay,autosave,bgcolor,border,buffered,challenge,charset,' +\n-  'checked,cite,class,code,codebase,color,cols,colspan,content,http-equiv,' +\n-  'name,contenteditable,contextmenu,controls,coords,data,datetime,default,' +\n-  'defer,dir,dirname,disabled,download,draggable,dropzone,enctype,method,for,' +\n+  'checked,cite,class,code,codebase,color,cols,colspan,content,' +\n+  'contenteditable,contextmenu,controls,coords,data,datetime,default,' +\n+  'defer,dir,dirname,disabled,download,draggable,dropzone,enctype,for,' +\n   'form,formaction,headers,height,hidden,high,href,hreflang,http-equiv,' +\n   'icon,id,ismap,itemprop,keytype,kind,label,lang,language,list,loop,low,' +\n   'manifest,max,maxlength,media,method,GET,POST,min,multiple,email,file,' +\n@@ -15,7 +15,7 @@ const isAttr = makeMap(\n   'preload,radiogroup,readonly,rel,required,reversed,rows,rowspan,sandbox,' +\n   'scope,scoped,seamless,selected,shape,size,type,text,password,sizes,span,' +\n   'spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,' +\n-  'target,title,type,usemap,value,width,wrap'\n+  'target,title,usemap,value,width,wrap'\n )\n \n const unsafeAttrCharRE = \/[>\/=\"'\\u0009\\u000a\\u000c\\u0020]\/ \/\/ eslint-disable-line no-control-regex\n\n\n###\n\n","completion":" chore(platforms\/web\/server\/util): Removes duplicate values from the attr list (#<issue-num>)\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -184,7 +184,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -204,7 +204,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg?sanitize=true\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n\n###\n\n","completion":" chore(readme): svg image (#<issue-num>) [ci skip]\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -210,7 +210,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <\/tr><tr><\/tr>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.programmers.io\" target=\"_blank\">\n+        <a href=\"https:\/\/www.programmers.io\/vuejs\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n         <\/a>\n       <\/td>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -215,7 +215,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <\/tr><tr><\/tr>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.programmers.io\" target=\"_blank\">\n+        <a href=\"https:\/\/www.programmers.io\/vuejs\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n         <\/a>\n       <\/td>\n\n\n###\n\n","completion":" chore: update sponsor link [ci skip]\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -156,13 +156,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.simplyswitch.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/energy_comparison.png\">\n+        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n+        <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.vuescreencasts.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/happy_programmer_llc.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.primefaces.org\/primevue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/primevue.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -161,13 +161,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.simplyswitch.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/energy_comparison.png\">\n+        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n+        <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -219,6 +219,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.vuescreencasts.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/happy_programmer_llc.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.primefaces.org\/primevue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/primevue.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -337,10 +337,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Wasim Khamlichi\n - errorrik\n - Konstantin Levinski\n-- Blaise Laflamme\n - Sean Ferguson\n - Johnny Ray Austin\n-- Daniel\n - Manuel Guzman\n <!--50 end-->\n \n@@ -350,60 +348,56 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Masahiro Tanaka\n - Shawn Wildermuth\n - Keisuke Kita\n-- Benjamin Listwon\n - Lars Andreas Ness\n+- Benjamin Listwon\n - Kirk Lewis\n-- Victor Tolbert\n - Stephen Michael Hartley\n+- Victor Tolbert\n - Wen-Tien Chang\n - Luiz\n-- Barbara Liau\n - James J. Ye\n+- Barbara Liau\n - Matsumoto Takamasa\n-- Matt Jones\n-- Guy Gavergun\n - Niannian Modisette\n+- Guy Gavergun\n+- Matt Jones\n - Bernhard E. Reiter\n - Zoran Knezevic\n - Jon Hobbs-Smith\n - Pierre Vanhulst\n+- Akiho Nagao\n - Asaf Yishai\n - Haim Yulzari\n - Anthony Estebe\n-- Akiho Nagao\n - Jim Raden\n - Jeremy Tan\n+- username\n - IMGNRY\n - Tyler\n-- username\n-- Mickal Andrieu\n - Guilherme S L de Souza\n+- Mickal Andrieu\n - Joe Gregory\n - Jordan Oroshiba\n - Marcos Moura\n - Jessie Hernandez\n - Eric\n - Bohdan Kokotko\n-- Christo Crampton\n-- Romain Lienard\n+- Alexander Weiher\n - David Ang\n - Oskar Lindgren\n - Donald Fischer\n-- Wakana Seki\n-- Alexander Weiher\n - Jere Sjroos\n-- David Kaplan\n+- Wakana Seki\n - Jaeyoung Lee\n+- David Kaplan\n - Andy\n - Matt Sencenbaugh\n-- Elon Hung\n+- Juan Bermudez\n - Chris Calo\n+- Elon Hung\n - Hannes Kochni\n - Daniel Mattingley\n-- Juan Bermudez\n - Soichiro Isshiki\n-- Garion Herman\n-- Ed Linklater\n - Andrew Willis\n - Yusuke Kawabata\n - Princeyesuraj Edward\n@@ -418,19 +412,17 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Martin Bastien\n - Alfonso Herrera\n - Bichinger Software & Consulting\n-- Riki Fridrich\n-- Nicolaas\n - Afif Sohaili\n-- Tomasz Kleszczewski\n+- Nicolaas\n+- Riki Fridrich\n - Diana Bergholz\n - darkbluewalrus\n - Parham\n - Allan McKernan\n - \n+- Tomasz Kleszczewski\n - Roy Segall\n - Ronni Lin\n-- DrevanTonder\n-- tfox\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: test\/unit\/modules\/vdom\/patch\/element.spec.js | file path B: test\/unit\/modules\/vdom\/patch\/element.spec.js\n\n@@ -41,7 +41,7 @@ describe('vdom patch: element', () => {\n     expect(elm.innerHTML).toBe('hello world')\n   })\n \n-  it('should create create an elements which having span and text content', () => {\n+  it('should create an elements which having span and text content', () => {\n     const vnode = new VNode('div', {}, [\n       new VNode('span'),\n       createTextVNode('hello world')\n\n\n###\n\n","completion":" chore: fix typo in element test (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.primefaces.org\/primevue\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/primevue.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -219,6 +219,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.primefaces.org\/primevue\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/primevue.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -283,6 +283,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/earthlink.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.webucator.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webucator.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: dist\/README.md | file path B: dist\/README.md\n\n@@ -9,7 +9,7 @@\n \n ### Terms\n \n-- **Full**: builds that contains both the compiler and the runtime.\n+- **Full**: builds that contain both the compiler and the runtime.\n \n - **Compiler**: code that is responsible for compiling template strings into JavaScript render functions.\n \n\n\n###\n\n","completion":" docs: fix typo (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -359,60 +359,58 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--10 start-->\n - Masahiro Tanaka\n - Shawn Wildermuth\n-- Sean Washington\n-- Lars Andreas Ness\n - Keisuke Kita\n - Benjamin Listwon\n+- Lars Andreas Ness\n - Kirk Lewis\n-- Wen-Tien Chang\n-- Stephen Michael Hartley\n - Victor Tolbert\n+- Stephen Michael Hartley\n+- Wen-Tien Chang\n - Luiz\n - Barbara Liau\n - James J. Ye\n - Matsumoto Takamasa\n-- Guy Gavergun\n - Matt Jones\n+- Guy Gavergun\n - Niannian Modisette\n - Bernhard E. Reiter\n-- Pierre Vanhulst\n - Zoran Knezevic\n - Jon Hobbs-Smith\n+- Pierre Vanhulst\n - Asaf Yishai\n-- Anthony Estebe\n - Haim Yulzari\n+- Anthony Estebe\n - Akiho Nagao\n-- Jeremy Tan\n - Jim Raden\n+- Jeremy Tan\n - IMGNRY\n - Tyler\n-- Vivekanandhan Natarajan\n-- Guilherme S L de Souza\n+- username\n - Mickal Andrieu\n-- Jordan Oroshiba\n+- Guilherme S L de Souza\n - Joe Gregory\n-- username\n+- Jordan Oroshiba\n - Marcos Moura\n - Jessie Hernandez\n-- Romain Lienard\n-- Christo Crampton\n - Eric\n-- Donald Fischer\n - Bohdan Kokotko\n-- Jere Sjroos\n-- Oskar Lindgren\n-- Alexander Weiher\n+- Christo Crampton\n+- Romain Lienard\n - David Ang\n+- Oskar Lindgren\n+- Donald Fischer\n - Wakana Seki\n+- Alexander Weiher\n+- Jere Sjroos\n - David Kaplan\n - Jaeyoung Lee\n - Andy\n - Matt Sencenbaugh\n-- Juan Bermudez\n-- Hannes Kochni\n - Elon Hung\n-- Daniel Mattingley\n - Chris Calo\n+- Hannes Kochni\n+- Daniel Mattingley\n+- Juan Bermudez\n - Soichiro Isshiki\n - Garion Herman\n - Ed Linklater\n@@ -424,16 +422,15 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Nick Dandakis\n - Fabien GuySake Ungerer\n - Nathan Mallison\n-- Kenneth Crawford\n - Bill Condo\n - Pierre Lebrun\n+- Ryan Brewer\n - Martin Bastien\n - Alfonso Herrera\n - Bichinger Software & Consulting\n-- Ryan Brewer\n+- Riki Fridrich\n - Nicolaas\n - Afif Sohaili\n-- Riki Fridrich\n - Tomasz Kleszczewski\n - Diana Bergholz\n - darkbluewalrus\n@@ -444,7 +441,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Ronni Lin\n - DrevanTonder\n - tfox\n-- Jan Kuku\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -266,6 +266,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/roadster.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.inkoop.io\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/inkoop.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -221,7 +221,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/unicorn.io\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -226,7 +226,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/unicorn.io\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n\n###\n\n","completion":" chore: update sponsor image\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -41,13 +41,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.nativescript.org\/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n+        <a href=\"https:\/\/retool.com\/?utm_source=sponsor&utm_campaign=vue\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/retool.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/retool.com\/?utm_source=sponsor&utm_campaign=vue\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/retool.png\">\n+        <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n@@ -155,11 +155,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n@@ -175,13 +170,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/energy_comparison.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -207,13 +202,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.dailynow.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/storekit.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storekit.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -51,13 +51,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.nativescript.org\/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n+        <a href=\"https:\/\/retool.com\/?utm_source=sponsor&utm_campaign=vue\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/retool.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/retool.com\/?utm_source=sponsor&utm_campaign=vue\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/retool.png\">\n+        <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n@@ -160,11 +160,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n@@ -180,13 +175,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/energy_comparison.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -212,13 +207,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.dailynow.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/storekit.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storekit.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -360,79 +360,80 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Masahiro Tanaka\n - Shawn Wildermuth\n - Sean Washington\n-- Keisuke Kita\n - Lars Andreas Ness\n+- Keisuke Kita\n - Benjamin Listwon\n - Kirk Lewis\n-- Victor Tolbert\n - Wen-Tien Chang\n - Stephen Michael Hartley\n+- Victor Tolbert\n - Luiz\n - Barbara Liau\n - James J. Ye\n - Matsumoto Takamasa\n - Guy Gavergun\n-- Niannian Modisette\n - Matt Jones\n+- Niannian Modisette\n - Bernhard E. Reiter\n+- Pierre Vanhulst\n - Zoran Knezevic\n - Jon Hobbs-Smith\n-- Pierre Vanhulst\n-- Anthony Estebe\n - Asaf Yishai\n+- Anthony Estebe\n - Haim Yulzari\n - Akiho Nagao\n-- Jim Raden\n - Jeremy Tan\n+- Jim Raden\n - IMGNRY\n - Tyler\n-- Guilherme S L de Souza\n - Vivekanandhan Natarajan\n+- Guilherme S L de Souza\n - Mickal Andrieu\n-- username\n - Jordan Oroshiba\n - Joe Gregory\n+- username\n - Marcos Moura\n - Jessie Hernandez\n-- Eric\n+- Romain Lienard\n - Christo Crampton\n+- Eric\n+- Donald Fischer\n - Bohdan Kokotko\n-- Romain Lienard\n-- Oskar Lindgren\n - Jere Sjroos\n+- Oskar Lindgren\n+- Alexander Weiher\n - David Ang\n - Wakana Seki\n-- Alexander Weiher\n-- Donald Fischer\n-- Jaeyoung Lee\n - David Kaplan\n+- Jaeyoung Lee\n - Andy\n - Matt Sencenbaugh\n - Juan Bermudez\n - Hannes Kochni\n-- Daniel Mattingley\n - Elon Hung\n+- Daniel Mattingley\n - Chris Calo\n - Soichiro Isshiki\n-- Ed Linklater\n - Garion Herman\n+- Ed Linklater\n+- Andrew Willis\n - Yusuke Kawabata\n - Princeyesuraj Edward\n-- Nick Dandakis\n - \n - Peter Matkovsky\n+- Nick Dandakis\n - Fabien GuySake Ungerer\n+- Nathan Mallison\n - Kenneth Crawford\n - Bill Condo\n-- Nathan Mallison\n - Pierre Lebrun\n-- Ryan Brewer\n - Martin Bastien\n - Alfonso Herrera\n - Bichinger Software & Consulting\n-- Riki Fridrich\n+- Ryan Brewer\n - Nicolaas\n - Afif Sohaili\n+- Riki Fridrich\n - Tomasz Kleszczewski\n - Diana Bergholz\n - darkbluewalrus\n@@ -441,6 +442,9 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - \n - Roy Segall\n - Ronni Lin\n+- DrevanTonder\n+- tfox\n+- Jan Kuku\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.10\",\n+  \"version\": \"2.6.11\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.11\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -7141,11 +7141,16 @@ semver@~5.0.1:\n   resolved \"https:\/\/registry.yarnpkg.com\/semver\/-\/semver-5.0.3.tgz#77466de589cd5d3c95f138aa78bc569a3cb5d27a\"\n   integrity sha1-d0Zt5YnNXTyV8TiqeLxWmjy10no=\n \n-serialize-javascript@^1.3.0, serialize-javascript@^1.4.0:\n+serialize-javascript@^1.4.0:\n   version \"1.6.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/serialize-javascript\/-\/serialize-javascript-1.6.1.tgz#4d1f697ec49429a847ca6f442a2a755126c4d879\"\n   integrity sha512-A5MOagrPFga4YaKQSWHryl7AXvbQkEqpw4NNYMTNYUNV51bA8ABHgYFpqKx+YFFrw59xMV1qGH1R4AgoNIVgCw==\n \n+serialize-javascript@^2.1.2:\n+  version \"2.1.2\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/serialize-javascript\/-\/serialize-javascript-2.1.2.tgz#ecec53b0e0317bdc95ef76ab7074b7384785fa61\"\n+  integrity sha512-rs9OggEUF0V4jUSecXazOYsLfu7OGK2qIn3c7IPBiffz32XniEp\/TX9Xmc9LQfK2nQ2QKHvZ2oygKUGU0lG4jQ==\n+\n set-blocking@~2.0.0:\n   version \"2.0.0\"\n   resolved \"https:\/\/registry.yarnpkg.com\/set-blocking\/-\/set-blocking-2.0.0.tgz#045f9782d011ae9a6803ddd382b24392b3d890f7\"\n\n\n###\n\n","completion":" chore: update yarn.lock\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -133,7 +133,7 @@\n     \"rollup-plugin-node-resolve\": \"^4.0.0\",\n     \"rollup-plugin-replace\": \"^2.0.0\",\n     \"selenium-server\": \"^2.53.1\",\n-    \"serialize-javascript\": \"^1.3.0\",\n+    \"serialize-javascript\": \"^2.1.2\",\n     \"shelljs\": \"^0.8.1\",\n     \"terser\": \"^3.10.2\",\n     \"typescript\": \"^3.6.4\",\n\n---\n file path A: packages\/vue-server-renderer\/package.json | file path B: packages\/vue-server-renderer\/package.json\n\n@@ -25,7 +25,7 @@\n     \"lodash.template\": \"^4.5.0\",\n     \"lodash.uniq\": \"^4.5.0\",\n     \"resolve\": \"^1.2.0\",\n-    \"serialize-javascript\": \"^1.3.0\",\n+    \"serialize-javascript\": \"^2.1.2\",\n     \"source-map\": \"0.5.6\"\n   },\n   \"devDependencies\": {\n\n\n###\n\n","completion":" build(deps-dev): bump serialize-javascript from 1.3.0 to 2.1.2 (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -240,13 +240,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n-    <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/watchcartoononline.best\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/watchcartoononline.png\">\n-        <\/a>\n-      <\/td>\n-    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n@@ -273,11 +266,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <table>\n   <tbody>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/dopamine.bg\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dopamine.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/roadster.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/roadster.png\">\n@@ -315,16 +303,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/earthlink.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/twitter.com\/philipjbasile\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/philip_john_basile.gif\">\n-        <\/a>\n-      <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/writersperhour.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/writers_per_hour.jpg\">\n-        <\/a>\n-      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -245,13 +245,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n-    <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/watchcartoononline.best\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/watchcartoononline.png\">\n-        <\/a>\n-      <\/td>\n-    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -368,7 +368,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--50 start-->\n - Wasim Khamlichi\n - errorrik\n-- Alex Balashov\n - Konstantin Levinski\n - Blaise Laflamme\n - Sean Ferguson\n@@ -383,75 +382,71 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Masahiro Tanaka\n - Shawn Wildermuth\n - Sean Washington\n+- Keisuke Kita\n - Lars Andreas Ness\n - Benjamin Listwon\n-- Keisuke Kita\n - Kirk Lewis\n - Victor Tolbert\n - Wen-Tien Chang\n - Stephen Michael Hartley\n-- Phan An\n - Luiz\n-- James J. Ye\n - Barbara Liau\n+- James J. Ye\n - Matsumoto Takamasa\n-- Matt Jones\n-- Niannian Modisette\n - Guy Gavergun\n+- Niannian Modisette\n+- Matt Jones\n - Bernhard E. Reiter\n - Zoran Knezevic\n-- Pierre Vanhulst\n - Jon Hobbs-Smith\n-- Akiho Nagao\n-- Haim Yulzari\n+- Pierre Vanhulst\n - Anthony Estebe\n - Asaf Yishai\n+- Haim Yulzari\n+- Akiho Nagao\n - Jim Raden\n - Jeremy Tan\n - IMGNRY\n - Tyler\n-- Mickal Andrieu\n-- Vivekanandhan Natarajan\n - Guilherme S L de Souza\n-- Joe Gregory\n+- Vivekanandhan Natarajan\n+- Mickal Andrieu\n+- username\n - Jordan Oroshiba\n+- Joe Gregory\n - Marcos Moura\n - Jessie Hernandez\n-- username\n-- Ivan Sieder\n - Eric\n-- Romain Lienard\n-- Bohdan Kokotko\n - Christo Crampton\n-- David Ang\n-- Donald Fischer\n+- Bohdan Kokotko\n+- Romain Lienard\n+- Oskar Lindgren\n - Jere Sjroos\n+- David Ang\n - Wakana Seki\n - Alexander Weiher\n-- Philip John Basile\n-- Oskar Lindgren\n+- Donald Fischer\n - Jaeyoung Lee\n - David Kaplan\n-- Domenico Gaudioso\n - Andy\n - Matt Sencenbaugh\n - Juan Bermudez\n-- Chris Calo\n-- Elon Hung\n - Hannes Kochni\n+- Daniel Mattingley\n+- Elon Hung\n+- Chris Calo\n - Soichiro Isshiki\n-- Garion Herman\n - Ed Linklater\n-- Andrew Willis\n+- Garion Herman\n - Yusuke Kawabata\n - Princeyesuraj Edward\n-- Peter Matkovsky\n - Nick Dandakis\n - \n+- Peter Matkovsky\n - Fabien GuySake Ungerer\n-- Nathan Mallison\n - Kenneth Crawford\n - Bill Condo\n+- Nathan Mallison\n - Pierre Lebrun\n - Ryan Brewer\n - Martin Bastien\n@@ -460,12 +455,14 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Riki Fridrich\n - Nicolaas\n - Afif Sohaili\n-- darkbluewalrus\n-- Diana Bergholz\n - Tomasz Kleszczewski\n-- Allan McKernan\n+- Diana Bergholz\n+- darkbluewalrus\n - Parham\n+- Allan McKernan\n - \n+- Roy Segall\n+- Ronni Lin\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/compiler\/modules\/model.js | file path B: src\/platforms\/web\/compiler\/modules\/model.js\n\n@@ -1,7 +1,7 @@\n \/* @flow *\/\n \n \/**\n- * Expand input[v-model] with dyanmic type bindings into v-if-else chains\n+ * Expand input[v-model] with dynamic type bindings into v-if-else chains\n  * Turn this:\n  *   <input v-model=\"data[type]\" :type=\"type\">\n  * into this:\n\n\n###\n\n","completion":" chore: typo in comment\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -240,6 +240,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/watchcartoononline.best\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/watchcartoononline.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -245,6 +245,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/watchcartoononline.best\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/watchcartoononline.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -229,6 +229,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.svg\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/thepiratebayproxylist.se\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/piratebayproxy.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.programmers.io\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -234,6 +234,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.svg\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/thepiratebayproxylist.se\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/piratebayproxy.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.programmers.io\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -187,11 +187,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/blokt.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/blokt_cryptocurrency_news.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.y8.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/y8.png\">\n@@ -207,13 +202,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.dailynow.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n@@ -234,13 +229,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.svg\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/piratebay.ink\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/piratebay_proxy.png\">\n-        <\/a>\n-      <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.programmers.io\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -192,11 +192,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/blokt.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/blokt_cryptocurrency_news.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.y8.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/y8.png\">\n@@ -208,17 +203,17 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/fastcoding.jp\/javascript\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.png\">\n+        <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.dailynow.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n@@ -239,13 +234,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.svg\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/piratebay.ink\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/piratebay_proxy.png\">\n-        <\/a>\n-      <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.programmers.io\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -374,6 +374,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Sean Ferguson\n - Johnny Ray Austin\n - Daniel\n+- Manuel Guzman\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n@@ -382,9 +383,9 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Masahiro Tanaka\n - Shawn Wildermuth\n - Sean Washington\n+- Lars Andreas Ness\n - Benjamin Listwon\n - Keisuke Kita\n-- Lars Andreas Ness\n - Kirk Lewis\n - Victor Tolbert\n - Wen-Tien Chang\n@@ -396,74 +397,75 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Matsumoto Takamasa\n - Matt Jones\n - Niannian Modisette\n-- Duncan Kenzie\n - Guy Gavergun\n - Bernhard E. Reiter\n - Zoran Knezevic\n-- Jon Hobbs-Smith\n - Pierre Vanhulst\n-- Asaf Yishai\n-- Haim Yulzari\n+- Jon Hobbs-Smith\n - Akiho Nagao\n+- Haim Yulzari\n - Anthony Estebe\n+- Asaf Yishai\n - Jim Raden\n - Jeremy Tan\n - IMGNRY\n - Tyler\n-- Guilherme S L de Souza\n - Mickal Andrieu\n - Vivekanandhan Natarajan\n-- Rob Yedlin\n+- Guilherme S L de Souza\n - Joe Gregory\n - Jordan Oroshiba\n - Marcos Moura\n - Jessie Hernandez\n-- Eric\n+- username\n - Ivan Sieder\n+- Eric\n - Romain Lienard\n-- username\n - Bohdan Kokotko\n-- Wakana Seki\n-- Alexander Weiher\n+- Christo Crampton\n - David Ang\n - Donald Fischer\n-- Oskar Lindgren\n - Jere Sjroos\n-- Domenico Gaudioso\n+- Wakana Seki\n+- Alexander Weiher\n+- Philip John Basile\n+- Oskar Lindgren\n - Jaeyoung Lee\n - David Kaplan\n+- Domenico Gaudioso\n - Andy\n - Matt Sencenbaugh\n - Juan Bermudez\n-- Hannes Kochni\n-- Elon Hung\n-- Daniel Mattingley\n - Chris Calo\n+- Elon Hung\n+- Hannes Kochni\n - Soichiro Isshiki\n-- Ed Linklater\n - Garion Herman\n+- Ed Linklater\n - Andrew Willis\n-- Princeyesuraj Edward\n - Yusuke Kawabata\n-- \n-- Nick Dandakis\n+- Princeyesuraj Edward\n - Peter Matkovsky\n+- Nick Dandakis\n+- \n - Fabien GuySake Ungerer\n-- Kenneth Crawford\n - Nathan Mallison\n+- Kenneth Crawford\n - Bill Condo\n - Pierre Lebrun\n-- John Thompson\n - Ryan Brewer\n - Martin Bastien\n - Alfonso Herrera\n - Bichinger Software & Consulting\n-- Abhay\n-- Nicolaas\n - Riki Fridrich\n+- Nicolaas\n - Afif Sohaili\n+- darkbluewalrus\n - Diana Bergholz\n - Tomasz Kleszczewski\n+- Allan McKernan\n+- Parham\n+- \n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -74,7 +74,7 @@\n     \"@babel\/plugin-transform-flow-strip-types\": \"^7.0.0\",\n     \"@babel\/preset-env\": \"^7.0.0\",\n     \"@babel\/register\": \"^7.0.0\",\n-    \"@types\/node\": \"^10.12.18\",\n+    \"@types\/node\": \"^12.12.0\",\n     \"@types\/webpack\": \"^4.4.22\",\n     \"acorn\": \"^5.2.1\",\n     \"babel-eslint\": \"^10.0.1\",\n@@ -136,7 +136,7 @@\n     \"serialize-javascript\": \"^1.3.0\",\n     \"shelljs\": \"^0.8.1\",\n     \"terser\": \"^3.10.2\",\n-    \"typescript\": \"^3.1.3\",\n+    \"typescript\": \"^3.6.4\",\n     \"webpack\": \"~4.28.4\",\n     \"weex-js-runtime\": \"^0.23.6\",\n     \"weex-styler\": \"^0.3.0\",\n\n---\n file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -144,7 +144,7 @@ export interface RenderContext<Props=DefaultProps> {\n   injections: any\n }\n \n-export type Prop<T> = { (): T } | { new(...args: any[]): T & object } | { new(...args: string[]): Function }\n+export type Prop<T> = { (): T } | { new(...args: never[]): T & object } | { new(...args: string[]): Function }\n \n export type PropType<T> = Prop<T> | Prop<T>[];\n \n\n---\n file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -90,21 +90,20 @@ Vue.component('union-prop', {\n   }\n });\n \n-\/\/ stopped working since TS 3.4\n-\/\/ Vue.component('union-prop-with-no-casting', {\n-\/\/   props: {\n-\/\/     mixed: [RegExp, Array],\n-\/\/     object: [Cat, User],\n-\/\/     primitive: [String, Number],\n-\/\/     regex: RegExp\n-\/\/   },\n-\/\/   data() {\n-\/\/     this.mixed;\n-\/\/     this.object;\n-\/\/     this.primitive;\n-\/\/     this.regex.compile;\n-\/\/   }\n-\/\/ })\n+Vue.component('union-prop-with-no-casting', {\n+  props: {\n+    mixed: [RegExp, Array],\n+    object: [Cat, User],\n+    primitive: [String, Number],\n+    regex: RegExp\n+  },\n+  data() {\n+    this.mixed;\n+    this.object;\n+    this.primitive;\n+    this.regex.compile;\n+  }\n+})\n \n Vue.component('prop-with-primitive-default', {\n   props: {\n@@ -113,7 +112,7 @@ Vue.component('prop-with-primitive-default', {\n       default: () => String(Math.round(Math.random() * 10000000))\n     }\n   },\n-  created() {\n+  created(): void {\n     this.id;\n   }\n });\n@@ -152,7 +151,7 @@ Vue.component('component', {\n     }\n   },\n   methods: {\n-    plus() {\n+    plus(): void {\n       this.a++;\n       this.aDouble.toFixed();\n       this.aPlus = 1;\n\n---\n file path A: yarn.lock | file path B: yarn.lock\n\n@@ -675,11 +675,16 @@\n   resolved \"https:\/\/registry.yarnpkg.com\/@types\/estree\/-\/estree-0.0.39.tgz#e177e699ee1b8c22d23174caaa7422644389509f\"\n   integrity sha512-EYNwp3bU+98cpU4lAWYYL7Zz+2gryWH1qbdDTidVd6hkiR6weksdbMadyXKXNPEkQFhXM+hVO9ZygomHXp+AIw==\n \n-\"@types\/node@*\", \"@types\/node@^10.12.18\":\n+\"@types\/node@*\":\n   version \"10.12.18\"\n   resolved \"https:\/\/registry.yarnpkg.com\/@types\/node\/-\/node-10.12.18.tgz#1d3ca764718915584fcd9f6344621b7672665c67\"\n   integrity sha512-fh+pAqt4xRzPfqA6eh3Z2y6fyZavRIumvjhaCL753+TVkGKGhpPeyrJG2JftD0T9q4GF00KjefsQ+PQNDdWQaQ==\n \n+\"@types\/node@^12.12.0\":\n+  version \"12.12.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/@types\/node\/-\/node-12.12.0.tgz#ff3201972d6dc851a9275308a17b9b5094e68057\"\n+  integrity sha512-6N8Sa5AaENRtJnpKXZgvc119PKxT1Lk9VPy4kfT8JF23tIe1qDfaGkBR2DRKJFIA7NptMz+fps\/\/C6aLi1Uoug==\n+\n \"@types\/tapable@*\":\n   version \"1.0.4\"\n   resolved \"https:\/\/registry.yarnpkg.com\/@types\/tapable\/-\/tapable-1.0.4.tgz#b4ffc7dc97b498c969b360a41eee247f82616370\"\n@@ -7927,10 +7932,10 @@ typedarray@^0.0.6:\n   resolved \"https:\/\/registry.yarnpkg.com\/typedarray\/-\/typedarray-0.0.6.tgz#867ac74e3864187b1d3d47d996a78ec5c8830777\"\n   integrity sha1-hnrHTjhkGHsdPUfZlqeOxciDB3c=\n \n-typescript@^3.1.3:\n-  version \"3.2.2\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/typescript\/-\/typescript-3.2.2.tgz#fe8101c46aa123f8353523ebdcf5730c2ae493e5\"\n-  integrity sha512-VCj5UiSyHBjwfYacmDuc\/NOk4QQixbE+Wn7MFJuS0nRuPQbof132Pw4u53dm264O8LPc2MVsc7RJNml5szurkg==\n+typescript@^3.6.4:\n+  version \"3.6.4\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/typescript\/-\/typescript-3.6.4.tgz#b18752bb3792bc1a0281335f7f6ebf1bbfc5b91d\"\n+  integrity sha512-unoCll1+l+YK4i4F8f22TaNVPRHcD9PA3yCuZ8g5e0qGqlVlJ\/8FSateOLLSagn+Yg5+ZwuPkL8LFUc0Jcvksg==\n \n uglify-js@^3.1.4:\n   version \"3.6.1\"\n\n\n###\n\n","completion":" fix(types): fix prop constructor type inference (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -5108,7 +5108,7 @@ lodash._isiterateecall@^3.0.0:\n   resolved \"https:\/\/registry.yarnpkg.com\/lodash._isiterateecall\/-\/lodash._isiterateecall-3.0.9.tgz#5203ad7ba425fae842460e696db9cf3e6aac057c\"\n   integrity sha1-UgOte6Ql+uhCRg5pbbnPPmqsBXw=\n \n-lodash._reinterpolate@~3.0.0:\n+lodash._reinterpolate@^3.0.0, lodash._reinterpolate@~3.0.0:\n   version \"3.0.0\"\n   resolved \"https:\/\/registry.yarnpkg.com\/lodash._reinterpolate\/-\/lodash._reinterpolate-3.0.0.tgz#0ccf2d89166af03b3663c796538b75ac6e114d9d\"\n   integrity sha1-DM8tiRZq8Ds2Y8eWU4t1rG4RTZ0=\n@@ -5198,11 +5198,11 @@ lodash.rest@^4.0.0:\n   integrity sha1-lU73UEkmIDjJbR\/Jiyj9r58Hcqo=\n \n lodash.template@^4.0.2, lodash.template@^4.4.0:\n-  version \"4.4.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/lodash.template\/-\/lodash.template-4.4.0.tgz#e73a0385c8355591746e020b99679c690e68fba0\"\n-  integrity sha1-5zoDhcg1VZF0bgILmWecaQ5o+6A=\n+  version \"4.5.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/lodash.template\/-\/lodash.template-4.5.0.tgz#f976195cf3f347d0d5f52483569fe8031ccce8ab\"\n+  integrity sha512-84vYFxIkmidUiFxidA\/KjjH9pAycqW+h980j7Fuz5qxRtO9pgB7MDFTdys1N7A5mcucRiDyEq4fusljItR1T\/A==\n   dependencies:\n-    lodash._reinterpolate \"~3.0.0\"\n+    lodash._reinterpolate \"^3.0.0\"\n     lodash.templatesettings \"^4.0.0\"\n \n lodash.templatesettings@^4.0.0:\n\n\n###\n\n","completion":" build(deps-dev): bump lodash.template from 4.4.0 to 4.5.0 (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -5223,9 +5223,9 @@ lodash@4.17.5:\n   integrity sha512-svL3uiZf1RwhH+cWrfZn3A4+U58wbP0tGVTLQPbjplZxZ8ROD9VLuNgsRniTlLe7OlSqR79RUehXgpBW\/s0IQw==\n \n lodash@^4.0.1, lodash@^4.16.6, lodash@^4.17.0, lodash@^4.17.10, lodash@^4.17.11, lodash@^4.17.4, lodash@^4.17.5, lodash@^4.2.1, lodash@^4.3.0, lodash@^4.5.0:\n-  version \"4.17.11\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/lodash\/-\/lodash-4.17.11.tgz#b39ea6229ef607ecd89e2c8df12536891cac9b8d\"\n-  integrity sha512-cQKh8igo5QUhZ7lg38DYWAxMvjSAKG0A8wGSVimP07SIUEK2UO+arSRKbRZWtelMtN5V0Hkwh5ryOto\/SshYIg==\n+  version \"4.17.13\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/lodash\/-\/lodash-4.17.13.tgz#0bdc3a6adc873d2f4e0c4bac285df91b64fc7b93\"\n+  integrity sha512-vm3\/XWXfWtRua0FkUyEHBZy8kCPjErNBT9fJx8Zvs+U6zjqPbTUOpkaoum3O5uiA8sm+yNMHXfYkTUHFoMxFNA==\n \n log-symbols@^1.0.2:\n   version \"1.0.2\"\n\n\n###\n\n","completion":" build(deps-dev): bump lodash from 4.17.11 to 4.17.13 (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -2682,9 +2682,9 @@ ecc-jsbn@~0.1.1:\n     safer-buffer \"^2.1.0\"\n \n ecstatic@^3.0.0:\n-  version \"3.3.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/ecstatic\/-\/ecstatic-3.3.0.tgz#91cd417d152abf85b37b1ab3ebf3bd25cdc64e80\"\n-  integrity sha512-EblWYTd+wPIAMQ0U4oYJZ7QBypT9ZUIwpqli0bKDjeIIQnXDBK2dXtZ9yzRCOlkW1HkO8gn7\/FxLK1yPIW17pw==\n+  version \"3.3.2\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/ecstatic\/-\/ecstatic-3.3.2.tgz#6d1dd49814d00594682c652adb66076a69d46c48\"\n+  integrity sha512-fLf9l1hnwrHI2xn9mEDT7KIi22UDqA2jaCwyCbSUJh9a1V+LEUSL\/JO\/6TIz\/QyuBURWUHrFL5Kg2TtO1bkkog==\n   dependencies:\n     he \"^1.1.1\"\n     mime \"^1.6.0\"\n\n\n###\n\n","completion":" build(deps): bump ecstatic from 3.3.0 to 3.3.2 (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -1166,7 +1166,7 @@ async@1.x, async@^1.5.2:\n   resolved \"https:\/\/registry.yarnpkg.com\/async\/-\/async-1.5.2.tgz#ec6a61ae56480c0c3cb241c95618e20892f9672a\"\n   integrity sha1-7GphrlZIDAw8skHJVhjiCJL5Zyo=\n \n-async@^2.0.0, async@^2.1.2, async@^2.5.0:\n+async@^2.0.0, async@^2.1.2:\n   version \"2.6.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/async\/-\/async-2.6.1.tgz#b245a23ca71930044ec53fa46aa00a3e87c6a610\"\n   integrity sha512-fNEiL2+AZt6AlAw\/29Cr0UDe4sRAHCpEHh54WMz+Bb7QfNcFw4h3loofyJpLeQs4Yx7yuqu\/2dLgM5hKOs6HlQ==\n@@ -1941,6 +1941,11 @@ combined-stream@^1.0.6, combined-stream@~1.0.6:\n   dependencies:\n     delayed-stream \"~1.0.0\"\n \n+commander@2.20.0:\n+  version \"2.20.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/commander\/-\/commander-2.20.0.tgz#d58bb2b5c1ee8f87b0d340027e9e94e222c5a422\"\n+  integrity sha512-7j2y+40w61zy6YC2iRNpUe\/NwhNyoXrYpHMrSunaMG64nRnaf96zO\/KMQR4OyN\/UnE5KLyEBnKHd4aG3rskjpQ==\n+\n commander@2.9.0:\n   version \"2.9.0\"\n   resolved \"https:\/\/registry.yarnpkg.com\/commander\/-\/commander-2.9.0.tgz#9c99094176e12240cb22d6c5146098400fe0f7d4\"\n@@ -3784,11 +3789,11 @@ growl@1.9.2:\n   integrity sha1-Dqd0NxXbjY3ixe3hd14bRayFwC8=\n \n handlebars@^4.0.1, handlebars@^4.0.2:\n-  version \"4.0.12\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/handlebars\/-\/handlebars-4.0.12.tgz#2c15c8a96d46da5e266700518ba8cb8d919d5bc5\"\n-  integrity sha512-RhmTekP+FZL+XNhwS1Wf+bTTZpdLougwt5pcgA1tuz6Jcx0fpH\/7z0qd71RKnZHBCxIRBHfBOnio4gViPemNzA==\n+  version \"4.4.3\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/handlebars\/-\/handlebars-4.4.3.tgz#180bae52c1d0e9ec0c15d7e82a4362d662762f6e\"\n+  integrity sha512-B0W4A2U1ww3q7VVthTKfh+epHx+q4mCt6iK+zEAzbMBpWQAwxCeKxEGpj\/1oQTpzPXDNSOG7hmG14TsISH50yw==\n   dependencies:\n-    async \"^2.5.0\"\n+    neo-async \"^2.6.0\"\n     optimist \"^0.6.1\"\n     source-map \"^0.6.1\"\n   optionalDependencies:\n@@ -5680,10 +5685,10 @@ negotiator@0.6.1:\n   resolved \"https:\/\/registry.yarnpkg.com\/negotiator\/-\/negotiator-0.6.1.tgz#2b327184e8992101177b28563fb5e7102acd0ca9\"\n   integrity sha1-KzJxhOiZIQEXeyhWP7XnECrNDKk=\n \n-neo-async@^2.5.0:\n-  version \"2.6.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/neo-async\/-\/neo-async-2.6.0.tgz#b9d15e4d71c6762908654b5183ed38b753340835\"\n-  integrity sha512-MFh0d\/Wa7vkKO3Y3LlacqAEeHK0mckVqzDieUKTT+KGxi+zIpeVsFxymkIiRpbpDziHc290Xr9A1O4Om7otoRA==\n+neo-async@^2.5.0, neo-async@^2.6.0:\n+  version \"2.6.1\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/neo-async\/-\/neo-async-2.6.1.tgz#ac27ada66167fa8849a6addd837f6b189ad2081c\"\n+  integrity sha512-iyam8fBuCUpWeKPGpaNMetEocMt364qkCsfL9JuhjXX6dRnguRVOfk2GZaDpPjcOKiiXCPINZC1GczQ7iTq3Zw==\n \n netmask@~1.0.4:\n   version \"1.0.6\"\n@@ -7928,11 +7933,11 @@ typescript@^3.1.3:\n   integrity sha512-VCj5UiSyHBjwfYacmDuc\/NOk4QQixbE+Wn7MFJuS0nRuPQbof132Pw4u53dm264O8LPc2MVsc7RJNml5szurkg==\n \n uglify-js@^3.1.4:\n-  version \"3.4.9\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/uglify-js\/-\/uglify-js-3.4.9.tgz#af02f180c1207d76432e473ed24a28f4a782bae3\"\n-  integrity sha512-8CJsbKOtEbnJsTyv6LE6m6ZKniqMiFWmm9sRbopbkGs3gMPPfd3Fh8iIA4Ykv5MgaTbqHr4BaoGLJLZNhsrW1Q==\n+  version \"3.6.1\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/uglify-js\/-\/uglify-js-3.6.1.tgz#ae7688c50e1bdcf2f70a0e162410003cf9798311\"\n+  integrity sha512-+dSJLJpXBb6oMHP+Yvw8hUgElz4gLTh82XuX68QiJVTXaE5ibl6buzhNkQdYhBlIhozWOC9ge16wyRmjG4TwVQ==\n   dependencies:\n-    commander \"~2.17.1\"\n+    commander \"2.20.0\"\n     source-map \"~0.6.1\"\n \n ultron@~1.1.0:\n\n\n###\n\n","completion":" build(deps): bump handlebars from 4.0.12 to 4.4.3 (#<issue-num>)\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -208,8 +208,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n+        <a href=\"https:\/\/fastcoding.jp\/javascript\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n\n###\n\n","completion":" chore: Fastcoding Inc broken icon [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -4646,9 +4646,9 @@ js-tokens@^3.0.2:\n   integrity sha1-mGbfOVECEw449\/mWvOtlRDIJwls=\n \n js-yaml@3.x, js-yaml@^3.12.0, js-yaml@^3.9.0:\n-  version \"3.12.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/js-yaml\/-\/js-yaml-3.12.1.tgz#295c8632a18a23e054cf5c9d3cecafe678167600\"\n-  integrity sha512-um46hB9wNOKlwkHgiuyEVAybXBjwFUV0Z\/RaHJblRd9DXltue9FTYvzCr9ErQrK9Adz5MU4gHWVaNUfdmrC8qA==\n+  version \"3.13.1\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/js-yaml\/-\/js-yaml-3.13.1.tgz#aff151b30bfdfa8e49e05da22e7415e9dfa37847\"\n+  integrity sha512-YfbcO7jXDdyj0DGxYVSlSeQNHbD7XPWvrVWeVUujrQEoZzWJIRrCPoyk6kL6IAjAG2IolMK4T0hNUe0HOUs5Jw==\n   dependencies:\n     argparse \"^1.0.7\"\n     esprima \"^4.0.0\"\n\n\n###\n\n","completion":" build(deps): bump js-yaml from 3.12.1 to 3.13.1 (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -5561,9 +5561,9 @@ mississippi@^3.0.0:\n     through2 \"^2.0.0\"\n \n mixin-deep@^1.2.0:\n-  version \"1.3.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/mixin-deep\/-\/mixin-deep-1.3.1.tgz#a49e7268dce1a0d9698e45326c5626df3543d0fe\"\n-  integrity sha512-8ZItLHeEgaqEvd5lYBXfm4EZSFCX29Jb9K+lAHhDKzReKBQKj3R+7NOF6tjqYi9t4oI8VUfaWITJQm86wnXGNQ==\n+  version \"1.3.2\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/mixin-deep\/-\/mixin-deep-1.3.2.tgz#1120b43dc359a785dce65b55b82e257ccf479566\"\n+  integrity sha512-WRoDn\/\/mXBiJ1H40rqa3vH0toePwSsGb45iInWlTySa+Uu4k3tYUSxa2v1KqAiLtvlrSzaExqS1gtk96A9zvEA==\n   dependencies:\n     for-in \"^1.0.2\"\n     is-extendable \"^1.0.1\"\n\n\n###\n\n","completion":" build(deps): bump mixin-deep from 1.3.1 to 1.3.2 (#<issue-num>)\n"}
{"prompt":" file path A: yarn.lock | file path B: yarn.lock\n\n@@ -2912,14 +2912,16 @@ eslint-scope@^4.0.0:\n     estraverse \"^4.1.1\"\n \n eslint-utils@^1.3.1:\n-  version \"1.3.1\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/eslint-utils\/-\/eslint-utils-1.3.1.tgz#9a851ba89ee7c460346f97cf8939c7298827e512\"\n-  integrity sha512-Z7YjnIldX+2XMcjr7ZkgEsOj\/bREONV60qYeB\/bjMAqqqZ4zxKyWX+BOUkdmRmA9riiIPVvo5x86m5elviOk0Q==\n+  version \"1.4.2\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/eslint-utils\/-\/eslint-utils-1.4.2.tgz#166a5180ef6ab7eb462f162fd0e6f2463d7309ab\"\n+  integrity sha512-eAZS2sEUMlIeCjBeubdj45dmBHQwPHWyBcT1VSYB7o9x9WRRqKxyUoiXlRjyAwzN7YEzHJlYg0NmzDRWx6GP4Q==\n+  dependencies:\n+    eslint-visitor-keys \"^1.0.0\"\n \n eslint-visitor-keys@^1.0.0:\n-  version \"1.0.0\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/eslint-visitor-keys\/-\/eslint-visitor-keys-1.0.0.tgz#3f3180fb2e291017716acb4c9d6d5b5c34a6a81d\"\n-  integrity sha512-qzm\/XxIbxm\/FHyH341ZrbnMUpe+5Bocte9xkmFMzPMjRaZMcXww+MpBptFvtU+79L362nqiLhekCxCxDPaUMBQ==\n+  version \"1.1.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/eslint-visitor-keys\/-\/eslint-visitor-keys-1.1.0.tgz#e2a82cea84ff246ad6fb57f9bde5b46621459ec2\"\n+  integrity sha512-8y9YjtM1JBJU\/A9Kc+SbaOV4y29sSWckBwMHa+FGtVj5gN\/sbnKDf6xJUl+8g7FAij9LVaP8C24DUiH\/f\/2Z9A==\n \n eslint@^5.7.0:\n   version \"5.12.0\"\n\n\n###\n\n","completion":" build(deps): bump eslint-utils from 1.3.1 to 1.4.2 (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -225,8 +225,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/staffaugmentation.ro\/en\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/staff_augmentation.png\">\n+        <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/unicorn.io\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.svg\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -234,6 +239,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/piratebay_proxy.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.programmers.io\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -230,8 +230,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/staffaugmentation.ro\/en\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/staff_augmentation.png\">\n+        <a href=\"http:\/\/www.pullrequest.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pullrequest.svg\">\n+        <\/a>\n+      <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/unicorn.io\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/unicorn_io.svg\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n@@ -239,6 +244,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/piratebay_proxy.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.programmers.io\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/next-tick.js | file path B: src\/core\/util\/next-tick.js\n\n@@ -72,7 +72,7 @@ if (typeof Promise !== 'undefined' && isNative(Promise)) {\n   isUsingMicroTask = true\n } else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n   \/\/ Fallback to setImmediate.\n-  \/\/ Techinically it leverages the (macro) task queue,\n+  \/\/ Technically it leverages the (macro) task queue,\n   \/\/ but it is still a better choice than setTimeout.\n   timerFunc = () => {\n     setImmediate(flushCallbacks)\n\n\n###\n\n","completion":" chore: fix typo in `next-tick.js` comment (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -235,7 +235,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/www.programmers.io\" target=\"_blank\">\n+        <a href=\"https:\/\/www.programmers.io\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n         <\/a>\n       <\/td>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -240,7 +240,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/www.programmers.io\" target=\"_blank\">\n+        <a href=\"https:\/\/www.programmers.io\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n         <\/a>\n       <\/td>\n\n---\n file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -195,8 +195,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.inkloop.in\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/inkloop.png\">\n+        <a href=\"https:\/\/www.inkoop.in\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/inkoop.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -200,8 +200,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.inkloop.in\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/inkloop.png\">\n+        <a href=\"https:\/\/www.inkoop.in\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/inkoop.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n\n###\n\n","completion":" chore: fix sponsor link\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -370,66 +370,66 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Masahiro Tanaka\n - Shawn Wildermuth\n - Sean Washington\n-- Lars Andreas Ness\n-- Keisuke Kita\n - Benjamin Listwon\n+- Keisuke Kita\n+- Lars Andreas Ness\n - Kirk Lewis\n-- Wen-Tien Chang\n - Victor Tolbert\n+- Wen-Tien Chang\n - Stephen Michael Hartley\n - Phan An\n+- Luiz\n - James J. Ye\n - Barbara Liau\n - Matsumoto Takamasa\n-- Guy Gavergun\n - Matt Jones\n - Niannian Modisette\n - Duncan Kenzie\n+- Guy Gavergun\n - Bernhard E. Reiter\n - Zoran Knezevic\n - Jon Hobbs-Smith\n - Pierre Vanhulst\n - Asaf Yishai\n - Haim Yulzari\n-- Anthony Estebe\n - Akiho Nagao\n+- Anthony Estebe\n - Jim Raden\n - Jeremy Tan\n - IMGNRY\n - Tyler\n-- Rob Yedlin\n - Guilherme S L de Souza\n - Mickal Andrieu\n - Vivekanandhan Natarajan\n+- Rob Yedlin\n - Joe Gregory\n - Jordan Oroshiba\n - Marcos Moura\n - Jessie Hernandez\n-- Ivan Sieder\n - Eric\n+- Ivan Sieder\n - Romain Lienard\n+- username\n - Bohdan Kokotko\n-- Christo Crampton\n-- Oskar Lindgren\n - Wakana Seki\n - Alexander Weiher\n+- David Ang\n - Donald Fischer\n+- Oskar Lindgren\n - Jere Sjroos\n-- David Ang\n-- David Kaplan\n-- Jaeyoung Lee\n-- Shapovalov Pavel\n - Domenico Gaudioso\n+- Jaeyoung Lee\n+- David Kaplan\n - Andy\n - Matt Sencenbaugh\n-- Chris Calo\n-- Elon Hung\n+- Juan Bermudez\n - Hannes Kochni\n+- Elon Hung\n - Daniel Mattingley\n-- Juan Bermudez\n+- Chris Calo\n - Soichiro Isshiki\n-- Garion Herman\n - Ed Linklater\n+- Garion Herman\n - Andrew Willis\n - Princeyesuraj Edward\n - Yusuke Kawabata\n@@ -442,15 +442,16 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Bill Condo\n - Pierre Lebrun\n - John Thompson\n-- Martin Bastien\n - Ryan Brewer\n-- Bichinger Software & Consulting\n-- Merott Movahedi\n+- Martin Bastien\n - Alfonso Herrera\n+- Bichinger Software & Consulting\n - Abhay\n-- Afif Sohaili\n - Nicolaas\n - Riki Fridrich\n+- Afif Sohaili\n+- Diana Bergholz\n+- Tomasz Kleszczewski\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -234,6 +234,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/piratebay_proxy.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/www.programmers.io\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -239,6 +239,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/piratebay_proxy.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/www.programmers.io\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/programmers_io.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -30,11 +30,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <table>\n   <tbody>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/bit.dev\/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bit.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vueschool.io\/?utm_source=Vuejs.org&utm_medium=Banner&utm_campaign=Sponsored%20Banner&utm_content=V1\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vueschool.png\">\n@@ -50,8 +45,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/retool.com\/?utm_source=sponsor&utm_campaign=vue\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/retool.png\">\n@@ -273,6 +266,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dopamine.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/roadster.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/roadster.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -40,11 +40,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <table>\n   <tbody>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/bit.dev\/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bit.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vueschool.io\/?utm_source=Vuejs.org&utm_medium=Banner&utm_campaign=Sponsored%20Banner&utm_content=V1\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vueschool.png\">\n@@ -60,8 +55,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/retool.com\/?utm_source=sponsor&utm_campaign=vue\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/retool.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -236,6 +236,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/staff_augmentation.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/piratebay.ink\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/piratebay_proxy.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -241,6 +241,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/staff_augmentation.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/piratebay.ink\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/piratebay_proxy.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -654,7 +654,7 @@ function processSlotContent (el) {\n           if (el.parent && !maybeComponent(el.parent)) {\n             warn(\n               `<template v-slot> can only appear at the root level inside ` +\n-              `the receiving the component`,\n+              `the receiving component`,\n               el\n             )\n           }\n\n\n###\n\n","completion":" chore: fix typo in <template v-slot> warning (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -302,7 +302,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/twitter.com\/philipjbasile\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/philip_john_basile.png\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/philip_john_basile.gif\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n\n\n###\n\n","completion":" chore: update backer image [ci skip]\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -300,6 +300,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/earthlink.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/twitter.com\/philipjbasile\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/philip_john_basile.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -231,6 +231,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storekit.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/staffaugmentation.ro\/en\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/staff_augmentation.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -236,6 +236,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storekit.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/staffaugmentation.ro\/en\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/staff_augmentation.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -351,90 +351,88 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--10 start-->\n - Masahiro Tanaka\n - Shawn Wildermuth\n-- Samuel Smith\n-- donny\n-- Lars Andreas Ness\n - Sean Washington\n+- Lars Andreas Ness\n - Keisuke Kita\n - Benjamin Listwon\n - Kirk Lewis\n-- Stephen Michael Hartley\n - Wen-Tien Chang\n - Victor Tolbert\n+- Stephen Michael Hartley\n - Phan An\n - James J. Ye\n - Barbara Liau\n-- Luiz\n - Matsumoto Takamasa\n - Guy Gavergun\n-- Duncan Kenzie\n-- Niannian Modisette\n - Matt Jones\n+- Niannian Modisette\n+- Duncan Kenzie\n - Bernhard E. Reiter\n - Zoran Knezevic\n - Jon Hobbs-Smith\n - Pierre Vanhulst\n-- Haim Yulzari\n - Asaf Yishai\n+- Haim Yulzari\n - Anthony Estebe\n - Akiho Nagao\n-- Jeremy Tan\n - Jim Raden\n+- Jeremy Tan\n - IMGNRY\n - Tyler\n+- Rob Yedlin\n - Guilherme S L de Souza\n-- Daniel Waghorn\n - Mickal Andrieu\n - Vivekanandhan Natarajan\n-- Rob Yedlin\n-- Rafael Belvederese\n-- Jordan Oroshiba\n - Joe Gregory\n+- Jordan Oroshiba\n - Marcos Moura\n - Jessie Hernandez\n-- Eric\n - Ivan Sieder\n-- Christo Crampton\n+- Eric\n - Romain Lienard\n - Bohdan Kokotko\n-- Donald Fischer\n+- Christo Crampton\n - Oskar Lindgren\n-- Alexander Weiher\n-- David Ang\n - Wakana Seki\n+- Alexander Weiher\n+- Donald Fischer\n - Jere Sjroos\n-- Ben Hong\n+- David Ang\n - David Kaplan\n-- Domenico Gaudioso\n - Jaeyoung Lee\n+- Shapovalov Pavel\n+- Domenico Gaudioso\n - Andy\n - Matt Sencenbaugh\n-- Shapovalov Pavel\n+- Chris Calo\n+- Elon Hung\n - Hannes Kochni\n - Daniel Mattingley\n-- Elon Hung\n-- Chris Calo\n - Juan Bermudez\n - Soichiro Isshiki\n-- Ed Linklater\n - Garion Herman\n+- Ed Linklater\n+- Andrew Willis\n - Princeyesuraj Edward\n - Yusuke Kawabata\n - \n-- Peter Matkovsky\n - Nick Dandakis\n+- Peter Matkovsky\n - Fabien GuySake Ungerer\n+- Kenneth Crawford\n - Nathan Mallison\n - Bill Condo\n-- Kenneth Crawford\n - Pierre Lebrun\n - John Thompson\n - Martin Bastien\n - Ryan Brewer\n-- Merott Movahedi\n - Bichinger Software & Consulting\n+- Merott Movahedi\n - Alfonso Herrera\n - Abhay\n+- Afif Sohaili\n+- Nicolaas\n+- Riki Fridrich\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: packages\/vue-template-compiler\/README.md | file path B: packages\/vue-template-compiler\/README.md\n\n@@ -81,7 +81,7 @@ Note the returned function code uses `with` and thus cannot be used in strict mo\n \n   It's possible to hook into the compilation process to support custom template features. **However, beware that by injecting custom compile-time modules, your templates will not work with other build tools built on standard built-in modules, e.g `vue-loader` and `vueify`.**\n \n-  An array of compiler modules. For details on compiler modules, refer to the `ModuleOptions` type in [flow declarations](https:\/\/github.com\/vuejs\/vue\/blob\/dev\/flow\/compiler.js#L38-L45) and the [built-in modules](https:\/\/github.com\/vuejs\/vue\/tree\/dev\/src\/platforms\/web\/compiler\/modules).\n+  An array of compiler modules. For details on compiler modules, refer to the `ModuleOptions` type in [flow declarations](https:\/\/github.com\/vuejs\/vue\/blob\/dev\/flow\/compiler.js#L47-L59) and the [built-in modules](https:\/\/github.com\/vuejs\/vue\/tree\/dev\/src\/platforms\/web\/compiler\/modules).\n \n - `directives`\n \n\n\n###\n\n","completion":" docs: fix link to point to ModuleOptions lines (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -51,6 +51,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/retool.com\/?utm_source=sponsor&utm_campaign=vue\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/retool.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--platinum end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -61,6 +61,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/retool.com\/?utm_source=sponsor&utm_campaign=vue\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/retool.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--platinum end-->\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: .github\/FUNDING.yml | file path B: .github\/FUNDING.yml\n\n@@ -1,6 +1,6 @@\n # These are supported funding model platforms\n \n-github: yyx990803\n+github: [yyx990803, posva]\n patreon: evanyou\n open_collective: vuejs\n ko_fi: # Replace with a single Ko-fi username\n\n\n###\n\n","completion":" chore: add posva to funding.yml\n"}
{"prompt":" file path A: benchmarks\/uptime\/index.html | file path B: benchmarks\/uptime\/index.html\n\n@@ -38,7 +38,7 @@\n       .days {\n         display: flex;\n         flex-direction: row;\n-        flex-flow: wrap;\n+        flex-wrap: wrap;\n       }\n \n       .uptime-day {\n\n\n###\n\n","completion":" chore(benchmarks): use flex-wrap (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/error-detector.js | file path B: src\/compiler\/error-detector.js\n\n@@ -57,9 +57,9 @@ function checkNode (node: ASTNode, warn: Function) {\n }\n \n function checkEvent (exp: string, text: string, warn: Function, range?: Range) {\n-  const stipped = exp.replace(stripStringRE, '')\n-  const keywordMatch: any = stipped.match(unaryOperatorsRE)\n-  if (keywordMatch && stipped.charAt(keywordMatch.index - 1) !== '$') {\n+  const stripped = exp.replace(stripStringRE, '')\n+  const keywordMatch: any = stripped.match(unaryOperatorsRE)\n+  if (keywordMatch && stripped.charAt(keywordMatch.index - 1) !== '$') {\n     warn(\n       `avoid using JavaScript unary operator as property name: ` +\n       `\"${keywordMatch[0]}\" in expression ${text.trim()}`,\n\n\n###\n\n","completion":" chore: typo in variable name (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -101,18 +101,23 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/html_burger.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.frontenddeveloperlove.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/frontendlove.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/onsen.io\/vue\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/onsen_ui.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/neds.com.au\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/neds.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/icons8.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/icons_8.png\">\n@@ -138,13 +143,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devsquad.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.firesticktricks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/firestick_tricks.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/intygrate.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n@@ -170,13 +175,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/energy_comparison.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -202,13 +207,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.dailynow.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -106,18 +106,23 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/html_burger.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.frontenddeveloperlove.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/frontendlove.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/onsen.io\/vue\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/onsen_ui.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/neds.com.au\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/neds.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/icons8.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/icons_8.png\">\n@@ -143,13 +148,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devsquad.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.firesticktricks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/firestick_tricks.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/intygrate.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n@@ -175,13 +180,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/energy_comparison.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -207,13 +212,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.dailynow.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -341,43 +341,43 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Shawn Wildermuth\n - Samuel Smith\n - donny\n-- Sean Washington\n - Lars Andreas Ness\n+- Sean Washington\n - Keisuke Kita\n - Benjamin Listwon\n - Kirk Lewis\n-- Wen-Tien Chang\n - Stephen Michael Hartley\n+- Wen-Tien Chang\n - Victor Tolbert\n - Phan An\n - James J. Ye\n - Barbara Liau\n - Luiz\n - Matsumoto Takamasa\n-- Matt Jones\n+- Guy Gavergun\n - Duncan Kenzie\n - Niannian Modisette\n-- Guy Gavergun\n+- Matt Jones\n - Bernhard E. Reiter\n - Zoran Knezevic\n - Jon Hobbs-Smith\n - Pierre Vanhulst\n-- Anthony Estebe\n-- Asaf Yishai\n - Haim Yulzari\n+- Asaf Yishai\n+- Anthony Estebe\n - Akiho Nagao\n - Jeremy Tan\n - Jim Raden\n - IMGNRY\n - Tyler\n-- Daniel Waghorn\n - Guilherme S L de Souza\n+- Daniel Waghorn\n+- Mickal Andrieu\n+- Vivekanandhan Natarajan\n - Rob Yedlin\n - Rafael Belvederese\n-- Vivekanandhan Natarajan\n-- Mickal Andrieu\n-- Joe Gregory\n - Jordan Oroshiba\n+- Joe Gregory\n - Marcos Moura\n - Jessie Hernandez\n - Eric\n@@ -385,49 +385,44 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Christo Crampton\n - Romain Lienard\n - Bohdan Kokotko\n-- Alexander Weiher\n-- Jere Sjroos\n - Donald Fischer\n-- Wakana Seki\n - Oskar Lindgren\n+- Alexander Weiher\n - David Ang\n+- Wakana Seki\n+- Jere Sjroos\n+- Ben Hong\n - David Kaplan\n - Domenico Gaudioso\n - Jaeyoung Lee\n-- Ben Hong\n - Andy\n - Matt Sencenbaugh\n-- Joe Cochran\n-- Juan Bermudez\n-- Alberto T. Payero Mota\n+- Shapovalov Pavel\n - Hannes Kochni\n-- Chris Calo\n - Daniel Mattingley\n - Elon Hung\n+- Chris Calo\n+- Juan Bermudez\n - Soichiro Isshiki\n-- Shapovalov Pavel\n-- Garion Herman\n - Ed Linklater\n-- Andrew Willis\n-- Yusuke Kawabata\n+- Garion Herman\n - Princeyesuraj Edward\n--  \n+- Yusuke Kawabata\n+- \n - Peter Matkovsky\n - Nick Dandakis\n-- \n-- Masato Miura\n - Fabien GuySake Ungerer\n-- Fedor Indutny\n-- Kenneth Crawford\n-- Bill Condo\n - Nathan Mallison\n+- Bill Condo\n+- Kenneth Crawford\n - Pierre Lebrun\n - John Thompson\n-- panmenghan\n-- Jan-Philipp Schmeier\n - Martin Bastien\n - Ryan Brewer\n+- Merott Movahedi\n - Bichinger Software & Consulting\n+- Alfonso Herrera\n+- Abhay\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/proxy.js | file path B: src\/core\/instance\/proxy.js\n\n@@ -28,7 +28,7 @@ if (process.env.NODE_ENV !== 'production') {\n     warn(\n       `Property \"${key}\" must be accessed with \"$data.${key}\" because ` +\n       'properties starting with \"$\" or \"_\" are not proxied in the Vue instance to ' +\n-      'prevent conflicts with Vue internals' +\n+      'prevent conflicts with Vue internals. ' +\n       'See: https:\/\/vuejs.org\/v2\/api\/#data',\n       target\n     )\n\n\n###\n\n","completion":" chore: fix prefixed data properties warning typo (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/storekit.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storekit.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -219,6 +219,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/storekit.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/storekit.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -208,6 +208,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.dailynow.co\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -213,6 +213,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.dailynow.co\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/daily.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -366,10 +366,9 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Alex Balashov\n - Konstantin Levinski\n - Blaise Laflamme\n-- Dilettant\n - Sean Ferguson\n - Johnny Ray Austin\n-- IdealCoders\n+- Daniel\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n@@ -380,105 +379,92 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Samuel Smith\n - donny\n - Sean Washington\n-- Keisuke Kita\n-- kazupon\n - Lars Andreas Ness\n-- Simon East\n+- Keisuke Kita\n - Benjamin Listwon\n - Kirk Lewis\n-- Victor Tolbert\n-- Stephen Michael Hartley\n - Wen-Tien Chang\n+- Stephen Michael Hartley\n+- Victor Tolbert\n - Phan An\n-- Barbara Liau\n - James J. Ye\n+- Barbara Liau\n - Luiz\n - Matsumoto Takamasa\n-- Shinya Katayama\n-- Niannian Modisette\n-- Guy Gavergun\n - Matt Jones\n - Duncan Kenzie\n+- Niannian Modisette\n+- Guy Gavergun\n - Bernhard E. Reiter\n - Zoran Knezevic\n-- Chengzhi Yin\n-- Pierre Vanhulst\n - Jon Hobbs-Smith\n-- Akiho Nagao\n+- Pierre Vanhulst\n - Anthony Estebe\n-- Haim Yulzari\n - Asaf Yishai\n-- Jim Raden\n+- Haim Yulzari\n+- Akiho Nagao\n - Jeremy Tan\n+- Jim Raden\n - IMGNRY\n-- Tai Shi Ling\n-- Yong Jun Thong\n - Tyler\n-- Rafael Belvederese\n-- Chih-Hsuan Fan\n-- Jamie McElwain\n-- Vivekanandhan Natarajan\n - Daniel Waghorn\n - Guilherme S L de Souza\n-- Matias Verdier\n - Rob Yedlin\n+- Rafael Belvederese\n+- Vivekanandhan Natarajan\n - Mickal Andrieu\n-- Cliff Hess\n - Joe Gregory\n - Jordan Oroshiba\n - Marcos Moura\n-- Richard Simpson\n - Jessie Hernandez\n-- Ivan Sieder\n-- Aparajita Fishman\n - Eric\n+- Ivan Sieder\n - Christo Crampton\n - Romain Lienard\n - Bohdan Kokotko\n-- Oskar Lindgren\n-- Jere Sjroos\n-- David Ang\n - Alexander Weiher\n+- Jere Sjroos\n - Donald Fischer\n - Wakana Seki\n-- Domenico Gaudioso\n+- Oskar Lindgren\n+- David Ang\n - David Kaplan\n+- Domenico Gaudioso\n - Jaeyoung Lee\n - Ben Hong\n - Andy\n-- Joe Cochran\n - Matt Sencenbaugh\n-- Colt Borg\n+- Joe Cochran\n - Juan Bermudez\n-- Hannes Kochni\n - Alberto T. Payero Mota\n-- Elon Hung\n-- Daniel Mattingley\n-- Teon Ooi\n+- Hannes Kochni\n - Chris Calo\n+- Daniel Mattingley\n+- Elon Hung\n - Soichiro Isshiki\n-- Marko Boskovic\n+- Shapovalov Pavel\n - Garion Herman\n - Ed Linklater\n-- Rob\n - Andrew Willis\n - Yusuke Kawabata\n - Princeyesuraj Edward\n-- \n-- Shapovalov Pavel\n-- Peter Matkovsky\n -  \n+- Peter Matkovsky\n - Nick Dandakis\n+- \n+- Masato Miura\n - Fabien GuySake Ungerer\n - Fedor Indutny\n-- Masato Miura\n+- Kenneth Crawford\n - Bill Condo\n-- David McGuigan\n - Nathan Mallison\n-- Kevin Batdorf\n-- Sheree Pea\n - Pierre Lebrun\n - John Thompson\n+- panmenghan\n+- Jan-Philipp Schmeier\n+- Martin Bastien\n+- Ryan Brewer\n+- Bichinger Software & Consulting\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -57,6 +57,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/teeplusplusclth.com\/\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tee__.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -67,6 +67,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/teeplusplusclth.com\/\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tee__.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -374,113 +374,106 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Shawn Wildermuth\n - Samuel Smith\n - donny\n-- Simon East\n+- Sean Washington\n - Keisuke Kita\n - kazupon\n-- Sean Washington\n - Lars Andreas Ness\n+- Simon East\n - Benjamin Listwon\n - Kirk Lewis\n-- Stephen Michael Hartley\n - Victor Tolbert\n+- Stephen Michael Hartley\n - Wen-Tien Chang\n-- Karol\n - Phan An\n-- James J. Ye\n - Barbara Liau\n+- James J. Ye\n - Luiz\n - Matsumoto Takamasa\n-- Jarek Tkaczyk\n+- Shinya Katayama\n - Niannian Modisette\n+- Guy Gavergun\n - Matt Jones\n - Duncan Kenzie\n-- Guy Gavergun\n-- Shinya Katayama\n-- Mike Margerum\n - Bernhard E. Reiter\n-- Chengzhi Yin\n - Zoran Knezevic\n-- Jon Hobbs-Smith\n+- Chengzhi Yin\n - Pierre Vanhulst\n+- Jon Hobbs-Smith\n - Akiho Nagao\n+- Anthony Estebe\n - Haim Yulzari\n - Asaf Yishai\n-- Anthony Estebe\n-- Jeremy Tan\n - Jim Raden\n+- Jeremy Tan\n - IMGNRY\n - Tai Shi Ling\n - Yong Jun Thong\n - Tyler\n-- Vivekanandhan Natarajan\n-- Matias Verdier\n - Rafael Belvederese\n - Chih-Hsuan Fan\n-- Guilherme S L de Souza\n+- Jamie McElwain\n+- Vivekanandhan Natarajan\n - Daniel Waghorn\n+- Guilherme S L de Souza\n+- Matias Verdier\n - Rob Yedlin\n - Mickal Andrieu\n-- Jamie McElwain\n-- Jordan Oroshiba\n - Cliff Hess\n - Joe Gregory\n-- Richard Simpson\n+- Jordan Oroshiba\n - Marcos Moura\n+- Richard Simpson\n - Jessie Hernandez\n - Ivan Sieder\n-- Eric\n - Aparajita Fishman\n+- Eric\n+- Christo Crampton\n - Romain Lienard\n - Bohdan Kokotko\n-- Christo Crampton\n-- David Ang\n-- Donald Fischer\n-- Alexander Weiher\n - Oskar Lindgren\n - Jere Sjroos\n+- David Ang\n+- Alexander Weiher\n+- Donald Fischer\n - Wakana Seki\n-- David Kaplan\n-- Ben Hong\n - Domenico Gaudioso\n+- David Kaplan\n - Jaeyoung Lee\n+- Ben Hong\n - Andy\n - Joe Cochran\n - Matt Sencenbaugh\n+- Colt Borg\n - Juan Bermudez\n - Hannes Kochni\n-- Colt Borg\n - Alberto T. Payero Mota\n+- Elon Hung\n - Daniel Mattingley\n - Teon Ooi\n - Chris Calo\n-- Elon Hung\n - Soichiro Isshiki\n-- Milan Zivkovic\n-- Christopher Bemister\n-- Ed Linklater\n-- Garion Herman\n - Marko Boskovic\n+- Garion Herman\n+- Ed Linklater\n - Rob\n - Andrew Willis\n - Yusuke Kawabata\n - Princeyesuraj Edward\n-- shimbaco\n - \n--  \n+- Shapovalov Pavel\n - Peter Matkovsky\n+-  \n - Nick Dandakis\n - Fabien GuySake Ungerer\n - Fedor Indutny\n - Masato Miura\n-- Nathan Mallison\n-- Shapovalov Pavel\n-- David McGuigan\n-- Max Fletcher\n - Bill Condo\n+- David McGuigan\n+- Nathan Mallison\n - Kevin Batdorf\n-- Ivan Buncic\n-- Pierre Lebrun\n - Sheree Pea\n+- Pierre Lebrun\n+- John Thompson\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -210,12 +210,17 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/blokt.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/blokt_cryptocurrency_news.png\">\n+        <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/blokt.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/blokt_cryptocurrency_news.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.jqwidgets.com\/vue\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/jqwidgets_ltd.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -215,12 +215,17 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/blokt.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/blokt_cryptocurrency_news.png\">\n+        <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/blokt.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/blokt_cryptocurrency_news.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.jqwidgets.com\/vue\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/jqwidgets_ltd.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -237,7 +237,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n+        <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -242,7 +242,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n+        <a href=\"https:\/\/usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n         <\/a>\n       <\/td>\n\n\n###\n\n","completion":" chore: fix sponsor url [ci skip]\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -236,6 +236,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -241,6 +241,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"usave.co.uk\/utilities\/broadband\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/usave.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -231,6 +231,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devexpress.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -236,6 +236,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devexpress.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/fastcoding.jp\/javascript\/ \" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/fastcoding_inc.svg\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -30,11 +30,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <table>\n   <tbody>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/moduscreate.com\/?utm_source=Vue&utm_medium=Partnership&utm_campaign=VueShip\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/modus.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/bit.dev\/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bit.png\">\n@@ -50,13 +45,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vueschool.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vehikl.com\/\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vehikl.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.nativescript.org\/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n@@ -231,6 +226,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/y8.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/js.devexpress.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devexpress.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -40,11 +40,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <table>\n   <tbody>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/moduscreate.com\/?utm_source=Vue&utm_medium=Partnership&utm_campaign=VueShip\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/modus.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/bit.dev\/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bit.png\">\n@@ -60,13 +55,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vueschool.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vehikl.com\/\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vehikl.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.nativescript.org\/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n@@ -236,6 +231,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/y8.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/js.devexpress.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devexpress.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/render.js | file path B: src\/core\/instance\/render.js\n\n@@ -84,7 +84,7 @@ export function renderMixin (Vue: Class<Component>) {\n     \/\/ render self\n     let vnode\n     try {\n-      \/\/ There's no need to maintain a stack becaues all render fns are called\n+      \/\/ There's no need to maintain a stack because all render fns are called\n       \/\/ separately from one another. Nested component's render fns are called\n       \/\/ when parent component is patched.\n       currentRenderingInstance = vm\n\n\n###\n\n","completion":" chore(typo): fix comment typo (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -226,6 +226,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/jqwidgets_ltd.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.y8.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/y8.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -231,6 +231,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/jqwidgets_ltd.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.y8.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/y8.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -36,7 +36,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.bitsrc.io\/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue\" target=\"_blank\">\n+        <a href=\"https:\/\/bit.dev\/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bit.png\">\n         <\/a>\n       <\/td>\n@@ -125,11 +125,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/vuetifyjs.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuetify.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/neds.com.au\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/neds.png\">\n@@ -155,13 +150,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.syncfusion.com\/?utm_source=vuejs&utm_medium=list&utm_campaign=vuejsjslistcy19\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/syncfusion.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/opteo.com\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n@@ -187,18 +182,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n-        <\/a>\n-      <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n@@ -219,8 +209,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/energy_comparison.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n@@ -232,6 +220,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.jqwidgets.com\/vue\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/jqwidgets_ltd.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -46,7 +46,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.bitsrc.io\/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue\" target=\"_blank\">\n+        <a href=\"https:\/\/bit.dev\/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bit.png\">\n         <\/a>\n       <\/td>\n@@ -130,11 +130,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/vuetifyjs.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuetify.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/neds.com.au\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/neds.png\">\n@@ -160,13 +155,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.syncfusion.com\/?utm_source=vuejs&utm_medium=list&utm_campaign=vuejsjslistcy19\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/syncfusion.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/opteo.com\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n@@ -192,18 +187,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n-        <\/a>\n-      <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n@@ -224,8 +214,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/energy_comparison.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n@@ -237,6 +225,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.jqwidgets.com\/vue\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/jqwidgets_ltd.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -92,7 +92,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <\/table>\n <!--special-china end-->\n \n-<h3 align=\"center\">Gold Sponsors<\/h4>\n+<h3 align=\"center\">Gold Sponsors<\/h3>\n \n <!--gold start-->\n <table>\n\n\n###\n\n","completion":" chore(typo): fix README tag mismatch (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -22,7 +22,7 @@ const startTagOpen = new RegExp(`^<${qnameCapture}`)\n const startTagClose = \/^\\s*(\\\/?)>\/\n const endTag = new RegExp(`^<\\\\\/${qnameCapture}[^>]*>`)\n const doctype = \/^<!DOCTYPE [^>]+>\/i\n-\/\/ #7298: escape - to avoid being pased as HTML comment when inlined in page\n+\/\/ #7298: escape - to avoid being passed as HTML comment when inlined in page\n const comment = \/^<!\\--\/\n const conditionalComment = \/^<!\\[\/\n \n\n---\n file path A: src\/core\/instance\/render-helpers\/bind-dynamic-keys.js | file path B: src\/core\/instance\/render-helpers\/bind-dynamic-keys.js\n\n@@ -17,7 +17,7 @@ export function bindDynamicKeys (baseObj: Object, values: Array<any>): Object {\n     if (typeof key === 'string' && key) {\n       baseObj[values[i]] = values[i + 1]\n     } else if (process.env.NODE_ENV !== 'production' && key !== '' && key !== null) {\n-      \/\/ null is a speical value for explicitly removing a binding\n+      \/\/ null is a special value for explicitly removing a binding\n       warn(\n         `Invalid value for dynamic directive argument (expected string or null): ${key}`,\n         this\n\n\n###\n\n","completion":" chore(typo): fix typo in comments (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -221,6 +221,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/blokt.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/blokt_cryptocurrency_news.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -226,6 +226,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n     <\/tr><tr><\/tr>\n     <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/blokt.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/blokt_cryptocurrency_news.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -220,6 +220,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/blokt.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/blokt_cryptocurrency_news.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -225,6 +225,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/blokt.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/blokt_cryptocurrency_news.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/events.js | file path B: src\/compiler\/codegen\/events.js\n\n@@ -1,6 +1,6 @@\n \/* @flow *\/\n \n-const fnExpRE = \/^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function\\s*(?:[\\w$]+)?\\s*\\(\/\n+const fnExpRE = \/^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function(?:\\s+[\\w$]+)?\\s*\\(\/\n const fnInvokeRE = \/\\([^)]*?\\);*$\/\n const simplePathRE = \/^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$\/\n \n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -345,6 +345,11 @@ describe('codegen', () => {\n       `<input @input=\"onInput(');[\\\\'());');\">`,\n       `with(this){return _c('input',{on:{\"input\":function($event){onInput(');[\\\\'());');}}})}`\n     )\n+    \/\/ function name including a `function` part (#9920)\n+    assertCodegen(\n+      '<input @input=\"functionName()\">',\n+      `with(this){return _c('input',{on:{\"input\":function($event){return functionName()}}})}`\n+    )\n   })\n \n   it('generate events with multiple statements', () => {\n\n\n###\n\n","completion":" fix: fix function expression regex (#<issue-num>)\n"}
{"prompt":" file path A: types\/index.d.ts | file path B: types\/index.d.ts\n\n@@ -1,9 +1,8 @@\n import { Vue } from \".\/vue\";\n+import \".\/umd\";\n \n export default Vue;\n \n-export as namespace Vue;\n-\n export {\n   CreateElement,\n   VueConstructor\n\n---\n file path A: types\/test\/tsconfig.json | file path B: types\/test\/tsconfig.json\n\n@@ -14,17 +14,9 @@\n       \"vue\": [\"..\/index.d.ts\"]\n     }\n   },\n-  \"files\": [\n-    \"..\/index.d.ts\",\n-    \"..\/options.d.ts\",\n-    \"..\/plugin.d.ts\",\n-    \"..\/vnode.d.ts\",\n-    \"..\/vue.d.ts\",\n-    \"options-test.ts\",\n-    \"plugin-test.ts\",\n-    \"vue-test.ts\",\n-    \"augmentation-test.ts\",\n-    \"ssr-test.ts\"\n+  \"include\": [\n+    \"..\/*.d.ts\",\n+    \"*.ts\"\n   ],\n   \"compileOnSave\": false\n }\n\n---\n file path A: None | file path B: types\/test\/umd-test.ts\n\n@@ -0,0 +1,7 @@\n+const vm = new Vue({\n+  template: \"<div>hi<\/div>\"\n+});\n+\n+const options: Vue.ComponentOptions<Vue> = {\n+  template: \"<div>test<\/div>\"\n+};\n\n---\n file path A: None | file path B: types\/umd.d.ts\n\n@@ -0,0 +1,48 @@\n+import * as V from \".\/index\";\n+import {\n+  DefaultData,\n+  DefaultProps,\n+  DefaultMethods,\n+  DefaultComputed,\n+  PropsDefinition\n+} from \".\/options\";\n+\n+\/\/ Expose some types for backword compatibility...\n+declare namespace Vue {\n+  \/\/ vue.d.ts\n+  export type CreateElement = V.CreateElement;\n+  export type VueConstructor<V extends Vue = Vue> = V.VueConstructor<V>;\n+\n+  \/\/ options.d.ts\n+  export type Component<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps> = V.Component<Data, Methods, Computed, Props>;\n+  export type AsyncComponent<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps> = V.AsyncComponent<Data, Methods, Computed, Props>;\n+  export type ComponentOptions<V extends Vue, Data=DefaultData<V>, Methods=DefaultMethods<V>, Computed=DefaultComputed, PropsDef=PropsDefinition<DefaultProps>, Props=DefaultProps> = V.ComponentOptions<V, Data, Methods, Computed, PropsDef, Props>;\n+  export type FunctionalComponentOptions<Props = DefaultProps, PropDefs = PropsDefinition<Props>> = V.FunctionalComponentOptions<Props, PropDefs>;\n+  export type RenderContext<Props=DefaultProps> = V.RenderContext<Props>;\n+  export type PropType<T> = V.PropType<T>;\n+  export type PropOptions<T=any> = V.PropOptions<T>;\n+  export type ComputedOptions<T> = V.ComputedOptions<T>;\n+  export type WatchHandler<T> = V.WatchHandler<T>;\n+  export type WatchOptions = V.WatchOptions;\n+  export type WatchOptionsWithHandler<T> = V.WatchOptionsWithHandler<T>;\n+  export type DirectiveFunction = V.DirectiveFunction;\n+  export type DirectiveOptions = V.DirectiveOptions;\n+\n+  \/\/ plugin.d.ts\n+  export type PluginFunction<T> = V.PluginFunction<T>;\n+  export type PluginObject<T> = V.PluginObject<T>;\n+\n+  \/\/ vnode.d.ts\n+  export type VNodeChildren = V.VNodeChildren;\n+  export type VNodeChildrenArrayContents = V.VNodeChildrenArrayContents;\n+  export type VNode = V.VNode;\n+  export type VNodeComponentOptions = V.VNodeComponentOptions;\n+  export type VNodeData = V.VNodeData;\n+  export type VNodeDirective = V.VNodeDirective;\n+}\n+\n+declare class Vue extends V.default {}\n+\n+export = Vue;\n+\n+export as namespace Vue;\n\n\n###\n\n","completion":" fix(types): fix global namespace declaration for UMD bundle (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/error-detector.js | file path B: src\/compiler\/error-detector.js\n\n@@ -36,6 +36,8 @@ function checkNode (node: ASTNode, warn: Function) {\n           const range = node.rawAttrsMap[name]\n           if (name === 'v-for') {\n             checkFor(node, `v-for=\"${value}\"`, warn, range)\n+          } else if (name === 'v-slot' || name[0] === '#') {\n+            checkFunctionParameterExpression(value, `${name}=\"${value}\"`, warn, range)\n           } else if (onRE.test(name)) {\n             checkEvent(value, `${name}=\"${value}\"`, warn, range)\n           } else {\n@@ -111,3 +113,16 @@ function checkExpression (exp: string, text: string, warn: Function, range?: Ran\n     }\n   }\n }\n+\n+function checkFunctionParameterExpression (exp: string, text: string, warn: Function, range?: Range) {\n+  try {\n+    new Function(exp, '')\n+  } catch (e) {\n+    warn(\n+      `invalid function parameter expression: ${e.message} in\\n\\n` +\n+      `    ${exp}\\n\\n` +\n+      `  Raw expression: ${text.trim()}\\n`,\n+      range\n+    )\n+  }\n+}\n\n---\n file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -23,8 +23,8 @@ import {\n \n export const onRE = \/^@|^v-on:\/\n export const dirRE = process.env.VBIND_PROP_SHORTHAND\n-  ? \/^v-|^@|^:|^\\.\/\n-  : \/^v-|^@|^:\/\n+  ? \/^v-|^@|^:|^\\.|^#\/\n+  : \/^v-|^@|^:|^#\/\n export const forAliasRE = \/([\\s\\S]*?)\\s+(?:in|of)\\s+([\\s\\S]*)\/\n export const forIteratorRE = \/,([^,\\}\\]]*)(?:,([^,\\}\\]]*))?$\/\n const stripParensRE = \/^\\(|\\)$\/g\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -759,6 +759,22 @@ describe('Component scoped slot', () => {\n         }).$mount()\n         expect(`Unexpected mixed usage of different slot syntaxes`).toHaveBeenWarned()\n       })\n+\n+      it('should warn invalid parameter expression', () => {\n+        new Vue({\n+          template: `<foo ${syntax}=\"1\"><\/foo>`,\n+          components: { Foo }\n+        }).$mount();\n+        expect('invalid function parameter expression').toHaveBeenWarned()\n+      })\n+\n+      it('should allow destructuring props with default value', () => {\n+        new Vue({\n+          template: `<foo ${syntax}=\"{ foo = { bar: '1' } }\"><\/foo>`,\n+          components: { Foo }\n+        }).$mount();\n+        expect('invalid function parameter expression').not.toHaveBeenWarned()\n+      })\n     }\n \n     \/\/ run tests for both full syntax and shorthand\n\n\n###\n\n","completion":" fix(compiler): Remove the warning for valid v-slot value (#<issue-num>)\n"}
{"prompt":" file path A: test\/e2e\/nightwatch.config.js | file path B: test\/e2e\/nightwatch.config.js\n\n@@ -50,7 +50,8 @@ module.exports = {\n       'desiredCapabilities': {\n         'browserName': 'phantomjs',\n         'javascriptEnabled': true,\n-        'acceptSslCerts': true\n+        'acceptSslCerts': true,\n+        'phantomjs.binary.path': require('phantomjs-prebuilt').path\n       }\n     }\n   }\n\n\n###\n\n","completion":" test: fix running e2e test on windows (#<issue-num>)\n"}
{"prompt":" file path A: packages\/weex-vue-framework\/factory.js | file path B: packages\/weex-vue-framework\/factory.js\n\n@@ -5797,7 +5797,7 @@ function createPatchFunction (backend) {\n     }\n   }\n \n-  function removeVnodes (parentElm, vnodes, startIdx, endIdx) {\n+  function removeVnodes (vnodes, startIdx, endIdx) {\n     for (; startIdx <= endIdx; ++startIdx) {\n       var ch = vnodes[startIdx];\n       if (isDef(ch)) {\n@@ -5908,7 +5908,7 @@ function createPatchFunction (backend) {\n       refElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm;\n       addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n     } else if (newStartIdx > newEndIdx) {\n-      removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n+      removeVnodes(oldCh, oldStartIdx, oldEndIdx);\n     }\n   }\n \n@@ -5985,7 +5985,7 @@ function createPatchFunction (backend) {\n         if (isDef(oldVnode.text)) { nodeOps.setTextContent(elm, ''); }\n         addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n       } else if (isDef(oldCh)) {\n-        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n+        removeVnodes(oldCh, 0, oldCh.length - 1);\n       } else if (isDef(oldVnode.text)) {\n         nodeOps.setTextContent(elm, '');\n       }\n@@ -6216,7 +6216,7 @@ function createPatchFunction (backend) {\n \n         \/\/ destroy old node\n         if (isDef(parentElm$1)) {\n-          removeVnodes(parentElm$1, [oldVnode], 0, 0);\n+          removeVnodes([oldVnode], 0, 0);\n         } else if (isDef(oldVnode.tag)) {\n           invokeDestroyHook(oldVnode);\n         }\n\n---\n file path A: src\/core\/vdom\/patch.js | file path B: src\/core\/vdom\/patch.js\n\n@@ -358,7 +358,7 @@ export function createPatchFunction (backend) {\n     }\n   }\n \n-  function removeVnodes (parentElm, vnodes, startIdx, endIdx) {\n+  function removeVnodes (vnodes, startIdx, endIdx) {\n     for (; startIdx <= endIdx; ++startIdx) {\n       const ch = vnodes[startIdx]\n       if (isDef(ch)) {\n@@ -469,7 +469,7 @@ export function createPatchFunction (backend) {\n       refElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm\n       addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue)\n     } else if (newStartIdx > newEndIdx) {\n-      removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx)\n+      removeVnodes(oldCh, oldStartIdx, oldEndIdx)\n     }\n   }\n \n@@ -561,7 +561,7 @@ export function createPatchFunction (backend) {\n         if (isDef(oldVnode.text)) nodeOps.setTextContent(elm, '')\n         addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue)\n       } else if (isDef(oldCh)) {\n-        removeVnodes(elm, oldCh, 0, oldCh.length - 1)\n+        removeVnodes(oldCh, 0, oldCh.length - 1)\n       } else if (isDef(oldVnode.text)) {\n         nodeOps.setTextContent(elm, '')\n       }\n@@ -790,7 +790,7 @@ export function createPatchFunction (backend) {\n \n         \/\/ destroy old node\n         if (isDef(parentElm)) {\n-          removeVnodes(parentElm, [oldVnode], 0, 0)\n+          removeVnodes([oldVnode], 0, 0)\n         } else if (isDef(oldVnode.tag)) {\n           invokeDestroyHook(oldVnode)\n         }\n\n\n###\n\n","completion":" refactor: remove useless parameter to the function removeVnodes (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -76,10 +76,6 @@ Vue.component('union-prop', {\n     complexUnion: { type: [User, Number] as PropType<User | number> },\n     kittyUser: Object as PropType<ICat & IUser>,\n     callback: Function as PropType<ConfirmCallback>,\n-    mixed: [RegExp, Array],\n-    object: [Cat, User],\n-    primitive: [String, Number],\n-    regex: RegExp,\n     union: [User, Number] as PropType<User | number>\n   },\n   data() {\n@@ -87,10 +83,6 @@ Vue.component('union-prop', {\n     this.complexUnion;\n     this.kittyUser;\n     this.callback(true);\n-    this.mixed;\n-    this.object;\n-    this.primitive;\n-    this.regex.compile;\n     this.union;\n     return {\n       fixedSize: this.union,\n@@ -98,6 +90,22 @@ Vue.component('union-prop', {\n   }\n });\n \n+\/\/ stopped working since TS 3.4\n+\/\/ Vue.component('union-prop-with-no-casting', {\n+\/\/   props: {\n+\/\/     mixed: [RegExp, Array],\n+\/\/     object: [Cat, User],\n+\/\/     primitive: [String, Number],\n+\/\/     regex: RegExp\n+\/\/   },\n+\/\/   data() {\n+\/\/     this.mixed;\n+\/\/     this.object;\n+\/\/     this.primitive;\n+\/\/     this.regex.compile;\n+\/\/   }\n+\/\/ })\n+\n Vue.component('prop-with-primitive-default', {\n   props: {\n     id: {\n\n\n###\n\n","completion":" test: separate failing test for TS 3.4\n"}
{"prompt":" file path A: src\/core\/util\/env.js | file path B: src\/core\/util\/env.js\n\n@@ -87,11 +87,10 @@ if (typeof Set !== 'undefined' && isNative(Set)) {\n   }\n }\n \n-interface SimpleSet {\n+export interface SimpleSet {\n   has(key: string | number): boolean;\n   add(key: string | number): mixed;\n   clear(): void;\n }\n \n export { _Set }\n-export type { SimpleSet }\n\n\n###\n\n","completion":" chore: fix SimpleSet export\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -5,7 +5,7 @@\n \/*!\n  * HTML Parser By John Resig (ejohn.org)\n  * Modified by Juriy \"kangax\" Zaytsev\n- * Original code by Erik Arvidsson, Mozilla Public License\n+ * Original code by Erik Arvidsson (MPL-1.1 OR Apache-2.0 OR GPL-2.0-or-later)\n  * http:\/\/erik.eae.net\/simplehtmlparser\/simplehtmlparser.js\n  *\/\n \n\n\n###\n\n","completion":" chore: improve license clarity of simplehtmlparser.js (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.simplyswitch.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/energy_comparison.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -219,6 +219,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.simplyswitch.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/energy_comparison.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: .github\/CONTRIBUTING.md | file path B: .github\/CONTRIBUTING.md\n\n@@ -59,7 +59,7 @@ $ npm run dev:test\n # build all dist files, including npm packages\n $ npm run build\n \n-# run the full test suite, include linting\/type checking\n+# run the full test suite, including linting\/type checking\n $ npm test\n ```\n \n\n\n###\n\n","completion":" docs(contributing): fix a grammar error (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -201,7 +201,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -206,7 +206,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.svg\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n\n###\n\n","completion":" chore: use png for sponsor logo\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -209,6 +209,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/x_team.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/x_team.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.vpnranks.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vpnranks.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: .github\/CONTRIBUTING.md | file path B: .github\/CONTRIBUTING.md\n\n@@ -35,12 +35,12 @@ Hi! I'm really excited that you are interested in contributing to Vue.js. Before\n \n ## Development Setup\n \n-You will need [Node.js](http:\/\/nodejs.org) **version 8+** and [Java Runtime Environment](http:\/\/www.oracle.com\/technetwork\/java\/javase\/downloads\/index.html) (for running Selenium server during e2e tests).\n+You will need [Node.js](http:\/\/nodejs.org) **version 8+**, [Java Runtime Environment](http:\/\/www.oracle.com\/technetwork\/java\/javase\/downloads\/index.html) (for running Selenium server during e2e tests) and [yarn](https:\/\/yarnpkg.com\/en\/docs\/install).\n \n After cloning the repo, run:\n \n ``` bash\n-$ yarn # it install the dependencies of the project\n+$ yarn # install the dependencies of the project\n ```\n \n ### Committing Changes\n\n\n###\n\n","completion":" docs(contributing): add yarn requirement to guide (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -145,18 +145,23 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.valuecoders.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/valuecoders.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/tidelift.com\/subscription\/npm\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.syncfusion.com\/?utm_source=vuejs&utm_medium=list&utm_campaign=vuejsjslistcy19\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/syncfusion.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/opteo.com\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n@@ -182,13 +187,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -150,18 +150,23 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.valuecoders.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/valuecoders.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/tidelift.com\/subscription\/npm\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.syncfusion.com\/?utm_source=vuejs&utm_medium=list&utm_campaign=vuejsjslistcy19\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/syncfusion.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/opteo.com\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n@@ -187,13 +192,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -200,7 +200,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"http:\/\/x-team.com\/join\" target=\"_blank\">\n+        <a href=\"https:\/\/x-team.com\/join\/?utm_source=vuejsorg&utm_medium=sponsor&utm_campaign=vuejsorg-patreon\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/x_team.png\">\n         <\/a>\n       <\/td>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -205,7 +205,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"http:\/\/x-team.com\/join\" target=\"_blank\">\n+        <a href=\"https:\/\/x-team.com\/join\/?utm_source=vuejsorg&utm_medium=sponsor&utm_campaign=vuejsorg-patreon\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/x_team.png\">\n         <\/a>\n       <\/td>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: .github\/CONTRIBUTING.md | file path B: .github\/CONTRIBUTING.md\n\n@@ -35,12 +35,12 @@ Hi! I'm really excited that you are interested in contributing to Vue.js. Before\n \n ## Development Setup\n \n-You will need [Node.js](http:\/\/nodejs.org) **version 6+** and [Java Runtime Environment](http:\/\/www.oracle.com\/technetwork\/java\/javase\/downloads\/index.html) (for running Selenium server during e2e tests).\n+You will need [Node.js](http:\/\/nodejs.org) **version 8+** and [Java Runtime Environment](http:\/\/www.oracle.com\/technetwork\/java\/javase\/downloads\/index.html) (for running Selenium server during e2e tests).\n \n After cloning the repo, run:\n \n ``` bash\n-$ npm install # or yarn\n+$ yarn # it install the dependencies of the project\n ```\n \n ### Committing Changes\n\n\n###\n\n","completion":" docs(contributing): replace npm install with yarn\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -167,43 +167,28 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devsquad.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.inkoop.in\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/inkoop.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.firesticktricks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/firestick_tricks.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/github.com\/marcus-hiles\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/marcus_hiles.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/intygrate.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/isleofcode.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/yakaz.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/yakaz.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n@@ -251,11 +236,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/dopamine.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/gridsome.org\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/gridsome.png\">\n-        <\/a>\n-      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -172,43 +172,28 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devsquad.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.inkoop.in\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/inkoop.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.firesticktricks.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/firestick_tricks.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/github.com\/marcus-hiles\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/marcus_hiles.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/intygrate.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/isleofcode.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/yakaz.com\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/yakaz.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -352,114 +352,113 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Shawn Wildermuth\n - Samuel Smith\n - donny\n-- Sean Washington\n - Simon East\n+- Keisuke Kita\n - kazupon\n+- Sean Washington\n - Lars Andreas Ness\n+- Benjamin Listwon\n - Kirk Lewis\n - Stephen Michael Hartley\n-- Keisuke Kita\n-- Wen-Tien Chang\n-- Benjamin Listwon\n - Victor Tolbert\n+- Wen-Tien Chang\n - Karol\n - Phan An\n-- Barbara Liau\n-- Miljan Aleksic\n - James J. Ye\n+- Barbara Liau\n - Luiz\n-- Jarek Tkaczyk\n - Matsumoto Takamasa\n-- Duncan Kenzie\n-- Mike Margerum\n+- Jarek Tkaczyk\n - Niannian Modisette\n-- Bernhard E. Reiter\n - Matt Jones\n+- Duncan Kenzie\n - Guy Gavergun\n+- Shinya Katayama\n+- Mike Margerum\n+- Bernhard E. Reiter\n+- Chengzhi Yin\n - Zoran Knezevic\n - Jon Hobbs-Smith\n - Pierre Vanhulst\n-- Shinya Katayama\n-- Asaf Yishai\n-- Anthony Estebe\n - Akiho Nagao\n - Haim Yulzari\n+- Asaf Yishai\n+- Anthony Estebe\n+- Jeremy Tan\n - Jim Raden\n - IMGNRY\n-- Jeremy Tan\n-- Tyler\n-- Yong Jun Thong\n - Tai Shi Ling\n-- Jamie McElwain\n-- Matias Verdier\n+- Yong Jun Thong\n+- Tyler\n - Vivekanandhan Natarajan\n-- Daniel Waghorn\n-- Mickal Andrieu\n-- Chih-Hsuan Fan\n+- Matias Verdier\n - Rafael Belvederese\n+- Chih-Hsuan Fan\n - Guilherme S L de Souza\n-- Joe Gregory\n-- Cliff Hess\n+- Daniel Waghorn\n - Rob Yedlin\n+- Mickal Andrieu\n+- Jamie McElwain\n - Jordan Oroshiba\n-- RADD Creative\n-- Marcos Moura\n+- Cliff Hess\n+- Joe Gregory\n - Richard Simpson\n+- Marcos Moura\n - Jessie Hernandez\n-- Aparajita Fishman\n - Ivan Sieder\n - Eric\n+- Aparajita Fishman\n - Romain Lienard\n+- Bohdan Kokotko\n - Christo Crampton\n - David Ang\n-- Bohdan Kokotko\n - Donald Fischer\n+- Alexander Weiher\n+- Oskar Lindgren\n+- Jere Sjroos\n - Wakana Seki\n - David Kaplan\n+- Ben Hong\n - Domenico Gaudioso\n - Jaeyoung Lee\n-- Ben Hong\n-- Alexander Weiher\n-- Oskar Lindgren\n-- Jere Sjroos\n - Andy\n-- John Cleveland\n-- Daniel Mattingley\n - Joe Cochran\n-- Elon Hung\n-- Teon Ooi\n-- Chris Calo\n-- Colt Borg\n - Matt Sencenbaugh\n+- Juan Bermudez\n - Hannes Kochni\n+- Colt Borg\n - Alberto T. Payero Mota\n-- Juan Bermudez\n+- Daniel Mattingley\n+- Teon Ooi\n+- Chris Calo\n+- Elon Hung\n+- Soichiro Isshiki\n - Milan Zivkovic\n-- Garion Herman\n - Christopher Bemister\n - Ed Linklater\n+- Garion Herman\n - Marko Boskovic\n-- Soichiro Isshiki\n+- Rob\n - Andrew Willis\n - Yusuke Kawabata\n - Princeyesuraj Edward\n - shimbaco\n-- Nick Dandakis\n-- Carlos Adrin\n-- Peter Matkovsky\n--  \n - \n-- Kenneth Crawford\n-- Fedor Indutny\n+-  \n+- Peter Matkovsky\n+- Nick Dandakis\n - Fabien GuySake Ungerer\n-- Max Fletcher\n+- Fedor Indutny\n - Masato Miura\n - Nathan Mallison\n+- Shapovalov Pavel\n - David McGuigan\n+- Max Fletcher\n - Bill Condo\n - Kevin Batdorf\n+- Ivan Buncic\n - Pierre Lebrun\n-- Juli A Schlack\n+- Sheree Pea\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.svg\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"http:\/\/x-team.com\/join\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/x_team.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -219,6 +219,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.svg\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"http:\/\/x-team.com\/join\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/x_team.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.9\",\n+  \"version\": \"2.6.10\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.10\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/dom-props.js | file path B: src\/platforms\/web\/runtime\/modules\/dom-props.js\n\n@@ -19,10 +19,11 @@ function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n   }\n \n   for (key in oldProps) {\n-    if (isUndef(props[key])) {\n+    if (!(key in props)) {\n       elm[key] = ''\n     }\n   }\n+\n   for (key in props) {\n     cur = props[key]\n     \/\/ ignore children if the node has textContent or innerHTML,\n\n\n###\n\n","completion":" fix(core): only unset dom prop when not present\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/resolve-async-component.js | file path B: src\/core\/vdom\/helpers\/resolve-async-component.js\n\n@@ -65,6 +65,8 @@ export function resolveAsyncComponent (\n   if (owner && !isDef(factory.owners)) {\n     const owners = factory.owners = [owner]\n     let sync = true\n+    let timerLoading = null\n+    let timerTimeout = null\n \n     ;(owner: any).$on('hook:destroyed', () => remove(owners, owner))\n \n@@ -75,6 +77,14 @@ export function resolveAsyncComponent (\n \n       if (renderCompleted) {\n         owners.length = 0\n+        if (timerLoading !== null) {\n+          clearTimeout(timerLoading)\n+          timerLoading = null\n+        }\n+        if (timerTimeout !== null) {\n+          clearTimeout(timerTimeout)\n+          timerTimeout = null\n+        }\n       }\n     }\n \n@@ -121,7 +131,8 @@ export function resolveAsyncComponent (\n           if (res.delay === 0) {\n             factory.loading = true\n           } else {\n-            setTimeout(() => {\n+            timerLoading = setTimeout(() => {\n+              timerLoading = null\n               if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                 factory.loading = true\n                 forceRender(false)\n@@ -131,7 +142,8 @@ export function resolveAsyncComponent (\n         }\n \n         if (isDef(res.timeout)) {\n-          setTimeout(() => {\n+          timerTimeout = setTimeout(() => {\n+            timerTimeout = null\n             if (isUndef(factory.resolved)) {\n               reject(\n                 process.env.NODE_ENV !== 'production'\n\n---\n file path A: test\/unit\/features\/component\/component-async.spec.js | file path B: test\/unit\/features\/component\/component-async.spec.js\n\n@@ -2,6 +2,42 @@ import Vue from 'vue'\n import { Promise } from 'es6-promise'\n \n describe('Component async', () => {\n+\n+  const oldSetTimeout = window.setTimeout;\n+  const oldClearTimeout = window.clearTimeout;\n+\n+  \/\/ will contain pending timeouts set during the test iteration\n+  \/\/ will contain the id of the timeout as the key, and the the millisecond timeout as the value\n+  \/\/ this helps to identify the timeout that is still pending\n+  let timeoutsPending = {};\n+\n+  beforeEach(function () {\n+    \/\/ reset the timeouts for this iteration\n+    timeoutsPending = {};\n+\n+    window.setTimeout = function(func, delay) {\n+      let id = oldSetTimeout(function() {\n+        delete timeoutsPending[id];\n+        func();\n+      }, delay);\n+      timeoutsPending[id] = delay;\n+      return id\n+    };\n+\n+    window.clearTimeout = function(id) {\n+      oldClearTimeout(id);\n+      delete timeoutsPending[id];\n+    };\n+  })\n+\n+  afterEach(function () {\n+    window.setTimeout = oldSetTimeout;\n+    window.clearTimeout = oldClearTimeout;\n+    \/\/ after the test is complete no timeouts that have been set up during the test should still be active\n+    \/\/ compare stringified JSON for better error message containing ID and millisecond timeout\n+    expect(JSON.stringify(timeoutsPending)).toEqual(JSON.stringify({}))\n+  })\n+\n   it('normal', done => {\n     const vm = new Vue({\n       template: '<div><test><\/test><\/div>',\n@@ -343,6 +379,34 @@ describe('Component async', () => {\n       }, 50)\n     })\n \n+    it('should not have running timeout\/loading if resolved', done => {\n+      const vm = new Vue({\n+        template: `<div><test\/><\/div>`,\n+        components: {\n+          test: () => ({\n+            component: new Promise((resolve, reject) => {\n+              setTimeout(() => {\n+                resolve({ template: '<div>hi<\/div>' })\n+                Promise.resolve().then(() => {\n+                  Vue.nextTick(next)\n+                })\n+              }, 10)\n+            }),\n+            loading: { template: `<div>loading<\/div>` },\n+            delay: 30,\n+            error: { template: `<div>error<\/div>` },\n+            timeout: 40\n+          })\n+        }\n+      }).$mount()\n+\n+      function next () {\n+        expect(vm.$el.textContent).toBe('hi')\n+        \/\/ the afterEach() will ensure that the timeouts for delay and timeout have been cleared\n+        done()\n+      }\n+    })\n+\n     \/\/ #7107\n     it(`should work when resolving sync in sibling component's mounted hook`, done => {\n       let resolveTwo\n\n\n###\n\n","completion":" fix(core): cleanup timeouts for async components (#<issue-num>)\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -144,7 +144,7 @@ export interface RenderContext<Props=DefaultProps> {\n   injections: any\n }\n \n-export type Prop<T> = { (): T } | { new(...args: any[]): T & object }\n+export type Prop<T> = { (): T } | { new(...args: any[]): T & object } | { new(...args: string[]): Function }\n \n export type PropType<T> = Prop<T> | Prop<T>[];\n \n\n---\n file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -68,12 +68,14 @@ interface ICat {\n   foo: any,\n   bar: object\n }\n+type ConfirmCallback = (confirm: boolean) => void;\n \n Vue.component('union-prop', {\n   props: {\n     cat: Object as PropType<ICat>,\n     complexUnion: { type: [User, Number] as PropType<User | number> },\n     kittyUser: Object as PropType<ICat & IUser>,\n+    callback: Function as PropType<ConfirmCallback>,\n     mixed: [RegExp, Array],\n     object: [Cat, User],\n     primitive: [String, Number],\n@@ -84,6 +86,7 @@ Vue.component('union-prop', {\n     this.cat;\n     this.complexUnion;\n     this.kittyUser;\n+    this.callback(true);\n     this.mixed;\n     this.object;\n     this.primitive;\n@@ -281,6 +284,18 @@ Vue.component('component', {\n   delimiters: [\"${\", \"}\"]\n });\n \n+\n+Vue.component('custom-prop-type-function', {\n+  props: {\n+    callback: Function as PropType<(confirm: boolean) => void>,\n+  },\n+  methods: {\n+    confirm(){\n+      this.callback(true);\n+    }\n+  }\n+});\n+\n Vue.component('provide-inject', {\n   provide: {\n     foo: 1\n\n\n###\n\n","completion":" fix(types): allow using functions on the PropTypes (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/scheduler.js | file path B: src\/core\/observer\/scheduler.js\n\n@@ -8,7 +8,8 @@ import {\n   warn,\n   nextTick,\n   devtools,\n-  inBrowser\n+  inBrowser,\n+  isIE\n } from '..\/util\/index'\n \n export const MAX_UPDATE_COUNT = 100\n@@ -47,16 +48,19 @@ let getNow: () => number = Date.now\n \/\/ timestamp can either be hi-res (relative to page load) or low-res\n \/\/ (relative to UNIX epoch), so in order to compare time we have to use the\n \/\/ same timestamp type when saving the flush timestamp.\n-if (inBrowser) {\n+\/\/ All IE versions use low-res event timestamps, and have problematic clock\n+\/\/ implementations (#9632)\n+if (inBrowser && !isIE) {\n   const performance = window.performance\n   if (\n     performance &&\n     typeof performance.now === 'function' &&\n-    document.createEvent('Event').timeStamp <= performance.now()\n+    getNow() > document.createEvent('Event').timeStamp\n   ) {\n-    \/\/ if the event timestamp is bigger than the hi-res timestamp\n-    \/\/ (which is evaluated AFTER) it means the event is using a lo-res timestamp,\n-    \/\/ and we need to use the lo-res version for event listeners as well.\n+    \/\/ if the event timestamp, although evaluated AFTER the Date.now(), is\n+    \/\/ smaller than it, it means the event is using a hi-res timestamp,\n+    \/\/ and we need to use the hi-res version for event listener timestamps as\n+    \/\/ well.\n     getNow = () => performance.now()\n   }\n }\n\n\n###\n\n","completion":" fix(scheduler): revert timeStamp check\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -10,8 +10,8 @@ export function normalizeScopedSlots (\n   prevSlots?: { [key: string]: Function } | void\n ): any {\n   let res\n-  const isStable = slots ? !!slots.$stable : true\n   const hasNormalSlots = Object.keys(normalSlots).length > 0\n+  const isStable = slots ? !!slots.$stable : !hasNormalSlots\n   const key = slots && slots.$key\n   if (!slots) {\n     res = {}\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1277,4 +1277,36 @@ describe('Component scoped slot', () => {\n     }).$mount()\n     expect(vm.$el.textContent).toMatch('fallback')\n   })\n+\n+  \/\/ #9699\n+  \/\/ Component only has normal slots, but is passing down $scopedSlots directly\n+  \/\/ $scopedSlots should not be marked as stable in this case\n+  it('render function passing $scopedSlots w\/ normal slots down', done => {\n+    const one = {\n+      template: `<div><slot name=\"footer\"\/><\/div>`\n+    }\n+\n+    const two = {\n+      render(h) {\n+        return h(one, {\n+          scopedSlots: this.$scopedSlots\n+        })\n+      }\n+    }\n+\n+    const vm = new Vue({\n+      data: { count: 0 },\n+      render(h) {\n+        return h(two, [\n+          h('span', { slot: 'footer' }, this.count)\n+        ])\n+      }\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toMatch(`0`)\n+    vm.count++\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toMatch(`1`)\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix(slots): fix slots not updating when passing down normal slots as $scopedSlots\n"}
{"prompt":" file path A: src\/compiler\/codegen\/events.js | file path B: src\/compiler\/codegen\/events.js\n\n@@ -1,6 +1,6 @@\n \/* @flow *\/\n \n-const fnExpRE = \/^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function\\s*\\(\/\n+const fnExpRE = \/^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function\\s*(?:[\\w$]+)?\\s*\\(\/\n const fnInvokeRE = \/\\([^)]*?\\);*$\/\n const simplePathRE = \/^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$\/\n \n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -500,6 +500,11 @@ describe('codegen', () => {\n       '<input @input=\"function () { current++ }\">',\n       `with(this){return _c('input',{on:{\"input\":function () { current++ }}})}`\n     )\n+    \/\/ normal named function\n+    assertCodegen(\n+      '<input @input=\"function fn () { current++ }\">',\n+      `with(this){return _c('input',{on:{\"input\":function fn () { current++ }}})}`\n+    )\n     \/\/ arrow with no args\n     assertCodegen(\n       '<input @input=\"()=>current++\">',\n\n\n###\n\n","completion":" fix(codegen): support named function expression in v-on (#<issue-num>)\n"}
{"prompt":" file path A: flow\/vnode.js | file path B: flow\/vnode.js\n\n@@ -42,7 +42,7 @@ declare interface VNodeData {\n   staticClass?: string;\n   class?: any;\n   staticStyle?: { [key: string]: any };\n-  style?: Array<Object> | Object;\n+  style?: string | Array<Object> | Object;\n   normalizedStyle?: Object;\n   props?: { [key: string]: any };\n   attrs?: { [key: string]: string };\n\n---\n file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -213,3 +213,28 @@ class Decorated extends Vue {\n \n const obj = Vue.observable({ a: 1 })\n obj.a++\n+\n+\/\/ VNodeData style tests.\n+const ComponentWithStyleInVNodeData = Vue.extend({\n+  render (h) {\n+    const elementWithStyleAsString = h('div', {\n+      style: 'background-color: red;'\n+    });\n+\n+    const elementWithStyleAsObject = h('div', {\n+      style: { backgroundColor: 'green' }\n+    });\n+\n+    const elementWithStyleAsArrayOfObjects = h('div', {\n+      style: [\n+        { backgroundColor: 'blue' }\n+      ]\n+    });\n+\n+    return h('div', undefined, [\n+      elementWithStyleAsString,\n+      elementWithStyleAsObject,\n+      elementWithStyleAsArrayOfObjects\n+    ]);\n+  }\n+});\n\n---\n file path A: types\/vnode.d.ts | file path B: types\/vnode.d.ts\n\n@@ -48,7 +48,7 @@ export interface VNodeData {\n   staticClass?: string;\n   class?: any;\n   staticStyle?: { [key: string]: any };\n-  style?: object[] | object;\n+  style?: string | object[] | object;\n   props?: { [key: string]: any };\n   attrs?: { [key: string]: any };\n   domProps?: { [key: string]: any };\n\n\n###\n\n","completion":" fix(types): support string type for style in VNode data (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/scheduler.js | file path B: src\/core\/observer\/scheduler.js\n\n@@ -47,16 +47,18 @@ let getNow: () => number = Date.now\n \/\/ timestamp can either be hi-res (relative to page load) or low-res\n \/\/ (relative to UNIX epoch), so in order to compare time we have to use the\n \/\/ same timestamp type when saving the flush timestamp.\n-if (\n-  inBrowser &&\n-  window.performance &&\n-  typeof performance.now === 'function' &&\n-  document.createEvent('Event').timeStamp <= performance.now()\n-) {\n-  \/\/ if the event timestamp is bigger than the hi-res timestamp\n-  \/\/ (which is evaluated AFTER) it means the event is using a lo-res timestamp,\n-  \/\/ and we need to use the lo-res version for event listeners as well.\n-  getNow = () => performance.now()\n+if (inBrowser) {\n+  const performance = window.performance\n+  if (\n+    performance &&\n+    typeof performance.now === 'function' &&\n+    document.createEvent('Event').timeStamp <= performance.now()\n+  ) {\n+    \/\/ if the event timestamp is bigger than the hi-res timestamp\n+    \/\/ (which is evaluated AFTER) it means the event is using a lo-res timestamp,\n+    \/\/ and we need to use the lo-res version for event listeners as well.\n+    getNow = () => performance.now()\n+  }\n }\n \n \/**\n\n\n###\n\n","completion":" fix(core): use window.performance for compatibility in JSDOM (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.8\",\n+  \"version\": \"2.6.9\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.9\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -351,7 +351,7 @@ export function parse (\n         text = preserveWhitespace ? ' ' : ''\n       }\n       if (text) {\n-        if (whitespaceOption === 'condense') {\n+        if (!inPre && whitespaceOption === 'condense') {\n           \/\/ condense consecutive whitespaces into single space\n           text = text.replace(whitespaceRE, ' ')\n         }\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -820,12 +820,14 @@ describe('parser', () => {\n     expect(ast.children[3].children[0].text).toBe('.\\n  Have fun!\\n')\n   })\n \n+  const condenseOptions = extend({\n+    whitespace: 'condense',\n+    \/\/ should be ignored when whitespace is specified\n+    preserveWhitespace: false\n+  }, baseOptions)\n+\n   it(`whitespace: 'condense'`, () => {\n-    const options = extend({\n-      whitespace: 'condense',\n-      \/\/ should be ignored when whitespace is specified\n-      preserveWhitespace: false\n-    }, baseOptions)\n+    const options = extend({}, condenseOptions)\n     const ast = parse('<p>\\n  Welcome to <b>Vue.js<\/b>    <i>world<\/i>  \\n  <span>.\\n  Have fun!\\n<\/span><\/p>', options)\n     expect(ast.tag).toBe('p')\n     expect(ast.children.length).toBe(5)\n@@ -842,4 +844,41 @@ describe('parser', () => {\n     expect(ast.children[4].tag).toBe('span')\n     expect(ast.children[4].children[0].text).toBe('. Have fun! ')\n   })\n+\n+  it(`preserve whitespace in <pre> tag with whitespace: 'condense'`, function () {\n+    const options = extend({}, condenseOptions)\n+    const ast = parse('<pre><code>  \\n<span>hi<\/span>\\n  <\/code><span> <\/span><\/pre>', options)\n+    const code = ast.children[0]\n+    expect(code.children[0].type).toBe(3)\n+    expect(code.children[0].text).toBe('  \\n')\n+    expect(code.children[2].type).toBe(3)\n+    expect(code.children[2].text).toBe('\\n  ')\n+\n+    const span = ast.children[1]\n+    expect(span.children[0].type).toBe(3)\n+    expect(span.children[0].text).toBe(' ')\n+  })\n+\n+  it(`ignore the first newline in <pre> tag with whitespace: 'condense'`, function () {\n+    const options = extend({}, condenseOptions)\n+    const ast = parse('<div><pre>\\nabc<\/pre>\\ndef<pre>\\n\\nabc<\/pre><\/div>', options)\n+    const pre = ast.children[0]\n+    expect(pre.children[0].type).toBe(3)\n+    expect(pre.children[0].text).toBe('abc')\n+    const text = ast.children[1]\n+    expect(text.type).toBe(3)\n+    expect(text.text).toBe(' def')\n+    const pre2 = ast.children[2]\n+    expect(pre2.children[0].type).toBe(3)\n+    expect(pre2.children[0].text).toBe('\\nabc')\n+  })\n+\n+  it(`keep first newline after unary tag in <pre> with whitespace: 'condense'`, () => {\n+    const options = extend({}, condenseOptions)\n+    const ast = parse('<pre>abc<input>\\ndef<\/pre>', options)\n+    expect(ast.children[1].type).toBe(1)\n+    expect(ast.children[1].tag).toBe('input')\n+    expect(ast.children[2].type).toBe(3)\n+    expect(ast.children[2].text).toBe('\\ndef')\n+  })\n })\n\n\n###\n\n","completion":" fix(compiler): whitespace: 'condense' should honor pre tag as well (#<issue-num>)\n"}
{"prompt":" file path A: examples\/modal\/index.html | file path B: examples\/modal\/index.html\n\n@@ -10,7 +10,7 @@\n   <body>\n     <!-- template for the modal component -->\n     <script type=\"text\/x-template\" id=\"modal-template\">\n-      <transition name=\"modal\">\n+      <transition name=\"modal\" appear>\n         <div class=\"modal-mask\">\n           <div class=\"modal-wrapper\">\n             <div class=\"modal-container\">\n\n---\n file path A: src\/platforms\/web\/runtime\/modules\/transition.js | file path B: src\/platforms\/web\/runtime\/modules\/transition.js\n\n@@ -66,8 +66,8 @@ export function enter (vnode: VNodeWithData, toggleDisplay: ?() => void) {\n   let context = activeInstance\n   let transitionNode = activeInstance.$vnode\n   while (transitionNode && transitionNode.parent) {\n-    transitionNode = transitionNode.parent\n     context = transitionNode.context\n+    transitionNode = transitionNode.parent\n   }\n \n   const isAppear = !context._isMounted || !vnode.isRootInsert\n\n---\n file path A: test\/unit\/features\/transition\/transition.spec.js | file path B: test\/unit\/features\/transition\/transition.spec.js\n\n@@ -842,7 +842,7 @@ if (!isIE9) {\n       }).then(done)\n     })\n \n-    it('transition inside child component', done => {\n+    it('transition inside child component with v-if', done => {\n       const vm = new Vue({\n         template: `\n           <div>\n@@ -872,14 +872,126 @@ if (!isIE9) {\n         expect(vm.$el.children.length).toBe(0)\n         vm.ok = true\n       }).then(() => {\n-        expect(vm.$el.children[0].className).toBe('test v-enter v-enter-active')\n+        expect(vm.$el.children[0].className).toBe('test')\n+      }).then(done)\n+    })\n+\n+    it('transition with appear inside child component with v-if', done => {\n+      const vm = new Vue({\n+        template: `\n+          <div>\n+            <test v-if=\"ok\" class=\"test\"><\/test>\n+          <\/div>\n+        `,\n+        data: { ok: true },\n+        components: {\n+          test: {\n+            template: `\n+              <transition appear\n+                appear-class=\"test-appear\"\n+                appear-to-class=\"test-appear-to\"\n+                appear-active-class=\"test-appear-active\">\n+                <div>foo<\/div>\n+              <\/transition>\n+            `\n+          }\n+        }\n+      }).$mount(el)\n+\n+      waitForUpdate(() => {\n+        expect(vm.$el.children[0].className).toBe('test test-appear test-appear-active')\n       }).thenWaitFor(nextFrame).then(() => {\n-        expect(vm.$el.children[0].className).toBe('test v-enter-active v-enter-to')\n+        expect(vm.$el.children[0].className).toBe('test test-appear-active test-appear-to')\n+      }).thenWaitFor(duration + buffer).then(() => {\n+        expect(vm.$el.children[0].className).toBe('test')\n+        vm.ok = false\n+      }).then(() => {\n+        expect(vm.$el.children[0].className).toBe('test v-leave v-leave-active')\n+      }).thenWaitFor(nextFrame).then(() => {\n+        expect(vm.$el.children[0].className).toBe('test v-leave-active v-leave-to')\n+      }).thenWaitFor(duration + buffer).then(() => {\n+        expect(vm.$el.children.length).toBe(0)\n+      }).then(done)\n+    })\n+\n+    it('transition inside nested child component with v-if', done => {\n+      const vm = new Vue({\n+        template: `\n+          <div>\n+            <foo v-if=\"ok\" class=\"test\"><\/foo>\n+          <\/div>\n+        `,\n+        data: { ok: true },\n+        components: {\n+          foo: {\n+            template: '<bar><\/bar>',\n+            components: {\n+              bar: {\n+                template: '<transition><div>foo<\/div><\/transition>'\n+              }\n+            }\n+          }\n+        }\n+      }).$mount(el)\n+\n+      \/\/ should not apply transition on initial render by default\n+      expect(vm.$el.innerHTML).toBe('<div class=\"test\">foo<\/div>')\n+      vm.ok = false\n+      waitForUpdate(() => {\n+        expect(vm.$el.children[0].className).toBe('test v-leave v-leave-active')\n+      }).thenWaitFor(nextFrame).then(() => {\n+        expect(vm.$el.children[0].className).toBe('test v-leave-active v-leave-to')\n       }).thenWaitFor(duration + buffer).then(() => {\n+        expect(vm.$el.children.length).toBe(0)\n+        vm.ok = true\n+      }).then(() => {\n         expect(vm.$el.children[0].className).toBe('test')\n       }).then(done)\n     })\n \n+    it('transition with appear inside nested child component with v-if', done => {\n+      const vm = new Vue({\n+        template: `\n+          <div>\n+            <foo v-if=\"ok\" class=\"test\"><\/foo>\n+          <\/div>\n+        `,\n+        data: { ok: true },\n+        components: {\n+          foo: {\n+            template: '<bar><\/bar>',\n+            components: {\n+              bar: {\n+                template: `\n+                  <transition appear\n+                    appear-class=\"test-appear\"\n+                    appear-to-class=\"test-appear-to\"\n+                    appear-active-class=\"test-appear-active\">\n+                    <div>foo<\/div>\n+                  <\/transition>\n+                `\n+              }\n+            }\n+          }\n+        }\n+      }).$mount(el)\n+\n+      waitForUpdate(() => {\n+        expect(vm.$el.children[0].className).toBe('test test-appear test-appear-active')\n+      }).thenWaitFor(nextFrame).then(() => {\n+        expect(vm.$el.children[0].className).toBe('test test-appear-active test-appear-to')\n+      }).thenWaitFor(duration + buffer).then(() => {\n+        expect(vm.$el.children[0].className).toBe('test')\n+        vm.ok = false\n+      }).then(() => {\n+        expect(vm.$el.children[0].className).toBe('test v-leave v-leave-active')\n+      }).thenWaitFor(nextFrame).then(() => {\n+        expect(vm.$el.children[0].className).toBe('test v-leave-active v-leave-to')\n+      }).thenWaitFor(duration + buffer).then(() => {\n+        expect(vm.$el.children.length).toBe(0)\n+      }).then(done)\n+    })\n+\n     it('custom transition higher-order component', done => {\n       const vm = new Vue({\n         template: '<div><my-transition><div v-if=\"ok\" class=\"test\">foo<\/div><\/my-transition><\/div>',\n\n\n###\n\n","completion":" fix(transition): fix appear check for transition wrapper components (#<issue-num>)\n"}
{"prompt":" file path A: scripts\/alias.js | file path B: scripts\/alias.js\n\n@@ -10,6 +10,5 @@ module.exports = {\n   web: resolve('src\/platforms\/web'),\n   weex: resolve('src\/platforms\/weex'),\n   server: resolve('src\/server'),\n-  entries: resolve('src\/entries'),\n   sfc: resolve('src\/sfc')\n }\n\n\n###\n\n","completion":" chore: remove unused build alias (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/error.js | file path B: src\/core\/util\/error.js\n\n@@ -43,10 +43,11 @@ export function invokeWithErrorHandling (\n   let res\n   try {\n     res = args ? handler.apply(context, args) : handler.call(context)\n-    if (res && !res._isVue && isPromise(res)) {\n+    if (res && !res._isVue && isPromise(res) && !res._handled) {\n+      res.catch(e => handleError(e, vm, info + ` (Promise\/async)`))\n       \/\/ issue #9511\n-      \/\/ reassign to res to avoid catch triggering multiple times when nested calls\n-      res = res.catch(e => handleError(e, vm, info + ` (Promise\/async)`))\n+      \/\/ avoid catch triggering multiple times when nested calls\n+      res._handled = true\n     }\n   } catch (e) {\n     handleError(e, vm, info)\n\n---\n file path A: test\/unit\/modules\/util\/invoke-with-error-handling.spec.js | file path B: test\/unit\/modules\/util\/error.spec.js\n\n@@ -6,14 +6,17 @@ describe('invokeWithErrorHandling', () => {\n     it('should errorHandler call once when nested calls return rejected promise', done => {\n       const originalHandler = Vue.config.errorHandler\n       const handler = Vue.config.errorHandler = jasmine.createSpy()\n+      const userCatch = jasmine.createSpy()\n+      const err = new Error('fake error')\n \n       invokeWithErrorHandling(() => {\n         return invokeWithErrorHandling(() => {\n-          return Promise.reject(new Error('fake error'))\n+          return Promise.reject(err)\n         })\n-      }).then(() => {\n+      }).catch(userCatch).then(() => {\n         Vue.config.errorHandler = originalHandler\n         expect(handler.calls.count()).toBe(1)\n+        expect(userCatch).toHaveBeenCalledWith(err)\n         done()\n       })\n     })\n\n\n###\n\n","completion":" fix: should not swallow user catch on rejected promise in methods\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/resolve-async-component.js | file path B: src\/core\/vdom\/helpers\/resolve-async-component.js\n\n@@ -53,7 +53,7 @@ export function resolveAsyncComponent (\n   }\n \n   const owner = currentRenderingInstance\n-  if (isDef(factory.owners) && factory.owners.indexOf(owner) === -1) {\n+  if (owner && isDef(factory.owners) && factory.owners.indexOf(owner) === -1) {\n     \/\/ already pending\n     factory.owners.push(owner)\n   }\n@@ -62,7 +62,7 @@ export function resolveAsyncComponent (\n     return factory.loadingComp\n   }\n \n-  if (!isDef(factory.owners)) {\n+  if (owner && !isDef(factory.owners)) {\n     const owners = factory.owners = [owner]\n     let sync = true\n \n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -640,6 +640,41 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n+  it('renders nested async functional component', done => {\n+    renderVmWithOptions({\n+      template: `\n+        <div>\n+          <outer-async><\/outer-async>\n+        <\/div>\n+      `,\n+      components: {\n+        outerAsync (resolve) {\n+          setTimeout(() => resolve({\n+            functional: true,\n+            render (h) {\n+              return h('innerAsync')\n+            }\n+          }), 1)\n+        },\n+        innerAsync (resolve) {\n+          setTimeout(() => resolve({\n+            functional: true,\n+            render (h) {\n+              return h('span', { class: ['a'] }, 'inner')\n+            },\n+          }), 1)\n+        }\n+      }\n+    }, result => {\n+      expect(result).toContain(\n+        '<div data-server-rendered=\"true\">' +\n+          '<span class=\"a\">inner<\/span>' +\n+        '<\/div>'\n+      )\n+      done()\n+    })\n+  })\n+\n   it('should catch async component error', done => {\n     Vue.config.silent = true\n     renderToString(new Vue({\n\n\n###\n\n","completion":" fix(ssr): fix nested async functional componet rendering (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -67,8 +67,10 @@ function add (\n         e.target === e.currentTarget ||\n         \/\/ event is fired after handler attachment\n         e.timeStamp >= attachedTimestamp ||\n-        \/\/ #9462 bail for iOS 9 bug: event.timeStamp is 0 after history.pushState\n-        e.timeStamp === 0 ||\n+        \/\/ bail for environments that have buggy event.timeStamp implementations\n+        \/\/ #9462 iOS 9 bug: event.timeStamp is 0 after history.pushState\n+        \/\/ #9681 QtWebEngine event.timeStamp is negative value\n+        e.timeStamp <= 0 ||\n         \/\/ #9448 bail if event is fired in another document in a multi-page\n         \/\/ electron\/nw.js app, since event.timeStamp will be using a different\n         \/\/ starting reference\n\n\n###\n\n","completion":" fix: event timeStamp check for Qt\n"}
{"prompt":" file path A: src\/server\/template-renderer\/create-async-file-mapper.js | file path B: src\/server\/template-renderer\/create-async-file-mapper.js\n\n@@ -43,8 +43,8 @@ function mapIdToFile (id, clientManifest) {\n   if (fileIndices) {\n     fileIndices.forEach(index => {\n       const file = clientManifest.all[index]\n-      \/\/ only include async files or non-js assets\n-      if (clientManifest.async.indexOf(file) > -1 || !(\/\\.js($|\\?)\/.test(file))) {\n+      \/\/ only include async files or non-js, non-css assets\n+      if (clientManifest.async.indexOf(file) > -1 || !(\/\\.(js|css)($|\\?)\/.test(file))) {\n         files.push(file)\n       }\n     })\n\n\n###\n\n","completion":" fix(ssr): not push non-async css files into map (#<issue-num>)\n"}
{"prompt":" file path A: test\/unit\/modules\/observer\/observer.spec.js | file path B: test\/unit\/modules\/observer\/observer.spec.js\n\n@@ -226,19 +226,7 @@ describe('Observer', () => {\n     })\n \n     observe(obj)\n-    \/\/ mock a watcher!\n-    const watcher = {\n-      deps: [],\n-      addDep: function (dep) {\n-        this.deps.push(dep)\n-        dep.addSub(this)\n-      },\n-      update: jasmine.createSpy()\n-    }\n-    \/\/ collect dep\n-    Dep.target = watcher\n     expect(obj.a).toBe(2) \/\/ Make sure 'this' is preserved\n-    Dep.target = null\n     obj.a = 3\n     expect(obj.val).toBe(3) \/\/ make sure 'setter' was called\n     obj.val = 5\n\n\n###\n\n","completion":" test: remove unused code (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -209,6 +209,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.svg\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"http:\/\/en.shopware.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/shopware_ag.svg\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -204,6 +204,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -209,6 +209,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.bestvpn.co\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bestvpn_co.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -319,15 +319,15 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <h2 align=\"center\">Generous Backers via Patreon ($50+)<\/h2>\n \n <!--50 start-->\n-- Jamie K\n - Wasim Khamlichi\n - errorrik\n - Alex Balashov\n - Konstantin Levinski\n - Blaise Laflamme\n-- Ernest Sim\n - Dilettant\n - Sean Ferguson\n+- Johnny Ray Austin\n+- IdealCoders\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n@@ -337,119 +337,113 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Shawn Wildermuth\n - Samuel Smith\n - donny\n-- Jake Ingman\n+- Sean Washington\n - Simon East\n - kazupon\n - Lars Andreas Ness\n-- Luca Borghini\n-- Sean Washington\n-- Benjamin Listwon\n-- Keisuke Kita\n - Kirk Lewis\n+- Stephen Michael Hartley\n+- Keisuke Kita\n - Wen-Tien Chang\n+- Benjamin Listwon\n - Victor Tolbert\n-- Stephen Michael Hartley\n - Karol\n - Phan An\n+- Barbara Liau\n - Miljan Aleksic\n - James J. Ye\n-- Barbara Liau\n - Luiz\n-- Matsumoto Takamasa\n - Jarek Tkaczyk\n+- Matsumoto Takamasa\n - Duncan Kenzie\n - Mike Margerum\n-- Guy Gavergun\n-- Matt Jones\n - Niannian Modisette\n - Bernhard E. Reiter\n-- Pierre Vanhulst\n+- Matt Jones\n+- Guy Gavergun\n - Zoran Knezevic\n-- Chengzhi Yin\n-- Shinya Katayama\n - Jon Hobbs-Smith\n-- Anthony Estebe\n+- Pierre Vanhulst\n+- Shinya Katayama\n - Asaf Yishai\n-- Haim Yulzari\n+- Anthony Estebe\n - Akiho Nagao\n-- Jeremy Tan\n+- Haim Yulzari\n - Jim Raden\n-- Tai Shi Ling\n - IMGNRY\n+- Jeremy Tan\n+- Tyler\n - Yong Jun Thong\n+- Tai Shi Ling\n+- Jamie McElwain\n - Matias Verdier\n-- Chih-Hsuan Fan\n-- Tyler\n-- Daniel Waghorn\n - Vivekanandhan Natarajan\n+- Daniel Waghorn\n+- Mickal Andrieu\n+- Chih-Hsuan Fan\n - Rafael Belvederese\n-- Jamie McElwain\n+- Guilherme S L de Souza\n+- Joe Gregory\n - Cliff Hess\n - Rob Yedlin\n-- Mickal Andrieu\n-- Guilherme S L de Souza\n - Jordan Oroshiba\n-- Joe Gregory\n-- Marcos Moura\n - RADD Creative\n+- Marcos Moura\n - Richard Simpson\n-- Alok Pant\n - Jessie Hernandez\n-- Ivan Sieder\n - Aparajita Fishman\n+- Ivan Sieder\n - Eric\n-- Christo Crampton\n - Romain Lienard\n+- Christo Crampton\n+- David Ang\n - Bohdan Kokotko\n - Donald Fischer\n-- Jere Sjroos\n-- David Ang\n-- Alexander Weiher\n-- Oskar Lindgren\n-- Jaeyoung Lee\n - Wakana Seki\n-- Ben Hong\n-- John Cleveland\n-- Tom Ootes\n-- Domenico Gaudioso\n - David Kaplan\n-- Amor\n+- Domenico Gaudioso\n+- Jaeyoung Lee\n+- Ben Hong\n+- Alexander Weiher\n+- Oskar Lindgren\n+- Jere Sjroos\n - Andy\n-- Hannes Kochni\n-- Juan Bermudez\n+- John Cleveland\n - Daniel Mattingley\n-- Matt Sencenbaugh\n - Joe Cochran\n+- Elon Hung\n+- Teon Ooi\n - Chris Calo\n - Colt Borg\n-- Teon Ooi\n+- Matt Sencenbaugh\n+- Hannes Kochni\n - Alberto T. Payero Mota\n-- Elon Hung\n+- Juan Bermudez\n - Milan Zivkovic\n-- Johnny Ray Austin\n-- Tom Meagher\n-- Soichiro Isshiki\n-- Abraham Arango\n-- Marko Boskovic\n - Garion Herman\n-- Ed Linklater\n - Christopher Bemister\n+- Ed Linklater\n+- Marko Boskovic\n+- Soichiro Isshiki\n - Andrew Willis\n-- Princeyesuraj Edward\n - Yusuke Kawabata\n-- We\n-- Carlos Adrin\n-- Nick Dandakis\n+- Princeyesuraj Edward\n - shimbaco\n+- Nick Dandakis\n+- Carlos Adrin\n+- Peter Matkovsky\n -  \n - \n-- alcalbg\n - Kenneth Crawford\n-- Peter Matkovsky\n+- Fedor Indutny\n - Fabien GuySake Ungerer\n-- Kevin Batdorf\n+- Max Fletcher\n - Masato Miura\n-- Fedor Indutny\n+- Nathan Mallison\n+- David McGuigan\n+- Bill Condo\n+- Kevin Batdorf\n+- Pierre Lebrun\n - Juli A Schlack\n <!--10 end-->\n \n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/scheduler.js | file path B: src\/core\/observer\/scheduler.js\n\n@@ -51,7 +51,7 @@ if (\n   inBrowser &&\n   window.performance &&\n   typeof performance.now === 'function' &&\n-  getNow() > document.createEvent('Event').timeStamp\n+  document.createEvent('Event').timeStamp <= performance.now()\n ) {\n   \/\/ if the event timestamp is bigger than the hi-res timestamp\n   \/\/ (which is evaluated AFTER) it means the event is using a lo-res timestamp,\n\n\n###\n\n","completion":" fix(scheduler): getNow detection can randomly fail (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -60,8 +60,10 @@ function normalizeScopedSlot(normalSlots, key, fn) {\n     res = res && typeof res === 'object' && !Array.isArray(res)\n       ? [res] \/\/ single vnode\n       : normalizeChildren(res)\n-    return res && res.length === 0\n-      ? undefined\n+    return res && (\n+      res.length === 0 ||\n+      (res.length === 1 && res[0].isComment) \/\/ #9658\n+    ) ? undefined\n       : res\n   }\n   \/\/ this is a slot using the new v-slot syntax without scope. although it is\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1264,4 +1264,17 @@ describe('Component scoped slot', () => {\n       expect(vm.$el.textContent).toMatch(`Content:ok`)\n     }).then(done)\n   })\n+\n+  \/\/#9658\n+  it('fallback for scoped slot with single v-if', () => {\n+    const vm = new Vue({\n+      template: `<test v-slot><template v-if=\"false\">hi<\/template><\/test>`,\n+      components: {\n+        Test: {\n+          template: `<div><slot>fallback<\/slot><\/div>`\n+        }\n+      }\n+    }).$mount()\n+    expect(vm.$el.textContent).toMatch('fallback')\n+  })\n })\n\n\n###\n\n","completion":" fix: should use fallback for scoped slots with single falsy v-if\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -11,6 +11,7 @@ export function normalizeScopedSlots (\n ): any {\n   let res\n   const isStable = slots ? !!slots.$stable : true\n+  const hasNormalSlots = Object.keys(normalSlots).length > 0\n   const key = slots && slots.$key\n   if (!slots) {\n     res = {}\n@@ -22,7 +23,8 @@ export function normalizeScopedSlots (\n     prevSlots &&\n     prevSlots !== emptyObject &&\n     key === prevSlots.$key &&\n-    Object.keys(normalSlots).length === 0\n+    !hasNormalSlots &&\n+    !prevSlots.$hasNormal\n   ) {\n     \/\/ fast path 2: stable scoped slots w\/ no normal slots to proxy,\n     \/\/ only need to normalize once\n@@ -48,6 +50,7 @@ export function normalizeScopedSlots (\n   }\n   def(res, '$stable', isStable)\n   def(res, '$key', key)\n+  def(res, '$hasNormal', hasNormalSlots)\n   return res\n }\n \n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1227,4 +1227,41 @@ describe('Component scoped slot', () => {\n       expect(vm.$el.textContent.trim()).toBe(`2`)\n     }).then(done)\n   })\n+\n+  \/\/ #9644\n+  it('should factor presence of normal slots into scoped slots caching', done => {\n+    const Wrapper = {\n+      template: `<div>\n+        <p>Default:<slot\/><\/p>\n+        <p>Content:<slot name='content'\/><\/p>\n+      <\/div>`\n+    }\n+\n+    const vm = new Vue({\n+      data: { ok: false },\n+      components: { Wrapper },\n+      template: `<wrapper>\n+        <p v-if='ok'>ok<\/p>\n+        <template #content>\n+          <p v-if='ok'>ok<\/p>\n+        <\/template>\n+      <\/wrapper>`\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).not.toMatch(`Default:ok`)\n+    expect(vm.$el.textContent).not.toMatch(`Content:ok`)\n+    vm.ok = true\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toMatch(`Default:ok`)\n+      expect(vm.$el.textContent).toMatch(`Content:ok`)\n+      vm.ok = false\n+    }).then(() => {\n+      expect(vm.$el.textContent).not.toMatch(`Default:ok`)\n+      expect(vm.$el.textContent).not.toMatch(`Content:ok`)\n+      vm.ok = true\n+    }).then(() => {\n+      expect(vm.$el.textContent).toMatch(`Default:ok`)\n+      expect(vm.$el.textContent).toMatch(`Content:ok`)\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: should consider presence of normal slots when caching normalized scoped slots\n"}
{"prompt":" file path A: src\/core\/observer\/scheduler.js | file path B: src\/core\/observer\/scheduler.js\n\n@@ -47,10 +47,15 @@ let getNow: () => number = Date.now\n \/\/ timestamp can either be hi-res (relative to page load) or low-res\n \/\/ (relative to UNIX epoch), so in order to compare time we have to use the\n \/\/ same timestamp type when saving the flush timestamp.\n-if (inBrowser && getNow() > document.createEvent('Event').timeStamp) {\n-  \/\/ if the low-res timestamp which is bigger than the event timestamp\n-  \/\/ (which is evaluated AFTER) it means the event is using a hi-res timestamp,\n-  \/\/ and we need to use the hi-res version for event listeners as well.\n+if (\n+  inBrowser &&\n+  window.performance &&\n+  typeof performance.now === 'function' &&\n+  getNow() > document.createEvent('Event').timeStamp\n+) {\n+  \/\/ if the event timestamp is bigger than the hi-res timestamp\n+  \/\/ (which is evaluated AFTER) it means the event is using a lo-res timestamp,\n+  \/\/ and we need to use the lo-res version for event listeners as well.\n   getNow = () => performance.now()\n }\n \n\n\n###\n\n","completion":" fix(scheduler): fix getNow check in IE9 (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/bind-object-props.js | file path B: src\/core\/instance\/render-helpers\/bind-object-props.js\n\n@@ -7,7 +7,8 @@ import {\n   isObject,\n   toObject,\n   isReservedAttribute,\n-  camelize\n+  camelize,\n+  hyphenate\n } from 'core\/util\/index'\n \n \/**\n@@ -45,12 +46,13 @@ export function bindObjectProps (\n             : data.attrs || (data.attrs = {})\n         }\n         const camelizedKey = camelize(key)\n-        if (!(key in hash) && !(camelizedKey in hash)) {\n+        const hyphenatedKey = hyphenate(key)\n+        if (!(camelizedKey in hash) && !(hyphenatedKey in hash)) {\n           hash[key] = value[key]\n \n           if (isSync) {\n             const on = data.on || (data.on = {})\n-            on[`update:${camelizedKey}`] = function ($event) {\n+            on[`update:${key}`] = function ($event) {\n               value[key] = $event\n             }\n           }\n\n---\n file path A: test\/unit\/features\/directives\/bind.spec.js | file path B: test\/unit\/features\/directives\/bind.spec.js\n\n@@ -234,7 +234,7 @@ describe('Directive v-bind', () => {\n       template: `<test v-bind=\"test\" data-foo=\"foo\" dataBar=\"bar\"\/>`,\n       components: {\n         test: {\n-          template: '<div :data-foo=\"dataFoo\" :data-bar=\"dataBar\"><\/div>',\n+          template: '<div>{{ dataFoo }} {{ dataBar }}<\/div>',\n           props: ['dataFoo', 'dataBar']\n         }\n       },\n@@ -245,8 +245,7 @@ describe('Directive v-bind', () => {\n         }\n       }\n     }).$mount()\n-    expect(vm.$el.getAttribute('data-foo')).toBe('foo')\n-    expect(vm.$el.getAttribute('data-bar')).toBe('bar')\n+    expect(vm.$el.textContent).toBe('foo bar')\n   })\n \n   it('.sync modifier with bind object', done => {\n\n\n###\n\n","completion":" fix: v-bind object should be overridable by single bindings (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -145,28 +145,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.valuecoders.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/valuecoders.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/tidelift.com\/subscription\/npm\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/webdock.io\/en\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webdock.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.syncfusion.com\/?utm_source=vuejs&utm_medium=list&utm_campaign=vuejsjslistcy19\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/syncfusion.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/opteo.com\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n@@ -187,8 +177,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/firestick_tricks.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/github.com\/marcus-hiles\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/marcus_hiles.png\">\n@@ -199,6 +187,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/isleofcode.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n@@ -209,11 +199,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/yakaz.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n@@ -278,11 +263,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tighten_co.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/alligator.io\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/alligator_io.svg\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.accelebrate.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/accelebrate.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -150,28 +150,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.valuecoders.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/valuecoders.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/tidelift.com\/subscription\/npm\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/webdock.io\/en\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webdock.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/www.syncfusion.com\/?utm_source=vuejs&utm_medium=list&utm_campaign=vuejsjslistcy19\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/syncfusion.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/opteo.com\/vue\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n@@ -192,8 +182,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/firestick_tricks.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/github.com\/marcus-hiles\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/marcus_hiles.png\">\n@@ -204,6 +192,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/isleofcode.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n@@ -214,11 +204,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/yakaz.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: .github\/CODE_OF_CONDUCT.md | file path B: .github\/CODE_OF_CONDUCT.md\n\n@@ -2,7 +2,7 @@\n \n As contributors and maintainers of this project, we pledge to respect all people who contribute through reporting issues, posting feature requests, updating documentation, submitting pull requests or patches, and other activities.\n \n-We are committed to making participation in this project a harassment-free experience for everyone, regardless of level of experience, gender, gender identity and expression, sexual orientation, disability, personal appearance, body size, race, age, or religion.\n+We are committed to making participation in this project a harassment-free experience for everyone, regardless of the level of experience, gender, gender identity and expression, sexual orientation, disability, personal appearance, body size, race, age, or religion.\n \n Examples of unacceptable behavior by participants include the use of sexual language or imagery, derogatory comments or personal attacks, trolling, public or private harassment, insults, or other unprofessional conduct.\n \n\n---\n file path A: .github\/COMMIT_CONVENTION.md | file path B: .github\/COMMIT_CONVENTION.md\n\n@@ -58,24 +58,24 @@ The **header** is mandatory and the **scope** of the header is optional.\n \n ### Revert\n \n-If the commit reverts a previous commit, it should begin with `revert: `, followed by the header of the reverted commit. In the body it should say: `This reverts commit <hash>.`, where the hash is the SHA of the commit being reverted.\n+If the commit reverts a previous commit, it should begin with `revert: `, followed by the header of the reverted commit. In the body, it should say: `This reverts commit <hash>.`, where the hash is the SHA of the commit being reverted.\n \n ### Type\n \n-If the prefix is `feat`, `fix` or `perf`, it will appear in the changelog. However if there is any [BREAKING CHANGE](#footer), the commit will always appear in the changelog.\n+If the prefix is `feat`, `fix` or `perf`, it will appear in the changelog. However, if there is any [BREAKING CHANGE](#footer), the commit will always appear in the changelog.\n \n Other prefixes are up to your discretion. Suggested prefixes are `docs`, `chore`, `style`, `refactor`, and `test` for non-changelog related tasks.\n \n ### Scope\n \n-The scope could be anything specifying place of the commit change. For example `core`, `compiler`, `ssr`, `v-model`, `transition` etc...\n+The scope could be anything specifying the place of the commit change. For example `core`, `compiler`, `ssr`, `v-model`, `transition` etc...\n \n ### Subject\n \n-The subject contains succinct description of the change:\n+The subject contains a succinct description of the change:\n \n * use the imperative, present tense: \"change\" not \"changed\" nor \"changes\"\n-* don't capitalize first letter\n+* don't capitalize the first letter\n * no dot (.) at the end\n \n ### Body\n\n---\n file path A: .github\/CONTRIBUTING.md | file path B: .github\/CONTRIBUTING.md\n\n@@ -24,13 +24,13 @@ Hi! I'm really excited that you are interested in contributing to Vue.js. Before\n \n - Make sure `npm test` passes. (see [development setup](#development-setup))\n \n-- If adding new feature:\n+- If adding a new feature:\n   - Add accompanying test case.\n-  - Provide convincing reason to add this feature. Ideally, you should open a suggestion issue first and have it approved before working on it.\n+  - Provide a convincing reason to add this feature. Ideally, you should open a suggestion issue first and have it approved before working on it.\n \n - If fixing bug:\n   - If you are resolving a special issue, add `(fix #xxxx[,#xxxx])` (#xxxx is the issue id) in your PR title for a better release log, e.g. `update entities encoding\/decoding (fix #3899)`.\n-  - Provide detailed description of the bug in the PR. Live demo preferred.\n+  - Provide a detailed description of the bug in the PR. Live demo preferred.\n   - Add appropriate test coverage if applicable.\n \n ## Development Setup\n@@ -59,7 +59,7 @@ $ npm run dev:test\n # build all dist files, including npm packages\n $ npm run build\n \n-# run the full test suite, include linting \/ type checking\n+# run the full test suite, include linting\/type checking\n $ npm test\n ```\n \n@@ -93,7 +93,7 @@ The default test script will do the following: lint with ESLint -> type check wi\n \n   - **`core`**: contains universal, platform-agnostic runtime code.\n \n-    The Vue 2.0 core is platform-agnostic. That is, code inside `core` is able to be run in any JavaScript environment, be it the browser, Node.js, or an embedded JavaScript runtime in native applications.\n+    The Vue 2.0 core is platform-agnostic. That is, the code inside `core` is able to be run in any JavaScript environment, be it the browser, Node.js, or an embedded JavaScript runtime in native applications.\n \n     - **`observer`**: contains code related to the reactivity system.\n \n\n---\n file path A: benchmarks\/ssr\/README.md | file path B: benchmarks\/ssr\/README.md\n\n@@ -2,7 +2,7 @@\n \n This benchmark renders a table of 1000 rows with 10 columns (10k components), with around 30k normal elements on the page. Note this is not something likely to be seen in a typical app. This benchmark is mostly for stress\/regression testing and comparing between `renderToString` and `renderToStream`.\n \n-To view the results follow the run section. Note that the overall completion time for the results are variable, this is due to other system related variants at run time (available memory, processing power, etc). In ideal circumstances both should finish within similar results.\n+To view the results follow the run section. Note that the overall completion time for the results is variable, this is due to other system related variants at run time (available memory, processing power, etc). In ideal circumstances, both should finish within similar results.\n \n `renderToStream` pipes the content through a stream which provides considerable performance benefits (faster time-to-first-byte and non-event-loop-blocking) over `renderToString`. This can be observed through the benchmark.\n \n\n---\n file path A: benchmarks\/uptime\/index.html | file path B: benchmarks\/uptime\/index.html\n\n@@ -82,7 +82,7 @@\n     <\/div>\n     <script src=\"..\/..\/dist\/vue.min.js\"><\/script>\n     <script>\n-      \/\/ functional components are prefect for small, presentational components\n+      \/\/ functional components are perfect for small, presentational components\n       \/\/ and they are much more efficient than stateful ones.\n       Vue.component('uptime-day', {\n         props: ['day'],\n\n---\n file path A: dist\/README.md | file path B: dist\/README.md\n\n@@ -25,7 +25,7 @@\n \n If you need to compile templates on the fly (e.g. passing a string to the `template` option, or mounting to an element using its in-DOM HTML as the template), you will need the compiler and thus the full build.\n \n-When using `vue-loader` or `vueify`, templates inside `*.vue` files are compiled into JavaScript at build time. You don't really need the compiler in the final bundle, and can therefore use the runtime-only build.\n+When using `vue-loader` or `vueify`, templates inside `*.vue` files are compiled into JavaScript at build time. You don't really need the compiler in the final bundle, and can therefore, use the runtime-only build.\n \n Since the runtime-only builds are roughly 30% lighter-weight than their full-build counterparts, you should use it whenever you can. If you wish to use the full build instead, you need to configure an alias in your bundler.\n \n\n---\n file path A: packages\/vue-template-compiler\/README.md | file path B: packages\/vue-template-compiler\/README.md\n\n@@ -37,7 +37,7 @@ Note the returned function code uses `with` and thus cannot be used in strict mo\n   - Type: `boolean`\n   - Default: `false`\n \n-  Set this to true will cause the `errors` returned in the compiled result become objects in the form of `{ msg, start, end }`. The `start` and `end` properties are numbers that mark the code range of the error source in the template. This can be passed on to the `compiler.generateCodeFrame` API to generate code frame for the error.\n+  Set this to true will cause the `errors` returned in the compiled result become objects in the form of `{ msg, start, end }`. The `start` and `end` properties are numbers that mark the code range of the error source in the template. This can be passed on to the `compiler.generateCodeFrame` API to generate a code frame for the error.\n \n - `whitespace`\n   - Type: `string`\n@@ -52,7 +52,7 @@ Note the returned function code uses `with` and thus cannot be used in strict mo\n   If set to `'condense'`:\n \n   - A whitespace-only text node between element tags is removed if it contains new lines. Otherwise, it is condensed into a single space.\n-  - Consecutive whitespaces inside a non-whitespace-only text node is condensed into a single space.\n+  - Consecutive whitespaces inside a non-whitespace-only text node are condensed into a single space.\n \n   Using condense mode will result in smaller compiled code size and slightly improved performance. However, it will produce minor visual layout differences compared to plain HTML in certain cases.\n \n\n\n###\n\n","completion":" docs: fix spelling and grammatical errors (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.7\",\n+  \"version\": \"2.6.8\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.8\n"}
{"prompt":" file path A: packages\/vue-template-compiler\/README.md | file path B: packages\/vue-template-compiler\/README.md\n\n@@ -2,7 +2,7 @@\n \n > This package is auto-generated. For pull requests please see [src\/platforms\/web\/entry-compiler.js](https:\/\/github.com\/vuejs\/vue\/tree\/dev\/src\/platforms\/web\/entry-compiler.js).\n \n-This package can be used to pre-compile Vue 2.0 templates into render functions to avoid runtime-compilation overhead and CSP restrictions. You will only need it if you are writing build tools with very specific needs. In most cases you should be using [`vue-loader`](https:\/\/github.com\/vuejs\/vue-loader) or [`vueify`](https:\/\/github.com\/vuejs\/vueify) instead, both of which use this package internally.\n+This package can be used to pre-compile Vue 2.0 templates into render functions to avoid runtime-compilation overhead and CSP restrictions. In most cases you should be using it with [`vue-loader`](https:\/\/github.com\/vuejs\/vue-loader), you will only need it separately if you are writing build tools with very specific needs.\n \n ## Installation\n \n\n\n###\n\n","completion":" docs: clarify docs about using template compiler (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -279,7 +279,7 @@ export function parseHTML (html, options) {\n         ) {\n           options.warn(\n             `tag <${stack[i].tag}> has no matching end tag.`,\n-            { start: stack[i].start }\n+            { start: stack[i].start, end: stack[i].end }\n           )\n         }\n         if (options.end) {\n\n---\n file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -210,7 +210,7 @@ export function parse (\n     shouldDecodeNewlinesForHref: options.shouldDecodeNewlinesForHref,\n     shouldKeepComment: options.comments,\n     outputSourceRange: options.outputSourceRange,\n-    start (tag, attrs, unary, start) {\n+    start (tag, attrs, unary, start, end) {\n       \/\/ check namespace.\n       \/\/ inherit parent ns if there is one\n       const ns = (currentParent && currentParent.ns) || platformGetTagNamespace(tag)\n@@ -229,6 +229,7 @@ export function parse (\n       if (process.env.NODE_ENV !== 'production') {\n         if (options.outputSourceRange) {\n           element.start = start\n+          element.end = end\n           element.rawAttrsMap = element.attrsList.reduce((cumulated, attr) => {\n             cumulated[attr.name] = attr\n             return cumulated\n\n---\n file path A: test\/unit\/modules\/compiler\/compiler-options.spec.js | file path B: test\/unit\/modules\/compiler\/compiler-options.spec.js\n\n@@ -140,6 +140,11 @@ describe('compile options', () => {\n     expect(compiled.errors[0].end).toBe(17)\n     expect(compiled.errors[1].start).toBe(18)\n     expect(compiled.errors[1].end).toBe(29)\n+\n+    compiled = compile('<div><span><\/div>', { outputSourceRange: true })\n+    expect(compiled.errors.length).toBe(1)\n+    expect(compiled.errors[0].start).toBe(5)\n+    expect(compiled.errors[0].end).toBe(11)\n   })\n \n   it('should collect source range for binding keys', () => {\n\n\n###\n\n","completion":" fix(compiler): set end location for incomplete elements (#<issue-num>)\n"}
{"prompt":" file path A: test\/unit\/features\/instance\/methods-events.spec.js | file path B: test\/unit\/features\/instance\/methods-events.spec.js\n\n@@ -56,6 +56,13 @@ describe('Instance methods events', () => {\n     expect(spy).toHaveBeenCalledWith(1, 2, 3)\n   })\n \n+  it('$off event added by $once', () => {\n+    vm.$once('test', spy)\n+    vm.$off('test', spy) \/\/ test off event and this event added by once\n+    vm.$emit('test', 1, 2, 3)\n+    expect(spy).not.toHaveBeenCalled()\n+  })\n+\n   it('$off', () => {\n     vm.$on('test1', spy)\n     vm.$on('test2', spy)\n\n\n###\n\n","completion":" test: Add a unit test for \"$off event and this event added by $once\" (#<issue-num>)\n"}
{"prompt":" file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -1541,6 +1541,24 @@ describe('SSR: renderToString', () => {\n       done()\n     })\n   })\n+\n+  it('handling max stack size limit', done => {\n+    const vueInstance = new Vue({\n+      template: `<div class=\"root\">\n+        <child v-for=\"(x, i) in items\" :key=\"i\"><\/child>\n+      <\/div>`,\n+      components: {\n+        child: {\n+          template: '<div class=\"child\"><span class=\"child\">hi<\/span><\/div>'\n+        }\n+      },\n+      data: {\n+        items: Array(1000).fill(0)\n+      }\n+    })\n+\n+    renderToString(vueInstance, err => done(err))\n+  })\n })\n \n function renderVmWithOptions (options, cb) {\n\n\n###\n\n","completion":" test: add a test case for ssr max stack size limit\n"}
{"prompt":" file path A: src\/server\/write.js | file path B: src\/server\/write.js\n\n@@ -1,6 +1,6 @@\n \/* @flow *\/\n \n-const MAX_STACK_DEPTH = 900\n+const MAX_STACK_DEPTH = 800\n const noop = _ => _\n \n const defer = typeof process !== 'undefined' && process.nextTick\n\n\n###\n\n","completion":" fix: further adjust max stack size\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/resolve-async-component.js | file path B: src\/core\/vdom\/helpers\/resolve-async-component.js\n\n@@ -65,8 +65,8 @@ export function resolveAsyncComponent (\n   if (!isDef(factory.owners)) {\n     const owners = factory.owners = [owner]\n     let sync = true\n- \n-    if (owner) owner.$on('hook:destroyed', () => remove(owners, owner))\n+\n+    ;(owner: any).$on('hook:destroyed', () => remove(owners, owner))\n \n     const forceRender = (renderCompleted: boolean) => {\n       for (let i = 0, l = owners.length; i < l; i++) {\n\n---\n file path A: test\/unit\/modules\/vdom\/create-component.spec.js | file path B: test\/unit\/modules\/vdom\/create-component.spec.js\n\n@@ -93,7 +93,9 @@ describe('create-component', () => {\n         props: ['msg']\n       })\n     }\n+    setCurrentRenderingInstance(vm)\n     const vnode = createComponent(async, data, vm, vm)\n+    setCurrentRenderingInstance(null)\n     expect(vnode.asyncFactory).toBe(async)\n     expect(vnode.asyncFactory.owners.length).toEqual(0)\n     expect(vnode.tag).toMatch(\/vue-component-[0-9]+-child\/)\n@@ -121,11 +123,15 @@ describe('create-component', () => {\n       }, 0)\n     }\n     function go () {\n+      setCurrentRenderingInstance(vm)\n       vnode = createComponent(async, data, vm, vm)\n+      setCurrentRenderingInstance(null)\n       expect(vnode.isComment).toBe(true) \/\/ not to be loaded yet.\n     }\n     function failed () {\n+      setCurrentRenderingInstance(vm)\n       vnode = createComponent(async, data, vm, vm)\n+      setCurrentRenderingInstance(null)\n       expect(vnode.isComment).toBe(true) \/\/ failed, still a comment node\n       expect(`Failed to resolve async component: ${async}\\nReason: ${reason}`).toHaveBeenWarned()\n       done()\n\n\n###\n\n","completion":" refactor: remove unncessary condition\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/resolve-async-component.js | file path B: src\/core\/vdom\/helpers\/resolve-async-component.js\n\n@@ -8,7 +8,8 @@ import {\n   isTrue,\n   isObject,\n   hasSymbol,\n-  isPromise\n+  isPromise,\n+  remove\n } from 'core\/util\/index'\n \n import { createEmptyVNode } from 'core\/vdom\/vnode'\n@@ -51,17 +52,21 @@ export function resolveAsyncComponent (\n     return factory.resolved\n   }\n \n+  const owner = currentRenderingInstance\n+  if (isDef(factory.owners) && factory.owners.indexOf(owner) === -1) {\n+    \/\/ already pending\n+    factory.owners.push(owner)\n+  }\n+\n   if (isTrue(factory.loading) && isDef(factory.loadingComp)) {\n     return factory.loadingComp\n   }\n \n-  const owner = currentRenderingInstance\n-  if (isDef(factory.owners)) {\n-    \/\/ already pending\n-    factory.owners.push(owner)\n-  } else {\n+  if (!isDef(factory.owners)) {\n     const owners = factory.owners = [owner]\n     let sync = true\n+ \n+    if (owner) owner.$on('hook:destroyed', () => remove(owners, owner))\n \n     const forceRender = (renderCompleted: boolean) => {\n       for (let i = 0, l = owners.length; i < l; i++) {\n\n\n###\n\n","completion":" fix: handle async component when parent is toggled before resolve (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -323,6 +323,10 @@ Vue.component('component-with-scoped-slot', {\n           item: (props: ScopedSlotProps) => [h('span', [props.msg])]\n         }\n       }),\n+      h('child', [\n+        \/\/ return single VNode (will be normalized to an array)\n+        (props: ScopedSlotProps) => h('span', [props.msg])\n+      ]),\n       h('child', {\n         \/\/ Passing down all slots from parent\n         scopedSlots: this.$scopedSlots\n\n---\n file path A: types\/vnode.d.ts | file path B: types\/vnode.d.ts\n\n@@ -1,7 +1,11 @@\n import { Vue } from \".\/vue\";\n \n+export type ScopedSlot = (props: any) => ScopedSlotReturnValue;\n+type ScopedSlotReturnValue = VNode | string | boolean | null | undefined | ScopedSlotReturnArray;\n+interface ScopedSlotReturnArray extends Array<ScopedSlotReturnValue> {}\n+\n \/\/ Scoped slots are guaranteed to return Array of VNodes starting in 2.6\n-export type ScopedSlot = (props: any) => ScopedSlotChildren;\n+export type NormalizedScopedSlot = (props: any) => ScopedSlotChildren;\n export type ScopedSlotChildren = VNode[] | undefined;\n \n \/\/ Relaxed type compatible with $createElement\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -12,7 +12,7 @@ import {\n   ThisTypedComponentOptionsWithRecordProps,\n   WatchOptions,\n } from \".\/options\";\n-import { VNode, VNodeData, VNodeChildren, ScopedSlot } from \".\/vnode\";\n+import { VNode, VNodeData, VNodeChildren, ScopedSlot, NormalizedScopedSlot } from \".\/vnode\";\n import { PluginFunction, PluginObject } from \".\/plugin\";\n \n export interface CreateElement {\n@@ -28,7 +28,7 @@ export interface Vue {\n   readonly $children: Vue[];\n   readonly $refs: { [key: string]: Vue | Element | Vue[] | Element[] };\n   readonly $slots: { [key: string]: VNode[] | undefined };\n-  readonly $scopedSlots: { [key: string]: ScopedSlot | undefined };\n+  readonly $scopedSlots: { [key: string]: NormalizedScopedSlot | undefined };\n   readonly $isServer: boolean;\n   readonly $data: Record<string, any>;\n   readonly $props: Record<string, any>;\n\n\n###\n\n","completion":" fix(types): allow scoped slots to return a single VNode (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -86,6 +86,9 @@ class Test extends Vue {\n       }\n     });\n     this.nextTick(() => {});\n+    this.nextTick(function () {\n+      console.log(this.text === 'test');\n+    }, { text: 'test'});\n     this.nextTick().then(() => {});\n     this.set({}, \"\", \"\");\n     this.set({}, 1, \"\");\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -89,7 +89,7 @@ export interface VueConstructor<V extends Vue = Vue> {\n   extend<Props>(definition: FunctionalComponentOptions<Props, RecordPropsDefinition<Props>>): ExtendedVue<V, {}, {}, {}, Props>;\n   extend(options?: ComponentOptions<V>): ExtendedVue<V, {}, {}, {}, {}>;\n \n-  nextTick(callback: () => void, context?: any[]): void;\n+  nextTick<T>(callback: (this: T) => void, context?: T): void;\n   nextTick(): Promise<void>\n   set<T>(object: object, key: string | number, value: T): T;\n   set<T>(array: T[], key: number, value: T): T;\n\n\n###\n\n","completion":" fix(types): update this for nextTick api (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -366,7 +366,7 @@ function genScopedSlots (\n   \/\/ components with only scoped slots to skip forced updates from parent.\n   \/\/ but in some cases we have to bail-out of this optimization\n   \/\/ for example if the slot contains dynamic names, has v-if or v-for on them...\n-  let needsForceUpdate = Object.keys(slots).some(key => {\n+  let needsForceUpdate = el.for || Object.keys(slots).some(key => {\n     const slot = slots[key]\n     return (\n       slot.slotTargetDynamic ||\n\n\n###\n\n","completion":" fix: scoped slots dynamic check should include v-for on element itself\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -11,12 +11,12 @@\n \n import { makeMap, no } from 'shared\/util'\n import { isNonPhrasingTag } from 'web\/compiler\/util'\n-import { unicodeLetters } from 'core\/util\/lang'\n+import { unicodeRegExp } from 'core\/util\/lang'\n \n \/\/ Regular Expressions for parsing tags and attributes\n const attribute = \/^\\s*([^\\s\"'<>\\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?\/\n const dynamicArgAttribute = \/^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+\\][^\\s\"'<>\\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?\/\n-const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeLetters}]*`\n+const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*`\n const qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\n const startTagOpen = new RegExp(`^<${qnameCapture}`)\n const startTagClose = \/^\\s*(\\\/?)>\/\n\n---\n file path A: src\/core\/util\/lang.js | file path B: src\/core\/util\/lang.js\n\n@@ -5,7 +5,7 @@\n  * using https:\/\/www.w3.org\/TR\/html53\/semantics-scripting.html#potentialcustomelementname\n  * skipping \\u10000-\\uEFFFF due to it freezing up PhantomJS\n  *\/\n-export const unicodeLetters = 'a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD'\n+export const unicodeRegExp = \/a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\/\n \n \/**\n  * Check if a string starts with $ or _\n@@ -30,7 +30,7 @@ export function def (obj: Object, key: string, val: any, enumerable?: boolean) {\n \/**\n  * Parse simple path.\n  *\/\n-const bailRE = new RegExp(`[^${unicodeLetters}.$_\\\\d]`)\n+const bailRE = new RegExp(`[^${unicodeRegExp.source}.$_\\\\d]`)\n export function parsePath (path: string): any {\n   if (bailRE.test(path)) {\n     return\n\n---\n file path A: src\/core\/util\/options.js | file path B: src\/core\/util\/options.js\n\n@@ -3,7 +3,7 @@\n import config from '..\/config'\n import { warn } from '.\/debug'\n import { set } from '..\/observer\/index'\n-import { unicodeLetters } from '.\/lang'\n+import { unicodeRegExp } from '.\/lang'\n import { nativeWatch, hasSymbol } from '.\/env'\n \n import {\n@@ -277,7 +277,7 @@ function checkComponents (options: Object) {\n }\n \n export function validateComponentName (name: string) {\n-  if (!new RegExp(`^[a-zA-Z][\\\\-\\\\.0-9_${unicodeLetters}]*$`).test(name)) {\n+  if (!new RegExp(`^[a-zA-Z][\\\\-\\\\.0-9_${unicodeRegExp.source}]*$`).test(name)) {\n     warn(\n       'Invalid component name: \"' + name + '\". Component names ' +\n       'should conform to valid custom element name in html5 specification.'\n\n\n###\n\n","completion":" fix: avoid compression of unicode sequences by using regexps (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -33,7 +33,7 @@ const dynamicArgRE = \/^\\[.*\\]$\/\n const argRE = \/:(.*)$\/\n export const bindRE = \/^:|^\\.|^v-bind:\/\n const propBindRE = \/^\\.\/\n-const modifierRE = \/\\.[^.]+\/g\n+const modifierRE = \/\\.[^.\\]]+(?=[^\\]]*$)\/g\n \n const slotRE = \/^v-slot(:|$)|^#\/\n \n\n---\n file path A: test\/unit\/features\/options\/directives.spec.js | file path B: test\/unit\/features\/options\/directives.spec.js\n\n@@ -287,4 +287,82 @@ describe('Options directives', () => {\n     }).$mount()\n     vm.key = 'bar'\n   })\n+\n+  it('deep object like `deep.a` as dynamic arguments', done => {\n+    const vm = new Vue({\n+      template: `<div v-my:[deep.a]=\"1\"\/>`,\n+      data: {\n+        deep: {\n+          a: 'foo'\n+        }\n+      },\n+      directives: {\n+        my: {\n+          bind(el, binding) {\n+            expect(binding.arg).toBe('foo')\n+          },\n+          update(el, binding) {\n+            expect(binding.arg).toBe('bar')\n+            expect(binding.oldArg).toBe('foo')\n+            done()\n+          }\n+        }\n+      }\n+    }).$mount()\n+    vm.deep.a = 'bar'\n+  })\n+\n+  it('deep object like `deep.a.b` as dynamic arguments', done => {\n+    const vm = new Vue({\n+      template: `<div v-my:[deep.a.b]=\"1\"\/>`,\n+      data: {\n+        deep: {\n+          a: {\n+            b: 'foo'\n+          }\n+        }\n+      },\n+      directives: {\n+        my: {\n+          bind(el, binding) {\n+            expect(binding.arg).toBe('foo')\n+          },\n+          update(el, binding) {\n+            expect(binding.arg).toBe('bar')\n+            expect(binding.oldArg).toBe('foo')\n+            done()\n+          }\n+        }\n+      }\n+    }).$mount()\n+    vm.deep.a.b = 'bar'\n+  })\n+\n+  it('deep object as dynamic arguments with modifiers', done => {\n+    const vm = new Vue({\n+      template: `<div v-my:[deep.a.b].x.y=\"1\"\/>`,\n+      data: {\n+        deep: {\n+          a: {\n+            b: 'foo'\n+          }\n+        }\n+      },\n+      directives: {\n+        my: {\n+          bind(el, binding) {\n+            expect(binding.arg).toBe('foo')\n+            expect(binding.modifiers.x).toBe(true)\n+            expect(binding.modifiers.y).toBe(true)\n+          },\n+          update(el, binding) {\n+            expect(binding.arg).toBe('bar')\n+            expect(binding.oldArg).toBe('foo')\n+            done()\n+          }\n+        }\n+      }\n+    }).$mount()\n+    vm.deep.a.b = 'bar'\n+  })\n })\n\n\n###\n\n","completion":" fix: fix modifier parsing for dynamic argument with deep path (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -163,7 +163,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/syncfusion.com\/products\/vue\" target=\"_blank\">\n+        <a href=\"http:\/\/www.syncfusion.com\/?utm_source=vuejs&utm_medium=list&utm_campaign=vuejsjslistcy19\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/syncfusion.png\">\n         <\/a>\n       <\/td>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -168,7 +168,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/syncfusion.com\/products\/vue\" target=\"_blank\">\n+        <a href=\"http:\/\/www.syncfusion.com\/?utm_source=vuejs&utm_medium=list&utm_campaign=vuejsjslistcy19\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/syncfusion.png\">\n         <\/a>\n       <\/td>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.6\",\n+  \"version\": \"2.6.7\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.7\n"}
{"prompt":" file path A: src\/compiler\/codeframe.js | file path B: src\/compiler\/codeframe.js\n\n@@ -38,11 +38,13 @@ export function generateCodeFrame (\n \n function repeat (str, n) {\n   let result = ''\n-  while (true) { \/\/ eslint-disable-line\n-    if (n & 1) result += str\n-    n >>>= 1\n-    if (n <= 0) break\n-    str += str\n+  if (n > 0) {\n+    while (true) { \/\/ eslint-disable-line\n+      if (n & 1) result += str\n+      n >>>= 1\n+      if (n <= 0) break\n+      str += str\n+    }\n   }\n   return result\n }\n\n\n###\n\n","completion":" fix(compiler): handle negative length in codeframe repeat\n"}
{"prompt":" file path A: test\/unit\/modules\/util\/invoke-with-error-handling.spec.js | file path B: test\/unit\/modules\/util\/invoke-with-error-handling.spec.js\n\n@@ -4,18 +4,16 @@ import { invokeWithErrorHandling } from 'core\/util\/error'\n describe('invokeWithErrorHandling', () => {\n   if (typeof Promise !== 'undefined') {\n     it('should errorHandler call once when nested calls return rejected promise', done => {\n-      let times = 0\n-\n-      Vue.config.errorHandler = function () {\n-        times++\n-      }\n+      const originalHandler = Vue.config.errorHandler\n+      const handler = Vue.config.errorHandler = jasmine.createSpy()\n \n       invokeWithErrorHandling(() => {\n         return invokeWithErrorHandling(() => {\n           return Promise.reject(new Error('fake error'))\n         })\n       }).then(() => {\n-        expect(times).toBe(1)\n+        Vue.config.errorHandler = originalHandler\n+        expect(handler.calls.count()).toBe(1)\n         done()\n       })\n     })\n\n\n###\n\n","completion":" refactor: improve test case\n"}
{"prompt":" file path A: src\/core\/util\/error.js | file path B: src\/core\/util\/error.js\n\n@@ -44,7 +44,9 @@ export function invokeWithErrorHandling (\n   try {\n     res = args ? handler.apply(context, args) : handler.call(context)\n     if (res && !res._isVue && isPromise(res)) {\n-      res.catch(e => handleError(e, vm, info + ` (Promise\/async)`))\n+      \/\/ issue #9511\n+      \/\/ reassign to res to avoid catch triggering multiple times when nested calls\n+      res = res.catch(e => handleError(e, vm, info + ` (Promise\/async)`))\n     }\n   } catch (e) {\n     handleError(e, vm, info)\n\n---\n file path A: None | file path B: test\/unit\/modules\/util\/invoke-with-error-handling.spec.js\n\n@@ -0,0 +1,23 @@\n+import Vue from 'vue'\n+import { invokeWithErrorHandling } from 'core\/util\/error'\n+\n+describe('invokeWithErrorHandling', () => {\n+  if (typeof Promise !== 'undefined') {\n+    it('should errorHandler call once when nested calls return rejected promise', done => {\n+      let times = 0\n+\n+      Vue.config.errorHandler = function () {\n+        times++\n+      }\n+\n+      invokeWithErrorHandling(() => {\n+        return invokeWithErrorHandling(() => {\n+          return Promise.reject(new Error('fake error'))\n+        })\n+      }).then(() => {\n+        expect(times).toBe(1)\n+        done()\n+      })\n+    })\n+  }\n+})\n\n\n###\n\n","completion":" fix(#<issue-num>): avoid promise catch multiple times (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/dom-props.js | file path B: src\/platforms\/web\/runtime\/modules\/dom-props.js\n\n@@ -38,7 +38,7 @@ function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n       }\n     }\n \n-    if (key === 'value') {\n+    if (key === 'value' && elm.tagName !== 'PROGRESS') {\n       \/\/ store value as _value as well since\n       \/\/ non-string values will be stringified\n       elm._value = cur\n@@ -65,7 +65,11 @@ function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n       \/\/ This  #4521 by skipping the unnecesarry `checked` update.\n       cur !== oldProps[key]\n     ) {\n-      elm[key] = cur\n+      \/\/ some property updates can throw\n+      \/\/ e.g. `value` on <progress> w\/ non-finite value\n+      try {\n+        elm[key] = cur\n+      } catch (e) {}\n     }\n   }\n }\n\n---\n file path A: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js | file path B: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js\n\n@@ -410,4 +410,26 @@ describe('vdom patch: edge cases', () => {\n     expect(vm.$el.textContent).toBe('FooBar')\n     expect(inlineHookSpy.calls.count()).toBe(2)\n   })\n+\n+  \/\/ #9549\n+  it('DOM props set throwing should not break app', done => {\n+    const vm = new Vue({\n+      data: {\n+        n: Infinity\n+      },\n+      template: `\n+        <div>\n+          <progress :value=\"n\"\/>\n+          {{ n }}\n+        <\/div>\n+      `\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toMatch('Infinity')\n+    vm.n = 1\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toMatch('1')\n+      expect(vm.$el.textContent).not.toMatch('Infinity')\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: avoid errors thrown during dom props update\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/dom-props.js | file path B: src\/platforms\/web\/runtime\/modules\/dom-props.js\n\n@@ -38,14 +38,6 @@ function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n       }\n     }\n \n-    \/\/ skip the update if old and new VDOM state is the same.\n-    \/\/ the only exception is `value` where the DOM value may be temporarily\n-    \/\/ out of sync with VDOM state due to focus, composition and modifiers.\n-    \/\/ This also covers #4521 by skipping the unnecesarry `checked` update.\n-    if (key !== 'value' && cur === oldProps[key]) {\n-      continue\n-    }\n-\n     if (key === 'value') {\n       \/\/ store value as _value as well since\n       \/\/ non-string values will be stringified\n@@ -66,7 +58,13 @@ function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n       while (svg.firstChild) {\n         elm.appendChild(svg.firstChild)\n       }\n-    } else {\n+    } else if (\n+      \/\/ skip the update if old and new VDOM state is the same.\n+      \/\/ `value` is handled separately because the DOM value may be temporarily\n+      \/\/ out of sync with VDOM state due to focus, composition and modifiers.\n+      \/\/ This  #4521 by skipping the unnecesarry `checked` update.\n+      cur !== oldProps[key]\n+    ) {\n       elm[key] = cur\n     }\n   }\n\n\n###\n\n","completion":" refactor: simplify conditions\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -409,9 +409,9 @@ function genScopedSlots (\n     .join(',')\n \n   return `scopedSlots:_u([${generatedSlots}]${\n-    needsForceUpdate ? `,true` : ``\n+    needsForceUpdate ? `,null,true` : ``\n   }${\n-    !needsForceUpdate && needsKey ? `,false,${hash(generatedSlots)}` : ``\n+    !needsForceUpdate && needsKey ? `,null,false,${hash(generatedSlots)}` : ``\n   })`\n }\n \n\n---\n file path A: src\/core\/instance\/render-helpers\/resolve-scoped-slots.js | file path B: src\/core\/instance\/render-helpers\/resolve-scoped-slots.js\n\n@@ -2,15 +2,16 @@\n \n export function resolveScopedSlots (\n   fns: ScopedSlotsData, \/\/ see flow\/vnode\n-  hasDynamicKeys: boolean,\n-  contentHashKey: number,\n-  res?: Object\n+  res?: Object,\n+  \/\/ the following are added in 2.6\n+  hasDynamicKeys?: boolean,\n+  contentHashKey?: number\n ): { [key: string]: Function, $stable: boolean } {\n   res = res || { $stable: !hasDynamicKeys }\n   for (let i = 0; i < fns.length; i++) {\n     const slot = fns[i]\n     if (Array.isArray(slot)) {\n-      resolveScopedSlots(slot, hasDynamicKeys, null, res)\n+      resolveScopedSlots(slot, res, hasDynamicKeys)\n     } else if (slot) {\n       \/\/ marker for reverse proxying v-slot without scope on this.$slots\n       if (slot.proxy) {\n@@ -20,7 +21,7 @@ export function resolveScopedSlots (\n     }\n   }\n   if (contentHashKey) {\n-    res.$key = contentHashKey\n+    (res: any).$key = contentHashKey\n   }\n   return res\n }\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -232,25 +232,25 @@ describe('codegen', () => {\n   it('generate dynamic scoped slot', () => {\n     assertCodegen(\n       '<foo><template :slot=\"foo\" slot-scope=\"bar\">{{ bar }}<\/template><\/foo>',\n-      `with(this){return _c('foo',{scopedSlots:_u([{key:foo,fn:function(bar){return [_v(_s(bar))]}}],true)})}`\n+      `with(this){return _c('foo',{scopedSlots:_u([{key:foo,fn:function(bar){return [_v(_s(bar))]}}],null,true)})}`\n     )\n   })\n \n   it('generate scoped slot with multiline v-if', () => {\n     assertCodegen(\n       '<foo><template v-if=\"\\nshow\\n\" slot-scope=\"bar\">{{ bar }}<\/template><\/foo>',\n-      `with(this){return _c('foo',{scopedSlots:_u([{key:\"default\",fn:function(bar){return (\\nshow\\n)?[_v(_s(bar))]:undefined}}],true)})}`\n+      `with(this){return _c('foo',{scopedSlots:_u([{key:\"default\",fn:function(bar){return (\\nshow\\n)?[_v(_s(bar))]:undefined}}],null,true)})}`\n     )\n     assertCodegen(\n       '<foo><div v-if=\"\\nshow\\n\" slot=\"foo\" slot-scope=\"bar\">{{ bar }}<\/div><\/foo>',\n-      `with(this){return _c(\\'foo\\',{scopedSlots:_u([{key:\"foo\",fn:function(bar){return (\\nshow\\n)?_c(\\'div\\',{},[_v(_s(bar))]):_e()}}],true)})}`\n+      `with(this){return _c(\\'foo\\',{scopedSlots:_u([{key:\"foo\",fn:function(bar){return (\\nshow\\n)?_c(\\'div\\',{},[_v(_s(bar))]):_e()}}],null,true)})}`\n     )\n   })\n \n   it('generate scoped slot with new slot syntax', () => {\n     assertCodegen(\n       '<foo><template v-if=\"show\" #default=\"bar\">{{ bar }}<\/template><\/foo>',\n-      `with(this){return _c('foo',{scopedSlots:_u([(show)?{key:\"default\",fn:function(bar){return [_v(_s(bar))]}}:null],true)})}`\n+      `with(this){return _c('foo',{scopedSlots:_u([(show)?{key:\"default\",fn:function(bar){return [_v(_s(bar))]}}:null],null,true)})}`\n     )\n   })\n \n\n\n###\n\n","completion":" fix: ensure generated scoped slot code is compatible with 2.5\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -375,6 +375,13 @@ function genScopedSlots (\n       containsSlotChild(slot) \/\/ is passing down slot from parent which may be dynamic\n     )\n   })\n+\n+  \/\/ #9534: if a component with scoped slots is inside a conditional branch,\n+  \/\/ it's possible for the same component to be reused but with different\n+  \/\/ compiled slot content. To avoid that, we generate a unique key based on\n+  \/\/ the generated code of all the slot contents.\n+  let needsKey = !!el.if\n+\n   \/\/ OR when it is inside another scoped slot or v-for (the reactivity may be\n   \/\/ disconnected due to the intermediate scope variable)\n   \/\/ #9438, #9506\n@@ -390,15 +397,31 @@ function genScopedSlots (\n         needsForceUpdate = true\n         break\n       }\n+      if (parent.if) {\n+        needsKey = true\n+      }\n       parent = parent.parent\n     }\n   }\n \n-  return `scopedSlots:_u([${\n-    Object.keys(slots).map(key => {\n-      return genScopedSlot(slots[key], state)\n-    }).join(',')\n-  }]${needsForceUpdate ? `,true` : ``})`\n+  const generatedSlots = Object.keys(slots)\n+    .map(key => genScopedSlot(slots[key], state))\n+    .join(',')\n+\n+  return `scopedSlots:_u([${generatedSlots}]${\n+    needsForceUpdate ? `,true` : ``\n+  }${\n+    !needsForceUpdate && needsKey ? `,false,${hash(generatedSlots)}` : ``\n+  })`\n+}\n+\n+function hash(str) {\n+  let hash = 5381\n+  let i = str.length\n+  while(i) {\n+    hash = (hash * 33) ^ str.charCodeAt(--i)\n+  }\n+  return hash >>> 0\n }\n \n function containsSlotChild (el: ASTNode): boolean {\n\n---\n file path A: src\/core\/instance\/lifecycle.js | file path B: src\/core\/instance\/lifecycle.js\n\n@@ -229,9 +229,12 @@ export function updateChildComponent (\n   \/\/ check if there are dynamic scopedSlots (hand-written or compiled but with\n   \/\/ dynamic slot names). Static scoped slots compiled from template has the\n   \/\/ \"$stable\" marker.\n+  const newScopedSlots = parentVnode.data.scopedSlots\n+  const oldScopedSlots = vm.$scopedSlots\n   const hasDynamicScopedSlot = !!(\n-    (parentVnode.data.scopedSlots && !parentVnode.data.scopedSlots.$stable) ||\n-    (vm.$scopedSlots !== emptyObject && !vm.$scopedSlots.$stable)\n+    (newScopedSlots && !newScopedSlots.$stable) ||\n+    (oldScopedSlots !== emptyObject && !oldScopedSlots.$stable) ||\n+    (newScopedSlots && vm.$scopedSlots.$key !== newScopedSlots.$key)\n   )\n \n   \/\/ Any static slot children from the parent may have changed during parent's\n\n---\n file path A: src\/core\/instance\/render-helpers\/resolve-scoped-slots.js | file path B: src\/core\/instance\/render-helpers\/resolve-scoped-slots.js\n\n@@ -2,14 +2,15 @@\n \n export function resolveScopedSlots (\n   fns: ScopedSlotsData, \/\/ see flow\/vnode\n-  hasDynamicKeys?: boolean,\n+  hasDynamicKeys: boolean,\n+  contentHashKey: number,\n   res?: Object\n ): { [key: string]: Function, $stable: boolean } {\n   res = res || { $stable: !hasDynamicKeys }\n   for (let i = 0; i < fns.length; i++) {\n     const slot = fns[i]\n     if (Array.isArray(slot)) {\n-      resolveScopedSlots(slot, hasDynamicKeys, res)\n+      resolveScopedSlots(slot, hasDynamicKeys, null, res)\n     } else if (slot) {\n       \/\/ marker for reverse proxying v-slot without scope on this.$slots\n       if (slot.proxy) {\n@@ -18,5 +19,8 @@ export function resolveScopedSlots (\n       res[slot.key] = slot.fn\n     }\n   }\n+  if (contentHashKey) {\n+    res.$key = contentHashKey\n+  }\n   return res\n }\n\n---\n file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -10,15 +10,18 @@ export function normalizeScopedSlots (\n   prevSlots?: { [key: string]: Function } | void\n ): any {\n   let res\n+  const isStable = slots ? !!slots.$stable : true\n+  const key = slots && slots.$key\n   if (!slots) {\n     res = {}\n   } else if (slots._normalized) {\n     \/\/ fast path 1: child component re-render only, parent did not change\n     return slots._normalized\n   } else if (\n-    slots.$stable &&\n+    isStable &&\n     prevSlots &&\n     prevSlots !== emptyObject &&\n+    key === prevSlots.$key &&\n     Object.keys(normalSlots).length === 0\n   ) {\n     \/\/ fast path 2: stable scoped slots w\/ no normal slots to proxy,\n@@ -43,7 +46,8 @@ export function normalizeScopedSlots (\n   if (slots && Object.isExtensible(slots)) {\n     (slots: any)._normalized = res\n   }\n-  def(res, '$stable', slots ? !!slots.$stable : true)\n+  def(res, '$stable', isStable)\n+  def(res, '$key', key)\n   return res\n }\n \n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1197,4 +1197,34 @@ describe('Component scoped slot', () => {\n       expect(vm.$el.textContent).toBe(`2`)\n     }).then(done)\n   })\n+\n+  \/\/ #9534\n+  it('should detect conditional reuse with different slot content', done => {\n+    const Foo = {\n+      template: `<div><slot :n=\"1\" \/><\/div>`\n+    }\n+\n+    const vm = new Vue({\n+      components: { Foo },\n+      data: {\n+        ok: true\n+      },\n+      template: `\n+        <div>\n+          <div v-if=\"ok\">\n+            <foo v-slot=\"{ n }\">{{ n }}<\/foo>\n+          <\/div>\n+          <div v-if=\"!ok\">\n+            <foo v-slot=\"{ n }\">{{ n + 1 }}<\/foo>\n+          <\/div>\n+        <\/div>\n+      `\n+    }).$mount()\n+\n+    expect(vm.$el.textContent.trim()).toBe(`1`)\n+    vm.ok = false\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent.trim()).toBe(`2`)\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: ensure scoped slots update in conditional branches\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -219,6 +219,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/passionatepeople.io\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/passionate_people.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -30,6 +30,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <table>\n   <tbody>\n     <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/moduscreate.com\/?utm_source=Vue&utm_medium=Partnership&utm_campaign=VueShip\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/modus.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bitsrc.io\/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bit.png\">\n@@ -45,13 +50,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vueschool.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vehikl.com\/\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vehikl.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.nativescript.org\/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -40,6 +40,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <table>\n   <tbody>\n     <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/moduscreate.com\/?utm_source=Vue&utm_medium=Partnership&utm_campaign=VueShip\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/modus.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.bitsrc.io\/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bit.png\">\n@@ -55,13 +60,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vueschool.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vehikl.com\/\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vehikl.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.nativescript.org\/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness\" target=\"_blank\">\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -375,12 +375,18 @@ function genScopedSlots (\n       containsSlotChild(slot) \/\/ is passing down slot from parent which may be dynamic\n     )\n   })\n-  \/\/ OR when it is inside another scoped slot (the reactivity is disconnected)\n-  \/\/ #9438\n+  \/\/ OR when it is inside another scoped slot or v-for (the reactivity may be\n+  \/\/ disconnected due to the intermediate scope variable)\n+  \/\/ #9438, #9506\n+  \/\/ TODO: this can be further optimized by properly analyzing in-scope bindings\n+  \/\/ and skip force updating ones that do not actually use scope variables.\n   if (!needsForceUpdate) {\n     let parent = el.parent\n     while (parent) {\n-      if (parent.slotScope && parent.slotScope !== emptySlotScopeToken) {\n+      if (\n+        (parent.slotScope && parent.slotScope !== emptySlotScopeToken) ||\n+        parent.for\n+      ) {\n         needsForceUpdate = true\n         break\n       }\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1171,4 +1171,30 @@ describe('Component scoped slot', () => {\n       expect(vm.$el.textContent).toBe('bar')\n     }).then(done)\n   })\n+\n+  it('should not skip updates for v-slot inside v-for', done => {\n+    const test = {\n+      template: `<div><slot><\/slot><\/div>`\n+    }\n+\n+    const vm = new Vue({\n+      template: `\n+      <div>\n+        <div v-for=\"i in numbers\">\n+          <test v-slot>{{ i }}<\/test>\n+        <\/div>\n+      <\/div>\n+      `,\n+      components: { test },\n+      data: {\n+        numbers: [1]\n+      }\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe(`1`)\n+    vm.numbers = [2]\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toBe(`2`)\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: scoped slots should update when inside v-for\n"}
{"prompt":" file path A: src\/core\/util\/error.js | file path B: src\/core\/util\/error.js\n\n@@ -4,25 +4,33 @@ import config from '..\/config'\n import { warn } from '.\/debug'\n import { inBrowser, inWeex } from '.\/env'\n import { isPromise } from 'shared\/util'\n+import { pushTarget, popTarget } from '..\/observer\/dep'\n \n export function handleError (err: Error, vm: any, info: string) {\n-  if (vm) {\n-    let cur = vm\n-    while ((cur = cur.$parent)) {\n-      const hooks = cur.$options.errorCaptured\n-      if (hooks) {\n-        for (let i = 0; i < hooks.length; i++) {\n-          try {\n-            const capture = hooks[i].call(cur, err, vm, info) === false\n-            if (capture) return\n-          } catch (e) {\n-            globalHandleError(e, cur, 'errorCaptured hook')\n+  \/\/ Deactivate deps tracking while processing error handler to avoid possible infinite rendering.\n+  \/\/ See: https:\/\/github.com\/vuejs\/vuex\/issues\/1505\n+  pushTarget()\n+  try {\n+    if (vm) {\n+      let cur = vm\n+      while ((cur = cur.$parent)) {\n+        const hooks = cur.$options.errorCaptured\n+        if (hooks) {\n+          for (let i = 0; i < hooks.length; i++) {\n+            try {\n+              const capture = hooks[i].call(cur, err, vm, info) === false\n+              if (capture) return\n+            } catch (e) {\n+              globalHandleError(e, cur, 'errorCaptured hook')\n+            }\n           }\n         }\n       }\n     }\n+    globalHandleError(err, vm, info)\n+  } finally {\n+    popTarget()\n   }\n-  globalHandleError(err, vm, info)\n }\n \n export function invokeWithErrorHandling (\n\n---\n file path A: test\/unit\/features\/options\/errorCaptured.spec.js | file path B: test\/unit\/features\/options\/errorCaptured.spec.js\n\n@@ -209,4 +209,42 @@ describe('Options errorCaptured', () => {\n \n     expect(calls).toEqual([1, 2, 3])\n   })\n+\n+  \/\/ ref: https:\/\/github.com\/vuejs\/vuex\/issues\/1505\n+  it('should not add watchers to render deps if they are referred from errorCaptured callback', done => {\n+    const store = new Vue({\n+      data: {\n+        errors: []\n+      }\n+    })\n+\n+    const Child = {\n+      computed: {\n+        test() {\n+          throw new Error('render error')\n+        }\n+      },\n+\n+      render(h) {\n+        return h('div', {\n+          attrs: {\n+            'data-test': this.test\n+          }\n+        })\n+      }\n+    }\n+\n+    new Vue({\n+      errorCaptured(error) {\n+        store.errors.push(error)\n+      },\n+      render: h => h(Child)\n+    }).$mount()\n+\n+    \/\/ Ensure not to trigger infinite loop\n+    waitForUpdate(() => {\n+      expect(store.errors.length).toBe(1)\n+      expect(store.errors[0]).toEqual(new Error('render error'))\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: avoid possible infinite loop by accessing observables in error handler (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.5\",\n+  \"version\": \"2.6.6\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.6\n"}
{"prompt":" file path A: src\/compiler\/codegen\/events.js | file path B: src\/compiler\/codegen\/events.js\n\n@@ -163,7 +163,13 @@ function genHandler (handler: ASTElementHandler | Array<ASTElementHandler>): str\n }\n \n function genKeyFilter (keys: Array<string>): string {\n-  return `if(('keyCode' in $event)&&${keys.map(genFilterCode).join('&&')})return null;`\n+  return (\n+    \/\/ make sure the key filters only apply to KeyboardEvents\n+    \/\/ #9441: can't use 'keyCode' in $event because Chrome autofill fires fake\n+    \/\/ key events that do not have keyCode property...\n+    `if(!$event.type.indexOf('key')&&` +\n+    `${keys.map(genFilterCode).join('&&')})return null;`\n+  )\n }\n \n function genFilterCode (key: string): string {\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -363,37 +363,37 @@ describe('codegen', () => {\n   it('generate events with keycode', () => {\n     assertCodegen(\n       '<input @input.enter=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){if(('keyCode' in $event)&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){if(!$event.type.indexOf('key')&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return onInput($event)}}})}`\n     )\n     \/\/ multiple keycodes (delete)\n     assertCodegen(\n       '<input @input.delete=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){if(('keyCode' in $event)&&_k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"]))return null;return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){if(!$event.type.indexOf('key')&&_k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"]))return null;return onInput($event)}}})}`\n     )\n     \/\/ multiple keycodes (esc)\n     assertCodegen(\n       '<input @input.esc=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){if(('keyCode' in $event)&&_k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"]))return null;return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){if(!$event.type.indexOf('key')&&_k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"]))return null;return onInput($event)}}})}`\n     )\n     \/\/ multiple keycodes (space)\n     assertCodegen(\n       '<input @input.space=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){if(('keyCode' in $event)&&_k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"]))return null;return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){if(!$event.type.indexOf('key')&&_k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"]))return null;return onInput($event)}}})}`\n     )\n     \/\/ multiple keycodes (chained)\n     assertCodegen(\n       '<input @keydown.enter.delete=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"keydown\":function($event){if(('keyCode' in $event)&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\")&&_k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"]))return null;return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\")&&_k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"]))return null;return onInput($event)}}})}`\n     )\n     \/\/ number keycode\n     assertCodegen(\n       '<input @input.13=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){if(('keyCode' in $event)&&$event.keyCode!==13)return null;return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){if(!$event.type.indexOf('key')&&$event.keyCode!==13)return null;return onInput($event)}}})}`\n     )\n     \/\/ custom keycode\n     assertCodegen(\n       '<input @input.custom=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){if(('keyCode' in $event)&&_k($event.keyCode,\"custom\",undefined,$event.key,undefined))return null;return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){if(!$event.type.indexOf('key')&&_k($event.keyCode,\"custom\",undefined,$event.key,undefined))return null;return onInput($event)}}})}`\n     )\n   })\n \n@@ -416,12 +416,12 @@ describe('codegen', () => {\n   it('generate events with generic modifiers and keycode correct order', () => {\n     assertCodegen(\n       '<input @keydown.enter.prevent=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"keydown\":function($event){if(('keyCode' in $event)&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;$event.preventDefault();return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;$event.preventDefault();return onInput($event)}}})}`\n     )\n \n     assertCodegen(\n       '<input @keydown.enter.stop=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"keydown\":function($event){if(('keyCode' in $event)&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;$event.stopPropagation();return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;$event.stopPropagation();return onInput($event)}}})}`\n     )\n   })\n \n@@ -528,7 +528,7 @@ describe('codegen', () => {\n     \/\/ with modifiers\n     assertCodegen(\n       `<input @keyup.enter=\"e=>current++\">`,\n-      `with(this){return _c('input',{on:{\"keyup\":function($event){if(('keyCode' in $event)&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return (e=>current++)($event)}}})}`\n+      `with(this){return _c('input',{on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return (e=>current++)($event)}}})}`\n     )\n   })\n \n\n\n###\n\n","completion":" fix: fix keyCode check for Chrome autofill fake key events\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -368,7 +368,12 @@ function genScopedSlots (\n   \/\/ for example if the slot contains dynamic names, has v-if or v-for on them...\n   let needsForceUpdate = Object.keys(slots).some(key => {\n     const slot = slots[key]\n-    return slot.slotTargetDynamic || slot.if || slot.for\n+    return (\n+      slot.slotTargetDynamic ||\n+      slot.if ||\n+      slot.for ||\n+      containsSlotChild(slot) \/\/ is passing down slot from parent which may be dynamic\n+    )\n   })\n   \/\/ OR when it is inside another scoped slot (the reactivity is disconnected)\n   \/\/ #9438\n@@ -390,6 +395,16 @@ function genScopedSlots (\n   }]${needsForceUpdate ? `,true` : ``})`\n }\n \n+function containsSlotChild (el: ASTNode): boolean {\n+  if (el.type === 1) {\n+    if (el.tag === 'slot') {\n+      return true\n+    }\n+    return el.children.some(containsSlotChild)\n+  }\n+  return false\n+}\n+\n function genScopedSlot (\n   el: ASTElement,\n   state: CodegenState\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1104,7 +1104,7 @@ describe('Component scoped slot', () => {\n     expect(vm.$el.textContent).toBe('hello')\n   })\n \n-  it('should not cache scoped slot normalzation when there are a mix of normal and scoped slots', done => {\n+  it('should not cache scoped slot normalization when there are a mix of normal and scoped slots', done => {\n     const foo = {\n       template: `<div><slot name=\"foo\" \/> <slot name=\"bar\" \/><\/div>`\n     }\n@@ -1144,4 +1144,31 @@ describe('Component scoped slot', () => {\n \n     expect(vm.$el.textContent).toBe('foo bar')\n   })\n+\n+  it('should not skip updates when a scoped slot contains parent <slot\/> content', done => {\n+    const inner = {\n+      template: `<div><slot\/><\/div>`\n+    }\n+\n+    const wrapper = {\n+      template: `<inner v-slot><slot\/><\/inner>`,\n+      components: { inner }\n+    }\n+\n+    const vm = new Vue({\n+      data() {\n+        return {\n+          ok: true\n+        }\n+      },\n+      components: { wrapper },\n+      template: `<wrapper><div>{{ ok ? 'foo' : 'bar' }}<\/div><\/wrapper>`\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe('foo')\n+    vm.ok = false\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toBe('bar')\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: ensure scoped slot containing passed down slot content updates properly\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.4\",\n+  \"version\": \"2.6.5\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.5\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -48,8 +48,8 @@ export function normalizeScopedSlots (\n }\n \n function normalizeScopedSlot(normalSlots, key, fn) {\n-  const normalized = scope => {\n-    let res = fn(scope || {})\n+  const normalized = function () {\n+    let res = arguments.length ? fn.apply(null, arguments) : fn({})\n     res = res && typeof res === 'object' && !Array.isArray(res)\n       ? [res] \/\/ single vnode\n       : normalizeChildren(res)\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1128,4 +1128,20 @@ describe('Component scoped slot', () => {\n       expect(vm.$el.textContent).toBe(`baz bar`)\n     }).then(done)\n   })\n+\n+  \/\/ #9468\n+  it('should support passing multiple args to scoped slot function', () => {\n+    const foo = {\n+      render() {\n+        return this.$scopedSlots.default('foo', 'bar')\n+      }\n+    }\n+\n+    const vm = new Vue({\n+      template: `<foo v-slot=\"foo, bar\">{{ foo }} {{ bar }}<\/foo>`,\n+      components: { foo }\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe('foo bar')\n+  })\n })\n\n\n###\n\n","completion":" fix: allow passing multiple arguments to scoped slot\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -15,8 +15,14 @@ export function normalizeScopedSlots (\n   } else if (slots._normalized) {\n     \/\/ fast path 1: child component re-render only, parent did not change\n     return slots._normalized\n-  } else if (slots.$stable && prevSlots && prevSlots !== emptyObject) {\n-    \/\/ fast path 2: stable scoped slots, only need to normalize once\n+  } else if (\n+    slots.$stable &&\n+    prevSlots &&\n+    prevSlots !== emptyObject &&\n+    Object.keys(normalSlots).length === 0\n+  ) {\n+    \/\/ fast path 2: stable scoped slots w\/ no normal slots to proxy,\n+    \/\/ only need to normalize once\n     return prevSlots\n   } else {\n     res = {}\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1103,4 +1103,29 @@ describe('Component scoped slot', () => {\n     }).$mount()\n     expect(vm.$el.textContent).toBe('hello')\n   })\n+\n+  it('should not cache scoped slot normalzation when there are a mix of normal and scoped slots', done => {\n+    const foo = {\n+      template: `<div><slot name=\"foo\" \/> <slot name=\"bar\" \/><\/div>`\n+    }\n+\n+    const vm = new Vue({\n+      data: {\n+        msg: 'foo'\n+      },\n+      template: `\n+        <foo>\n+          <div slot=\"foo\">{{ msg }}<\/div>\n+          <template #bar><div>bar<\/div><\/template>\n+        <\/foo>\n+      `,\n+      components: { foo }\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe(`foo bar`)\n+    vm.msg = 'baz'\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toBe(`baz bar`)\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: do not cache scoped slots when mixed with normal slots\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -61,9 +61,17 @@ function add (\n     const original = handler\n     handler = original._wrapper = function (e) {\n       if (\n+        \/\/ no bubbling, should always fire.\n+        \/\/ this is just a safety net in case event.timeStamp is unreliable in\n+        \/\/ certain weird environments...\n+        e.target === e.currentTarget ||\n+        \/\/ event is fired after handler attachment\n         e.timeStamp >= attachedTimestamp ||\n+        \/\/ #9462 bail for iOS 9 bug: event.timeStamp is 0 after history.pushState\n+        e.timeStamp === 0 ||\n         \/\/ #9448 bail if event is fired in another document in a multi-page\n-        \/\/ electron\/nw.js app\n+        \/\/ electron\/nw.js app, since event.timeStamp will be using a different\n+        \/\/ starting reference\n         e.target.ownerDocument !== document\n       ) {\n         return original.apply(this, arguments)\n\n\n###\n\n","completion":" fix: bail out of event blocking for iOS bug\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.3\",\n+  \"version\": \"2.6.4\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.4\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -34,7 +34,7 @@ export function normalizeScopedSlots (\n   }\n   \/\/ avoriaz seems to mock a non-extensible $scopedSlots object\n   \/\/ and when that is passed down this would cause an error\n-  if (Object.isExtensible(slots)) {\n+  if (slots && Object.isExtensible(slots)) {\n     (slots: any)._normalized = res\n   }\n   def(res, '$stable', slots ? !!slots.$stable : true)\n\n\n###\n\n","completion":" chore: fix e2e test in phantomjs\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -32,7 +32,9 @@ export function normalizeScopedSlots (\n       res[key] = proxyNormalSlot(normalSlots, key)\n     }\n   }\n-  if (slots) {\n+  \/\/ avoriaz seems to mock a non-extensible $scopedSlots object\n+  \/\/ and when that is passed down this would cause an error\n+  if (Object.isExtensible(slots)) {\n     (slots: any)._normalized = res\n   }\n   def(res, '$stable', slots ? !!slots.$stable : true)\n\n\n###\n\n","completion":" fix: avoid breaking avoriaz edge case\n"}
{"prompt":" file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -49,7 +49,15 @@ export function FunctionalRenderContext (\n   this.parent = parent\n   this.listeners = data.on || emptyObject\n   this.injections = resolveInject(options.inject, parent)\n-  this.slots = () => this.$slots || (this.$slots = resolveSlots(children, parent))\n+  this.slots = () => {\n+    if (!this.$slots) {\n+      normalizeScopedSlots(\n+        data.scopedSlots,\n+        this.$slots = resolveSlots(children, parent)\n+      )\n+    }\n+    return this.$slots\n+  }\n \n   Object.defineProperty(this, 'scopedSlots', ({\n     enumerable: true,\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1088,4 +1088,19 @@ describe('Component scoped slot', () => {\n     }).$mount()\n     expect(vm.$el.textContent).toBe('')\n   })\n+\n+  it('should expose v-slot without scope on ctx.slots() in functional', () => {\n+    const vm = new Vue({\n+      template: `<foo><template v-slot>hello<\/template><\/foo>`,\n+      components: {\n+        foo: {\n+          functional: true,\n+          render(h, ctx) {\n+            return h('div', ctx.slots().default)\n+          }\n+        }\n+      }\n+    }).$mount()\n+    expect(vm.$el.textContent).toBe('hello')\n+  })\n })\n\n\n###\n\n","completion":" fix: new syntax slots without scope should also be exposed on functional slots()\n"}
{"prompt":" file path A: src\/core\/instance\/render.js | file path B: src\/core\/instance\/render.js\n\n@@ -73,7 +73,8 @@ export function renderMixin (Vue: Class<Component>) {\n     if (_parentVnode) {\n       vm.$scopedSlots = normalizeScopedSlots(\n         _parentVnode.data.scopedSlots,\n-        vm.$slots\n+        vm.$slots,\n+        vm.$scopedSlots\n       )\n     }\n \n\n---\n file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -2,16 +2,22 @@\n \n import { def } from 'core\/util\/lang'\n import { normalizeChildren } from 'core\/vdom\/helpers\/normalize-children'\n+import { emptyObject } from 'shared\/util'\n \n export function normalizeScopedSlots (\n   slots: { [key: string]: Function } | void,\n-  normalSlots: { [key: string]: Array<VNode> }\n+  normalSlots: { [key: string]: Array<VNode> },\n+  prevSlots?: { [key: string]: Function } | void\n ): any {\n   let res\n   if (!slots) {\n     res = {}\n   } else if (slots._normalized) {\n-    return slots\n+    \/\/ fast path 1: child component re-render only, parent did not change\n+    return slots._normalized\n+  } else if (slots.$stable && prevSlots && prevSlots !== emptyObject) {\n+    \/\/ fast path 2: stable scoped slots, only need to normalize once\n+    return prevSlots\n   } else {\n     res = {}\n     for (const key in slots) {\n@@ -26,7 +32,9 @@ export function normalizeScopedSlots (\n       res[key] = proxyNormalSlot(normalSlots, key)\n     }\n   }\n-  def(res, '_normalized', true)\n+  if (slots) {\n+    (slots: any)._normalized = res\n+  }\n   def(res, '$stable', slots ? !!slots.$stable : true)\n   return res\n }\n\n\n###\n\n","completion":" perf: skip scoped slots normalization when possible\n"}
{"prompt":" file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -49,7 +49,7 @@ export function FunctionalRenderContext (\n   this.parent = parent\n   this.listeners = data.on || emptyObject\n   this.injections = resolveInject(options.inject, parent)\n-  this.slots = () => resolveSlots(children, parent)\n+  this.slots = () => this.$slots || (this.$slots = resolveSlots(children, parent))\n \n   Object.defineProperty(this, 'scopedSlots', ({\n     enumerable: true,\n\n\n###\n\n","completion":" perf: cache result from functional ctx.slots() calls\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -411,7 +411,9 @@ function genScopedSlot (\n         : genChildren(el, state) || 'undefined'\n       : genElement(el, state)\n     }}`\n-  return `{key:${el.slotTarget || `\"default\"`},fn:${fn}}`\n+  \/\/ reverse proxy v-slot without scope on this.$slots\n+  const reverseProxy = slotScope ? `` : `,proxy:true`\n+  return `{key:${el.slotTarget || `\"default\"`},fn:${fn}${reverseProxy}}`\n }\n \n export function genChildren (\n\n---\n file path A: src\/core\/instance\/render-helpers\/resolve-scoped-slots.js | file path B: src\/core\/instance\/render-helpers\/resolve-scoped-slots.js\n\n@@ -11,6 +11,10 @@ export function resolveScopedSlots (\n     if (Array.isArray(slot)) {\n       resolveScopedSlots(slot, hasDynamicKeys, res)\n     } else if (slot) {\n+      \/\/ marker for reverse proxying v-slot without scope on this.$slots\n+      if (slot.proxy) {\n+        slot.fn.proxy = true\n+      }\n       res[slot.key] = slot.fn\n     }\n   }\n\n---\n file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -16,7 +16,7 @@ export function normalizeScopedSlots (\n     res = {}\n     for (const key in slots) {\n       if (slots[key] && key[0] !== '$') {\n-        res[key] = normalizeScopedSlot(slots[key])\n+        res[key] = normalizeScopedSlot(normalSlots, key, slots[key])\n       }\n     }\n   }\n@@ -31,9 +31,9 @@ export function normalizeScopedSlots (\n   return res\n }\n \n-function normalizeScopedSlot(fn: Function): Function {\n-  return scope => {\n-    let res = fn(scope)\n+function normalizeScopedSlot(normalSlots, key, fn) {\n+  const normalized = scope => {\n+    let res = fn(scope || {})\n     res = res && typeof res === 'object' && !Array.isArray(res)\n       ? [res] \/\/ single vnode\n       : normalizeChildren(res)\n@@ -41,6 +41,17 @@ function normalizeScopedSlot(fn: Function): Function {\n       ? undefined\n       : res\n   }\n+  \/\/ this is a slot using the new v-slot syntax without scope. although it is\n+  \/\/ compiled as a scoped slot, render fn users would expect it to be present\n+  \/\/ on this.$slots because the usage is semantically a normal slot.\n+  if (fn.proxy) {\n+    Object.defineProperty(normalSlots, key, {\n+      get: normalized,\n+      enumerable: true,\n+      configurable: true\n+    })\n+  }\n+  return normalized\n }\n \n function proxyNormalSlot(slots, key) {\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1059,4 +1059,33 @@ describe('Component scoped slot', () => {\n \n     expect(vm.$el.textContent).toBe(`fallback`)\n   })\n+\n+  it('should expose v-slot without scope on this.$slots', () => {\n+    const vm = new Vue({\n+      template: `<foo><template v-slot>hello<\/template><\/foo>`,\n+      components: {\n+        foo: {\n+          render(h) {\n+            return h('div', this.$slots.default)\n+          }\n+        }\n+      }\n+    }).$mount()\n+    expect(vm.$el.textContent).toBe('hello')\n+  })\n+\n+  it('should not expose legacy syntax scoped slot on this.$slots', () => {\n+    const vm = new Vue({\n+      template: `<foo><template slot-scope=\"foo\">hello<\/template><\/foo>`,\n+      components: {\n+        foo: {\n+          render(h) {\n+            expect(this.$slots.default).toBeUndefined()\n+            return h('div', this.$slots.default)\n+          }\n+        }\n+      }\n+    }).$mount()\n+    expect(vm.$el.textContent).toBe('')\n+  })\n })\n\n\n###\n\n","completion":" fix: expose v-slot slots without scope on this.$slots\n"}
{"prompt":" file path A: src\/core\/util\/error.js | file path B: src\/core\/util\/error.js\n\n@@ -49,7 +49,11 @@ function globalHandleError (err, vm, info) {\n     try {\n       return config.errorHandler.call(null, err, vm, info)\n     } catch (e) {\n-      logError(e, null, 'config.errorHandler')\n+      \/\/ if the user intentionally throws the original error in the handler,\n+      \/\/ do not log it twice\n+      if (e !== err) {\n+        logError(e, null, 'config.errorHandler')\n+      }\n     }\n   }\n   logError(err, vm, info)\n\n\n###\n\n","completion":" fix: avoid logging same error twice when thrown by user in global handler\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -33,10 +33,13 @@ export function normalizeScopedSlots (\n \n function normalizeScopedSlot(fn: Function): Function {\n   return scope => {\n-    const res = fn(scope)\n-    return res && typeof res === 'object' && !Array.isArray(res)\n+    let res = fn(scope)\n+    res = res && typeof res === 'object' && !Array.isArray(res)\n       ? [res] \/\/ single vnode\n       : normalizeChildren(res)\n+    return res && res.length === 0\n+      ? undefined\n+      : res\n   }\n }\n \n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1034,4 +1034,29 @@ describe('Component scoped slot', () => {\n       expect(vm.$el.textContent).toBe(JSON.stringify({ changed: 'hello' }, null, 2))\n     }).then(done)\n   })\n+\n+  \/\/ #9452\n+  it('fallback for scoped slots passed multiple levels down', () => {\n+    const inner = {\n+      template: `<div><slot>fallback<\/slot><\/div>`\n+    }\n+\n+    const wrapper = {\n+      template: `\n+        <inner>\n+          <template #default>\n+            <slot\/>\n+          <\/template>\n+        <\/inner>\n+      `,\n+      components: { inner }\n+    }\n+\n+    const vm = new Vue({\n+      components: { wrapper, inner },\n+      template: `<wrapper\/>`\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe(`fallback`)\n+  })\n })\n\n\n###\n\n","completion":" fix: empty scoped slot should return undefined\n"}
{"prompt":" file path A: .github\/CONTRIBUTING.md | file path B: .github\/CONTRIBUTING.md\n\n@@ -1,6 +1,6 @@\n # Vue.js Contributing Guide\n \n-Hi! Im really excited that you are interested in contributing to Vue.js. Before submitting your contribution though, please make sure to take a moment and read through the following guidelines.\n+Hi! I'm really excited that you are interested in contributing to Vue.js. Before submitting your contribution, please make sure to take a moment and read through the following guidelines:\n \n - [Code of Conduct](https:\/\/github.com\/vuejs\/vue\/blob\/dev\/.github\/CODE_OF_CONDUCT.md)\n - [Issue Reporting Guidelines](#issue-reporting-guidelines)\n@@ -14,28 +14,28 @@ Hi! Im really excited that you are interested in contributing to Vue.js. Befo\n \n ## Pull Request Guidelines\n \n-- The `master` branch is basically just a snapshot of the latest stable release. All development should be done in dedicated branches. **Do not submit PRs against the `master` branch.**\n+- The `master` branch is just a snapshot of the latest stable release. All development should be done in dedicated branches. **Do not submit PRs against the `master` branch.**\n \n - Checkout a topic branch from the relevant branch, e.g. `dev`, and merge back against that branch.\n \n - Work in the `src` folder and **DO NOT** checkin `dist` in the commits.\n \n-- It's OK to have multiple small commits as you work on the PR - we will let GitHub automatically squash it before merging.\n+- It's OK to have multiple small commits as you work on the PR - GitHub will automatically squash it before merging.\n \n - Make sure `npm test` passes. (see [development setup](#development-setup))\n \n - If adding new feature:\n   - Add accompanying test case.\n-  - Provide convincing reason to add this feature. Ideally you should open a suggestion issue first and have it greenlighted before working on it.\n+  - Provide convincing reason to add this feature. Ideally, you should open a suggestion issue first and have it approved before working on it.\n \n-- If fixing a bug:\n-  - If you are resolving a special issue, add `(fix #xxxx[,#xxx])` (#xxxx is the issue id) in your PR title for a better release log, e.g. `update entities encoding\/decoding (fix #3899)`.\n+- If fixing bug:\n+  - If you are resolving a special issue, add `(fix #xxxx[,#xxxx])` (#xxxx is the issue id) in your PR title for a better release log, e.g. `update entities encoding\/decoding (fix #3899)`.\n   - Provide detailed description of the bug in the PR. Live demo preferred.\n   - Add appropriate test coverage if applicable.\n \n ## Development Setup\n \n-You will need [Node.js](http:\/\/nodejs.org) **version 6+** and [Java Runtime Environment](http:\/\/www.oracle.com\/technetwork\/java\/javase\/downloads\/index.html) (needed for running Selenium server during e2e tests).\n+You will need [Node.js](http:\/\/nodejs.org) **version 6+** and [Java Runtime Environment](http:\/\/www.oracle.com\/technetwork\/java\/javase\/downloads\/index.html) (for running Selenium server during e2e tests).\n \n After cloning the repo, run:\n \n@@ -65,11 +65,11 @@ $ npm test\n \n There are some other scripts available in the `scripts` section of the `package.json` file.\n \n-The default test script will do the following: lint with ESLint -> type check with Flow -> unit tests with coverage -> e2e tests. **Please make sure to have this pass successfully before submitting a PR.** Although the same tests will be run against your PR on the CI server, it is better to have it working locally beforehand.\n+The default test script will do the following: lint with ESLint -> type check with Flow -> unit tests with coverage -> e2e tests. **Please make sure to have this pass successfully before submitting a PR.** Although the same tests will be run against your PR on the CI server, it is better to have it working locally.\n \n ## Project Structure\n \n-- **`scripts`**: contains build-related scripts and configuration files. In most cases you don't need to touch them. However, it would be helpful to familiarize yourself with the following files:\n+- **`scripts`**: contains build-related scripts and configuration files. Usually, you don't need to touch them. However, it would be helpful to familiarize yourself with the following files:\n \n   - `scripts\/alias.js`: module import aliases used across all source code and tests.\n \n@@ -85,15 +85,15 @@ The default test script will do the following: lint with ESLint -> type check wi\n \n - **`test`**: contains all tests. The unit tests are written with [Jasmine](http:\/\/jasmine.github.io\/2.3\/introduction.html) and run with [Karma](http:\/\/karma-runner.github.io\/0.13\/index.html). The e2e tests are written for and run with [Nightwatch.js](http:\/\/nightwatchjs.org\/).\n \n-- **`src`**: contains the source code, obviously. The codebase is written in ES2015 with [Flow](https:\/\/flowtype.org\/) type annotations.\n+- **`src`**: contains the source code. The codebase is written in ES2015 with [Flow](https:\/\/flowtype.org\/) type annotations.\n \n   - **`compiler`**: contains code for the template-to-render-function compiler.\n \n-    The compiler consists of a parser (converts template strings to element ASTs), an optimizer (detects static trees for vdom render optimization), and a code generator (generate render function code from element ASTs). Note the codegen directly generates code strings from the element AST - it's done this way for smaller code size because the compiler is shipped to the browser in the standalone build.\n+    The compiler consists of a parser (converts template strings to element ASTs), an optimizer (detects static trees for vdom render optimization), and a code generator (generate render function code from element ASTs). Note that codegen directly generates code strings from the element AST - it's done this way for smaller code size because the compiler is shipped to the browser in the standalone build.\n \n   - **`core`**: contains universal, platform-agnostic runtime code.\n \n-    The Vue 2.0 core is platform-agnostic - which means code inside `core` should be able to run in any JavaScript environment, be it the browser, Node.js, or an embedded JavaScript runtime in native applications.\n+    The Vue 2.0 core is platform-agnostic. That is, code inside `core` is able to be run in any JavaScript environment, be it the browser, Node.js, or an embedded JavaScript runtime in native applications.\n \n     - **`observer`**: contains code related to the reactivity system.\n \n@@ -101,9 +101,9 @@ The default test script will do the following: lint with ESLint -> type check wi\n \n     - **`instance`**: contains Vue instance constructor and prototype methods.\n \n-    - **`global-api`**: as the name suggests.\n+    - **`global-api`**: contains Vue global api.\n \n-    - **`components`**: universal abstract components. Currently `keep-alive` is the only one.\n+    - **`components`**: contains universal abstract components.\n \n   - **`server`**: contains code related to server-side rendering.\n \n@@ -111,7 +111,7 @@ The default test script will do the following: lint with ESLint -> type check wi\n \n     Entry files for dist builds are located in their respective platform directory.\n \n-    Each platform module contains three parts: `compiler`, `runtime` and `server`, corresponding to the three directories above. Each part contains platform-specific modules\/utilities which are then imported and injected to the core counterparts in platform-specific entry files. For example, the code implementing the logic behind `v-bind:class` is in `platforms\/web\/runtime\/modules\/class.js` - which is imported in `entries\/web-runtime.js` and used to create the browser-specific vdom patching function.\n+    Each platform module contains three parts: `compiler`, `runtime` and `server`, corresponding to the three directories above. Each part contains platform-specific modules\/utilities which are imported and injected to the core counterparts in platform-specific entry files. For example, the code implementing the logic behind `v-bind:class` is in `platforms\/web\/runtime\/modules\/class.js` - which is imported in `entries\/web-runtime.js` and used to create the browser-specific vdom patching function.\n \n   - **`sfc`**: contains single-file component (`*.vue` files) parsing logic. This is used in the `vue-template-compiler` package.\n \n@@ -119,17 +119,17 @@ The default test script will do the following: lint with ESLint -> type check wi\n \n   - **`types`**: contains TypeScript type definitions\n \n-    - **`test`**: type definitions tests\n+    - **`test`**: contains type definitions tests\n \n \n ## Financial Contribution\n \n-As a pure community-driven project without major corporate backing, we also welcome financial contributions via Patreon or OpenCollective.\n+As a pure community-driven project without major corporate backing, we also welcome financial contributions via Patreon and OpenCollective.\n \n - [Become a backer or sponsor on Patreon](https:\/\/www.patreon.com\/evanyou)\n - [Become a backer or sponsor on OpenCollective](https:\/\/opencollective.com\/vuejs)\n \n-### What's the difference between Patreon and OpenCollective?\n+### What's the difference between Patreon and OpenCollective funding?\n \n Funds donated via Patreon go directly to support Evan You's full-time work on Vue.js. Funds donated via OpenCollective are managed with transparent expenses and will be used for compensating work and expenses for core team members or sponsoring community events. Your name\/logo will receive proper recognition and exposure by donating on either platform.\n \n\n\n###\n\n","completion":" chore: make documentation clearer (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.2\",\n+  \"version\": \"2.6.3\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.3\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -60,7 +60,12 @@ function add (\n     const attachedTimestamp = currentFlushTimestamp\n     const original = handler\n     handler = original._wrapper = function (e) {\n-      if (e.timeStamp >= attachedTimestamp) {\n+      if (\n+        e.timeStamp >= attachedTimestamp ||\n+        \/\/ #9448 bail if event is fired in another document in a multi-page\n+        \/\/ electron\/nw.js app\n+        e.target.ownerDocument !== document\n+      ) {\n         return original.apply(this, arguments)\n       }\n     }\n\n\n###\n\n","completion":" fix: skip microtask fix if event is fired from different document\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -1,6 +1,5 @@\n \/* @flow *\/\n \n-import { hasOwn } from 'shared\/util'\n import { def } from 'core\/util\/lang'\n import { normalizeChildren } from 'core\/vdom\/helpers\/normalize-children'\n \n@@ -17,7 +16,7 @@ export function normalizeScopedSlots (\n     res = {}\n     for (const key in slots) {\n       if (slots[key] && key[0] !== '$') {\n-        res[key] = normalizeScopedSlot(normalSlots, key, slots[key])\n+        res[key] = normalizeScopedSlot(slots[key])\n       }\n     }\n   }\n@@ -32,20 +31,13 @@ export function normalizeScopedSlots (\n   return res\n }\n \n-function normalizeScopedSlot(normalSlots, key, fn) {\n-  const normalized = (scope = {}) => {\n+function normalizeScopedSlot(fn: Function): Function {\n+  return scope => {\n     const res = fn(scope)\n     return res && typeof res === 'object' && !Array.isArray(res)\n       ? [res] \/\/ single vnode\n       : normalizeChildren(res)\n   }\n-  \/\/ proxy scoped slots on normal $slots\n-  if (!hasOwn(normalSlots, key)) {\n-    Object.defineProperty(normalSlots, key, {\n-      get: normalized\n-    })\n-  }\n-  return normalized\n }\n \n function proxyNormalSlot(slots, key) {\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -456,7 +456,7 @@ describe('Component scoped slot', () => {\n   })\n \n   \/\/ new in 2.6, unifying all slots as functions\n-  it('non-scoped slots should also be available on this.$scopedSlots', () => {\n+  it('non-scoped slots should also be available on $scopedSlots', () => {\n     const vm = new Vue({\n       template: `<foo>before <div slot=\"bar\" slot-scope=\"scope\">{{ scope.msg }}<\/div> after<\/foo>`,\n       components: {\n@@ -473,24 +473,6 @@ describe('Component scoped slot', () => {\n     expect(vm.$el.innerHTML).toBe(`before  after<div>hi<\/div>`)\n   })\n \n-  \/\/ #9421 the other side of unification is also needed\n-  \/\/ for library authors\n-  it('scoped slots should also be available on this.$slots', () => {\n-    const Child = {\n-      render: function (h) {\n-        return h(\n-          'div',\n-          this.$slots.content\n-        )\n-      }\n-    }\n-    const vm = new Vue({\n-      template: `<child><template #content>foo<\/template><\/child>`,\n-      components: { Child }\n-    }).$mount()\n-    expect(vm.$el.innerHTML).toBe(`foo`)\n-  })\n-\n   \/\/ #4779\n   it('should support dynamic slot target', done => {\n     const Child = {\n\n\n###\n\n","completion":" revert: feat: expose all scoped slots on this.$slots\n"}
{"prompt":" file path A: src\/core\/util\/env.js | file path B: src\/core\/util\/env.js\n\n@@ -15,6 +15,7 @@ export const isAndroid = (UA && UA.indexOf('android') > 0) || (weexPlatform ===\n export const isIOS = (UA && \/iphone|ipad|ipod|ios\/.test(UA)) || (weexPlatform === 'ios')\n export const isChrome = UA && \/chrome\\\/\\d+\/.test(UA) && !isEdge\n export const isPhantomJS = UA && \/phantomjs\/.test(UA)\n+export const isFF = UA && UA.match(\/firefox\\\/(\\d+)\/)\n \n \/\/ Firefox has a \"watch\" function on Object.prototype...\n export const nativeWatch = ({}).watch\n\n---\n file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -2,7 +2,7 @@\n \n import { isDef, isUndef } from 'shared\/util'\n import { updateListeners } from 'core\/vdom\/helpers\/index'\n-import { isIE, supportsPassive, isUsingMicroTask } from 'core\/util\/index'\n+import { isIE, isFF, supportsPassive, isUsingMicroTask } from 'core\/util\/index'\n import { RANGE_TOKEN, CHECKBOX_RADIO_TOKEN } from 'web\/compiler\/directives\/model'\n import { currentFlushTimestamp } from 'core\/observer\/scheduler'\n \n@@ -39,6 +39,11 @@ function createOnceHandler (event, handler, capture) {\n   }\n }\n \n+\/\/ #9446: Firefox <= 53 (in particular, ESR 52) has incorrect Event.timeStamp\n+\/\/ implementation and does not fire microtasks in between event propagation, so\n+\/\/ safe to exclude.\n+const useMicrotaskFix = isUsingMicroTask && !(isFF && Number(isFF[1]) <= 53)\n+\n function add (\n   name: string,\n   handler: Function,\n@@ -51,7 +56,7 @@ function add (\n   \/\/ the solution is simple: we save the timestamp when a handler is attached,\n   \/\/ and the handler would only fire if the event passed to it was fired\n   \/\/ AFTER it was attached.\n-  if (isUsingMicroTask) {\n+  if (useMicrotaskFix) {\n     const attachedTimestamp = currentFlushTimestamp\n     const original = handler\n     handler = original._wrapper = function (e) {\n\n\n###\n\n","completion":" fix: skip microtask fix in Firefix <= 53\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -501,7 +501,14 @@ function genSlot (el: ASTElement, state: CodegenState): string {\n   const slotName = el.slotName || '\"default\"'\n   const children = genChildren(el, state)\n   let res = `_t(${slotName}${children ? `,${children}` : ''}`\n-  const attrs = el.attrs && `{${el.attrs.map(a => `${camelize(a.name)}:${a.value}`).join(',')}}`\n+  const attrs = el.attrs || el.dynamicAttrs\n+    ? genProps((el.attrs || []).concat(el.dynamicAttrs || []).map(attr => ({\n+        \/\/ slot props are camelized\n+        name: camelize(attr.name),\n+        value: attr.value,\n+        dynamic: attr.dynamic\n+      })))\n+    : null\n   const bind = el.attrsMap['v-bind']\n   if ((attrs || bind) && !children) {\n     res += `,null`\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -1027,4 +1027,29 @@ describe('Component scoped slot', () => {\n       expect(vm.$el.textContent).toBe(`2`)\n     }).then(done)\n   })\n+\n+  it('dynamic v-bind arguments on <slot>', done => {\n+    const Foo = {\n+      data() {\n+        return {\n+          key: 'msg'\n+        }\n+      },\n+      template: `<div><slot :[key]=\"'hello'\"\/><\/div>`\n+    }\n+\n+    const vm = new Vue({\n+      components: { Foo },\n+      template: `\n+        <foo ref=\"foo\" v-slot=\"props\">{{ props }}<\/foo>\n+      `\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe(JSON.stringify({ msg: 'hello' }, null, 2))\n+\n+    vm.$refs.foo.key = 'changed'\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toBe(JSON.stringify({ changed: 'hello' }, null, 2))\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix(compiler): fix v-bind dynamic arguments on slot outlets\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -4,6 +4,7 @@ import { genHandlers } from '.\/events'\n import baseDirectives from '..\/directives\/index'\n import { camelize, no, extend } from 'shared\/util'\n import { baseWarn, pluckModuleFunction } from '..\/helpers'\n+import { emptySlotScopeToken } from '..\/parser\/index'\n \n type TransformFunction = (el: ASTElement, code: string) => string;\n type DataGenFunction = (el: ASTElement) => string;\n@@ -268,7 +269,7 @@ export function genData (el: ASTElement, state: CodegenState): string {\n   }\n   \/\/ scoped slots\n   if (el.scopedSlots) {\n-    data += `${genScopedSlots(el.scopedSlots, state)},`\n+    data += `${genScopedSlots(el, el.scopedSlots, state)},`\n   }\n   \/\/ component v-model\n   if (el.model) {\n@@ -357,18 +358,36 @@ function genInlineTemplate (el: ASTElement, state: CodegenState): ?string {\n }\n \n function genScopedSlots (\n+  el: ASTElement,\n   slots: { [key: string]: ASTElement },\n   state: CodegenState\n ): string {\n-  const hasDynamicKeys = Object.keys(slots).some(key => {\n+  \/\/ by default scoped slots are considered \"stable\", this allows child\n+  \/\/ components with only scoped slots to skip forced updates from parent.\n+  \/\/ but in some cases we have to bail-out of this optimization\n+  \/\/ for example if the slot contains dynamic names, has v-if or v-for on them...\n+  let needsForceUpdate = Object.keys(slots).some(key => {\n     const slot = slots[key]\n     return slot.slotTargetDynamic || slot.if || slot.for\n   })\n+  \/\/ OR when it is inside another scoped slot (the reactivity is disconnected)\n+  \/\/ #9438\n+  if (!needsForceUpdate) {\n+    let parent = el.parent\n+    while (parent) {\n+      if (parent.slotScope && parent.slotScope !== emptySlotScopeToken) {\n+        needsForceUpdate = true\n+        break\n+      }\n+      parent = parent.parent\n+    }\n+  }\n+\n   return `scopedSlots:_u([${\n     Object.keys(slots).map(key => {\n       return genScopedSlot(slots[key], state)\n     }).join(',')\n-  }]${hasDynamicKeys ? `,true` : ``})`\n+  }]${needsForceUpdate ? `,true` : ``})`\n }\n \n function genScopedSlot (\n@@ -382,7 +401,10 @@ function genScopedSlot (\n   if (el.for && !el.forProcessed) {\n     return genFor(el, state, genScopedSlot)\n   }\n-  const fn = `function(${String(el.slotScope)}){` +\n+  const slotScope = el.slotScope === emptySlotScopeToken\n+    ? ``\n+    : String(el.slotScope)\n+  const fn = `function(${slotScope}){` +\n     `return ${el.tag === 'template'\n       ? el.if && isLegacySyntax\n         ? `(${el.if})?${genChildren(el, state) || 'undefined'}:undefined`\n\n---\n file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -44,6 +44,8 @@ const invalidAttributeRE = \/[\\s\"'<>\\\/=]\/\n \n const decodeHTMLCached = cached(he.decode)\n \n+export const emptySlotScopeToken = `_empty_`\n+\n \/\/ configurable state\n export let warn: any\n let delimiters\n@@ -659,7 +661,7 @@ function processSlotContent (el) {\n         const { name, dynamic } = getSlotName(slotBinding)\n         el.slotTarget = name\n         el.slotTargetDynamic = dynamic\n-        el.slotScope = slotBinding.value || `_` \/\/ force it into a scoped slot for perf\n+        el.slotScope = slotBinding.value || emptySlotScopeToken \/\/ force it into a scoped slot for perf\n       }\n     } else {\n       \/\/ v-slot on component, denotes default slot\n@@ -692,8 +694,13 @@ function processSlotContent (el) {\n         const slotContainer = slots[name] = createASTElement('template', [], el)\n         slotContainer.slotTarget = name\n         slotContainer.slotTargetDynamic = dynamic\n-        slotContainer.children = el.children.filter(c => !(c: any).slotScope)\n-        slotContainer.slotScope = slotBinding.value || `_`\n+        slotContainer.children = el.children.filter((c: any) => {\n+          if (!c.slotScope) {\n+            c.parent = slotContainer\n+            return true\n+          }\n+        })\n+        slotContainer.slotScope = slotBinding.value || emptySlotScopeToken\n         \/\/ remove children as they are returned from scopedSlots now\n         el.children = []\n         \/\/ mark el non-plain so data gets generated\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -992,4 +992,39 @@ describe('Component scoped slot', () => {\n       expect(Child.updated).not.toHaveBeenCalled()\n     }).then(done)\n   })\n+\n+  \/\/ regression #9438\n+  it('nested scoped slots update', done => {\n+    const Wrapper = {\n+      template: `<div><slot\/><\/div>`\n+    }\n+\n+    const Inner = {\n+      props: ['foo'],\n+      template: `<div>{{ foo }}<\/div>`\n+    }\n+\n+    const Outer = {\n+      data: () => ({ foo: 1 }),\n+      template: `<div><slot :foo=\"foo\" \/><\/div>`\n+    }\n+\n+    const vm = new Vue({\n+      components: { Outer, Wrapper, Inner },\n+      template: `\n+        <outer ref=\"outer\" v-slot=\"props\">\n+          <wrapper v-slot>\n+            <inner :foo=\"props.foo\"\/>\n+          <\/wrapper>\n+        <\/outer>\n+      `\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe(`1`)\n+\n+    vm.$refs.outer.foo++\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toBe(`2`)\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: bail out scoped slot optimization when there are nested scopes\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/index.js | file path B: src\/core\/instance\/render-helpers\/index.js\n\n@@ -9,7 +9,7 @@ import { checkKeyCodes } from '.\/check-keycodes'\n import { bindObjectProps } from '.\/bind-object-props'\n import { renderStatic, markOnce } from '.\/render-static'\n import { bindObjectListeners } from '.\/bind-object-listeners'\n-import { resolveScopedSlots } from '.\/resolve-slots'\n+import { resolveScopedSlots } from '.\/resolve-scoped-slots'\n import { bindDynamicKeys, prependModifier } from '.\/bind-dynamic-keys'\n \n export function installRenderHelpers (target: any) {\n\n---\n file path A: None | file path B: src\/core\/instance\/render-helpers\/resolve-scoped-slots.js\n\n@@ -0,0 +1,18 @@\n+\/* @flow *\/\n+\n+export function resolveScopedSlots (\n+  fns: ScopedSlotsData, \/\/ see flow\/vnode\n+  hasDynamicKeys?: boolean,\n+  res?: Object\n+): { [key: string]: Function, $stable: boolean } {\n+  res = res || { $stable: !hasDynamicKeys }\n+  for (let i = 0; i < fns.length; i++) {\n+    const slot = fns[i]\n+    if (Array.isArray(slot)) {\n+      resolveScopedSlots(slot, hasDynamicKeys, res)\n+    } else if (slot) {\n+      res[slot.key] = slot.fn\n+    }\n+  }\n+  return res\n+}\n\n---\n file path A: src\/core\/instance\/render-helpers\/resolve-slots.js | file path B: src\/core\/instance\/render-helpers\/resolve-slots.js\n\n@@ -48,20 +48,3 @@ export function resolveSlots (\n function isWhitespace (node: VNode): boolean {\n   return (node.isComment && !node.asyncFactory) || node.text === ' '\n }\n-\n-export function resolveScopedSlots (\n-  fns: ScopedSlotsData, \/\/ see flow\/vnode\n-  hasDynamicKeys?: boolean,\n-  res?: Object\n-): { [key: string]: Function, $stable: boolean } {\n-  res = res || { $stable: !hasDynamicKeys }\n-  for (let i = 0; i < fns.length; i++) {\n-    const slot = fns[i]\n-    if (Array.isArray(slot)) {\n-      resolveScopedSlots(slot, hasDynamicKeys, res)\n-    } else if (slot) {\n-      res[slot.key] = slot.fn\n-    }\n-  }\n-  return res\n-}\n\n\n###\n\n","completion":" refactor: split resolve-scoped-slot into its own file\n"}
{"prompt":" file path A: src\/core\/instance\/lifecycle.js | file path B: src\/core\/instance\/lifecycle.js\n\n@@ -233,6 +233,7 @@ export function updateChildComponent (\n     (parentVnode.data.scopedSlots && !parentVnode.data.scopedSlots.$stable) ||\n     (vm.$scopedSlots !== emptyObject && !vm.$scopedSlots.$stable)\n   )\n+\n   \/\/ Any static slot children from the parent may have changed during parent's\n   \/\/ update. Dynamic scoped slots may also have changed. In such cases, a forced\n   \/\/ update is necessary to ensure correctness.\n\n---\n file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -1,6 +1,7 @@\n \/* @flow *\/\n \n import { hasOwn } from 'shared\/util'\n+import { def } from 'core\/util\/lang'\n import { normalizeChildren } from 'core\/vdom\/helpers\/normalize-children'\n \n export function normalizeScopedSlots (\n@@ -26,8 +27,8 @@ export function normalizeScopedSlots (\n       res[key] = proxyNormalSlot(normalSlots, key)\n     }\n   }\n-  res._normalized = true\n-  res.$stable = slots ? slots.$stable : true\n+  def(res, '_normalized', true)\n+  def(res, '$stable', slots ? !!slots.$stable : true)\n   return res\n }\n \n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -969,4 +969,27 @@ describe('Component scoped slot', () => {\n       }).then(done)\n     }\n   })\n+\n+  \/\/ regression #9396\n+  it('should not force update child with no slot content', done => {\n+    const Child = {\n+      updated: jasmine.createSpy(),\n+      template: `<div><\/div>`\n+    }\n+\n+    const parent = new Vue({\n+      template: `<div>{{ count }}<child\/><\/div>`,\n+      data: {\n+        count: 0\n+      },\n+      components: { Child }\n+    }).$mount()\n+\n+    expect(parent.$el.textContent).toBe(`0`)\n+    parent.count++\n+    waitForUpdate(() => {\n+      expect(parent.$el.textContent).toBe(`1`)\n+      expect(Child.updated).not.toHaveBeenCalled()\n+    }).then(done)\n+  })\n })\n\n---\n file path A: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js | file path B: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js\n\n@@ -410,27 +410,4 @@ describe('vdom patch: edge cases', () => {\n     expect(vm.$el.textContent).toBe('FooBar')\n     expect(inlineHookSpy.calls.count()).toBe(2)\n   })\n-\n-  \/\/ regression #9396\n-  it('should not force update child with no slot content', done => {\n-    const Child = {\n-      updated: jasmine.createSpy(),\n-      template: `<div><\/div>`\n-    }\n-\n-    const parent = new Vue({\n-      template: `<div>{{ count }}<child\/><\/div>`,\n-      data: {\n-        count: 0\n-      },\n-      components: { Child }\n-    }).$mount()\n-\n-    expect(parent.$el.textContent).toBe(`0`)\n-    parent.count++\n-    waitForUpdate(() => {\n-      expect(parent.$el.textContent).toBe(`1`)\n-      expect(Child.updated).not.toHaveBeenCalled()\n-    }).then(done)\n-  })\n })\n\n\n###\n\n","completion":" fix: avoid exposing internal flags on $scopedSlots\n"}
{"prompt":" file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -122,6 +122,7 @@ export interface VueConstructor<V extends Vue = Vue> {\n   observable<T>(obj: T): T;\n \n   config: VueConfiguration;\n+  version: string;\n }\n \n export const Vue: VueConstructor;\n\n\n###\n\n","completion":" fix(types): add Vue.version to types (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/render.js | file path B: src\/core\/instance\/render.js\n\n@@ -51,6 +51,13 @@ export function initRender (vm: Component) {\n   }\n }\n \n+export let currentRenderingInstance: Component | null = null\n+\n+\/\/ for testing only\n+export function setCurrentRenderingInstance (vm: Component) {\n+  currentRenderingInstance = vm\n+}\n+\n export function renderMixin (Vue: Class<Component>) {\n   \/\/ install runtime convenience helpers\n   installRenderHelpers(Vue.prototype)\n@@ -76,6 +83,10 @@ export function renderMixin (Vue: Class<Component>) {\n     \/\/ render self\n     let vnode\n     try {\n+      \/\/ There's no need to maintain a stack becaues all render fns are called\n+      \/\/ separately from one another. Nested component's render fns are called\n+      \/\/ when parent component is patched.\n+      currentRenderingInstance = vm\n       vnode = render.call(vm._renderProxy, vm.$createElement)\n     } catch (e) {\n       handleError(e, vm, `render`)\n@@ -92,6 +103,8 @@ export function renderMixin (Vue: Class<Component>) {\n       } else {\n         vnode = vm._vnode\n       }\n+    } finally {\n+      currentRenderingInstance = null\n     }\n     \/\/ if the returned array contains only a single node, allow it\n     if (Array.isArray(vnode) && vnode.length === 1) {\n\n---\n file path A: src\/core\/vdom\/create-component.js | file path B: src\/core\/vdom\/create-component.js\n\n@@ -129,7 +129,7 @@ export function createComponent (\n   let asyncFactory\n   if (isUndef(Ctor.cid)) {\n     asyncFactory = Ctor\n-    Ctor = resolveAsyncComponent(asyncFactory, baseCtor, context)\n+    Ctor = resolveAsyncComponent(asyncFactory, baseCtor)\n     if (Ctor === undefined) {\n       \/\/ return a placeholder node for async component, which is rendered\n       \/\/ as a comment node but preserves all the raw information for the node.\n\n---\n file path A: src\/core\/vdom\/helpers\/resolve-async-component.js | file path B: src\/core\/vdom\/helpers\/resolve-async-component.js\n\n@@ -12,6 +12,7 @@ import {\n } from 'core\/util\/index'\n \n import { createEmptyVNode } from 'core\/vdom\/vnode'\n+import { currentRenderingInstance } from 'core\/instance\/render'\n \n function ensureCtor (comp: any, base) {\n   if (\n@@ -40,8 +41,7 @@ export function createAsyncPlaceholder (\n \n export function resolveAsyncComponent (\n   factory: Function,\n-  baseCtor: Class<Component>,\n-  context: Component\n+  baseCtor: Class<Component>\n ): Class<Component> | void {\n   if (isTrue(factory.error) && isDef(factory.errorComp)) {\n     return factory.errorComp\n@@ -55,20 +55,21 @@ export function resolveAsyncComponent (\n     return factory.loadingComp\n   }\n \n-  if (isDef(factory.contexts)) {\n+  const owner = currentRenderingInstance\n+  if (isDef(factory.owners)) {\n     \/\/ already pending\n-    factory.contexts.push(context)\n+    factory.owners.push(owner)\n   } else {\n-    const contexts = factory.contexts = [context]\n+    const owners = factory.owners = [owner]\n     let sync = true\n \n     const forceRender = (renderCompleted: boolean) => {\n-      for (let i = 0, l = contexts.length; i < l; i++) {\n-        contexts[i].$forceUpdate()\n+      for (let i = 0, l = owners.length; i < l; i++) {\n+        (owners[i]: any).$forceUpdate()\n       }\n \n       if (renderCompleted) {\n-        contexts.length = 0\n+        owners.length = 0\n       }\n     }\n \n@@ -80,7 +81,7 @@ export function resolveAsyncComponent (\n       if (!sync) {\n         forceRender(true)\n       } else {\n-        contexts.length = 0\n+        owners.length = 0\n       }\n     })\n \n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -935,4 +935,38 @@ describe('Component scoped slot', () => {\n       expect(childUpdate.calls.count()).toBe(1)\n     }).then(done)\n   })\n+\n+  \/\/ #9432: async components inside a scoped slot should trigger update of the\n+  \/\/ component that invoked the scoped slot, not the lexical context component.\n+  it('async component inside scoped slot', done => {\n+    let p\n+    const vm = new Vue({\n+      template: `\n+        <foo>\n+          <template #default>\n+            <bar \/>\n+          <\/template>\n+        <\/foo>\n+      `,\n+      components: {\n+        foo: {\n+          template: `<div>foo<slot\/><\/div>`\n+        },\n+        bar: resolve => {\n+          setTimeout(() => {\n+            resolve({\n+              template: `<div>bar<\/div>`\n+            })\n+            next()\n+          }, 0)\n+        }\n+      }\n+    }).$mount()\n+\n+    function next () {\n+      waitForUpdate(() => {\n+        expect(vm.$el.textContent).toBe(`foobar`)\n+      }).then(done)\n+    }\n+  })\n })\n\n---\n file path A: test\/unit\/modules\/vdom\/create-component.spec.js | file path B: test\/unit\/modules\/vdom\/create-component.spec.js\n\n@@ -1,5 +1,6 @@\n import Vue from 'vue'\n import { createComponent } from 'core\/vdom\/create-component'\n+import { setCurrentRenderingInstance } from 'core\/instance\/render'\n \n describe('create-component', () => {\n   let vm\n@@ -55,13 +56,17 @@ describe('create-component', () => {\n       }, 0)\n     }\n     function go () {\n+      setCurrentRenderingInstance(vm)\n       vnode = createComponent(async, data, vm, vm)\n+      setCurrentRenderingInstance(null)\n       expect(vnode.isComment).toBe(true) \/\/ not to be loaded yet.\n       expect(vnode.asyncFactory).toBe(async)\n-      expect(vnode.asyncFactory.contexts.length).toEqual(1)\n+      expect(vnode.asyncFactory.owners.length).toEqual(1)\n     }\n     function loaded () {\n+      setCurrentRenderingInstance(vm)\n       vnode = createComponent(async, data, vm, vm)\n+      setCurrentRenderingInstance(null)\n       expect(vnode.tag).toMatch(\/vue-component-[0-9]+-child\/)\n       expect(vnode.data.staticAttrs).toEqual({ class: 'foo' })\n       expect(vnode.children).toBeUndefined()\n@@ -69,7 +74,7 @@ describe('create-component', () => {\n       expect(vnode.elm).toBeUndefined()\n       expect(vnode.ns).toBeUndefined()\n       expect(vnode.context).toEqual(vm)\n-      expect(vnode.asyncFactory.contexts.length).toEqual(0)\n+      expect(vnode.asyncFactory.owners.length).toEqual(0)\n       expect(vm.$forceUpdate).toHaveBeenCalled()\n       done()\n     }\n@@ -90,7 +95,7 @@ describe('create-component', () => {\n     }\n     const vnode = createComponent(async, data, vm, vm)\n     expect(vnode.asyncFactory).toBe(async)\n-    expect(vnode.asyncFactory.contexts.length).toEqual(0)\n+    expect(vnode.asyncFactory.owners.length).toEqual(0)\n     expect(vnode.tag).toMatch(\/vue-component-[0-9]+-child\/)\n     expect(vnode.data.staticAttrs).toEqual({ class: 'bar' })\n     expect(vnode.children).toBeUndefined()\n\n\n###\n\n","completion":" fix: async component should use render owner as force update context\n"}
{"prompt":" file path A: src\/core\/observer\/scheduler.js | file path B: src\/core\/observer\/scheduler.js\n\n@@ -44,7 +44,7 @@ export let currentFlushTimestamp = 0\n let getNow: () => number = Date.now\n \n \/\/ Determine what event timestamp the browser is using. Annoyingly, the\n-\/\/ timestamp can either be hi-res ( relative to poge load) or low-res\n+\/\/ timestamp can either be hi-res (relative to page load) or low-res\n \/\/ (relative to UNIX epoch), so in order to compare time we have to use the\n \/\/ same timestamp type when saving the flush timestamp.\n if (inBrowser && getNow() > document.createEvent('Event').timeStamp) {\n\n\n###\n\n","completion":" chore: fix typo in scheduler.js [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -334,121 +334,138 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <h2 align=\"center\">Generous Backers via Patreon ($50+)<\/h2>\n \n <!--50 start-->\n+- Jamie K\n - Wasim Khamlichi\n - errorrik\n - Alex Balashov\n - Konstantin Levinski\n-- Ernest Sim\n - Blaise Laflamme\n+- Ernest Sim\n - Dilettant\n+- Sean Ferguson\n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n \n <!--10 start-->\n-- Luca Borghini\n-- kazuya kawaguchi\n-- Keisuke KITA\n-- Santa Cruz\n+- Masahiro Tanaka\n+- Shawn Wildermuth\n+- Samuel Smith\n+- donny\n+- Jake Ingman\n - Simon East\n-- Benjamin Listwon\n+- kazupon\n - Lars Andreas Ness\n-- Victor Tolbert\n-- Stephen Hartley\n-- Wen-Tien Chang\n+- Luca Borghini\n+- Sean Washington\n+- Benjamin Listwon\n+- Keisuke Kita\n - Kirk Lewis\n-- Karol F\n+- Wen-Tien Chang\n+- Victor Tolbert\n+- Stephen Michael Hartley\n+- Karol\n+- Phan An\n - Miljan Aleksic\n-- \n-- Jake Ingman\n+- James J. Ye\n - Barbara Liau\n-- 4\n+- Luiz\n+- Matsumoto Takamasa\n - Jarek Tkaczyk\n-- Niannian Modisette\n-- Ivan Sieder\n-- Matt Jones\n-- Duncan J Kenzie\n+- Duncan Kenzie\n - Mike Margerum\n - Guy Gavergun\n-- Intevation GmbH\n-- Luiz Eduardo  Tanure Bacelar\n-- Zoran Knezevic\n+- Matt Jones\n+- Niannian Modisette\n+- Bernhard E. Reiter\n - Pierre Vanhulst\n+- Zoran Knezevic\n+- Chengzhi Yin\n+- Shinya Katayama\n - Jon Hobbs-Smith\n-- Akiho Nagao\n+- Anthony Estebe\n - Asaf Yishai\n-- Estebe Anthony\n - Haim Yulzari\n+- Akiho Nagao\n - Jeremy Tan\n - Jim Raden\n-- Fille strm\n-- Samuel Smith\n-- Tyler Scott\n-- Thong Yong Jun\n+- Tai Shi Ling\n+- IMGNRY\n+- Yong Jun Thong\n - Matias Verdier\n-- Jamie McElwain\n+- Chih-Hsuan Fan\n+- Tyler\n+- Daniel Waghorn\n - Vivekanandhan Natarajan\n - Rafael Belvederese\n+- Jamie McElwain\n+- Cliff Hess\n+- Rob Yedlin\n - Mickal Andrieu\n - Guilherme S L de Souza\n-- Rob Yedlin\n-- Daniel Waghorn\n-- Chih-Hsuan, Fan\n - Jordan Oroshiba\n-- Cliff Hess\n-- Joe Ray Gregory\n+- Joe Gregory\n+- Marcos Moura\n - RADD Creative\n-- Rua Cura D'ars\n - Richard Simpson\n+- Alok Pant\n - Jessie Hernandez\n-- Eric Fong\n+- Ivan Sieder\n - Aparajita Fishman\n+- Eric\n+- Christo Crampton\n - Romain Lienard\n - Bohdan Kokotko\n - Donald Fischer\n-- Alexander Weiher\n-- Shinya Katayama\n - Jere Sjroos\n-- Wakana Seki\n - David Ang\n-- Dom\n+- Alexander Weiher\n+- Oskar Lindgren\n+- Jaeyoung Lee\n+- Wakana Seki\n - Ben Hong\n-- David Kaplan\n - John Cleveland\n-- Jaeyoung Lee\n-- Amor\n - Tom Ootes\n-- Andy Foster\n-- Joe Cochran\n-- Matt Sencenbaugh\n-- Daniel Mattingley\n-- Teon Ooi\n+- Domenico Gaudioso\n+- David Kaplan\n+- Amor\n+- Andy\n - Hannes Kochni\n-- Colt Borg\n+- Juan Bermudez\n+- Daniel Mattingley\n+- Matt Sencenbaugh\n+- Joe Cochran\n - Chris Calo\n-- Christo Crampton\n-- Johnny Austin\n-- Aaron Hung\n-- Soichiro Isshiki\n+- Colt Borg\n+- Teon Ooi\n+- Alberto T. Payero Mota\n+- Elon Hung\n+- Milan Zivkovic\n+- Johnny Ray Austin\n - Tom Meagher\n+- Soichiro Isshiki\n - Abraham Arango\n-- Marko Bokovi\n-- Ed Linklater\n+- Marko Boskovic\n - Garion Herman\n-- Chris Bemister\n-- Anfrew Willis\n-- Shawn Wildermuth\n-- Carlos Adrin\n-- Timothy J Bass\n+- Ed Linklater\n+- Christopher Bemister\n+- Andrew Willis\n+- Princeyesuraj Edward\n - Yusuke Kawabata\n+- We\n+- Carlos Adrin\n - Nick Dandakis\n-- JI CAI\n-- \n-- Milos Stojanovic\n-- Matkovsky Peter\n - shimbaco\n-- Princeyesuraj Edward\n+-  \n+- \n+- alcalbg\n - Kenneth Crawford\n+- Peter Matkovsky\n+- Fabien GuySake Ungerer\n+- Kevin Batdorf\n+- Masato Miura\n+- Fedor Indutny\n+- Juli A Schlack\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n\n###\n\n","completion":" chore: update backers [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.1\",\n+  \"version\": \"2.6.2\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.2\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -375,7 +375,8 @@ function genScopedSlot (\n   el: ASTElement,\n   state: CodegenState\n ): string {\n-  if (el.if && !el.ifProcessed) {\n+  const isLegacySyntax = el.attrsMap['slot-scope']\n+  if (el.if && !el.ifProcessed && !isLegacySyntax) {\n     return genIf(el, state, genScopedSlot, `null`)\n   }\n   if (el.for && !el.forProcessed) {\n@@ -383,7 +384,9 @@ function genScopedSlot (\n   }\n   const fn = `function(${String(el.slotScope)}){` +\n     `return ${el.tag === 'template'\n-      ? genChildren(el, state) || 'undefined'\n+      ? el.if && isLegacySyntax\n+        ? `(${el.if})?${genChildren(el, state) || 'undefined'}:undefined`\n+        : genChildren(el, state) || 'undefined'\n       : genElement(el, state)\n     }}`\n   return `{key:${el.slotTarget || `\"default\"`},fn:${fn}}`\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -650,6 +650,25 @@ describe('Component scoped slot', () => {\n     }).then(done)\n   })\n \n+  \/\/ #9422\n+  \/\/ the behavior of the new syntax is slightly different.\n+  it('scoped slot v-if using slot-scope value', () => {\n+    const Child = {\n+      template: '<div><slot value=\"foo\"\/><\/div>',\n+    }\n+    const vm = new Vue({\n+      components: { Child },\n+      template: `\n+        <child>\n+          <template slot-scope=\"{ value }\" v-if=\"value\">\n+            foo {{ value }}\n+          <\/template>\n+        <\/child>\n+      `\n+    }).$mount()\n+    expect(vm.$el.textContent).toMatch(`foo foo`)\n+  })\n+\n   \/\/ 2.6 new slot syntax\n   describe('v-slot syntax', () => {\n     const Foo = {\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -239,11 +239,18 @@ describe('codegen', () => {\n   it('generate scoped slot with multiline v-if', () => {\n     assertCodegen(\n       '<foo><template v-if=\"\\nshow\\n\" slot-scope=\"bar\">{{ bar }}<\/template><\/foo>',\n-      `with(this){return _c('foo',{scopedSlots:_u([(\\nshow\\n)?{key:\"default\",fn:function(bar){return [_v(_s(bar))]}}:null],true)})}`\n+      `with(this){return _c('foo',{scopedSlots:_u([{key:\"default\",fn:function(bar){return (\\nshow\\n)?[_v(_s(bar))]:undefined}}],true)})}`\n     )\n     assertCodegen(\n       '<foo><div v-if=\"\\nshow\\n\" slot=\"foo\" slot-scope=\"bar\">{{ bar }}<\/div><\/foo>',\n-      `with(this){return _c(\\'foo\\',{scopedSlots:_u([(\\nshow\\n)?{key:\"foo\",fn:function(bar){return _c(\\'div\\',{},[_v(_s(bar))])}}:null],true)})}`\n+      `with(this){return _c(\\'foo\\',{scopedSlots:_u([{key:\"foo\",fn:function(bar){return (\\nshow\\n)?_c(\\'div\\',{},[_v(_s(bar))]):_e()}}],true)})}`\n+    )\n+  })\n+\n+  it('generate scoped slot with new slot syntax', () => {\n+    assertCodegen(\n+      '<foo><template v-if=\"show\" #default=\"bar\">{{ bar }}<\/template><\/foo>',\n+      `with(this){return _c('foo',{scopedSlots:_u([(show)?{key:\"default\",fn:function(bar){return [_v(_s(bar))]}}:null],true)})}`\n     )\n   })\n \n\n\n###\n\n","completion":" fix: restore slot-scope + v-if behavior\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -1,5 +1,6 @@\n \/* @flow *\/\n \n+import { hasOwn } from 'shared\/util'\n import { normalizeChildren } from 'core\/vdom\/helpers\/normalize-children'\n \n export function normalizeScopedSlots (\n@@ -15,7 +16,7 @@ export function normalizeScopedSlots (\n     res = {}\n     for (const key in slots) {\n       if (slots[key] && key[0] !== '$') {\n-        res[key] = normalizeScopedSlot(slots[key])\n+        res[key] = normalizeScopedSlot(normalSlots, key, slots[key])\n       }\n     }\n   }\n@@ -30,13 +31,20 @@ export function normalizeScopedSlots (\n   return res\n }\n \n-function normalizeScopedSlot(fn: Function): Function {\n-  return scope => {\n+function normalizeScopedSlot(normalSlots, key, fn) {\n+  const normalized = (scope = {}) => {\n     const res = fn(scope)\n     return res && typeof res === 'object' && !Array.isArray(res)\n       ? [res] \/\/ single vnode\n       : normalizeChildren(res)\n   }\n+  \/\/ proxy scoped slots on normal $slots\n+  if (!hasOwn(normalSlots, key)) {\n+    Object.defineProperty(normalSlots, key, {\n+      get: normalized\n+    })\n+  }\n+  return normalized\n }\n \n function proxyNormalSlot(slots, key) {\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -456,7 +456,7 @@ describe('Component scoped slot', () => {\n   })\n \n   \/\/ new in 2.6, unifying all slots as functions\n-  it('non-scoped slots should also be available on $scopedSlots', () => {\n+  it('non-scoped slots should also be available on this.$scopedSlots', () => {\n     const vm = new Vue({\n       template: `<foo>before <div slot=\"bar\" slot-scope=\"scope\">{{ scope.msg }}<\/div> after<\/foo>`,\n       components: {\n@@ -473,6 +473,24 @@ describe('Component scoped slot', () => {\n     expect(vm.$el.innerHTML).toBe(`before  after<div>hi<\/div>`)\n   })\n \n+  \/\/ #9421 the other side of unification is also needed\n+  \/\/ for library authors\n+  it('scoped slots should also be available on this.$slots', () => {\n+    const Child = {\n+      render: function (h) {\n+        return h(\n+          'div',\n+          this.$slots.content\n+        )\n+      }\n+    }\n+    const vm = new Vue({\n+      template: `<child><template #content>foo<\/template><\/child>`,\n+      components: { Child }\n+    }).$mount()\n+    expect(vm.$el.innerHTML).toBe(`foo`)\n+  })\n+\n   \/\/ #4779\n   it('should support dynamic slot target', done => {\n     const Child = {\n\n\n###\n\n","completion":" feat: expose all scoped slots on this.$slots\n"}
{"prompt":" file path A: src\/core\/vdom\/create-component.js | file path B: src\/core\/vdom\/create-component.js\n\n@@ -250,8 +250,7 @@ function mergeHook (f1: any, f2: any): Function {\n function transformModel (options, data: any) {\n   const prop = (options.model && options.model.prop) || 'value'\n   const event = (options.model && options.model.event) || 'input'\n-  const addTo = (options.props && prop in options.props) ? 'props' : 'attrs'\n-  ;(data[addTo] || (data[addTo] = {}))[prop] = data.model.value\n+  ;(data.attrs || (data.attrs = {}))[prop] = data.model.value\n   const on = data.on || (data.on = {})\n   const existing = on[event]\n   const callback = data.model.callback\n\n\n###\n\n","completion":" fix: always set transformed model value on attrs\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.0\",\n+  \"version\": \"2.6.1\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.1\n"}
{"prompt":" file path A: src\/core\/vdom\/create-component.js | file path B: src\/core\/vdom\/create-component.js\n\n@@ -250,7 +250,8 @@ function mergeHook (f1: any, f2: any): Function {\n function transformModel (options, data: any) {\n   const prop = (options.model && options.model.prop) || 'value'\n   const event = (options.model && options.model.event) || 'input'\n-  ;(data.props || (data.props = {}))[prop] = data.model.value\n+  const addTo = (options.props && prop in options.props) ? 'props' : 'attrs'\n+  ;(data[addTo] || (data[addTo] = {}))[prop] = data.model.value\n   const on = data.on || (data.on = {})\n   const existing = on[event]\n   const callback = data.model.callback\n\n---\n file path A: test\/unit\/features\/directives\/model-component.spec.js | file path B: test\/unit\/features\/directives\/model-component.spec.js\n\n@@ -204,4 +204,30 @@ describe('Directive v-model component', () => {\n     expect(triggerCount).toBe(1)\n     document.body.removeChild(vm.$el)\n   })\n+\n+  \/\/ #9330\n+  it('should add value to $attrs if not defined in props', () => {\n+    const TestComponent = {\n+      inheritAttrs: false,\n+      render (h) {\n+        return h('div', this.$attrs.value)\n+      }\n+    }\n+\n+    const vm = new Vue({\n+      components: {\n+        TestComponent\n+      },\n+      template: `\n+        <div>\n+          <test-component v-model=\"val\"\/>\n+        <\/div>\n+      `,\n+      data: {\n+        val: 'foo'\n+      }\n+    }).$mount()\n+\n+    expect(vm.$el.innerHTML).toBe('<div>foo<\/div>');\n+  })\n })\n\n\n###\n\n","completion":" fix(v-model): add value to $attrs if not defined in props (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/attrs.js | file path B: src\/platforms\/web\/runtime\/modules\/attrs.js\n\n@@ -98,8 +98,8 @@ function baseSetAttr (el, key, value) {\n     \/* istanbul ignore if *\/\n     if (\n       isIE && !isIE9 &&\n-      (el.tagName === 'TEXTAREA' || el.tagName === 'INPUT') &&\n-      key === 'placeholder' && !el.__ieph\n+      el.tagName === 'TEXTAREA' &&\n+      key === 'placeholder' && value !== '' && !el.__ieph\n     ) {\n       const blocker = e => {\n         e.stopImmediatePropagation()\n\n---\n file path A: test\/unit\/features\/directives\/model-text.spec.js | file path B: test\/unit\/features\/directives\/model-text.spec.js\n\n@@ -437,8 +437,8 @@ describe('Directive v-model text', () => {\n     })\n   }\n \n-  \/\/ #7138\n   if (isIE && !isIE9) {\n+    \/\/ #7138\n     it('should not fire input on initial render of textarea with placeholder in IE10\/11', done => {\n       const el = document.createElement('div')\n       document.body.appendChild(el)\n@@ -452,5 +452,21 @@ describe('Directive v-model text', () => {\n         done()\n       }, 17)\n     })\n+\n+    \/\/ #9042\n+    it('should not block the first input event when placeholder is empty', done => {\n+      const el = document.createElement('div')\n+      document.body.appendChild(el)\n+      const vm = new Vue({\n+        el,\n+        data: { evtCount: 0 },\n+        template: `<textarea placeholder=\"\" @input=\"evtCount++\"><\/textarea>`,\n+      })\n+      triggerEvent(vm.$el, 'input')\n+      setTimeout(() => {\n+        expect(vm.evtCount).toBe(1)\n+        done()\n+      }, 17)\n+    })\n   }\n })\n\n\n###\n\n","completion":" fix: avoid blocking first input event in IE when it shouldn't (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -346,7 +346,7 @@ function genInlineTemplate (el: ASTElement, state: CodegenState): ?string {\n       { start: el.start }\n     )\n   }\n-  if (ast.type === 1) {\n+  if (ast && ast.type === 1) {\n     const inlineRenderFns = generate(ast, state.options)\n     return `inlineTemplate:{render:function(){${\n       inlineRenderFns.render\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -591,14 +591,21 @@ describe('codegen', () => {\n       '<my-component inline-template><hr><hr><\/my-component>',\n       `with(this){return _c('my-component',{inlineTemplate:{render:function(){with(this){return _c('hr')}},staticRenderFns:[]}})}`\n     )\n-    try {\n-      assertCodegen(\n-        '<my-component inline-template><\/my-component>',\n-        ''\n-      )\n-    } catch (e) {}\n+    assertCodegen(\n+      '<my-component inline-template><\/my-component>',\n+      `with(this){return _c('my-component',{})}`\n+    )\n+    \/\/ have \"is\" attribute\n+    assertCodegen(\n+      '<div is=\"myComponent\" inline-template><div><\/div><\/div>',\n+      `with(this){return _c(\"myComponent\",{tag:\"div\",inlineTemplate:{render:function(){with(this){return _c('div')}},staticRenderFns:[]}})}`\n+    )\n+    assertCodegen(\n+      '<div is=\"myComponent\" inline-template><\/div>',\n+      `with(this){return _c(\"myComponent\",{tag:\"div\"})}`\n+    )\n     expect('Inline-template components must have exactly one child element.').toHaveBeenWarned()\n-    expect(console.error.calls.count()).toBe(2)\n+    expect(console.error.calls.count()).toBe(3)\n   })\n \n   it('generate static trees inside v-for', () => {\n\n\n###\n\n","completion":" fix(compiler): fix inline-template crashing (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -36,10 +36,11 @@ const decodingMap = {\n   '&quot;': '\"',\n   '&amp;': '&',\n   '&#10;': '\\n',\n-  '&#9;': '\\t'\n+  '&#9;': '\\t',\n+  '&#39;': \"'\"\n }\n-const encodedAttr = \/&(?:lt|gt|quot|amp);\/g\n-const encodedAttrWithNewLines = \/&(?:lt|gt|quot|amp|#10|#9);\/g\n+const encodedAttr = \/&(?:lt|gt|quot|amp|#39);\/g\n+const encodedAttrWithNewLines = \/&(?:lt|gt|quot|amp|#39|#10|#9);\/g\n \n \/\/ #5992\n const isIgnoreNewlineTag = makeMap('pre,textarea', true)\n\n\n###\n\n","completion":" fix: decode single quotes in html attributes (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -377,16 +377,20 @@ export function parse (\n       }\n     },\n     comment (text: string, start, end) {\n-      const child: ASTText = {\n-        type: 3,\n-        text,\n-        isComment: true\n-      }\n-      if (process.env.NODE_ENV !== 'production' && options.outputSourceRange) {\n-        child.start = start\n-        child.end = end\n+      \/\/ adding anyting as a sibling to the root node is forbidden\n+      \/\/ comments should still be allowed, but ignored\n+      if (currentParent) {\n+        const child: ASTText = {\n+          type: 3,\n+          text,\n+          isComment: true\n+        }\n+        if (process.env.NODE_ENV !== 'production' && options.outputSourceRange) {\n+          child.start = start\n+          child.end = end\n+        }\n+        currentParent.children.push(child)\n       }\n-      currentParent.children.push(child)\n     }\n   })\n   return root\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -786,6 +786,16 @@ describe('parser', () => {\n     expect(ast.children[1].text).toBe('comment here')\n   })\n \n+  \/\/ #9407\n+  it('should parse templates with comments anywhere', () => {\n+    const options = extend({\n+      comments: true\n+    }, baseOptions)\n+    const ast = parse(`<!--comment here--><div>123<\/div>`, options)\n+    expect(ast.tag).toBe('div')\n+    expect(ast.children.length).toBe(1)\n+  })\n+\n   \/\/ #8103\n   it('should allow CRLFs in string interpolations', () => {\n     const ast = parse(`<p>{{\\r\\nmsg\\r\\n}}<\/p>`, baseOptions)\n@@ -797,7 +807,7 @@ describe('parser', () => {\n       preserveWhitespace: false\n     }, baseOptions)\n \n-     const ast = parse('<p>\\n  Welcome to <b>Vue.js<\/b>    <i>world<\/i>  \\n  <span>.\\n  Have fun!\\n<\/span><\/p>', options)\n+    const ast = parse('<p>\\n  Welcome to <b>Vue.js<\/b>    <i>world<\/i>  \\n  <span>.\\n  Have fun!\\n<\/span><\/p>', options)\n     expect(ast.tag).toBe('p')\n     expect(ast.children.length).toBe(4)\n     expect(ast.children[0].type).toBe(3)\n\n\n###\n\n","completion":" fix(template-compiler): allow comments on the root node in templates (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/error.js | file path B: src\/core\/util\/error.js\n\n@@ -35,7 +35,7 @@ export function invokeWithErrorHandling (\n   let res\n   try {\n     res = args ? handler.apply(context, args) : handler.call(context)\n-    if (isPromise(res)) {\n+    if (res && !res._isVue && isPromise(res)) {\n       res.catch(e => handleError(e, vm, info + ` (Promise\/async)`))\n     }\n   } catch (e) {\n\n\n###\n\n","completion":" fix: avoid isPromise check when handler return value is Vue instance\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.0-beta.3\",\n+  \"version\": \"2.6.0\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.0\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -209,6 +209,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/yakaz.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/yakaz.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.bacancytechnology.com\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/bacancy_technology.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: scripts\/feature-flags.js | file path B: scripts\/feature-flags.js\n\n@@ -1,3 +1,4 @@\n module.exports = {\n-  NEW_SLOT_SYNTAX: true\n+  NEW_SLOT_SYNTAX: true,\n+  VBIND_PROP_SHORTHAND: false\n }\n\n---\n file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -22,7 +22,9 @@ import {\n } from '..\/helpers'\n \n export const onRE = \/^@|^v-on:\/\n-export const dirRE = \/^v-|^@|^:|^\\.\/\n+export const dirRE = process.env.VBIND_PROP_SHORTHAND\n+  ? \/^v-|^@|^:|^\\.\/\n+  : \/^v-|^@|^:\/\n export const forAliasRE = \/([\\s\\S]*?)\\s+(?:in|of)\\s+([\\s\\S]*)\/\n export const forIteratorRE = \/,([^,\\}\\]]*)(?:,([^,\\}\\]]*))?$\/\n const stripParensRE = \/^\\(|\\)$\/g\n@@ -753,7 +755,7 @@ function processAttrs (el) {\n       \/\/ modifiers\n       modifiers = parseModifiers(name.replace(dirRE, ''))\n       \/\/ support .foo shorthand syntax for the .prop modifier\n-      if (propBindRE.test(name)) {\n+      if (process.env.VBIND_PROP_SHORTHAND && propBindRE.test(name)) {\n         (modifiers || (modifiers = {})).prop = true\n         name = `.` + name.slice(1).replace(modifierRE, '')\n       } else if (modifiers) {\n\n---\n file path A: test\/unit\/features\/directives\/bind.spec.js | file path B: test\/unit\/features\/directives\/bind.spec.js\n\n@@ -133,17 +133,19 @@ describe('Directive v-bind', () => {\n     expect(vm.$el.getAttribute('id')).toBe(null)\n   })\n \n-  it('.prop modifier shorthand', () => {\n-    const vm = new Vue({\n-      template: '<div><span .text-content=\"foo\"><\/span><span .inner-html=\"bar\"><\/span><\/div>',\n-      data: {\n-        foo: 'hello',\n-        bar: '<span>qux<\/span>'\n-      }\n-    }).$mount()\n-    expect(vm.$el.children[0].textContent).toBe('hello')\n-    expect(vm.$el.children[1].innerHTML).toBe('<span>qux<\/span>')\n-  })\n+  if (process.env.VBIND_PROP_SHORTHAND) {\n+    it('.prop modifier shorthand', () => {\n+      const vm = new Vue({\n+        template: '<div><span .text-content=\"foo\"><\/span><span .inner-html=\"bar\"><\/span><\/div>',\n+        data: {\n+          foo: 'hello',\n+          bar: '<span>qux<\/span>'\n+        }\n+      }).$mount()\n+      expect(vm.$el.children[0].textContent).toBe('hello')\n+      expect(vm.$el.children[1].innerHTML).toBe('<span>qux<\/span>')\n+    })\n+  }\n \n   it('.camel modifier', () => {\n     const vm = new Vue({\n@@ -529,20 +531,22 @@ describe('Directive v-bind', () => {\n       }).then(done)\n     })\n \n-    it('.prop shorthand', done => {\n-      const vm = new Vue({\n-        template: `<div .[key]=\"value\"><\/div>`,\n-        data: {\n-          key: 'id',\n-          value: 'hello'\n-        }\n-      }).$mount()\n-      expect(vm.$el.id).toBe('hello')\n-      vm.key = 'textContent'\n-      waitForUpdate(() => {\n-        expect(vm.$el.textContent).toBe('hello')\n-      }).then(done)\n-    })\n+    if (process.env.VBIND_PROP_SHORTHAND) {\n+      it('.prop shorthand', done => {\n+        const vm = new Vue({\n+          template: `<div .[key]=\"value\"><\/div>`,\n+          data: {\n+            key: 'id',\n+            value: 'hello'\n+          }\n+        }).$mount()\n+        expect(vm.$el.id).toBe('hello')\n+        vm.key = 'textContent'\n+        waitForUpdate(() => {\n+          expect(vm.$el.textContent).toBe('hello')\n+        }).then(done)\n+      })\n+    }\n \n     it('handle class and style', () => {\n       const vm = new Vue({\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -535,20 +535,22 @@ describe('parser', () => {\n     expect('The value for a v-bind expression cannot be empty. Found in \"v-bind:empty-msg\"').toHaveBeenWarned()\n   })\n \n-  it('v-bind.prop shorthand syntax', () => {\n-    const ast = parse('<div .id=\"foo\"><\/div>', baseOptions)\n-    expect(ast.props).toEqual([{ name: 'id', value: 'foo', dynamic: false }])\n-  })\n+  if (process.env.VBIND_PROP_SHORTHAND) {\n+    it('v-bind.prop shorthand syntax', () => {\n+      const ast = parse('<div .id=\"foo\"><\/div>', baseOptions)\n+      expect(ast.props).toEqual([{ name: 'id', value: 'foo', dynamic: false }])\n+    })\n \n-  it('v-bind.prop shorthand syntax w\/ modifiers', () => {\n-    const ast = parse('<div .id.mod=\"foo\"><\/div>', baseOptions)\n-    expect(ast.props).toEqual([{ name: 'id', value: 'foo', dynamic: false }])\n-  })\n+    it('v-bind.prop shorthand syntax w\/ modifiers', () => {\n+      const ast = parse('<div .id.mod=\"foo\"><\/div>', baseOptions)\n+      expect(ast.props).toEqual([{ name: 'id', value: 'foo', dynamic: false }])\n+    })\n \n-  it('v-bind dynamic argument', () => {\n-    const ast = parse('<div .[id]=\"foo\"><\/div>', baseOptions)\n-    expect(ast.props).toEqual([{ name: 'id', value: 'foo', dynamic: true }])\n-  })\n+    it('v-bind.prop shorthand dynamic argument', () => {\n+      const ast = parse('<div .[id]=\"foo\"><\/div>', baseOptions)\n+      expect(ast.props).toEqual([{ name: 'id', value: 'foo', dynamic: true }])\n+    })\n+  }\n \n   \/\/ This only works for string templates.\n   \/\/ In-DOM templates will be malformed before Vue can parse it.\n\n\n###\n\n","completion":" feat: move v-bind.prop shorthand behind flag\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -26,7 +26,7 @@ export function normalizeScopedSlots (\n     }\n   }\n   res._normalized = true\n-  res.$stable = slots && slots.$stable\n+  res.$stable = slots ? slots.$stable : true\n   return res\n }\n \n\n---\n file path A: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js | file path B: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js\n\n@@ -410,4 +410,27 @@ describe('vdom patch: edge cases', () => {\n     expect(vm.$el.textContent).toBe('FooBar')\n     expect(inlineHookSpy.calls.count()).toBe(2)\n   })\n+\n+  \/\/ regression #9396\n+  it('should not force update child with no slot content', done => {\n+    const Child = {\n+      updated: jasmine.createSpy(),\n+      template: `<div><\/div>`\n+    }\n+\n+    const parent = new Vue({\n+      template: `<div>{{ count }}<child\/><\/div>`,\n+      data: {\n+        count: 0\n+      },\n+      components: { Child }\n+    }).$mount()\n+\n+    expect(parent.$el.textContent).toBe(`0`)\n+    parent.count++\n+    waitForUpdate(() => {\n+      expect(parent.$el.textContent).toBe(`1`)\n+      expect(Child.updated).not.toHaveBeenCalled()\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: fix child forceUpdate regression\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/style.js | file path B: src\/platforms\/web\/runtime\/modules\/style.js\n\n@@ -1,7 +1,7 @@\n \/* @flow *\/\n \n import { getStyle, normalizeStyleBinding } from 'web\/util\/style'\n-import { cached, camelize, extend, isDef, isUndef } from 'shared\/util'\n+import { cached, camelize, extend, isDef, isUndef, hyphenate } from 'shared\/util'\n \n const cssVarRE = \/^--\/\n const importantRE = \/\\s*!important$\/\n@@ -10,7 +10,7 @@ const setProp = (el, name, val) => {\n   if (cssVarRE.test(name)) {\n     el.style.setProperty(name, val)\n   } else if (importantRE.test(val)) {\n-    el.style.setProperty(name, val.replace(importantRE, ''), 'important')\n+    el.style.setProperty(hyphenate(name), val.replace(importantRE, ''), 'important')\n   } else {\n     const normalizedName = normalize(name)\n     if (Array.isArray(val)) {\n\n---\n file path A: test\/unit\/features\/directives\/style.spec.js | file path B: test\/unit\/features\/directives\/style.spec.js\n\n@@ -101,6 +101,13 @@ describe('Directive v-bind:style', () => {\n     }).then(done)\n   })\n \n+  it('camelCase with !important', done => {\n+    vm.styles = { zIndex: '100 !important' }\n+    waitForUpdate(() => {\n+      expect(vm.$el.style.getPropertyPriority('z-index')).toBe('important')\n+    }).then(done)\n+  })\n+\n   it('object with multiple entries', done => {\n     vm.$el.style.color = 'red'\n     vm.styles = {\n\n\n###\n\n","completion":" fix: fix v-bind:style for camelCase properties with !important  (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -194,6 +194,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/marcus_hiles.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/intygrate.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/isleofcode.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -199,6 +199,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/marcus_hiles.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/intygrate.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/intygrate.png\">\n+        <\/a>\n+      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/isleofcode.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/attrs.js | file path B: src\/platforms\/web\/runtime\/modules\/attrs.js\n\n@@ -14,7 +14,8 @@ import {\n   getXlinkProp,\n   isBooleanAttr,\n   isEnumeratedAttr,\n-  isFalsyAttrValue\n+  isFalsyAttrValue,\n+  convertEnumeratedValue\n } from 'web\/util\/index'\n \n function updateAttrs (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n@@ -75,7 +76,7 @@ function setAttr (el: Element, key: string, value: any) {\n       el.setAttribute(key, value)\n     }\n   } else if (isEnumeratedAttr(key)) {\n-    el.setAttribute(key, isFalsyAttrValue(value) || value === 'false' ? 'false' : 'true')\n+    el.setAttribute(key, convertEnumeratedValue(key, value))\n   } else if (isXlink(key)) {\n     if (isFalsyAttrValue(value)) {\n       el.removeAttributeNS(xlinkNS, getXlinkProp(key))\n\n---\n file path A: src\/platforms\/web\/server\/modules\/attrs.js | file path B: src\/platforms\/web\/server\/modules\/attrs.js\n\n@@ -11,7 +11,8 @@ import {\n import {\n   isBooleanAttr,\n   isEnumeratedAttr,\n-  isFalsyAttrValue\n+  isFalsyAttrValue,\n+  convertEnumeratedValue\n } from 'web\/util\/attrs'\n \n import { isSSRUnsafeAttr } from 'web\/server\/util'\n@@ -54,7 +55,7 @@ export function renderAttr (key: string, value: string): string {\n       return ` ${key}=\"${key}\"`\n     }\n   } else if (isEnumeratedAttr(key)) {\n-    return ` ${key}=\"${isFalsyAttrValue(value) || value === 'false' ? 'false' : 'true'}\"`\n+    return ` ${key}=\"${escape(convertEnumeratedValue(key, value))}\"`\n   } else if (!isFalsyAttrValue(value)) {\n     return ` ${key}=\"${escape(String(value))}\"`\n   }\n\n---\n file path A: src\/platforms\/web\/util\/attrs.js | file path B: src\/platforms\/web\/util\/attrs.js\n\n@@ -19,6 +19,17 @@ export const mustUseProp = (tag: string, type: ?string, attr: string): boolean =\n \n export const isEnumeratedAttr = makeMap('contenteditable,draggable,spellcheck')\n \n+const isValidContentEditableValue = makeMap('events,caret,typing,plaintext-only')\n+\n+export const convertEnumeratedValue = (key: string, value: any) => {\n+  return isFalsyAttrValue(value) || value === 'false'\n+    ? 'false'\n+    \/\/ allow arbitrary string value for contenteditable\n+    : key === 'contenteditable' && isValidContentEditableValue(value)\n+      ? value\n+      : 'true'\n+}\n+\n export const isBooleanAttr = makeMap(\n   'allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,' +\n   'default,defaultchecked,defaultmuted,defaultselected,defer,disabled,' +\n\n---\n file path A: test\/unit\/features\/directives\/bind.spec.js | file path B: test\/unit\/features\/directives\/bind.spec.js\n\n@@ -69,25 +69,25 @@ describe('Directive v-bind', () => {\n \n   it('enumerated attr', done => {\n     const vm = new Vue({\n-      template: '<div><span :draggable=\"foo\">hello<\/span><\/div>',\n+      template: '<div><span :contenteditable=\"foo\">hello<\/span><\/div>',\n       data: { foo: true }\n     }).$mount()\n-    expect(vm.$el.firstChild.getAttribute('draggable')).toBe('true')\n-    vm.foo = 'again'\n+    expect(vm.$el.firstChild.getAttribute('contenteditable')).toBe('true')\n+    vm.foo = 'plaintext-only' \/\/ allow special values\n     waitForUpdate(() => {\n-      expect(vm.$el.firstChild.getAttribute('draggable')).toBe('true')\n+      expect(vm.$el.firstChild.getAttribute('contenteditable')).toBe('plaintext-only')\n       vm.foo = null\n     }).then(() => {\n-      expect(vm.$el.firstChild.getAttribute('draggable')).toBe('false')\n+      expect(vm.$el.firstChild.getAttribute('contenteditable')).toBe('false')\n       vm.foo = ''\n     }).then(() => {\n-      expect(vm.$el.firstChild.getAttribute('draggable')).toBe('true')\n+      expect(vm.$el.firstChild.getAttribute('contenteditable')).toBe('true')\n       vm.foo = false\n     }).then(() => {\n-      expect(vm.$el.firstChild.getAttribute('draggable')).toBe('false')\n+      expect(vm.$el.firstChild.getAttribute('contenteditable')).toBe('false')\n       vm.foo = 'false'\n     }).then(() => {\n-      expect(vm.$el.firstChild.getAttribute('draggable')).toBe('false')\n+      expect(vm.$el.firstChild.getAttribute('contenteditable')).toBe('false')\n     }).then(done)\n   })\n \n\n\n###\n\n","completion":" fix: allow more enumerated values for contenteditable\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -149,7 +149,7 @@ export function parse (\n \n     \/\/ final children cleanup\n     \/\/ filter out scoped slots\n-    element.children = element.children.filter(c => !c.slotScope)\n+    element.children = element.children.filter(c => !(c: any).slotScope)\n     \/\/ remove trailing whitespace node again\n     trimEndingWhitespace(element)\n \n@@ -642,7 +642,7 @@ function processSlotContent (el) {\n               el\n             )\n           }\n-          if (!maybeComponent(el.parent)) {\n+          if (el.parent && !maybeComponent(el.parent)) {\n             warn(\n               `<template v-slot> can only appear at the root level inside ` +\n               `the receiving the component`,\n@@ -686,7 +686,7 @@ function processSlotContent (el) {\n         const slotContainer = slots[name] = createASTElement('template', [], el)\n         slotContainer.slotTarget = name\n         slotContainer.slotTargetDynamic = dynamic\n-        slotContainer.children = el.children.filter(c => !c.slotScope)\n+        slotContainer.children = el.children.filter(c => !(c: any).slotScope)\n         slotContainer.slotScope = slotBinding.value || `_`\n         \/\/ remove children as they are returned from scopedSlots now\n         el.children = []\n\n---\n file path A: flow\/options.js | file path B: flow\/options.js\n\n@@ -44,7 +44,7 @@ declare type ComponentOptions = {\n   beforeDestroy?: Function;\n   destroyed?: Function;\n   errorCaptured?: () => boolean | void;\n-  ssrPrefetch?: Function;\n+  serverPrefetch?: Function;\n \n   \/\/ assets\n   directives?: { [key: string]: Object };\n\n---\n file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -27,7 +27,7 @@ export class CodegenState {\n     this.dataGenFns = pluckModuleFunction(options.modules, 'genData')\n     this.directives = extend(extend({}, baseDirectives), options.directives)\n     const isReservedTag = options.isReservedTag || no\n-    this.maybeComponent = (el: ASTElement) => el.component || !isReservedTag(el.tag)\n+    this.maybeComponent = (el: ASTElement) => !!el.component || !isReservedTag(el.tag)\n     this.onceId = 0\n     this.staticRenderFns = []\n     this.pre = false\n\n---\n file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -51,12 +51,12 @@ export function FunctionalRenderContext (\n   this.injections = resolveInject(options.inject, parent)\n   this.slots = () => resolveSlots(children, parent)\n \n-  Object.defineProperty(this, 'scopedSlots', {\n+  Object.defineProperty(this, 'scopedSlots', ({\n     enumerable: true,\n     get () {\n       return normalizeScopedSlots(data.scopedSlots, this.slots())\n     }\n-  })\n+  }: any))\n \n   \/\/ support for compiled functional template\n   if (isCompiled) {\n\n\n###\n\n","completion":" chore: fix flow\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -366,53 +366,27 @@ function genScopedSlots (\n   })\n   return `scopedSlots:_u([${\n     Object.keys(slots).map(key => {\n-      return genScopedSlot(key, slots[key], state)\n+      return genScopedSlot(slots[key], state)\n     }).join(',')\n   }]${hasDynamicKeys ? `,true` : ``})`\n }\n \n function genScopedSlot (\n-  key: string,\n   el: ASTElement,\n   state: CodegenState\n ): string {\n   if (el.if && !el.ifProcessed) {\n-    return genIfScopedSlot(key, el, state)\n+    return genIf(el, state, genScopedSlot, `null`)\n   }\n   if (el.for && !el.forProcessed) {\n-    return genForScopedSlot(key, el, state)\n+    return genFor(el, state, genScopedSlot)\n   }\n   const fn = `function(${String(el.slotScope)}){` +\n     `return ${el.tag === 'template'\n       ? genChildren(el, state) || 'undefined'\n       : genElement(el, state)\n     }}`\n-  return `{key:${key},fn:${fn}}`\n-}\n-\n-function genIfScopedSlot (\n-  key: string,\n-  el: any,\n-  state: CodegenState\n-): string {\n-  el.ifProcessed = true\n-  return `(${el.if})?${genScopedSlot(key, el, state)}:null`\n-}\n-\n-function genForScopedSlot (\n-  key: string,\n-  el: any,\n-  state: CodegenState\n-): string {\n-  const exp = el.for\n-  const alias = el.alias\n-  const iterator1 = el.iterator1 ? `,${el.iterator1}` : ''\n-  const iterator2 = el.iterator2 ? `,${el.iterator2}` : ''\n-  el.forProcessed = true \/\/ avoid recursion\n-  return `_l((${exp}),` +\n-    `function(${alias}${iterator1}${iterator2}){` +\n-      `return ${genScopedSlot(key, el, state)}` +\n-    '})'\n+  return `{key:${el.slotTarget || `\"default\"`},fn:${fn}}`\n }\n \n export function genChildren (\n\n---\n file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -107,6 +107,7 @@ export function parse (\n   }\n \n   function closeElement (element) {\n+    trimEndingWhitespace(element)\n     if (!inVPre && !element.processed) {\n       element = processElement(element, options)\n     }\n@@ -133,14 +134,25 @@ export function parse (\n     if (currentParent && !element.forbidden) {\n       if (element.elseif || element.else) {\n         processIfConditions(element, currentParent)\n-      } else if (element.slotScope) { \/\/ scoped slot\n-        const name = element.slotTarget || '\"default\"'\n-        ;(currentParent.scopedSlots || (currentParent.scopedSlots = {}))[name] = element\n       } else {\n+        if (element.slotScope) {\n+          \/\/ scoped slot\n+          \/\/ keep it in the children list so that v-else(-if) conditions can\n+          \/\/ find it as the prev node.\n+          const name = element.slotTarget || '\"default\"'\n+          ;(currentParent.scopedSlots || (currentParent.scopedSlots = {}))[name] = element\n+        }\n         currentParent.children.push(element)\n         element.parent = currentParent\n       }\n     }\n+\n+    \/\/ final children cleanup\n+    \/\/ filter out scoped slots\n+    element.children = element.children.filter(c => !c.slotScope)\n+    \/\/ remove trailing whitespace node again\n+    trimEndingWhitespace(element)\n+\n     \/\/ check pre state\n     if (element.pre) {\n       inVPre = false\n@@ -154,6 +166,20 @@ export function parse (\n     }\n   }\n \n+  function trimEndingWhitespace (el) {\n+    \/\/ remove trailing whitespace node\n+    if (!inPre) {\n+      let lastNode\n+      while (\n+        (lastNode = el.children[el.children.length - 1]) &&\n+        lastNode.type === 3 &&\n+        lastNode.text === ' '\n+      ) {\n+        el.children.pop()\n+      }\n+    }\n+  }\n+\n   function checkRootConstraints (el) {\n     if (el.tag === 'slot' || el.tag === 'template') {\n       warnOnce(\n@@ -268,13 +294,6 @@ export function parse (\n \n     end (tag, start, end) {\n       const element = stack[stack.length - 1]\n-      if (!inPre) {\n-        \/\/ remove trailing whitespace node\n-        const lastNode = element.children[element.children.length - 1]\n-        if (lastNode && lastNode.type === 3 && lastNode.text === ' ') {\n-          element.children.pop()\n-        }\n-      }\n       \/\/ pop stack\n       stack.length -= 1\n       currentParent = stack[stack.length - 1]\n@@ -658,8 +677,9 @@ function processSlotContent (el) {\n         const slots = el.scopedSlots || (el.scopedSlots = {})\n         const { name, dynamic } = getSlotName(slotBinding)\n         const slotContainer = slots[name] = createASTElement('template', [], el)\n+        slotContainer.slotTarget = name\n         slotContainer.slotTargetDynamic = dynamic\n-        slotContainer.children = el.children\n+        slotContainer.children = el.children.filter(c => !c.slotScope)\n         slotContainer.slotScope = slotBinding.value || `_`\n         \/\/ remove children as they are returned from scopedSlots now\n         el.children = []\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -827,6 +827,24 @@ describe('Component scoped slot', () => {\n         expect(vm.$el.innerHTML.replace(\/\\s+\/g, ' ')).toMatch(`b from foo one a from foo two `)\n       }).then(done)\n     })\n+\n+    it('should work with v-if\/v-else', done => {\n+      const vm = new Vue({\n+        data: { flag: true },\n+        template: `\n+          <foo>\n+            <template v-if=\"flag\" v-slot:one=\"one\">a {{ one }} <\/template>\n+            <template v-else v-slot:two=\"two\">b {{ two }} <\/template>\n+          <\/foo>\n+        `,\n+        components: { Foo }\n+      }).$mount()\n+      expect(vm.$el.innerHTML).toBe(`a from foo one `)\n+      vm.flag = false\n+      waitForUpdate(() => {\n+        expect(vm.$el.innerHTML).toBe(`b from foo two `)\n+      }).then(done)\n+    })\n   })\n \n   \/\/ 2.6 scoped slot perf optimization\n\n\n###\n\n","completion":" fix: template v-slot should work with v-else conditions\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -360,7 +360,10 @@ function genScopedSlots (\n   slots: { [key: string]: ASTElement },\n   state: CodegenState\n ): string {\n-  const hasDynamicKeys = Object.keys(slots).some(key => slots[key].slotTargetDynamic)\n+  const hasDynamicKeys = Object.keys(slots).some(key => {\n+    const slot = slots[key]\n+    return slot.slotTargetDynamic || slot.if || slot.for\n+  })\n   return `scopedSlots:_u([${\n     Object.keys(slots).map(key => {\n       return genScopedSlot(key, slots[key], state)\n@@ -373,19 +376,29 @@ function genScopedSlot (\n   el: ASTElement,\n   state: CodegenState\n ): string {\n+  if (el.if && !el.ifProcessed) {\n+    return genIfScopedSlot(key, el, state)\n+  }\n   if (el.for && !el.forProcessed) {\n     return genForScopedSlot(key, el, state)\n   }\n   const fn = `function(${String(el.slotScope)}){` +\n     `return ${el.tag === 'template'\n-      ? el.if\n-        ? `(${el.if})?${genChildren(el, state) || 'undefined'}:undefined`\n-        : genChildren(el, state) || 'undefined'\n+      ? genChildren(el, state) || 'undefined'\n       : genElement(el, state)\n     }}`\n   return `{key:${key},fn:${fn}}`\n }\n \n+function genIfScopedSlot (\n+  key: string,\n+  el: any,\n+  state: CodegenState\n+): string {\n+  el.ifProcessed = true\n+  return `(${el.if})?${genScopedSlot(key, el, state)}:null`\n+}\n+\n function genForScopedSlot (\n   key: string,\n   el: any,\n\n---\n file path A: src\/core\/instance\/render-helpers\/resolve-slots.js | file path B: src\/core\/instance\/render-helpers\/resolve-slots.js\n\n@@ -59,7 +59,7 @@ export function resolveScopedSlots (\n     const slot = fns[i]\n     if (Array.isArray(slot)) {\n       resolveScopedSlots(slot, hasDynamicKeys, res)\n-    } else {\n+    } else if (slot) {\n       res[slot.key] = slot.fn\n     }\n   }\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -239,11 +239,11 @@ describe('codegen', () => {\n   it('generate scoped slot with multiline v-if', () => {\n     assertCodegen(\n       '<foo><template v-if=\"\\nshow\\n\" slot-scope=\"bar\">{{ bar }}<\/template><\/foo>',\n-      `with(this){return _c('foo',{scopedSlots:_u([{key:\"default\",fn:function(bar){return (\\nshow\\n)?[_v(_s(bar))]:undefined}}])})}`\n+      `with(this){return _c('foo',{scopedSlots:_u([(\\nshow\\n)?{key:\"default\",fn:function(bar){return [_v(_s(bar))]}}:null],true)})}`\n     )\n     assertCodegen(\n       '<foo><div v-if=\"\\nshow\\n\" slot=\"foo\" slot-scope=\"bar\">{{ bar }}<\/div><\/foo>',\n-      `with(this){return _c(\\'foo\\',{scopedSlots:_u([{key:\"foo\",fn:function(bar){return (\\nshow\\n)?_c(\\'div\\',{},[_v(_s(bar))]):_e()}}])})}`\n+      `with(this){return _c(\\'foo\\',{scopedSlots:_u([(\\nshow\\n)?{key:\"foo\",fn:function(bar){return _c(\\'div\\',{},[_v(_s(bar))])}}:null],true)})}`\n     )\n   })\n \n\n\n###\n\n","completion":" refactor: adjust codegen for v-if on scoped slot\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.0-beta.2\",\n+  \"version\": \"2.6.0-beta.3\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.0-beta.3\n"}
{"prompt":" file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -68,8 +68,7 @@ const builds = {\n     alias: { he: '.\/entity-decoder' },\n     banner\n   },\n-  \/\/ Runtime only (ES Modules). Used by bundlers that support ES Modules,\n-  \/\/ e.g. Rollup & Webpack 2\n+  \/\/ Runtime only ES modules build (for bundlers)\n   'web-runtime-esm': {\n     entry: resolve('web\/entry-runtime.js'),\n     dest: resolve('dist\/vue.runtime.esm.js'),\n@@ -220,11 +219,6 @@ function genConfig (name) {\n     input: opts.entry,\n     external: opts.external,\n     plugins: [\n-      replace({\n-        __WEEX__: !!opts.weex,\n-        __WEEX_VERSION__: weexVersion,\n-        __VERSION__: version\n-      }),\n       flow(),\n       alias(Object.assign({}, aliases, opts.alias))\n     ].concat(opts.plugins || []),\n@@ -241,15 +235,21 @@ function genConfig (name) {\n     }\n   }\n \n+  \/\/ built-in vars\n+  const vars = {\n+    __WEEX__: !!opts.weex,\n+    __WEEX_VERSION__: weexVersion,\n+    __VERSION__: version\n+  }\n+  \/\/ feature flags\n+  Object.keys(featureFlags).forEach(key => {\n+    vars[`process.env.${key}`] = featureFlags[key]\n+  })\n+  \/\/ build-specific env\n   if (opts.env) {\n-    const vars = {\n-      'process.env.NODE_ENV': JSON.stringify(opts.env)\n-    }\n-    Object.keys(featureFlags).forEach(key => {\n-      vars[`process.env.${key}`] = featureFlags[key]\n-    })\n-    config.plugins.push(replace(vars))\n+    vars['process.env.NODE_ENV'] = JSON.stringify(opts.env)\n   }\n+  config.plugins.push(replace(vars))\n \n   if (opts.transpile !== false) {\n     config.plugins.push(buble())\n\n\n###\n\n","completion":" build: fix feature flags for esm builds\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -15,6 +15,7 @@ import { unicodeLetters } from 'core\/util\/lang'\n \n \/\/ Regular Expressions for parsing tags and attributes\n const attribute = \/^\\s*([^\\s\"'<>\\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?\/\n+const dynamicArgAttribute = \/^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+\\][^\\s\"'<>\\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?\/\n const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeLetters}]*`\n const qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\n const startTagOpen = new RegExp(`^<${qnameCapture}`)\n@@ -192,7 +193,7 @@ export function parseHTML (html, options) {\n       }\n       advance(start[0].length)\n       let end, attr\n-      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n+      while (!(end = html.match(startTagClose)) && (attr = html.match(dynamicArgAttribute) || html.match(attribute))) {\n         attr.start = index\n         advance(attr[0].length)\n         attr.end = index\n\n---\n file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -38,6 +38,8 @@ const slotRE = \/^v-slot(:|$)|^#\/\n const lineBreakRE = \/[\\r\\n]\/\n const whitespaceRE = \/\\s+\/g\n \n+const invalidAttributeRE = \/[\\s\"'<>\\\/=]\/\n+\n const decodeHTMLCached = cached(he.decode)\n \n \/\/ configurable state\n@@ -194,12 +196,26 @@ export function parse (\n         element.ns = ns\n       }\n \n-      if (process.env.NODE_ENV !== 'production' && options.outputSourceRange) {\n-        element.start = start\n-        element.rawAttrsMap = element.attrsList.reduce((cumulated, attr) => {\n-          cumulated[attr.name] = attr\n-          return cumulated\n-        }, {})\n+      if (process.env.NODE_ENV !== 'production') {\n+        if (options.outputSourceRange) {\n+          element.start = start\n+          element.rawAttrsMap = element.attrsList.reduce((cumulated, attr) => {\n+            cumulated[attr.name] = attr\n+            return cumulated\n+          }, {})\n+        }\n+        attrs.forEach(attr => {\n+          if (invalidAttributeRE.test(attr.name)) {\n+            warn(\n+              `Invalid dynamic argument expression: attribute names cannot contain ` +\n+              `spaces, quotes, <, >, \/ or =.`,\n+              {\n+                start: attr.start + attr.name.indexOf(`[`),\n+                end: attr.start + attr.name.length\n+              }\n+            )\n+          }\n+        })\n       }\n \n       if (isForbiddenTag(element) && !isServerRendering()) {\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -550,6 +550,23 @@ describe('parser', () => {\n     expect(ast.props).toEqual([{ name: 'id', value: 'foo', dynamic: true }])\n   })\n \n+  \/\/ This only works for string templates.\n+  \/\/ In-DOM templates will be malformed before Vue can parse it.\n+  describe('parse and warn invalid dynamic arguments', () => {\n+    [\n+      `<div v-bind:['foo' + bar]=\"baz\"\/>`,\n+      `<div :['foo' + bar]=\"baz\"\/>`,\n+      `<div @['foo' + bar]=\"baz\"\/>`,\n+      `<foo #['foo' + bar]=\"baz\"\/>`,\n+      `<div :['foo' + bar].some.mod=\"baz\"\/>`\n+    ].forEach(template => {\n+      it(template, () => {\n+        const ast = parse(template, baseOptions)\n+        expect(`Invalid dynamic argument expression`).toHaveBeenWarned()\n+      })\n+    })\n+  })\n+\n   \/\/ #6887\n   it('special case static attribute that must be props', () => {\n     const ast = parse('<video muted><\/video>', baseOptions)\n\n\n###\n\n","completion":" feat: detect and warn invalid dynamic argument expressions\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.6.0-beta.1\",\n+  \"version\": \"2.6.0-beta.2\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.0-beta.2\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/dom-props.js | file path B: src\/platforms\/web\/runtime\/modules\/dom-props.js\n\n@@ -38,14 +38,11 @@ function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n       }\n     }\n \n-    \/\/ #4521: if a click event triggers update before the change event is\n-    \/\/ dispatched on a checkbox\/radio input, the input's checked state will\n-    \/\/ be reset and fail to trigger another update.\n-    \/\/ The root cause here is that browsers may fire microtasks in between click\/change.\n-    \/\/ In Chrome \/ Firefox, click event fires before change, thus having this problem.\n-    \/\/ In Safari \/ Edge, the order is opposite.\n-    \/\/ Note: in Edge, if you click too fast, only the click event would fire twice.\n-    if (key === 'checked' && cur === oldProps[key]) {\n+    \/\/ skip the update if old and new VDOM state is the same.\n+    \/\/ the only exception is `value` where the DOM value may be temporarily\n+    \/\/ out of sync with VDOM state due to focus, composition and modifiers.\n+    \/\/ This also covers #4521 by skipping the unnecesarry `checked` update.\n+    if (key !== 'value' && cur === oldProps[key]) {\n       continue\n     }\n \n\n\n###\n\n","completion":" refactor: extend dom-props update skip to more all keys except value\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/dom-props.js | file path B: src\/platforms\/web\/runtime\/modules\/dom-props.js\n\n@@ -45,7 +45,7 @@ function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n     \/\/ In Chrome \/ Firefox, click event fires before change, thus having this problem.\n     \/\/ In Safari \/ Edge, the order is opposite.\n     \/\/ Note: in Edge, if you click too fast, only the click event would fire twice.\n-    if (key === 'checked' && !isNotInFocusAndDirty(elm, cur)) {\n+    if (key === 'checked' && cur === oldProps[key]) {\n       continue\n     }\n \n\n---\n file path A: test\/unit\/features\/directives\/model-checkbox.spec.js | file path B: test\/unit\/features\/directives\/model-checkbox.spec.js\n\n@@ -56,6 +56,7 @@ describe('Directive v-model checkbox', () => {\n       },\n       template: `\n         <div>\n+          {{ test }}\n           <input type=\"checkbox\" v-model=\"test\" value=\"1\">\n           <input type=\"checkbox\" v-model=\"test\" value=\"2\">\n         <\/div>\n@@ -65,13 +66,16 @@ describe('Directive v-model checkbox', () => {\n     expect(vm.$el.children[0].checked).toBe(true)\n     expect(vm.$el.children[1].checked).toBe(false)\n     vm.$el.children[0].click()\n-    expect(vm.test.length).toBe(0)\n-    vm.$el.children[1].click()\n-    expect(vm.test).toEqual(['2'])\n-    vm.$el.children[0].click()\n-    expect(vm.test).toEqual(['2', '1'])\n-    vm.test = ['1']\n     waitForUpdate(() => {\n+      expect(vm.test.length).toBe(0)\n+      vm.$el.children[1].click()\n+    }).then(() => {\n+      expect(vm.test).toEqual(['2'])\n+      vm.$el.children[0].click()\n+    }).then(() => {\n+      expect(vm.test).toEqual(['2', '1'])\n+      vm.test = ['1']\n+    }).then(() => {\n       expect(vm.$el.children[0].checked).toBe(true)\n       expect(vm.$el.children[1].checked).toBe(false)\n     }).then(done)\n@@ -93,13 +97,16 @@ describe('Directive v-model checkbox', () => {\n     expect(vm.$el.children[0].checked).toBe(true)\n     expect(vm.$el.children[1].checked).toBe(false)\n     vm.$el.children[0].click()\n-    expect(vm.test.length).toBe(0)\n-    vm.$el.children[1].click()\n-    expect(vm.test).toEqual(['2'])\n-    vm.$el.children[0].click()\n-    expect(vm.test).toEqual(['2', '1'])\n-    vm.test = ['1']\n     waitForUpdate(() => {\n+      expect(vm.test.length).toBe(0)\n+      vm.$el.children[1].click()\n+    }).then(() => {\n+      expect(vm.test).toEqual(['2'])\n+      vm.$el.children[0].click()\n+    }).then(() => {\n+      expect(vm.test).toEqual(['2', '1'])\n+      vm.test = ['1']\n+    }).then(() => {\n       expect(vm.$el.children[0].checked).toBe(true)\n       expect(vm.$el.children[1].checked).toBe(false)\n     }).then(done)\n@@ -121,13 +128,16 @@ describe('Directive v-model checkbox', () => {\n     expect(vm.$el.children[0].checked).toBe(true)\n     expect(vm.$el.children[1].checked).toBe(false)\n     vm.$el.children[0].click()\n-    expect(vm.test.length).toBe(0)\n-    vm.$el.children[1].click()\n-    expect(vm.test).toEqual([2])\n-    vm.$el.children[0].click()\n-    expect(vm.test).toEqual([2, 1])\n-    vm.test = [1]\n     waitForUpdate(() => {\n+      expect(vm.test.length).toBe(0)\n+      vm.$el.children[1].click()\n+    }).then(() => {\n+      expect(vm.test).toEqual([2])\n+      vm.$el.children[0].click()\n+    }).then(() => {\n+      expect(vm.test).toEqual([2, 1])\n+      vm.test = [1]\n+    }).then(() => {\n       expect(vm.$el.children[0].checked).toBe(true)\n       expect(vm.$el.children[1].checked).toBe(false)\n     }).then(done)\n@@ -149,13 +159,16 @@ describe('Directive v-model checkbox', () => {\n     expect(vm.$el.children[0].checked).toBe(true)\n     expect(vm.$el.children[1].checked).toBe(false)\n     vm.$el.children[0].click()\n-    expect(vm.test.length).toBe(0)\n-    vm.$el.children[1].click()\n-    expect(vm.test).toEqual([{ a: 2 }])\n-    vm.$el.children[0].click()\n-    expect(vm.test).toEqual([{ a: 2 }, { a: 1 }])\n-    vm.test = [{ a: 1 }]\n     waitForUpdate(() => {\n+      expect(vm.test.length).toBe(0)\n+      vm.$el.children[1].click()\n+    }).then(() => {\n+      expect(vm.test).toEqual([{ a: 2 }])\n+      vm.$el.children[0].click()\n+    }).then(() => {\n+      expect(vm.test).toEqual([{ a: 2 }, { a: 1 }])\n+      vm.test = [{ a: 1 }]\n+    }).then(() => {\n       expect(vm.$el.children[0].checked).toBe(true)\n       expect(vm.$el.children[1].checked).toBe(false)\n     }).then(done)\n@@ -177,13 +190,16 @@ describe('Directive v-model checkbox', () => {\n     expect(vm.$el.children[0].checked).toBe(true)\n     expect(vm.$el.children[1].checked).toBe(false)\n     vm.$el.children[0].click()\n-    expect(vm.test.length).toBe(0)\n-    vm.$el.children[1].click()\n-    expect(vm.test).toEqual([[2]])\n-    vm.$el.children[0].click()\n-    expect(vm.test).toEqual([[2], { a: 1 }])\n-    vm.test = [{ a: 1 }]\n     waitForUpdate(() => {\n+      expect(vm.test.length).toBe(0)\n+      vm.$el.children[1].click()\n+    }).then(() => {\n+      expect(vm.test).toEqual([[2]])\n+      vm.$el.children[0].click()\n+    }).then(() => {\n+      expect(vm.test).toEqual([[2], { a: 1 }])\n+      vm.test = [{ a: 1 }]\n+    }).then(() => {\n       expect(vm.$el.children[0].checked).toBe(true)\n       expect(vm.$el.children[1].checked).toBe(false)\n     }).then(done)\n\n\n###\n\n","completion":" fix: fix checkbox event edge case in Firefox\n"}
{"prompt":" file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -458,7 +458,7 @@ describe('Component scoped slot', () => {\n   \/\/ new in 2.6, unifying all slots as functions\n   it('non-scoped slots should also be available on $scopedSlots', () => {\n     const vm = new Vue({\n-      template: `<foo>before <div slot=\"bar\" slot-scope=\"{ msg }\">{{ msg }}<\/div> after<\/foo>`,\n+      template: `<foo>before <div slot=\"bar\" slot-scope=\"scope\">{{ scope.msg }}<\/div> after<\/foo>`,\n       components: {\n         foo: {\n           render(h) {\n\n---\n file path A: test\/unit\/features\/instance\/properties.spec.js | file path B: test\/unit\/features\/instance\/properties.spec.js\n\n@@ -149,15 +149,15 @@ describe('Instance properties', () => {\n   \/\/ #6263\n   it('$attrs should not be undefined when no props passed in', () => {\n     const vm = new Vue({\n-      template: `<foo\/>`,\n+      template: `<foo ref=\"foo\" \/>`,\n       data: { foo: 'foo' },\n       components: {\n         foo: {\n-          template: `<div>{{ this.foo }}<\/div>`\n+          template: `<div>foo<\/div>`\n         }\n       }\n     }).$mount()\n-    expect(vm.$attrs).toBeDefined()\n+    expect(vm.$refs.foo.$attrs).toBeDefined()\n   })\n \n   it('warn mutating $attrs', () => {\n\n\n###\n\n","completion":" test: fix tests in IE\/Edge\n"}
{"prompt":" file path A: src\/core\/observer\/scheduler.js | file path B: src\/core\/observer\/scheduler.js\n\n@@ -40,21 +40,18 @@ function resetSchedulerState () {\n \/\/ attached during that flush.\n export let currentFlushTimestamp = 0\n \n-let getNow\n-if (inBrowser) {\n-  \/\/ Determine what event timestamp the browser is using. Annoyingly, the\n-  \/\/ timestamp can either be hi-res ( relative to poge load) or low-res\n-  \/\/ (relative to UNIX epoch), so in order to compare time we have to use the\n-  \/\/ same timestamp type when saving the flush timestamp.\n-  const lowResNow = Date.now()\n-  const eventTimestamp = document.createEvent('Event').timeStamp\n-  \/\/ the event timestamp is created after Date.now(), if it's smaller\n-  \/\/ it means it's using a hi-res timestamp.\n-  getNow = eventTimestamp < lowResNow\n-    ? () => performance.now() \/\/ hi-res\n-    : Date.now \/\/ low-res\n-} else {\n-  getNow = Date.now\n+\/\/ Async edge case fix requires storing an event listener's attach timestamp.\n+let getNow: () => number = Date.now\n+\n+\/\/ Determine what event timestamp the browser is using. Annoyingly, the\n+\/\/ timestamp can either be hi-res ( relative to poge load) or low-res\n+\/\/ (relative to UNIX epoch), so in order to compare time we have to use the\n+\/\/ same timestamp type when saving the flush timestamp.\n+if (inBrowser && getNow() > document.createEvent('Event').timeStamp) {\n+  \/\/ if the low-res timestamp which is bigger than the event timestamp\n+  \/\/ (which is evaluated AFTER) it means the event is using a hi-res timestamp,\n+  \/\/ and we need to use the hi-res version for event listeners as well.\n+  getNow = () => performance.now()\n }\n \n \/**\n\n\n###\n\n","completion":" refactor: simplify timestamp check\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -46,8 +46,8 @@ function add (\n   passive: boolean\n ) {\n   \/\/ async edge case #6566: inner click event triggers patch, event handler\n-  \/\/ attached to outer element during patch, and triggered again. This only\n-  \/\/ happens in Chrome as it fires microtask ticks between event propagation.\n+  \/\/ attached to outer element during patch, and triggered again. This\n+  \/\/ happens because browsers fire microtask ticks between event propagation.\n   \/\/ the solution is simple: we save the timestamp when a handler is attached,\n   \/\/ and the handler would only fire if the event passed to it was fired\n   \/\/ AFTER it was attached.\n\n\n###\n\n","completion":" chore: update comment\n"}
{"prompt":" file path A: src\/core\/observer\/scheduler.js | file path B: src\/core\/observer\/scheduler.js\n\n@@ -7,7 +7,8 @@ import { callHook, activateChildComponent } from '..\/instance\/lifecycle'\n import {\n   warn,\n   nextTick,\n-  devtools\n+  devtools,\n+  inBrowser\n } from '..\/util\/index'\n \n export const MAX_UPDATE_COUNT = 100\n@@ -32,10 +33,35 @@ function resetSchedulerState () {\n   waiting = flushing = false\n }\n \n+\/\/ Async edge case #6566 requires saving the timestamp when event listeners are\n+\/\/ attached. However, calling performance.now() has a perf overhead especially\n+\/\/ if the page has thousands of event listeners. Instead, we take a timestamp\n+\/\/ every time the scheduler flushes and use that for all event listeners\n+\/\/ attached during that flush.\n+export let currentFlushTimestamp = 0\n+\n+let getNow\n+if (inBrowser) {\n+  \/\/ Determine what event timestamp the browser is using. Annoyingly, the\n+  \/\/ timestamp can either be hi-res ( relative to poge load) or low-res\n+  \/\/ (relative to UNIX epoch), so in order to compare time we have to use the\n+  \/\/ same timestamp type when saving the flush timestamp.\n+  const lowResNow = Date.now()\n+  const eventTimestamp = document.createEvent('Event').timeStamp\n+  \/\/ the event timestamp is created after Date.now(), if it's smaller\n+  \/\/ it means it's using a hi-res timestamp.\n+  getNow = eventTimestamp < lowResNow\n+    ? () => performance.now() \/\/ hi-res\n+    : Date.now \/\/ low-res\n+} else {\n+  getNow = Date.now\n+}\n+\n \/**\n  * Flush both queues and run the watchers.\n  *\/\n function flushSchedulerQueue () {\n+  currentFlushTimestamp = getNow()\n   flushing = true\n   let watcher, id\n \n\n---\n file path A: src\/core\/util\/next-tick.js | file path B: src\/core\/util\/next-tick.js\n\n@@ -5,6 +5,8 @@ import { noop } from 'shared\/util'\n import { handleError } from '.\/error'\n import { isIE, isIOS, isNative } from '.\/env'\n \n+export let isUsingMicroTask = false\n+\n const callbacks = []\n let pending = false\n \n@@ -48,6 +50,7 @@ if (typeof Promise !== 'undefined' && isNative(Promise)) {\n     \/\/ \"force\" the microtask queue to be flushed by adding an empty timer.\n     if (isIOS) setTimeout(noop)\n   }\n+  isUsingMicroTask = true\n } else if (!isIE && typeof MutationObserver !== 'undefined' && (\n   isNative(MutationObserver) ||\n   \/\/ PhantomJS and iOS 7.x\n@@ -66,6 +69,7 @@ if (typeof Promise !== 'undefined' && isNative(Promise)) {\n     counter = (counter + 1) % 2\n     textNode.data = String(counter)\n   }\n+  isUsingMicroTask = true\n } else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n   \/\/ Fallback to setImmediate.\n   \/\/ Techinically it leverages the (macro) task queue,\n\n---\n file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -2,8 +2,9 @@\n \n import { isDef, isUndef } from 'shared\/util'\n import { updateListeners } from 'core\/vdom\/helpers\/index'\n-import { isIE, isChrome, supportsPassive } from 'core\/util\/index'\n+import { isIE, supportsPassive, isUsingMicroTask } from 'core\/util\/index'\n import { RANGE_TOKEN, CHECKBOX_RADIO_TOKEN } from 'web\/compiler\/directives\/model'\n+import { currentFlushTimestamp } from 'core\/observer\/scheduler'\n \n \/\/ normalize v-model event tokens that can only be determined at runtime.\n \/\/ it's important to place the event as the first in the array because\n@@ -44,17 +45,17 @@ function add (\n   capture: boolean,\n   passive: boolean\n ) {\n-  if (isChrome) {\n-    \/\/ async edge case #6566: inner click event triggers patch, event handler\n-    \/\/ attached to outer element during patch, and triggered again. This only\n-    \/\/ happens in Chrome as it fires microtask ticks between event propagation.\n-    \/\/ the solution is simple: we save the timestamp when a handler is attached,\n-    \/\/ and the handler would only fire if the event passed to it was fired\n-    \/\/ AFTER it was attached.\n-    const now = performance.now()\n+  \/\/ async edge case #6566: inner click event triggers patch, event handler\n+  \/\/ attached to outer element during patch, and triggered again. This only\n+  \/\/ happens in Chrome as it fires microtask ticks between event propagation.\n+  \/\/ the solution is simple: we save the timestamp when a handler is attached,\n+  \/\/ and the handler would only fire if the event passed to it was fired\n+  \/\/ AFTER it was attached.\n+  if (isUsingMicroTask) {\n+    const attachedTimestamp = currentFlushTimestamp\n     const original = handler\n     handler = original._wrapper = function (e) {\n-      if (e.timeStamp >= now) {\n+      if (e.timeStamp >= attachedTimestamp) {\n         return original.apply(this, arguments)\n       }\n     }\n\n\n###\n\n","completion":" fix: async edge case fix should apply to more browsers\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -68,8 +68,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n   <tbody>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/studio.qcloud.coding.net\/campaign\/favorite-plugins\/?utm_source=vue.js&utm_content=cs-logo\" target=\"_blank\">\n-          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/cloudstudio.png\">\n+        <a href=\"https:\/\/e.coding.net\/?utm_source=vue.js\" target=\"_blank\">\n+          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/coding.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -78,8 +78,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n   <tbody>\n     <tr>\n       <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/studio.qcloud.coding.net\/campaign\/favorite-plugins\/?utm_source=vue.js&utm_content=cs-logo\" target=\"_blank\">\n-          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/cloudstudio.png\">\n+        <a href=\"https:\/\/e.coding.net\/?utm_source=vue.js\" target=\"_blank\">\n+          <img width=\"177px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/coding.png\">\n         <\/a>\n       <\/td>\n       <td align=\"center\" valign=\"middle\">\n\n---\n file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -17,8 +17,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--special start-->\n \n <p align=\"center\">\n-  <a href=\"https:\/\/stdlib.com\" target=\"_blank\">\n-    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n+  <a href=\"https:\/\/code.xyz\/\" target=\"_blank\">\n+    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/codexyz.png\">\n   <\/a>\n <\/p>\n   \n\n---\n file path A: README.md | file path B: README.md\n\n@@ -27,8 +27,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <!--special start-->\n \n <p align=\"center\">\n-  <a href=\"https:\/\/stdlib.com\" target=\"_blank\">\n-    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n+  <a href=\"https:\/\/code.xyz\/\" target=\"_blank\">\n+    <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/codexyz.png\">\n   <\/a>\n <\/p>\n   \n\n---\n file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -51,6 +51,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.nativescript.org\/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--platinum end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -63,6 +63,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.nativescript.org\/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nativescript.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--platinum end-->\n\n---\n file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -54,11 +54,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vueschool.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.datacamp.com\/careers?utm_source=vuejs&utm_medium=sidebar\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/datacamp.png\">\n-        <\/a>\n-      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -66,11 +66,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vueschool.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.datacamp.com\/careers?utm_source=vuejs&utm_medium=sidebar\" target=\"_blank\">\n-          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/datacamp.png\">\n-        <\/a>\n-      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsor\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -627,6 +627,13 @@ function processSlotContent (el) {\n               el\n             )\n           }\n+          if (el.scopedSlots) {\n+            warn(\n+              `To avoid scope ambiguity, the default slot should also use ` +\n+              `<template> syntax when there are other named slots.`,\n+              slotBinding\n+            )\n+          }\n         }\n         \/\/ add the component's children to its default slot\n         const slots = el.scopedSlots || (el.scopedSlots = {})\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -686,11 +686,13 @@ describe('Component scoped slot', () => {\n           expect(vm.$el.innerHTML.trim()).toBe(`from foo default | from bar | from baz`)\n         })\n \n-        it('default + named slots', () => {\n+        it('named slots', () => {\n           const vm = new Vue({\n             template: `\n-              <foo #default=\"foo\">\n-                {{ foo }}\n+              <foo>\n+                <template ${toNamed(syntax, 'default')}=\"foo\">\n+                  {{ foo }}\n+                <\/template>\n                 <template ${toNamed(syntax, 'one')}=\"one\">\n                   {{ one }}\n                 <\/template>\n@@ -748,8 +750,10 @@ describe('Component scoped slot', () => {\n       it('shorthand named slots', () => {\n         const vm = new Vue({\n           template: `\n-            <foo #default=\"foo\">\n-              {{ foo }}\n+            <foo>\n+              <template #default=\"foo\">\n+                {{ foo }}\n+              <\/template>\n               <template #one=\"one\">\n                 {{ one }}\n               <\/template>\n@@ -763,6 +767,21 @@ describe('Component scoped slot', () => {\n         expect(vm.$el.innerHTML.replace(\/\\s+\/g, ' ')).toMatch(`from foo default from foo one from foo two`)\n       })\n \n+      it('should warn mixed root-default and named slots', () => {\n+        const vm = new Vue({\n+          template: `\n+            <foo #default=\"foo\">\n+              {{ foo }}\n+              <template #one=\"one\">\n+                {{ one }}\n+              <\/template>\n+            <\/foo>\n+          `,\n+          components: { Foo }\n+        }).$mount()\n+        expect(`default slot should also use <template>`).toHaveBeenWarned()\n+      })\n+\n       it('shorthand without scope variable', () => {\n         const vm = new Vue({\n           template: `\n\n\n###\n\n","completion":" feat: warning for ambiguous v-slot usage\n"}
{"prompt":" file path A: scripts\/feature-flags.js | file path B: scripts\/feature-flags.js\n\n@@ -1,3 +1,3 @@\n module.exports = {\n-  NEW_SLOT_SYNTAX: false\n+  NEW_SLOT_SYNTAX: true\n }\n\n---\n file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -599,14 +599,13 @@ function processSlotContent (el) {\n       \/\/ v-slot on <template>\n       const slotBinding = getAndRemoveAttrByRegex(el, slotRE)\n       if (slotBinding) {\n-        if (\n-          process.env.NODE_ENV !== 'production' &&\n-          (el.slotTarget || el.slotScope)\n-        ) {\n-          warn(\n-            `Unexpected mixed usage of different slot syntaxes.`,\n-            el\n-          )\n+        if (process.env.NODE_ENV !== 'production') {\n+          if (el.slotTarget || el.slotScope) {\n+            warn(\n+              `Unexpected mixed usage of different slot syntaxes.`,\n+              el\n+            )\n+          }\n         }\n         el.slotTarget = getSlotName(slotBinding)\n         el.slotScope = slotBinding.value\n@@ -618,7 +617,7 @@ function processSlotContent (el) {\n         if (process.env.NODE_ENV !== 'production') {\n           if (!maybeComponent(el)) {\n             warn(\n-              `v-slot cannot be used on non-component elements.`,\n+              `v-slot can only be used on components or <template>.`,\n               slotBinding\n             )\n           }\n@@ -644,13 +643,23 @@ function processSlotContent (el) {\n   }\n }\n \n-function getSlotName ({ name }) {\n-  name = name.replace(slotRE, '')\n+function getSlotName (binding) {\n+  let name = binding.name.replace(slotRE, '')\n+  if (!name) {\n+    if (binding.name[0] !== '#') {\n+      name = 'default'\n+    } else if (process.env.NODE_ENV !== 'production') {\n+      warn(\n+        `v-slot shorthand syntax requires a slot name.`,\n+        binding\n+      )\n+    }\n+  }\n   return dynamicKeyRE.test(name)\n     \/\/ dynamic [name]\n     ? name.slice(1, -1)\n     \/\/ static name\n-    : `\"${name || `default`}\"`\n+    : `\"${name}\"`\n }\n \n \/\/ handle <slot\/> outlets\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -657,9 +657,9 @@ describe('Component scoped slot', () => {\n         }\n       }\n \n-      const toNamed = (syntax, name) => syntax.length === 1\n-        ? syntax + name \/\/ shorthand\n-        : syntax + ':' + name \/\/ full syntax\n+      const toNamed = (syntax, name) => syntax[0] === '#'\n+        ? `#${name}` \/\/ shorthand\n+        : `${syntax}:${name}` \/\/ full syntax\n \n       function runSuite(syntax) {\n         it('default slot', () => {\n@@ -689,7 +689,7 @@ describe('Component scoped slot', () => {\n         it('default + named slots', () => {\n           const vm = new Vue({\n             template: `\n-              <foo #=\"foo\">\n+              <foo #default=\"foo\">\n                 {{ foo }}\n                 <template ${toNamed(syntax, 'one')}=\"one\">\n                   {{ one }}\n@@ -729,7 +729,7 @@ describe('Component scoped slot', () => {\n           const vm = new Vue({\n             template: `<div ${syntax}=\"foo\"\/>`\n           }).$mount()\n-          expect(`v-slot cannot be used on non-component elements`).toHaveBeenWarned()\n+          expect(`v-slot can only be used on components or <template>`).toHaveBeenWarned()\n         })\n \n         it('should warn mixed usage', () => {\n@@ -743,12 +743,12 @@ describe('Component scoped slot', () => {\n \n       \/\/ run tests for both full syntax and shorthand\n       runSuite('v-slot')\n-      runSuite('#')\n+      runSuite('#default')\n \n       it('shorthand named slots', () => {\n         const vm = new Vue({\n           template: `\n-            <foo #=\"foo\">\n+            <foo #default=\"foo\">\n               {{ foo }}\n               <template #one=\"one\">\n                 {{ one }}\n\n\n###\n\n","completion":" feat: adjust v-slot per RFC + enable flag\n"}
{"prompt":" file path A: dist\/README.md | file path B: dist\/README.md\n\n@@ -40,7 +40,7 @@ module.exports = {\n     }\n   }\n }\n-````\n+```\n \n #### Rollup\n \n\n\n###\n\n","completion":" chore: update README in dist (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -199,6 +199,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/yakaz.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/yakaz.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -204,6 +204,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/isle_of_code.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/yakaz.com\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/yakaz.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors [ci skip] (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/render.js | file path B: src\/server\/render.js\n\n@@ -50,8 +50,8 @@ const normalizeRender = vm => {\n   }\n }\n \n-function waitForSsrPrefetch (vm, resolve, reject) {\n-  let handlers = vm.$options.ssrPrefetch\n+function waitForServerPrefetch (vm, resolve, reject) {\n+  let handlers = vm.$options.serverPrefetch\n   if (isDef(handlers)) {\n     if (!Array.isArray(handlers)) handlers = [handlers]\n     try {\n@@ -206,7 +206,7 @@ function renderComponentInner (node, isRoot, context) {\n \n   const reject = context.done\n \n-  waitForSsrPrefetch(child, resolve, reject)\n+  waitForServerPrefetch(child, resolve, reject)\n }\n \n function renderAsyncComponent (node, isRoot, context) {\n@@ -432,6 +432,6 @@ export function createRenderFunction (\n     const resolve = () => {\n       renderNode(component._render(), true, context)\n     }\n-    waitForSsrPrefetch(component, resolve, done)\n+    waitForServerPrefetch(component, resolve, done)\n   }\n }\n\n---\n file path A: src\/shared\/constants.js | file path B: src\/shared\/constants.js\n\n@@ -18,5 +18,5 @@ export const LIFECYCLE_HOOKS = [\n   'activated',\n   'deactivated',\n   'errorCaptured',\n-  'ssrPrefetch'\n+  'serverPrefetch'\n ]\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -1312,7 +1312,7 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n-  it('should support ssrPrefetch option', done => {\n+  it('should support serverPrefetch option', done => {\n     renderVmWithOptions({\n       template: `\n         <div>{{ count }}<\/div>\n@@ -1320,7 +1320,7 @@ describe('SSR: renderToString', () => {\n       data: {\n         count: 0\n       },\n-      ssrPrefetch () {\n+      serverPrefetch () {\n         return new Promise((resolve) => {\n           setTimeout(() => {\n             this.count = 42\n@@ -1334,7 +1334,7 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n-  it('should support ssrPrefetch option (nested)', done => {\n+  it('should support serverPrefetch option (nested)', done => {\n     renderVmWithOptions({\n       template: `\n         <div>\n@@ -1345,7 +1345,7 @@ describe('SSR: renderToString', () => {\n       data: {\n         count: 0\n       },\n-      ssrPrefetch () {\n+      serverPrefetch () {\n         return new Promise((resolve) => {\n           setTimeout(() => {\n             this.count = 42\n@@ -1363,7 +1363,7 @@ describe('SSR: renderToString', () => {\n               message: ''\n             }\n           },\n-          ssrPrefetch () {\n+          serverPrefetch () {\n             return new Promise((resolve) => {\n               setTimeout(() => {\n                 this.message = 'vue.js'\n@@ -1379,7 +1379,7 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n-  it('should support ssrPrefetch option (nested async)', done => {\n+  it('should support serverPrefetch option (nested async)', done => {\n     renderVmWithOptions({\n       template: `\n         <div>\n@@ -1390,7 +1390,7 @@ describe('SSR: renderToString', () => {\n       data: {\n         count: 0\n       },\n-      ssrPrefetch () {\n+      serverPrefetch () {\n         return new Promise((resolve) => {\n           setTimeout(() => {\n             this.count = 42\n@@ -1409,7 +1409,7 @@ describe('SSR: renderToString', () => {\n                 message: ''\n               }\n             },\n-            ssrPrefetch () {\n+            serverPrefetch () {\n               return new Promise((resolve) => {\n                 setTimeout(() => {\n                   this.message = 'vue.js'\n@@ -1426,12 +1426,12 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n-  it('should merge ssrPrefetch option', done => {\n+  it('should merge serverPrefetch option', done => {\n     const mixin = {\n       data: {\n         message: ''\n       },\n-      ssrPrefetch () {\n+      serverPrefetch () {\n         return new Promise((resolve) => {\n           setTimeout(() => {\n             this.message = 'vue.js'\n@@ -1451,7 +1451,7 @@ describe('SSR: renderToString', () => {\n       data: {\n         count: 0\n       },\n-      ssrPrefetch () {\n+      serverPrefetch () {\n         return new Promise((resolve) => {\n           setTimeout(() => {\n             this.count = 42\n@@ -1465,7 +1465,7 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n-  it(`should skip ssrPrefetch option that doesn't return a promise`, done => {\n+  it(`should skip serverPrefetch option that doesn't return a promise`, done => {\n     renderVmWithOptions({\n       template: `\n         <div>{{ count }}<\/div>\n@@ -1473,7 +1473,7 @@ describe('SSR: renderToString', () => {\n       data: {\n         count: 0\n       },\n-      ssrPrefetch () {\n+      serverPrefetch () {\n         setTimeout(() => {\n           this.count = 42\n         }, 1)\n\n---\n file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -15,7 +15,7 @@ export type Component<Data=DefaultData<never>, Methods=DefaultMethods<never>, Co\n interface EsModuleComponent {\n   default: Component\n }\n-                      \n+\n export type AsyncComponent<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps>\n   = AsyncComponentPromise<Data, Methods, Computed, Props>\n   | AsyncComponentFactory<Data, Methods, Computed, Props>\n@@ -96,7 +96,7 @@ export interface ComponentOptions<\n   activated?(): void;\n   deactivated?(): void;\n   errorCaptured?(err: Error, vm: Vue, info: string): boolean | void;\n-  ssrPrefetch?(this: V): Promise<void>;\n+  serverPrefetch?(this: V): Promise<void>;\n \n   directives?: { [key: string]: DirectiveFunction | DirectiveOptions };\n   components?: { [key: string]: Component<any, any, any, any> | AsyncComponent<any, any, any, any> };\n\n---\n file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -241,7 +241,7 @@ Vue.component('component', {\n     info.toUpperCase()\n     return true\n   },\n-  ssrPrefetch () {\n+  serverPrefetch () {\n     return Promise.resolve()\n   },\n \n\n\n###\n\n","completion":" refactor: ssrPrefetch -> serverPrefetch for more consistent naming\n"}
{"prompt":" file path A: test\/ssr\/ssr-template.spec.js | file path B: test\/ssr\/ssr-template.spec.js\n\n@@ -134,6 +134,68 @@ describe('SSR: template option', () => {\n     })\n   })\n \n+  it('renderToString w\/ template function', done => {\n+    const renderer = createRenderer({\n+      template: (content, context) => `<html><head>${context.head}<\/head>${content}<\/html>`\n+    })\n+\n+    const context = {\n+      head: '<meta name=\"viewport\" content=\"width=device-width\">'\n+    }\n+\n+    renderer.renderToString(new Vue({\n+      template: '<div>hi<\/div>'\n+    }), context, (err, res) => {\n+      expect(err).toBeNull()\n+      expect(res).toContain(`<html><head>${context.head}<\/head><div data-server-rendered=\"true\">hi<\/div><\/html>`)\n+      done()\n+    })\n+  })\n+\n+  it('renderToString w\/ template function returning Promise', done => {\n+    const renderer = createRenderer({\n+      template: (content, context) => new Promise((resolve) => {\n+        setTimeout(() => {\n+          resolve(`<html><head>${context.head}<\/head>${content}<\/html>`)\n+        }, 0)\n+      })\n+    })\n+\n+    const context = {\n+      head: '<meta name=\"viewport\" content=\"width=device-width\">'\n+    }\n+\n+    renderer.renderToString(new Vue({\n+      template: '<div>hi<\/div>'\n+    }), context, (err, res) => {\n+      expect(err).toBeNull()\n+      expect(res).toContain(`<html><head>${context.head}<\/head><div data-server-rendered=\"true\">hi<\/div><\/html>`)\n+      done()\n+    })\n+  })\n+\n+  it('renderToString w\/ template function returning Promise w\/ rejection', done => {\n+    const renderer = createRenderer({\n+      template: () => new Promise((resolve, reject) => {\n+        setTimeout(() => {\n+          reject(new Error(`foo`))\n+        }, 0)\n+      })\n+    })\n+\n+    const context = {\n+      head: '<meta name=\"viewport\" content=\"width=device-width\">'\n+    }\n+\n+    renderer.renderToString(new Vue({\n+      template: '<div>hi<\/div>'\n+    }), context, (err, res) => {\n+      expect(err.message).toBe(`foo`)\n+      expect(res).toBeUndefined()\n+      done()\n+    })\n+  })\n+\n   it('renderToStream', done => {\n     const renderer = createRenderer({\n       template: defaultTemplate\n\n\n###\n\n","completion":" test: tests for ssr template function (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/create-renderer.js | file path B: src\/server\/create-renderer.js\n\n@@ -23,7 +23,7 @@ export type RenderOptions = {\n   directives?: Object;\n   isUnaryTag?: Function;\n   cache?: RenderCache;\n-  template?: string;\n+  template?: string | (content: string, context: any) => string;\n   inject?: boolean;\n   basedir?: string;\n   shouldPreload?: Function;\n@@ -82,14 +82,26 @@ export function createRenderer ({\n       }, cb)\n       try {\n         render(component, write, context, err => {\n+          if (err) {\n+            return cb(err)\n+          }\n           if (context && context.rendered) {\n             context.rendered(context)\n           }\n           if (template) {\n-            result = templateRenderer.renderSync(result, context)\n-          }\n-          if (err) {\n-            cb(err)\n+            try {\n+              const res = templateRenderer.render(result, context)\n+              if (typeof res !== 'string') {\n+                \/\/ function template returning promise\n+                res\n+                  .then(html => cb(null, html))\n+                  .catch(cb)\n+              } else {\n+                cb(null, res)\n+              }\n+            } catch (e) {\n+              cb(e)\n+            }\n           } else {\n             cb(null, result)\n           }\n@@ -119,6 +131,8 @@ export function createRenderer ({\n           })\n         }\n         return renderStream\n+      } else if (typeof template === 'function') {\n+        throw new Error(`function template is only supported in renderToString.`)\n       } else {\n         const templateStream = templateRenderer.createStream(context)\n         renderStream.on('error', err => {\n\n---\n file path A: src\/server\/template-renderer\/index.js | file path B: src\/server\/template-renderer\/index.js\n\n@@ -11,7 +11,7 @@ import type { ParsedTemplate } from '.\/parse-template'\n import type { AsyncFileMapper } from '.\/create-async-file-mapper'\n \n type TemplateRendererOptions = {\n-  template: ?string;\n+  template?: string | (content: string, context: any) => string;\n   inject?: boolean;\n   clientManifest?: ClientManifest;\n   shouldPreload?: (file: string, type: string) => boolean;\n@@ -42,7 +42,7 @@ type Resource = {\n export default class TemplateRenderer {\n   options: TemplateRendererOptions;\n   inject: boolean;\n-  parsedTemplate: ParsedTemplate | null;\n+  parsedTemplate: ParsedTemplate | Function | null;\n   publicPath: string;\n   clientManifest: ClientManifest;\n   preloadFiles: Array<Resource>;\n@@ -55,8 +55,12 @@ export default class TemplateRenderer {\n     this.inject = options.inject !== false\n     \/\/ if no template option is provided, the renderer is created\n     \/\/ as a utility object for rendering assets like preload links and scripts.\n-    this.parsedTemplate = options.template\n-      ? parseTemplate(options.template)\n+    \n+    const { template } = options\n+    this.parsedTemplate = template\n+      ? typeof template === 'string'\n+        ? parseTemplate(template)\n+        : template\n       : null\n \n     \/\/ function used to serialize initial state JSON\n@@ -89,12 +93,17 @@ export default class TemplateRenderer {\n   }\n \n   \/\/ render synchronously given rendered app content and render context\n-  renderSync (content: string, context: ?Object) {\n+  render (content: string, context: ?Object): string | Promise<string> {\n     const template = this.parsedTemplate\n     if (!template) {\n-      throw new Error('renderSync cannot be called without a template.')\n+      throw new Error('render cannot be called without a template.')\n     }\n     context = context || {}\n+\n+    if (typeof template === 'function') {\n+      return template(content, context)\n+    }\n+\n     if (this.inject) {\n       return (\n         template.head(context) +\n\n\n###\n\n","completion":" feat(ssr): allow template option to be function in renderToString (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.5.22\",\n+  \"version\": \"2.6.0-beta.1\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.6.0-beta.1\n"}
{"prompt":" file path A: src\/core\/util\/perf.js | file path B: src\/core\/util\/perf.js\n\n@@ -18,7 +18,7 @@ if (process.env.NODE_ENV !== 'production') {\n       perf.measure(name, startTag, endTag)\n       perf.clearMarks(startTag)\n       perf.clearMarks(endTag)\n-      perf.clearMeasures(name)\n+      \/\/ perf.clearMeasures(name)\n     }\n   }\n }\n\n\n###\n\n","completion":" feat: expose performance measures\n"}
{"prompt":" file path A: src\/compiler\/helpers.js | file path B: src\/compiler\/helpers.js\n\n@@ -177,6 +177,20 @@ export function getAndRemoveAttr (\n   return val\n }\n \n+export function getAndRemoveAttrByRegex (\n+  el: ASTElement,\n+  name: RegExp\n+) {\n+  const list = el.attrsList\n+  for (let i = 0, l = list.length; i < l; i++) {\n+    const attr = list[i]\n+    if (name.test(attr.name)) {\n+      list.splice(i, 1)\n+      return attr\n+    }\n+  }\n+}\n+\n function rangeSetItem (\n   item: any,\n   range?: { start?: number, end?: number }\n\n---\n file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -17,7 +17,8 @@ import {\n   getBindingAttr,\n   getAndRemoveAttr,\n   getRawBindingAttr,\n-  pluckModuleFunction\n+  pluckModuleFunction,\n+  getAndRemoveAttrByRegex\n } from '..\/helpers'\n \n export const onRE = \/^@|^v-on:\/\n@@ -31,6 +32,8 @@ export const bindRE = \/^:|^\\.|^v-bind:\/\n const propBindRE = \/^\\.\/\n const modifierRE = \/\\.[^.]+\/g\n \n+const scopedSlotShorthandRE = \/^:?\\(.*\\)$\/\n+\n const lineBreakRE = \/[\\r\\n]\/\n const whitespaceRE = \/\\s+\/g\n \n@@ -568,9 +571,20 @@ function processSlotContent (el) {\n       getAndRemoveAttr(el, 'slot-scope') ||\n       \/\/ new in 2.6: slot-props and its shorthand works the same as slot-scope\n       \/\/ when used on <template> containers\n-      getAndRemoveAttr(el, 'slot-props') ||\n-      getAndRemoveAttr(el, '()')\n+      getAndRemoveAttr(el, 'slot-props')\n     )\n+    \/\/ 2.6 shorthand syntax\n+    const shorthand = getAndRemoveAttrByRegex(el, scopedSlotShorthandRE)\n+    if (shorthand) {\n+      if (process.env.NODE_ENV !== 'production' && el.slotScope) {\n+        warn(\n+          `Unexpected mixed usage of different slot syntaxes.`,\n+          el\n+        )\n+      }\n+      el.slotTarget = getScopedSlotShorthandName(shorthand)\n+      el.slotScope = shorthand.value\n+    }\n   } else if ((slotScope = getAndRemoveAttr(el, 'slot-scope'))) {\n     \/* istanbul ignore if *\/\n     if (process.env.NODE_ENV !== 'production' && el.attrsMap['v-for']) {\n@@ -585,19 +599,29 @@ function processSlotContent (el) {\n     el.slotScope = slotScope\n   } else {\n     \/\/ 2.6: slot-props on component, denotes default slot\n-    slotScope = getAndRemoveAttr(el, 'slot-props') || getAndRemoveAttr(el, '()')\n-    if (slotScope) {\n-      if (process.env.NODE_ENV !== 'production' && !maybeComponent(el)) {\n-        warn(\n-          `slot-props cannot be used on non-component elements.`,\n-          el.rawAttrsMap['slot-props'] || el.rawAttrsMap['()']\n-        )\n+    slotScope = getAndRemoveAttr(el, 'slot-props')\n+    const shorthand = getAndRemoveAttrByRegex(el, scopedSlotShorthandRE)\n+    if (slotScope || shorthand) {\n+      if (process.env.NODE_ENV !== 'production') {\n+        if (!maybeComponent(el)) {\n+          warn(\n+            `slot-props cannot be used on non-component elements.`,\n+            el.rawAttrsMap['slot-props'] || el.rawAttrsMap['()']\n+          )\n+        }\n+        if (slotScope && shorthand) {\n+          warn(\n+            `Unexpected mixed usage of different slot syntaxes.`,\n+            el\n+          )\n+        }\n       }\n       \/\/ add the component's children to its default slot\n       const slots = el.scopedSlots || (el.scopedSlots = {})\n-      const slotContainer = slots[`\"default\"`] = createASTElement('template', [], el)\n+      const target = shorthand ? getScopedSlotShorthandName(shorthand) : `\"default\"`\n+      const slotContainer = slots[target] = createASTElement('template', [], el)\n       slotContainer.children = el.children\n-      slotContainer.slotScope = slotScope\n+      slotContainer.slotScope = shorthand ? shorthand.value : slotScope\n       \/\/ remove children as they are returned from scopedSlots now\n       el.children = []\n       \/\/ mark el non-plain so data gets generated\n@@ -617,6 +641,14 @@ function processSlotContent (el) {\n   }\n }\n \n+function getScopedSlotShorthandName ({ name }) {\n+  return name.charAt(0) === ':'\n+    \/\/ dynamic :(name)\n+    ? name.slice(2, -1) || `\"default\"`\n+    \/\/ static (name)\n+    : `\"${name.slice(1, -1) || `default`}\"`\n+}\n+\n \/\/ handle <slot\/> outlets\n function processSlotOutlet (el) {\n   if (el.tag === 'slot') {\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -731,5 +731,65 @@ describe('Component scoped slot', () => {\n     \/\/ run tests for both full syntax and shorthand\n     runSuite('slot-props')\n     runSuite('()')\n+\n+    it('shorthand named slots', () => {\n+      const vm = new Vue({\n+        template: `\n+          <foo ()=\"foo\">\n+            {{ foo }}\n+            <template (one)=\"one\">\n+              {{ one }}\n+            <\/template>\n+            <template (two)=\"two\">\n+              {{ two }}\n+            <\/template>\n+          <\/foo>\n+        `,\n+        components: { Foo }\n+      }).$mount()\n+      expect(vm.$el.innerHTML.replace(\/\\s+\/g, ' ')).toMatch(`from foo default from foo one from foo two`)\n+    })\n+\n+    it('shorthand without scope variable', () => {\n+      const vm = new Vue({\n+        template: `\n+          <foo>\n+            <template (one)>one<\/template>\n+            <template (two)>two<\/template>\n+          <\/foo>\n+        `,\n+        components: { Foo }\n+      }).$mount()\n+      expect(vm.$el.innerHTML.replace(\/\\s+\/g, ' ')).toMatch(`onetwo`)\n+    })\n+\n+    it('shorthand named slots on root', () => {\n+      const vm = new Vue({\n+        template: `\n+          <foo (one)=\"one\">\n+            {{ one }}\n+          <\/foo>\n+        `,\n+        components: { Foo }\n+      }).$mount()\n+      expect(vm.$el.innerHTML.replace(\/\\s+\/g, ' ')).toMatch(`from foo one`)\n+    })\n+\n+    it('dynamic shorthand', () => {\n+      const vm = new Vue({\n+        data: {\n+          a: 'one',\n+          b: 'two'\n+        },\n+        template: `\n+          <foo>\n+            <template :(a)=\"one\">{{ one }} <\/template>\n+            <template :(b)=\"two\">{{ two }}<\/template>\n+          <\/foo>\n+        `,\n+        components: { Foo }\n+      }).$mount()\n+      expect(vm.$el.innerHTML.replace(\/\\s+\/g, ' ')).toMatch(`from foo one from foo two`)\n+    })\n   })\n })\n\n\n###\n\n","completion":" feat: new scoped slot syntax implementation update per rfc\n"}
{"prompt":" file path A: src\/platforms\/web\/server\/modules\/style.js | file path B: src\/platforms\/web\/server\/modules\/style.js\n\n@@ -23,7 +23,8 @@ export function genStyle (style: Object): string {\n function normalizeValue(key: string, value: any): string {\n   if (\n     typeof value === 'string' ||\n-    (typeof value === 'number' && noUnitNumericStyleProps[key])\n+    (typeof value === 'number' && noUnitNumericStyleProps[key]) ||\n+    value === 0\n   ) {\n     return `${key}:${value};`\n   } else {\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -1529,13 +1529,14 @@ describe('SSR: renderToString', () => {\n       data: {\n         style: {\n           opacity: 0, \/\/ valid, opacity is unit-less\n-          top: 0, \/\/ invalid, top requires unit\n+          top: 0, \/\/ valid, top requires unit but 0 is allowed\n+          left: 10, \/\/ invalid, left requires a unit\n           marginTop: '10px' \/\/ valid\n         }\n       }\n     }, result => {\n       expect(result).toContain(\n-        '<div data-server-rendered=\"true\" style=\"opacity:0;margin-top:10px;\"><\/div>'\n+        '<div data-server-rendered=\"true\" style=\"opacity:0;top:0;margin-top:10px;\"><\/div>'\n       )\n       done()\n     })\n\n\n###\n\n","completion":" fix(ssr): should render 0 as valid value for style property with unit\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -45,6 +45,7 @@ let postTransforms\n let platformIsPreTag\n let platformMustUseProp\n let platformGetTagNamespace\n+let maybeComponent\n \n export function createASTElement (\n   tag: string,\n@@ -74,6 +75,8 @@ export function parse (\n   platformIsPreTag = options.isPreTag || no\n   platformMustUseProp = options.mustUseProp || no\n   platformGetTagNamespace = options.getTagNamespace || no\n+  const isReservedTag = options.isReservedTag || no\n+  maybeComponent = (el: ASTElement) => !!el.component || !isReservedTag(el.tag)\n \n   transforms = pluckModuleFunction(options.modules, 'transformNode')\n   preTransforms = pluckModuleFunction(options.modules, 'preTransformNode')\n@@ -390,7 +393,8 @@ export function processElement (\n   )\n \n   processRef(element)\n-  processSlot(element)\n+  processSlotContent(element)\n+  processSlotOutlet(element)\n   processComponent(element)\n   for (let i = 0; i < transforms.length; i++) {\n     element = transforms[i](element, options) || element\n@@ -542,7 +546,79 @@ function processOnce (el) {\n   }\n }\n \n-function processSlot (el) {\n+\/\/ handle content being passed to a component as slot,\n+\/\/ e.g. <template slot=\"xxx\">, <div slot-scope=\"xxx\">\n+function processSlotContent (el) {\n+  let slotScope\n+  if (el.tag === 'template') {\n+    slotScope = getAndRemoveAttr(el, 'scope')\n+    \/* istanbul ignore if *\/\n+    if (process.env.NODE_ENV !== 'production' && slotScope) {\n+      warn(\n+        `the \"scope\" attribute for scoped slots have been deprecated and ` +\n+        `replaced by \"slot-scope\" since 2.5. The new \"slot-scope\" attribute ` +\n+        `can also be used on plain elements in addition to <template> to ` +\n+        `denote scoped slots.`,\n+        el.rawAttrsMap['scope'],\n+        true\n+      )\n+    }\n+    el.slotScope = (\n+      slotScope ||\n+      getAndRemoveAttr(el, 'slot-scope') ||\n+      \/\/ new in 2.6: slot-props and its shorthand works the same as slot-scope\n+      \/\/ when used on <template> containers\n+      getAndRemoveAttr(el, 'slot-props') ||\n+      getAndRemoveAttr(el, '()')\n+    )\n+  } else if ((slotScope = getAndRemoveAttr(el, 'slot-scope'))) {\n+    \/* istanbul ignore if *\/\n+    if (process.env.NODE_ENV !== 'production' && el.attrsMap['v-for']) {\n+      warn(\n+        `Ambiguous combined usage of slot-scope and v-for on <${el.tag}> ` +\n+        `(v-for takes higher priority). Use a wrapper <template> for the ` +\n+        `scoped slot to make it clearer.`,\n+        el.rawAttrsMap['slot-scope'],\n+        true\n+      )\n+    }\n+    el.slotScope = slotScope\n+  } else {\n+    \/\/ 2.6: slot-props on component, denotes default slot\n+    slotScope = getAndRemoveAttr(el, 'slot-props') || getAndRemoveAttr(el, '()')\n+    if (slotScope) {\n+      if (process.env.NODE_ENV !== 'production' && !maybeComponent(el)) {\n+        warn(\n+          `slot-props cannot be used on non-component elements.`,\n+          el.rawAttrsMap['slot-props'] || el.rawAttrsMap['()']\n+        )\n+      }\n+      \/\/ add the component's children to its default slot\n+      const slots = el.scopedSlots || (el.scopedSlots = {})\n+      const slotContainer = slots[`\"default\"`] = createASTElement('template', [], el)\n+      slotContainer.children = el.children\n+      slotContainer.slotScope = slotScope\n+      \/\/ remove children as they are returned from scopedSlots now\n+      el.children = []\n+      \/\/ mark el non-plain so data gets generated\n+      el.plain = false\n+    }\n+  }\n+\n+  \/\/ slot=\"xxx\"\n+  const slotTarget = getBindingAttr(el, 'slot')\n+  if (slotTarget) {\n+    el.slotTarget = slotTarget === '\"\"' ? '\"default\"' : slotTarget\n+    \/\/ preserve slot as an attribute for native shadow DOM compat\n+    \/\/ only for non-scoped slots.\n+    if (el.tag !== 'template' && !el.slotScope) {\n+      addAttr(el, 'slot', slotTarget, getRawBindingAttr(el, 'slot'))\n+    }\n+  }\n+}\n+\n+\/\/ handle <slot\/> outlets\n+function processSlotOutlet (el) {\n   if (el.tag === 'slot') {\n     el.slotName = getBindingAttr(el, 'name')\n     if (process.env.NODE_ENV !== 'production' && el.key) {\n@@ -553,44 +629,6 @@ function processSlot (el) {\n         getRawBindingAttr(el, 'key')\n       )\n     }\n-  } else {\n-    let slotScope\n-    if (el.tag === 'template') {\n-      slotScope = getAndRemoveAttr(el, 'scope')\n-      \/* istanbul ignore if *\/\n-      if (process.env.NODE_ENV !== 'production' && slotScope) {\n-        warn(\n-          `the \"scope\" attribute for scoped slots have been deprecated and ` +\n-          `replaced by \"slot-scope\" since 2.5. The new \"slot-scope\" attribute ` +\n-          `can also be used on plain elements in addition to <template> to ` +\n-          `denote scoped slots.`,\n-          el.rawAttrsMap['scope'],\n-          true\n-        )\n-      }\n-      el.slotScope = slotScope || getAndRemoveAttr(el, 'slot-scope')\n-    } else if ((slotScope = getAndRemoveAttr(el, 'slot-scope'))) {\n-      \/* istanbul ignore if *\/\n-      if (process.env.NODE_ENV !== 'production' && el.attrsMap['v-for']) {\n-        warn(\n-          `Ambiguous combined usage of slot-scope and v-for on <${el.tag}> ` +\n-          `(v-for takes higher priority). Use a wrapper <template> for the ` +\n-          `scoped slot to make it clearer.`,\n-          el.rawAttrsMap['slot-scope'],\n-          true\n-        )\n-      }\n-      el.slotScope = slotScope\n-    }\n-    const slotTarget = getBindingAttr(el, 'slot')\n-    if (slotTarget) {\n-      el.slotTarget = slotTarget === '\"\"' ? '\"default\"' : slotTarget\n-      \/\/ preserve slot as an attribute for native shadow DOM compat\n-      \/\/ only for non-scoped slots.\n-      if (el.tag !== 'template' && !el.slotScope) {\n-        addAttr(el, 'slot', slotTarget, getRawBindingAttr(el, 'slot'))\n-      }\n-    }\n   }\n }\n \n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -631,4 +631,105 @@ describe('Component scoped slot', () => {\n       expect(vm.$el.innerHTML).toBe('<p>hello<\/p>')\n     }).then(done)\n   })\n+\n+  \/\/ new in 2.6\n+  describe('slot-props syntax', () => {\n+    const Foo = {\n+      render(h) {\n+        return h('div', [\n+          this.$scopedSlots.default && this.$scopedSlots.default('from foo default'),\n+          this.$scopedSlots.one && this.$scopedSlots.one('from foo one'),\n+          this.$scopedSlots.two && this.$scopedSlots.two('from foo two')\n+        ])\n+      }\n+    }\n+\n+    const Bar = {\n+      render(h) {\n+        return this.$scopedSlots.default && this.$scopedSlots.default('from bar')[0]\n+      }\n+    }\n+\n+    const Baz = {\n+      render(h) {\n+        return this.$scopedSlots.default && this.$scopedSlots.default('from baz')[0]\n+      }\n+    }\n+\n+    function runSuite(syntax) {\n+      it('default slot', () => {\n+        const vm = new Vue({\n+          template: `<foo ${syntax}=\"foo\">{{ foo }}<div>{{ foo }}<\/div><\/foo>`,\n+          components: { Foo }\n+        }).$mount()\n+        expect(vm.$el.innerHTML).toBe(`from foo default<div>from foo default<\/div>`)\n+      })\n+\n+      it('nested default slots', () => {\n+        const vm = new Vue({\n+          template: `\n+            <foo ${syntax}=\"foo\">\n+              <bar ${syntax}=\"bar\">\n+                <baz ${syntax}=\"baz\">\n+                  {{ foo }} | {{ bar }} | {{ baz }}\n+                <\/baz>\n+              <\/bar>\n+            <\/foo>\n+          `,\n+          components: { Foo, Bar, Baz }\n+        }).$mount()\n+        expect(vm.$el.innerHTML.trim()).toBe(`from foo default | from bar | from baz`)\n+      })\n+\n+      it('default + named slots', () => {\n+        const vm = new Vue({\n+          template: `\n+            <foo ()=\"foo\">\n+              {{ foo }}\n+              <template slot=\"one\" ${syntax}=\"one\">\n+                {{ one }}\n+              <\/template>\n+              <template slot=\"two\" ${syntax}=\"two\">\n+                {{ two }}\n+              <\/template>\n+            <\/foo>\n+          `,\n+          components: { Foo }\n+        }).$mount()\n+        expect(vm.$el.innerHTML.replace(\/\\s+\/g, ' ')).toMatch(`from foo default from foo one from foo two`)\n+      })\n+\n+      it('nested + named + default slots', () => {\n+        const vm = new Vue({\n+          template: `\n+            <foo>\n+              <template slot=\"one\" ${syntax}=\"one\">\n+                <bar ${syntax}=\"bar\">\n+                  {{ one }} {{ bar }}\n+                <\/bar>\n+              <\/template>\n+              <template slot=\"two\" ${syntax}=\"two\">\n+                <baz ${syntax}=\"baz\">\n+                  {{ two }} {{ baz }}\n+                <\/baz>\n+              <\/template>\n+            <\/foo>\n+          `,\n+          components: { Foo, Bar, Baz }\n+        }).$mount()\n+        expect(vm.$el.innerHTML.replace(\/\\s+\/g, ' ')).toMatch(`from foo one from bar from foo two from baz`)\n+      })\n+\n+      it('should warn slot-props usage on non-component elements', () => {\n+        const vm = new Vue({\n+          template: `<div ${syntax}=\"foo\"\/>`\n+        }).$mount()\n+        expect(`slot-props cannot be used on non-component elements`).toHaveBeenWarned()\n+      })\n+    }\n+\n+    \/\/ run tests for both full syntax and shorthand\n+    runSuite('slot-props')\n+    runSuite('()')\n+  })\n })\n\n\n###\n\n","completion":" feat: support slot-props and its shorthand\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -99,7 +99,7 @@ export function parse (\n \n   function closeElement (element) {\n     if (!inVPre && !element.processed) {\n-      element = processElement(element, options, currentParent)\n+      element = processElement(element, options)\n     }\n     \/\/ tree management\n     if (!stack.length && element !== root) {\n@@ -377,8 +377,7 @@ function processRawAttrs (el) {\n \n export function processElement (\n   element: ASTElement,\n-  options: CompilerOptions,\n-  parent: ASTElement | undefined\n+  options: CompilerOptions\n ) {\n   processKey(element)\n \n@@ -391,7 +390,7 @@ export function processElement (\n   )\n \n   processRef(element)\n-  processSlot(element, parent)\n+  processSlot(element)\n   processComponent(element)\n   for (let i = 0; i < transforms.length; i++) {\n     element = transforms[i](element, options) || element\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -458,7 +458,7 @@ describe('Component scoped slot', () => {\n   \/\/ new in 2.6, unifying all slots as functions\n   it('non-scoped slots should also be available on $scopedSlots', () => {\n     const vm = new Vue({\n-      template: `<foo>before <div slot=\"bar\">{{ $slot.msg }}<\/div> after<\/foo>`,\n+      template: `<foo>before <div slot=\"bar\" slot-scope=\"{ msg }\">{{ msg }}<\/div> after<\/foo>`,\n       components: {\n         foo: {\n           render(h) {\n\n\n###\n\n","completion":" refactor: additional tweaks after revert\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.5.21\",\n+  \"version\": \"2.5.22\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.5.22\n"}
{"prompt":" file path A: src\/core\/instance\/init.js | file path B: src\/core\/instance\/init.js\n\n@@ -117,32 +117,12 @@ export function resolveConstructorOptions (Ctor: Class<Component>) {\n function resolveModifiedOptions (Ctor: Class<Component>): ?Object {\n   let modified\n   const latest = Ctor.options\n-  const extended = Ctor.extendOptions\n   const sealed = Ctor.sealedOptions\n   for (const key in latest) {\n     if (latest[key] !== sealed[key]) {\n       if (!modified) modified = {}\n-      modified[key] = dedupe(latest[key], extended[key], sealed[key])\n+      modified[key] = latest[key]\n     }\n   }\n   return modified\n }\n-\n-function dedupe (latest, extended, sealed) {\n-  \/\/ compare latest and sealed to ensure lifecycle hooks won't be duplicated\n-  \/\/ between merges\n-  if (Array.isArray(latest)) {\n-    const res = []\n-    sealed = Array.isArray(sealed) ? sealed : [sealed]\n-    extended = Array.isArray(extended) ? extended : [extended]\n-    for (let i = 0; i < latest.length; i++) {\n-      \/\/ push original options and not sealed options to exclude duplicated options\n-      if (extended.indexOf(latest[i]) >= 0 || sealed.indexOf(latest[i]) < 0) {\n-        res.push(latest[i])\n-      }\n-    }\n-    return res\n-  } else {\n-    return latest\n-  }\n-}\n\n---\n file path A: src\/core\/util\/options.js | file path B: src\/core\/util\/options.js\n\n@@ -140,13 +140,26 @@ function mergeHook (\n   parentVal: ?Array<Function>,\n   childVal: ?Function | ?Array<Function>\n ): ?Array<Function> {\n-  return childVal\n+  const res = childVal\n     ? parentVal\n       ? parentVal.concat(childVal)\n       : Array.isArray(childVal)\n         ? childVal\n         : [childVal]\n     : parentVal\n+  return res\n+    ? dedupeHooks(res)\n+    : res\n+}\n+\n+function dedupeHooks (hooks) {\n+  const res = []\n+  for (let i = 0; i < hooks.length; i++) {\n+    if (res.indexOf(hooks[i]) === -1) {\n+      res.push(hooks[i])\n+    }\n+  }\n+  return res\n }\n \n LIFECYCLE_HOOKS.forEach(hook => {\n@@ -376,7 +389,7 @@ export function mergeOptions (\n   }\n \n   if (typeof child === 'function') {\n-    child = child.extendOptions\n+    child = child.options\n   }\n \n   normalizeProps(child, vm)\n\n---\n file path A: test\/unit\/features\/global-api\/mixin.spec.js | file path B: test\/unit\/features\/global-api\/mixin.spec.js\n\n@@ -167,4 +167,31 @@ describe('Global API: mixin', () => {\n   it('chain call', () => {\n     expect(Vue.mixin({})).toBe(Vue)\n   })\n+\n+  \/\/ #9198\n+  it('should not mix global mixin lifecycle hook twice', () => {\n+    const spy = jasmine.createSpy('global mixed in lifecycle hook')\n+    Vue.mixin({\n+      created: spy\n+    })\n+\n+    const mixin1 = Vue.extend({\n+      methods: {\n+        a() {}\n+      }\n+    })\n+\n+    const mixin2 = Vue.extend({\n+      mixins: [mixin1]\n+    })\n+\n+    const Child = Vue.extend({\n+      mixins: [mixin2],\n+    })\n+\n+    const vm = new Child()\n+\n+    expect(typeof vm.$options.methods.a).toBe('function')\n+    expect(spy.calls.count()).toBe(1)\n+  })\n })\n\n---\n file path A: test\/unit\/features\/options\/mixins.spec.js | file path B: test\/unit\/features\/options\/mixins.spec.js\n\n@@ -110,31 +110,35 @@ describe('Options mixins', () => {\n     expect(vm.$options.directives.c).toBeDefined()\n   })\n \n-  it('should not mix global mixined lifecycle hook twice', () => {\n-    const spy = jasmine.createSpy('global mixed in lifecycle hook')\n-    Vue.mixin({\n-      created() {\n-        spy()\n-      }\n-    })\n+  it('should accept further extended constructors as mixins', () => {\n+    const spy1 = jasmine.createSpy('mixinA')\n+    const spy2 = jasmine.createSpy('mixinB')\n \n-    const mixin1 = Vue.extend({\n+    const mixinA = Vue.extend({\n+      created: spy1,\n+      directives: {\n+        c: {}\n+      },\n       methods: {\n-        a() {}\n+        a: function () {}\n       }\n     })\n \n-    const mixin2 = Vue.extend({\n-      mixins: [mixin1],\n+    const mixinB = mixinA.extend({\n+      created: spy2\n     })\n \n-    const Child = Vue.extend({\n-      mixins: [mixin2],\n+    const vm = new Vue({\n+      mixins: [mixinB],\n+      methods: {\n+        b: function () {}\n+      }\n     })\n \n-    const vm = new Child()\n-\n-    expect(typeof vm.$options.methods.a).toBe('function')\n-    expect(spy.calls.count()).toBe(1)\n+    expect(spy1).toHaveBeenCalledTimes(1)\n+    expect(spy2).toHaveBeenCalledTimes(1)\n+    expect(vm.a).toBeDefined()\n+    expect(vm.b).toBeDefined()\n+    expect(vm.$options.directives.c).toBeDefined()\n   })\n })\n\n---\n file path A: src\/core\/instance\/init.js | file path B: src\/core\/instance\/init.js\n\n@@ -117,32 +117,12 @@ export function resolveConstructorOptions (Ctor: Class<Component>) {\n function resolveModifiedOptions (Ctor: Class<Component>): ?Object {\n   let modified\n   const latest = Ctor.options\n-  const extended = Ctor.extendOptions\n   const sealed = Ctor.sealedOptions\n   for (const key in latest) {\n     if (latest[key] !== sealed[key]) {\n       if (!modified) modified = {}\n-      modified[key] = dedupe(latest[key], extended[key], sealed[key])\n+      modified[key] = latest[key]\n     }\n   }\n   return modified\n }\n-\n-function dedupe (latest, extended, sealed) {\n-  \/\/ compare latest and sealed to ensure lifecycle hooks won't be duplicated\n-  \/\/ between merges\n-  if (Array.isArray(latest)) {\n-    const res = []\n-    sealed = Array.isArray(sealed) ? sealed : [sealed]\n-    extended = Array.isArray(extended) ? extended : [extended]\n-    for (let i = 0; i < latest.length; i++) {\n-      \/\/ push original options and not sealed options to exclude duplicated options\n-      if (extended.indexOf(latest[i]) >= 0 || sealed.indexOf(latest[i]) < 0) {\n-        res.push(latest[i])\n-      }\n-    }\n-    return res\n-  } else {\n-    return latest\n-  }\n-}\n\n---\n file path A: src\/core\/util\/options.js | file path B: src\/core\/util\/options.js\n\n@@ -147,13 +147,26 @@ function mergeHook (\n   parentVal: ?Array<Function>,\n   childVal: ?Function | ?Array<Function>\n ): ?Array<Function> {\n-  return childVal\n+  const res = childVal\n     ? parentVal\n       ? parentVal.concat(childVal)\n       : Array.isArray(childVal)\n         ? childVal\n         : [childVal]\n     : parentVal\n+  return res\n+    ? dedupeHooks(res)\n+    : res\n+}\n+\n+function dedupeHooks (hooks) {\n+  const res = []\n+  for (let i = 0; i < hooks.length; i++) {\n+    if (res.indexOf(hooks[i]) === -1) {\n+      res.push(hooks[i])\n+    }\n+  }\n+  return res\n }\n \n LIFECYCLE_HOOKS.forEach(hook => {\n@@ -382,7 +395,7 @@ export function mergeOptions (\n   }\n \n   if (typeof child === 'function') {\n-    child = child.extendOptions\n+    child = child.options\n   }\n \n   normalizeProps(child, vm)\n\n---\n file path A: test\/unit\/features\/global-api\/mixin.spec.js | file path B: test\/unit\/features\/global-api\/mixin.spec.js\n\n@@ -167,4 +167,31 @@ describe('Global API: mixin', () => {\n   it('chain call', () => {\n     expect(Vue.mixin({})).toBe(Vue)\n   })\n+\n+  \/\/ #9198\n+  it('should not mix global mixin lifecycle hook twice', () => {\n+    const spy = jasmine.createSpy('global mixed in lifecycle hook')\n+    Vue.mixin({\n+      created: spy\n+    })\n+\n+    const mixin1 = Vue.extend({\n+      methods: {\n+        a() {}\n+      }\n+    })\n+\n+    const mixin2 = Vue.extend({\n+      mixins: [mixin1]\n+    })\n+\n+    const Child = Vue.extend({\n+      mixins: [mixin2],\n+    })\n+\n+    const vm = new Child()\n+\n+    expect(typeof vm.$options.methods.a).toBe('function')\n+    expect(spy.calls.count()).toBe(1)\n+  })\n })\n\n---\n file path A: test\/unit\/features\/options\/mixins.spec.js | file path B: test\/unit\/features\/options\/mixins.spec.js\n\n@@ -110,31 +110,35 @@ describe('Options mixins', () => {\n     expect(vm.$options.directives.c).toBeDefined()\n   })\n \n-  it('should not mix global mixined lifecycle hook twice', () => {\n-    const spy = jasmine.createSpy('global mixed in lifecycle hook')\n-    Vue.mixin({\n-      created() {\n-        spy()\n-      }\n-    })\n+  it('should accept further extended constructors as mixins', () => {\n+    const spy1 = jasmine.createSpy('mixinA')\n+    const spy2 = jasmine.createSpy('mixinB')\n \n-    const mixin1 = Vue.extend({\n+    const mixinA = Vue.extend({\n+      created: spy1,\n+      directives: {\n+        c: {}\n+      },\n       methods: {\n-        a() {}\n+        a: function () {}\n       }\n     })\n \n-    const mixin2 = Vue.extend({\n-      mixins: [mixin1],\n+    const mixinB = mixinA.extend({\n+      created: spy2\n     })\n \n-    const Child = Vue.extend({\n-      mixins: [mixin2],\n+    const vm = new Vue({\n+      mixins: [mixinB],\n+      methods: {\n+        b: function () {}\n+      }\n     })\n \n-    const vm = new Child()\n-\n-    expect(typeof vm.$options.methods.a).toBe('function')\n-    expect(spy.calls.count()).toBe(1)\n+    expect(spy1).toHaveBeenCalledTimes(1)\n+    expect(spy2).toHaveBeenCalledTimes(1)\n+    expect(vm.a).toBeDefined()\n+    expect(vm.b).toBeDefined()\n+    expect(vm.$options.directives.c).toBeDefined()\n   })\n })\n\n\n###\n\n","completion":" fix(core): dedupe lifecycle hooks during options merge\n"}
{"prompt":" file path A: src\/core\/util\/options.js | file path B: src\/core\/util\/options.js\n\n@@ -376,13 +376,13 @@ export function mergeOptions (\n   }\n \n   if (typeof child === 'function') {\n-    child = child.options\n+    child = child.extendOptions\n   }\n \n   normalizeProps(child, vm)\n   normalizeInject(child, vm)\n   normalizeDirectives(child)\n-  \n+\n   \/\/ Apply extends and mixins on the child options,\n   \/\/ but only if it is a raw options object that isn't\n   \/\/ the result of another mergeOptions call.\n\n---\n file path A: test\/unit\/features\/options\/mixins.spec.js | file path B: test\/unit\/features\/options\/mixins.spec.js\n\n@@ -109,4 +109,32 @@ describe('Options mixins', () => {\n     expect(vm.b).toBeDefined()\n     expect(vm.$options.directives.c).toBeDefined()\n   })\n+\n+  it('should not mix global mixined lifecycle hook twice', () => {\n+    const spy = jasmine.createSpy('global mixed in lifecycle hook')\n+    Vue.mixin({\n+      created() {\n+        spy()\n+      }\n+    })\n+\n+    const mixin1 = Vue.extend({\n+      methods: {\n+        a() {}\n+      }\n+    })\n+\n+    const mixin2 = Vue.extend({\n+      mixins: [mixin1],\n+    })\n+\n+    const Child = Vue.extend({\n+      mixins: [mixin2],\n+    })\n+\n+    const vm = new Child()\n+\n+    expect(typeof vm.$options.methods.a).toBe('function')\n+    expect(spy.calls.count()).toBe(1)\n+  })\n })\n\n---\n file path A: src\/core\/util\/options.js | file path B: src\/core\/util\/options.js\n\n@@ -382,13 +382,13 @@ export function mergeOptions (\n   }\n \n   if (typeof child === 'function') {\n-    child = child.options\n+    child = child.extendOptions\n   }\n \n   normalizeProps(child, vm)\n   normalizeInject(child, vm)\n   normalizeDirectives(child)\n-  \n+\n   \/\/ Apply extends and mixins on the child options,\n   \/\/ but only if it is a raw options object that isn't\n   \/\/ the result of another mergeOptions call.\n\n---\n file path A: test\/unit\/features\/options\/mixins.spec.js | file path B: test\/unit\/features\/options\/mixins.spec.js\n\n@@ -109,4 +109,32 @@ describe('Options mixins', () => {\n     expect(vm.b).toBeDefined()\n     expect(vm.$options.directives.c).toBeDefined()\n   })\n+\n+  it('should not mix global mixined lifecycle hook twice', () => {\n+    const spy = jasmine.createSpy('global mixed in lifecycle hook')\n+    Vue.mixin({\n+      created() {\n+        spy()\n+      }\n+    })\n+\n+    const mixin1 = Vue.extend({\n+      methods: {\n+        a() {}\n+      }\n+    })\n+\n+    const mixin2 = Vue.extend({\n+      mixins: [mixin1],\n+    })\n+\n+    const Child = Vue.extend({\n+      mixins: [mixin2],\n+    })\n+\n+    const vm = new Child()\n+\n+    expect(typeof vm.$options.methods.a).toBe('function')\n+    expect(spy.calls.count()).toBe(1)\n+  })\n })\n\n\n###\n\n","completion":" fix(core): fix merged twice bug when passing extended constructor to mixins (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/resolve-async-component.js | file path B: src\/core\/vdom\/helpers\/resolve-async-component.js\n\n@@ -78,6 +78,8 @@ export function resolveAsyncComponent (\n       \/\/ (async resolves are shimmed as synchronous during SSR)\n       if (!sync) {\n         forceRender(true)\n+      } else {\n+        contexts.length = 0\n       }\n     })\n \n\n---\n file path A: test\/unit\/modules\/vdom\/create-component.spec.js | file path B: test\/unit\/modules\/vdom\/create-component.spec.js\n\n@@ -76,6 +76,32 @@ describe('create-component', () => {\n     go()\n   })\n \n+  it('create a component when resolved with synchronous async loading', done => {\n+    const data = {\n+      props: {},\n+      staticAttrs: { class: 'bar' }\n+    }\n+    spyOn(vm, '$forceUpdate')\n+    function async (resolve, reject) {\n+      resolve({\n+        name: 'child',\n+        props: ['msg']\n+      })\n+    }\n+    const vnode = createComponent(async, data, vm, vm)\n+    expect(vnode.asyncFactory).toBe(async)\n+    expect(vnode.asyncFactory.contexts.length).toEqual(0)\n+    expect(vnode.tag).toMatch(\/vue-component-[0-9]+-child\/)\n+    expect(vnode.data.staticAttrs).toEqual({ class: 'bar' })\n+    expect(vnode.children).toBeUndefined()\n+    expect(vnode.text).toBeUndefined()\n+    expect(vnode.elm).toBeUndefined()\n+    expect(vnode.ns).toBeUndefined()\n+    expect(vnode.context).toEqual(vm)\n+    expect(vm.$forceUpdate).not.toHaveBeenCalled()\n+    done()\n+  })\n+\n   it('not create a component when rejected with async loading', done => {\n     let vnode = null\n     const data = {\n\n\n###\n\n","completion":" fix(async component): memory leak after synchronous async loading (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/server\/modules\/style.js | file path B: src\/platforms\/web\/server\/modules\/style.js\n\n@@ -21,18 +21,11 @@ export function genStyle (style: Object): string {\n }\n \n function normalizeValue(key: string, value: any): string {\n-  if (typeof value === 'string') {\n+  if (\n+    typeof value === 'string' ||\n+    (typeof value === 'number' && noUnitNumericStyleProps[key])\n+  ) {\n     return `${key}:${value};`\n-  } else if (typeof value === 'number') {\n-    \/\/ Handle numeric values.\n-    \/\/ Turns out all evergreen browsers plus IE11 already support setting plain\n-    \/\/ numbers on the style object and will automatically convert it to px if\n-    \/\/ applicable, so we should support that on the server too.\n-    if (noUnitNumericStyleProps[key]) {\n-      return `${key}:${value};`\n-    } else {\n-      return `${key}:${value}px;`\n-    }\n   } else {\n     \/\/ invalid values\n     return ``\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -1528,14 +1528,14 @@ describe('SSR: renderToString', () => {\n       template: '<div :style=\"style\"><\/div>',\n       data: {\n         style: {\n-          opacity: 0, \/\/ opacity should display as-is\n-          top: 0, \/\/ top and margin should be converted to '0px'\n-          marginTop: 10\n+          opacity: 0, \/\/ valid, opacity is unit-less\n+          top: 0, \/\/ invalid, top requires unit\n+          marginTop: '10px' \/\/ valid\n         }\n       }\n     }, result => {\n       expect(result).toContain(\n-        '<div data-server-rendered=\"true\" style=\"opacity:0;top:0px;margin-top:10px;\"><\/div>'\n+        '<div data-server-rendered=\"true\" style=\"opacity:0;margin-top:10px;\"><\/div>'\n       )\n       done()\n     })\n\n\n###\n\n","completion":" fix(ssr): should not render invalid numeric style values\n"}
{"prompt":" file path A: src\/platforms\/web\/server\/modules\/style.js | file path B: src\/platforms\/web\/server\/modules\/style.js\n\n@@ -1,6 +1,6 @@\n \/* @flow *\/\n \n-import { escape } from '..\/util'\n+import { escape, noUnitNumericStyleProps } from '..\/util'\n import { hyphenate } from 'shared\/util'\n import { getStyle } from 'web\/util\/style'\n \n@@ -11,15 +11,34 @@ export function genStyle (style: Object): string {\n     const hyphenatedKey = hyphenate(key)\n     if (Array.isArray(value)) {\n       for (let i = 0, len = value.length; i < len; i++) {\n-        styleText += `${hyphenatedKey}:${value[i]};`\n+        styleText += normalizeValue(hyphenatedKey, value[i])\n       }\n     } else {\n-      styleText += `${hyphenatedKey}:${value};`\n+      styleText += normalizeValue(hyphenatedKey, value)\n     }\n   }\n   return styleText\n }\n \n+function normalizeValue(key: string, value: any): string {\n+  if (typeof value === 'string') {\n+    return `${key}:${value};`\n+  } else if (typeof value === 'number') {\n+    \/\/ Handle numeric values.\n+    \/\/ Turns out all evergreen browsers plus IE11 already support setting plain\n+    \/\/ numbers on the style object and will automatically convert it to px if\n+    \/\/ applicable, so we should support that on the server too.\n+    if (noUnitNumericStyleProps[key]) {\n+      return `${key}:${value};`\n+    } else {\n+      return `${key}:${value}px;`\n+    }\n+  } else {\n+    \/\/ invalid values\n+    return ``\n+  }\n+}\n+\n export default function renderStyle (vnode: VNodeWithData): ?string {\n   const styleText = genStyle(getStyle(vnode, false))\n   if (styleText !== '') {\n\n---\n file path A: src\/platforms\/web\/server\/util.js | file path B: src\/platforms\/web\/server\/util.js\n\n@@ -54,3 +54,48 @@ export function escape (s: string) {\n function escapeChar (a) {\n   return ESC[a] || a\n }\n+\n+export const noUnitNumericStyleProps = {\n+  \"animation-iteration-count\": true,\n+  \"border-image-outset\": true,\n+  \"border-image-slice\": true,\n+  \"border-image-width\": true,\n+  \"box-flex\": true,\n+  \"box-flex-group\": true,\n+  \"box-ordinal-group\": true,\n+  \"column-count\": true,\n+  \"columns\": true,\n+  \"flex\": true,\n+  \"flex-grow\": true,\n+  \"flex-positive\": true,\n+  \"flex-shrink\": true,\n+  \"flex-negative\": true,\n+  \"flex-order\": true,\n+  \"grid-row\": true,\n+  \"grid-row-end\": true,\n+  \"grid-row-span\": true,\n+  \"grid-row-start\": true,\n+  \"grid-column\": true,\n+  \"grid-column-end\": true,\n+  \"grid-column-span\": true,\n+  \"grid-column-start\": true,\n+  \"font-weight\": true,\n+  \"line-clamp\": true,\n+  \"line-height\": true,\n+  \"opacity\": true,\n+  \"order\": true,\n+  \"orphans\": true,\n+  \"tab-size\": true,\n+  \"widows\": true,\n+  \"z-index\": true,\n+  \"zoom\": true,\n+  \/\/ SVG\n+  \"fill-opacity\": true,\n+  \"flood-opacity\": true,\n+  \"stop-opacity\": true,\n+  \"stroke-dasharray\": true,\n+  \"stroke-dashoffset\": true,\n+  \"stroke-miterlimit\": true,\n+  \"stroke-opacity\": true,\n+  \"stroke-width\": true\n+}\n\n---\n file path A: src\/platforms\/web\/util\/style.js | file path B: src\/platforms\/web\/util\/style.js\n\n@@ -69,4 +69,3 @@ export function getStyle (vnode: VNodeWithData, checkChild: boolean): Object {\n   }\n   return res\n }\n-\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -1499,6 +1499,47 @@ describe('SSR: renderToString', () => {\n       done()\n     })\n   })\n+\n+  it('invalid style value', done => {\n+    renderVmWithOptions({\n+      template: '<div :style=\"style\"><p :style=\"style2\"\/><\/div>',\n+      data: {\n+        \/\/ all invalid, should not even have \"style\" attribute\n+        style: {\n+          opacity: {},\n+          color: null\n+        },\n+        \/\/ mix of valid and invalid\n+        style2: {\n+          opacity: 0,\n+          color: null\n+        }\n+      }\n+    }, result => {\n+      expect(result).toContain(\n+        '<div data-server-rendered=\"true\"><p style=\"opacity:0;\"><\/p><\/div>'\n+      )\n+      done()\n+    })\n+  })\n+\n+  it('numeric style value', done => {\n+    renderVmWithOptions({\n+      template: '<div :style=\"style\"><\/div>',\n+      data: {\n+        style: {\n+          opacity: 0, \/\/ opacity should display as-is\n+          top: 0, \/\/ top and margin should be converted to '0px'\n+          marginTop: 10\n+        }\n+      }\n+    }, result => {\n+      expect(result).toContain(\n+        '<div data-server-rendered=\"true\" style=\"opacity:0;top:0px;margin-top:10px;\"><\/div>'\n+      )\n+      done()\n+    })\n+  })\n })\n \n function renderVmWithOptions (options, cb) {\n\n\n###\n\n","completion":" fix(ssr): properly handle invalid and numeric style properties\n"}
{"prompt":" file path A: packages\/vue-template-compiler\/README.md | file path B: packages\/vue-template-compiler\/README.md\n\n@@ -33,6 +33,12 @@ Note the returned function code uses `with` and thus cannot be used in strict mo\n \n #### Options\n \n+- `outputSourceRange` *new in 2.6*\n+  - Type: `boolean`\n+  - Default: `false`\n+\n+  Set this to true will cause the `errors` returned in the compiled result become objects in the form of `{ msg, start, end }`. The `start` and `end` properties are numbers that mark the code range of the error source in the template. This can be passed on to the `compiler.generateCodeFrame` API to generate code frame for the error.\n+\n - `whitespace`\n   - Type: `string`\n   - Valid values: `'preserve' | 'condense'`\n@@ -140,6 +146,12 @@ Same as `compiler.compileToFunction` but generates SSR-specific render function\n \n Parse a SFC (single-file component, or `*.vue` file) into a descriptor (refer to the `SFCDescriptor` type in [flow declarations](https:\/\/github.com\/vuejs\/vue\/blob\/dev\/flow\/compiler.js)). This is used in SFC build tools like `vue-loader` and `vueify`.\n \n+---\n+\n+### compiler.generateCodeFrame(template, start, end)\n+\n+Generate a code frame that highlights the part in `template` defined by `start` and `end`. Useful for error reporting in higher-level tooling.\n+\n #### Options\n \n #### `pad`\n\n---\n file path A: src\/platforms\/web\/entry-compiler.js | file path B: src\/platforms\/web\/entry-compiler.js\n\n@@ -3,3 +3,4 @@\n export { parseComponent } from 'sfc\/parser'\n export { compile, compileToFunctions } from '.\/compiler\/index'\n export { ssrCompile, ssrCompileToFunctions } from '.\/server\/compiler'\n+export { generateCodeFrame } from 'compiler\/codeframe'\n\n---\n file path A: src\/platforms\/weex\/entry-compiler.js | file path B: src\/platforms\/weex\/entry-compiler.js\n\n@@ -1 +1,2 @@\n export { compile } from 'weex\/compiler\/index'\n+export { generateCodeFrame } from 'compiler\/codeframe'\n\n\n###\n\n","completion":" feat(compiler): expose generateCodeFrame method\n"}
{"prompt":" file path A: src\/core\/global-api\/index.js | file path B: src\/core\/global-api\/index.js\n\n@@ -8,6 +8,7 @@ import { initAssetRegisters } from '.\/assets'\n import { set, del } from '..\/observer\/index'\n import { ASSET_TYPES } from 'shared\/constants'\n import builtInComponents from '..\/components\/index'\n+import { observe } from 'core\/observer\/index'\n \n import {\n   warn,\n@@ -44,6 +45,12 @@ export function initGlobalAPI (Vue: GlobalAPI) {\n   Vue.delete = del\n   Vue.nextTick = nextTick\n \n+  \/\/ 2.6 explicit observable API\n+  Vue.observable = (obj: any): any => {\n+    observe(obj)\n+    return obj\n+  }\n+\n   Vue.options = Object.create(null)\n   ASSET_TYPES.forEach(type => {\n     Vue.options[type + 's'] = Object.create(null)\n\n---\n file path A: None | file path B: test\/unit\/features\/global-api\/observable.spec.js\n\n@@ -0,0 +1,30 @@\n+import Vue from 'vue'\n+\n+describe('Global API: observable', () => {\n+  it('should work', done => {\n+    const state = Vue.observable({\n+      count: 0\n+    })\n+\n+    const app = new Vue({\n+      render(h) {\n+        return h('div', [\n+          h('span', state.count),\n+          h('button', {\n+            on: {\n+              click: () => {\n+                state.count++\n+              }\n+            }\n+          }, '+')\n+        ])\n+      }\n+    }).$mount()\n+\n+    expect(app.$el.querySelector('span').textContent).toBe('0')\n+    app.$el.querySelector('button').click()\n+    waitForUpdate(() => {\n+      expect(app.$el.querySelector('span').textContent).toBe('1')\n+    }).then(done)\n+  })\n+})\n\n\n###\n\n","completion":" feat: add Vue.observable() for explicitly creating observable objects\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -54,7 +54,7 @@ function add (\n     const now = performance.now()\n     const original = handler\n     handler = original._wrapper = function (e) {\n-      if (e.timeStamp > now) {\n+      if (e.timeStamp >= now) {\n         return original.apply(this, arguments)\n       }\n     }\n\n\n###\n\n","completion":" refactor: should also fire handler if timestamp was same\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -19,7 +19,9 @@ export function normalizeScopedSlots (\n   }\n   \/\/ expose normal slots on scopedSlots\n   for (const key in normalSlots) {\n-    res[key] = proxyNormalSlot(normalSlots, key)\n+    if (!(key in res)) {\n+      res[key] = proxyNormalSlot(normalSlots, key)\n+    }\n   }\n   res._normalized = true\n   return res\n\n\n###\n\n","completion":" refactor: do not override scoped slots when exposing normal slots\n"}
{"prompt":" file path A: src\/core\/config.js | file path B: src\/core\/config.js\n\n@@ -19,7 +19,6 @@ export type Config = {\n   warnHandler: ?(msg: string, vm: Component, trace: string) => void;\n   ignoredElements: Array<string | RegExp>;\n   keyCodes: { [key: string]: number | Array<number> };\n-  useEventDelegation: boolean;\n \n   \/\/ platform\n   isReservedTag: (x?: string) => boolean;\n@@ -84,15 +83,6 @@ export default ({\n   \/\/ $flow-disable-line\n   keyCodes: Object.create(null),\n \n-  \/**\n-   * Use event delegation - this works around a few async edge cases caused by\n-   * microtask \/ DOM event racing conditions, and should in theory save some\n-   * memory.\n-   *\n-   * Off by default for backwards compatibility.\n-   *\/\n-  useEventDelegation: false,\n-\n   \/**\n    * Check if a tag is reserved so that it cannot be registered as a\n    * component. This is platform-dependent and may be overwritten.\n\n---\n file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -1,9 +1,8 @@\n \/* @flow *\/\n \n-import config from 'core\/config'\n import { isDef, isUndef } from 'shared\/util'\n import { updateListeners } from 'core\/vdom\/helpers\/index'\n-import { isIE, isPhantomJS, supportsPassive } from 'core\/util\/index'\n+import { isIE, isChrome, supportsPassive } from 'core\/util\/index'\n import { RANGE_TOKEN, CHECKBOX_RADIO_TOKEN } from 'web\/compiler\/directives\/model'\n \n \/\/ normalize v-model event tokens that can only be determined at runtime.\n@@ -39,114 +38,34 @@ function createOnceHandler (event, handler, capture) {\n   }\n }\n \n-const delegateRE = \/^(?:click|dblclick|submit|(?:key|mouse|touch|pointer).*)$\/\n-const eventCounts = {}\n-const attachedGlobalHandlers = {}\n-\n-type TargetRef = { el: Element | Document }\n-\n function add (\n   name: string,\n   handler: Function,\n   capture: boolean,\n   passive: boolean\n ) {\n-  if (\n-    !capture &&\n-    !passive &&\n-    config.useEventDelegation &&\n-    delegateRE.test(name)\n-  ) {\n-    const count = eventCounts[name]\n-    let store = target.__events\n-    if (!count) {\n-      attachGlobalHandler(name)\n-    }\n-    if (!store) {\n-      store = target.__events = {}\n-    }\n-    if (!store[name]) {\n-      eventCounts[name]++\n-    }\n-    store[name] = handler\n-  } else {\n-    target.addEventListener(\n-      name,\n-      handler,\n-      supportsPassive\n-        ? { capture, passive }\n-        : capture\n-    )\n-  }\n-}\n-\n-function attachGlobalHandler(name: string) {\n-  const handler = (attachedGlobalHandlers[name] = (e: any) => {\n-    const isClick = e.type === 'click' || e.type === 'dblclick'\n-    if (isClick && e.button !== 0) {\n-      e.stopPropagation()\n-      return false\n-    }\n-    const targetRef: TargetRef = { el: document }\n-    dispatchEvent(e, name, isClick, targetRef)\n-  })\n-  document.addEventListener(name, handler)\n-  eventCounts[name] = 0\n-}\n-\n-function stopPropagation() {\n-  this.cancelBubble = true\n-  if (!this.immediatePropagationStopped) {\n-    this.stopImmediatePropagation()\n-  }\n-}\n-\n-function dispatchEvent(\n-  e: Event,\n-  name: string,\n-  isClick: boolean,\n-  targetRef: TargetRef\n-) {\n-  let el: any = e.target\n-  let userEvent\n-  if (isPhantomJS) {\n-    \/\/ in PhantomJS it throws if we try to re-define currentTarget,\n-    \/\/ so instead we create a wrapped event to the user\n-    userEvent = Object.create((e: any))\n-    userEvent.stopPropagation = stopPropagation.bind((e: any))\n-    userEvent.preventDefault = e.preventDefault.bind(e)\n-  } else {\n-    userEvent = e\n-  }\n-  Object.defineProperty(userEvent, 'currentTarget', ({\n-    configurable: true,\n-    get() {\n-      return targetRef.el\n-    }\n-  }: any))\n-  while (el != null) {\n-    \/\/ Don't process clicks on disabled elements\n-    if (isClick && el.disabled) {\n-      break\n-    }\n-    const store = el.__events\n-    if (store) {\n-      const handler = store[name]\n-      if (handler) {\n-        targetRef.el = el\n-        handler(userEvent)\n-        if (e.cancelBubble) {\n-          break\n-        }\n+  if (isChrome) {\n+    \/\/ async edge case #6566: inner click event triggers patch, event handler\n+    \/\/ attached to outer element during patch, and triggered again. This only\n+    \/\/ happens in Chrome as it fires microtask ticks between event propagation.\n+    \/\/ the solution is simple: we save the timestamp when a handler is attached,\n+    \/\/ and the handler would only fire if the event passed to it was fired\n+    \/\/ AFTER it was attached.\n+    const now = performance.now()\n+    const original = handler\n+    handler = original._wrapper = function (e) {\n+      if (e.timeStamp > now) {\n+        return original.apply(this, arguments)\n       }\n     }\n-    el = el.parentNode\n   }\n-}\n-\n-function removeGlobalHandler(name: string) {\n-  document.removeEventListener(name, attachedGlobalHandlers[name])\n-  attachedGlobalHandlers[name] = null\n+  target.addEventListener(\n+    name,\n+    handler,\n+    supportsPassive\n+      ? { capture, passive }\n+      : capture\n+  )\n }\n \n function remove (\n@@ -155,19 +74,11 @@ function remove (\n   capture: boolean,\n   _target?: HTMLElement\n ) {\n-  const el: any = _target || target\n-  if (!capture && config.useEventDelegation && delegateRE.test(name)) {\n-    el.__events[name] = null\n-    if (--eventCounts[name] === 0) {\n-      removeGlobalHandler(name)\n-    }\n-  } else {\n-    el.removeEventListener(\n-      name,\n-      handler._withTask || handler,\n-      capture\n-    )\n-  }\n+  (_target || target).removeEventListener(\n+    name,\n+    handler._wrapper || handler,\n+    capture\n+  )\n }\n \n function updateDOMListeners (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n\n---\n file path A: test\/e2e\/specs\/async-edge-cases.html | file path B: test\/e2e\/specs\/async-edge-cases.html\n\n@@ -6,11 +6,6 @@\n     <script src=\"..\/..\/..\/dist\/vue.min.js\"><\/script>\n   <\/head>\n   <body>\n-    <script>\n-      \/\/ this is necessary to make these cases pass\n-      Vue.config.useEventDelegation = true\n-    <\/script>\n-\n     <!-- #4510 click and change event on checkbox -->\n     <div id=\"case-1\">\n       <div @click=\"num++\">\n\n---\n file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -75,7 +75,6 @@ class Test extends Vue {\n     config.keyCodes = { esc: 27 };\n     config.ignoredElements = ['foo', \/^ion-\/];\n     config.async = false\n-    config.useEventDelegation = true\n   }\n \n   static testMethods() {\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -74,7 +74,6 @@ export interface VueConfiguration {\n   warnHandler(msg: string, vm: Vue, trace: string): void;\n   ignoredElements: (string | RegExp)[];\n   keyCodes: { [key: string]: number | number[] };\n-  useEventDelegation: boolean;\n   async: boolean;\n }\n \n\n\n###\n\n","completion":" refactor: better solution for async edge case.\n"}
{"prompt":" file path A: .circleci\/config.yml | file path B: .circleci\/config.yml\n\n@@ -93,6 +93,7 @@ workflows:\n           filters:\n             branches:\n               only:\n+                - \"2.6\"\n                 - regression-test\n           requires:\n             - test-cover\n\n\n###\n\n","completion":" build: trigger regression tests from 2.6 feature branch\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -19,7 +19,7 @@ export function normalizeScopedSlots (\n   }\n   \/\/ expose normal slots on scopedSlots\n   for (const key in normalSlots) {\n-    res[key] = () => normalSlots[key]\n+    res[key] = proxyNormalSlot(normalSlots, key)\n   }\n   res._normalized = true\n   return res\n@@ -31,3 +31,7 @@ function normalizeScopedSlot(fn: Function) {\n     return Array.isArray(res) ? res : res ? [res] : res\n   }\n }\n+\n+function proxyNormalSlot(slots, key) {\n+  return () => slots[key]\n+}\n\n\n###\n\n","completion":" fix: ensure proxied normal slot uses correct key\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -617,7 +617,7 @@ function childrenHas$Slot (el): boolean {\n   return el.children ? el.children.some(nodeHas$Slot) : false\n }\n \n-const $slotRE = \/\\$slot\/\n+const $slotRE = \/(^|[^\\w_$])\\$slot($|[^\\w_$])\/\n function nodeHas$Slot (node): boolean {\n   \/\/ caching\n   if (hasOwn(node, 'has$Slot')) {\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -690,10 +690,33 @@ describe('Component scoped slot', () => {\n       expect(vm.$el.innerHTML).toBe(`default<div>default<\/div><div>static<\/div>`)\n     })\n \n+    \/\/ testing $slot detection: bracket access, using $slot alone, passing as arguments...\n+    it('should work for alternative $slot usage', () => {\n+      const vm = new Vue({\n+        template: `<foo>{{ $slot['foo'] }}<div slot=\"foo\">{{ $slot }}<\/div><div>{{ pick($slot) }}<\/div><\/foo>`,\n+        methods: { pick: s => s.foo },\n+        components: { foo: { template: `<div><slot foo=\"default\"\/><slot name=\"foo\"\/><\/div>` }}\n+      }).$mount()\n+      expect(vm.$el.innerHTML).toBe(`default<div>default<\/div><div>{}<\/div>`)\n+    })\n+\n+    \/\/ should not consider detection if $slot is inside longer valid identifier\n     it('should not break when template expression uses $slots', () => {\n       const vm = new Vue({\n-        template: ``\n-      })\n+        data: { some$slot: 123 },\n+        template: `<foo>{{ some$slot }}<div slot=\"foo\">{{ $slots }}<\/div><\/foo>`,\n+        components: {\n+          foo: {\n+            render(h) {\n+              \/\/ should be compiled as normal slots\n+              expect(this.$slots.default).toBeTruthy()\n+              expect(this.$slots.foo).toBeTruthy()\n+              return h('div', [this.$slots.default, this.$slots.foo])\n+            }\n+          }\n+        }\n+      }).$mount()\n+      expect(vm.$el.innerHTML).toBe(`123<div>{}<\/div>`)\n     })\n   })\n })\n\n\n###\n\n","completion":" test: more test cases for $slot usage detection\n"}
{"prompt":" file path A: src\/core\/util\/lang.js | file path B: src\/core\/util\/lang.js\n\n@@ -30,7 +30,7 @@ export function def (obj: Object, key: string, val: any, enumerable?: boolean) {\n \/**\n  * Parse simple path.\n  *\/\n-const bailRE = new RegExp(`[^${unicodeLetters}.$_]`)\n+const bailRE = new RegExp(`[^${unicodeLetters}.$_\\\\d]`)\n export function parsePath (path: string): any {\n   if (bailRE.test(path)) {\n     return\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -689,5 +689,11 @@ describe('Component scoped slot', () => {\n       }).$mount()\n       expect(vm.$el.innerHTML).toBe(`default<div>default<\/div><div>static<\/div>`)\n     })\n+\n+    it('should not break when template expression uses $slots', () => {\n+      const vm = new Vue({\n+        template: ``\n+      })\n+    })\n   })\n })\n\n---\n file path A: test\/unit\/features\/options\/watch.spec.js | file path B: test\/unit\/features\/options\/watch.spec.js\n\n@@ -1,5 +1,6 @@\n import Vue from 'vue'\n import testObjectOption from '..\/..\/..\/helpers\/test-object-option'\n+import { finished } from 'stream';\n \n describe('Options watch', () => {\n   let spy\n@@ -143,4 +144,35 @@ describe('Options watch', () => {\n       expect(spy3).toHaveBeenCalledWith(1, 0)\n     }).then(done)\n   })\n+\n+  it('should support watching unicode paths', done => {\n+    const vm = new Vue({\n+      data: {\n+        : 1\n+      },\n+      watch: {\n+        : spy\n+      }\n+    })\n+    expect(spy).not.toHaveBeenCalled()\n+    vm[''] = 2\n+    expect(spy).not.toHaveBeenCalled()\n+    waitForUpdate(() => {\n+      expect(spy).toHaveBeenCalledWith(2, 1)\n+    }).then(done)\n+  })\n+\n+  it('should not warn proper usage', () => {\n+    const vm = new Vue({\n+      data: {\n+        foo: { _bar: 1 }, \/\/ element has such watchers...\n+        prop1: 123\n+      },\n+      watch: {\n+        'foo._bar': () => {},\n+        prop1 () {}\n+      }\n+    })\n+    expect(`Failed watching path`).not.toHaveBeenWarned()\n+  })\n })\n\n\n###\n\n","completion":" test: add more test case for watch option\n"}
{"prompt":" file path A: src\/core\/util\/lang.js | file path B: src\/core\/util\/lang.js\n\n@@ -30,7 +30,7 @@ export function def (obj: Object, key: string, val: any, enumerable?: boolean) {\n \/**\n  * Parse simple path.\n  *\/\n-const bailRE = new RegExp(`[^${unicodeLetters}.$]`)\n+const bailRE = new RegExp(`[^${unicodeLetters}.$_]`)\n export function parsePath (path: string): any {\n   if (bailRE.test(path)) {\n     return\n\n\n###\n\n","completion":" fix: allow _ in watch paths (element compat)\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -12,7 +12,9 @@ export function normalizeScopedSlots (\n   } else {\n     res = {}\n     for (const key in slots) {\n-      res[key] = normalizeScopedSlot(slots[key])\n+      if (slots[key]) {\n+        res[key] = normalizeScopedSlot(slots[key])\n+      }\n     }\n   }\n   \/\/ expose normal slots on scopedSlots\n\n\n###\n\n","completion":" fix: ensure only nromalize a scoped slot when it is present\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -15,7 +15,7 @@\n   \"sideEffects\": false,\n   \"scripts\": {\n     \"dev\": \"rollup -w -c scripts\/config.js --environment TARGET:web-full-dev\",\n-    \"dev:cjs\": \"rollup -w -c scripts\/config.js --environment TARGET:web-runtime-cjs\",\n+    \"dev:cjs\": \"rollup -w -c scripts\/config.js --environment TARGET:web-runtime-cjs-dev\",\n     \"dev:esm\": \"rollup -w -c scripts\/config.js --environment TARGET:web-runtime-esm\",\n     \"dev:test\": \"karma start test\/unit\/karma.dev.config.js\",\n     \"dev:ssr\": \"rollup -w -c scripts\/config.js --environment TARGET:web-server-renderer\",\n\n\n###\n\n","completion":" build: fix dev:cjs script\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/resolve-slots.js | file path B: src\/core\/instance\/render-helpers\/resolve-slots.js\n\n@@ -1,7 +1,6 @@\n \/* @flow *\/\n \n import type VNode from 'core\/vdom\/vnode'\n-import { emptyObject } from 'core\/util\/index'\n \n \/**\n  * Runtime helper for resolving raw children VNodes into a slot object.\n@@ -11,7 +10,7 @@ export function resolveSlots (\n   context: ?Component\n ): { [key: string]: Array<VNode> } {\n   if (!children || !children.length) {\n-    return emptyObject\n+    return {}\n   }\n   const slots = {}\n   for (let i = 0, l = children.length; i < l; i++) {\n\n---\n file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -1,16 +1,11 @@\n \/* @flow *\/\n \n-import { emptyObject } from 'core\/util\/index'\n-\n export function normalizeScopedSlots (\n   slots: { [key: string]: Function } | void,\n   normalSlots: { [key: string]: Array<VNode> }\n ): any {\n   let res\n   if (!slots) {\n-    if (normalSlots === emptyObject) {\n-      return emptyObject\n-    }\n     res = {}\n   } else if (slots._normalized) {\n     return slots\n@@ -19,14 +14,12 @@ export function normalizeScopedSlots (\n     for (const key in slots) {\n       res[key] = normalizeScopedSlot(slots[key])\n     }\n-    res._normalized = true\n   }\n   \/\/ expose normal slots on scopedSlots\n-  if (normalSlots !== emptyObject) {\n-    for (const key in normalSlots) {\n-      res[key] = () => normalSlots[key]\n-    }\n+  for (const key in normalSlots) {\n+    res[key] = () => normalSlots[key]\n   }\n+  res._normalized = true\n   return res\n }\n \n\n\n###\n\n","completion":" refactor: avoid using immutable object for $slot\n"}
{"prompt":" file path A: src\/core\/config.js | file path B: src\/core\/config.js\n\n@@ -19,6 +19,7 @@ export type Config = {\n   warnHandler: ?(msg: string, vm: Component, trace: string) => void;\n   ignoredElements: Array<string | RegExp>;\n   keyCodes: { [key: string]: number | Array<number> };\n+  useEventDelegation: boolean;\n \n   \/\/ platform\n   isReservedTag: (x?: string) => boolean;\n@@ -83,6 +84,15 @@ export default ({\n   \/\/ $flow-disable-line\n   keyCodes: Object.create(null),\n \n+  \/**\n+   * Use event delegation - this works around a few async edge cases caused by\n+   * microtask \/ DOM event racing conditions, and should in theory save some\n+   * memory.\n+   *\n+   * Off by default for backwards compatibility.\n+   *\/\n+  useEventDelegation: false,\n+\n   \/**\n    * Check if a tag is reserved so that it cannot be registered as a\n    * component. This is platform-dependent and may be overwritten.\n\n---\n file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -1,5 +1,6 @@\n \/* @flow *\/\n \n+import config from 'core\/config'\n import { isDef, isUndef } from 'shared\/util'\n import { updateListeners } from 'core\/vdom\/helpers\/index'\n import { isIE, isPhantomJS, supportsPassive } from 'core\/util\/index'\n@@ -50,7 +51,12 @@ function add (\n   capture: boolean,\n   passive: boolean\n ) {\n-  if (!capture && !passive && delegateRE.test(name)) {\n+  if (\n+    !capture &&\n+    !passive &&\n+    config.useEventDelegation &&\n+    delegateRE.test(name)\n+  ) {\n     const count = eventCounts[name]\n     let store = target.__events\n     if (!count) {\n@@ -150,7 +156,7 @@ function remove (\n   _target?: HTMLElement\n ) {\n   const el: any = _target || target\n-  if (!capture && delegateRE.test(name)) {\n+  if (!capture && config.useEventDelegation && delegateRE.test(name)) {\n     el.__events[name] = null\n     if (--eventCounts[name] === 0) {\n       removeGlobalHandler(name)\n\n---\n file path A: test\/e2e\/specs\/async-edge-cases.html | file path B: test\/e2e\/specs\/async-edge-cases.html\n\n@@ -6,6 +6,10 @@\n     <script src=\"..\/..\/..\/dist\/vue.min.js\"><\/script>\n   <\/head>\n   <body>\n+    <script>\n+      \/\/ this is necessary to make these cases pass\n+      Vue.config.useEventDelegation = true\n+    <\/script>\n \n     <!-- #4510 click and change event on checkbox -->\n     <div id=\"case-1\">\n\n---\n file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -75,6 +75,7 @@ class Test extends Vue {\n     config.keyCodes = { esc: 27 };\n     config.ignoredElements = ['foo', \/^ion-\/];\n     config.async = false\n+    config.useEventDelegation = true\n   }\n \n   static testMethods() {\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -74,6 +74,7 @@ export interface VueConfiguration {\n   warnHandler(msg: string, vm: Vue, trace: string): void;\n   ignoredElements: (string | RegExp)[];\n   keyCodes: { [key: string]: number | number[] };\n+  useEventDelegation: boolean;\n   async: boolean;\n }\n \n\n\n###\n\n","completion":" feat(config): expose config.useEventDelegation and default to false\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -21,13 +21,14 @@ import {\n } from '..\/helpers'\n \n export const onRE = \/^@|^v-on:\/\n-export const dirRE = \/^v-|^@|^:\/\n+export const dirRE = \/^v-|^@|^:|^\\.\/\n export const forAliasRE = \/([\\s\\S]*?)\\s+(?:in|of)\\s+([\\s\\S]*)\/\n export const forIteratorRE = \/,([^,\\}\\]]*)(?:,([^,\\}\\]]*))?$\/\n const stripParensRE = \/^\\(|\\)$\/g\n \n const argRE = \/:(.*)$\/\n-export const bindRE = \/^:|^v-bind:\/\n+export const bindRE = \/^:|^\\.|^v-bind:\/\n+const propBindRE = \/^\\.\/\n const modifierRE = \/\\.[^.]+\/g\n \n const lineBreakRE = \/[\\r\\n]\/\n@@ -683,8 +684,12 @@ function processAttrs (el) {\n       \/\/ mark element as dynamic\n       el.hasBindings = true\n       \/\/ modifiers\n-      modifiers = parseModifiers(name)\n-      if (modifiers) {\n+      modifiers = parseModifiers(name.replace(dirRE, ''))\n+      \/\/ support .foo shorthand syntax for the .prop modifier\n+      if (propBindRE.test(name)) {\n+        (modifiers || (modifiers = {})).prop = true\n+        name = `.` + name.slice(1).replace(modifierRE, '')\n+      } else if (modifiers) {\n         name = name.replace(modifierRE, '')\n       }\n       if (bindRE.test(name)) { \/\/ v-bind\n\n---\n file path A: test\/unit\/features\/directives\/bind.spec.js | file path B: test\/unit\/features\/directives\/bind.spec.js\n\n@@ -133,6 +133,18 @@ describe('Directive v-bind', () => {\n     expect(vm.$el.getAttribute('id')).toBe(null)\n   })\n \n+  it('.prop modifier shorthand', () => {\n+    const vm = new Vue({\n+      template: '<div><span .text-content=\"foo\"><\/span><span .inner-html=\"bar\"><\/span><\/div>',\n+      data: {\n+        foo: 'hello',\n+        bar: '<span>qux<\/span>'\n+      }\n+    }).$mount()\n+    expect(vm.$el.children[0].textContent).toBe('hello')\n+    expect(vm.$el.children[1].innerHTML).toBe('<span>qux<\/span>')\n+  })\n+\n   it('.camel modifier', () => {\n     const vm = new Vue({\n       template: '<svg :view-box.camel=\"viewBox\"><\/svg>',\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -535,6 +535,16 @@ describe('parser', () => {\n     expect('The value for a v-bind expression cannot be empty. Found in \"v-bind:empty-msg\"').toHaveBeenWarned()\n   })\n \n+  it('v-bind.prop shorthand syntax', () => {\n+    const ast = parse('<div .id=\"foo\"><\/div>', baseOptions)\n+    expect(ast.props).toEqual([{ name: 'id', value: 'foo'}])\n+  })\n+\n+  it('v-bind.prop shorthand syntax w\/ modifiers', () => {\n+    const ast = parse('<div .id.mod=\"foo\"><\/div>', baseOptions)\n+    expect(ast.props).toEqual([{ name: 'id', value: 'foo'}])\n+  })\n+\n   \/\/ #6887\n   it('special case static attribute that must be props', () => {\n     const ast = parse('<video muted><\/video>', baseOptions)\n\n\n###\n\n","completion":" feat: support .property shorthand syntax for v-bind.prop modifier\n"}
{"prompt":" file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -48,10 +48,16 @@ export function FunctionalRenderContext (\n   this.children = children\n   this.parent = parent\n   this.listeners = data.on || emptyObject\n-  this.scopedSlots = data.scopedSlots || emptyObject\n   this.injections = resolveInject(options.inject, parent)\n   this.slots = () => resolveSlots(children, parent)\n \n+  Object.defineProperty(this, 'scopedSlots', {\n+    enumerable: true,\n+    get () {\n+      return normalizeScopedSlots(data.scopedSlots, this.slots())\n+    }\n+  })\n+\n   \/\/ support for compiled functional template\n   if (isCompiled) {\n     \/\/ exposing $options for renderStatic()\n\n---\n file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -21,6 +21,7 @@ export function normalizeScopedSlots (\n     }\n     res._normalized = true\n   }\n+  \/\/ expose normal slots on scopedSlots\n   if (normalSlots !== emptyObject) {\n     for (const key in normalSlots) {\n       res[key] = () => normalSlots[key]\n\n---\n file path A: test\/unit\/features\/options\/functional.spec.js | file path B: test\/unit\/features\/options\/functional.spec.js\n\n@@ -79,21 +79,25 @@ describe('Options functional', () => {\n     document.body.removeChild(vm.$el)\n   })\n \n-  it('should expose data.scopedSlots as scopedSlots', () => {\n+  it('should expose scopedSlots on render context', () => {\n     const vm = new Vue({\n-      template: '<div><wrap><p slot-scope=\"a\">{{ a }}<\/p><\/wrap><\/div>',\n+      template: '<div><wrap>foo<p slot=\"p\" slot-scope=\"a\">{{ a }}<\/p><\/wrap><\/div>',\n       components: {\n         wrap: {\n           functional: true,\n-          render (h, { scopedSlots, data }) {\n-            expect(data.scopedSlots).toBe(scopedSlots)\n-            return data.scopedSlots.default('a')\n+          render (h, { scopedSlots }) {\n+            return [\n+              \/\/ scoped\n+              scopedSlots.p('a'),\n+              \/\/ normal slot content should be exposed as well\n+              scopedSlots.default()\n+            ]\n           }\n         }\n       }\n     }).$mount()\n \n-    expect(vm.$el.textContent).toBe('a')\n+    expect(vm.$el.textContent).toBe('afoo')\n   })\n \n   it('should support returning more than one root node', () => {\n\n\n###\n\n","completion":" refactor: adjust #7941 for slots unification\n"}
{"prompt":" file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -48,6 +48,7 @@ export function FunctionalRenderContext (\n   this.children = children\n   this.parent = parent\n   this.listeners = data.on || emptyObject\n+  this.scopedSlots = data.scopedSlots || emptyObject\n   this.injections = resolveInject(options.inject, parent)\n   this.slots = () => resolveSlots(children, parent)\n \n\n---\n file path A: test\/unit\/features\/options\/functional.spec.js | file path B: test\/unit\/features\/options\/functional.spec.js\n\n@@ -79,6 +79,23 @@ describe('Options functional', () => {\n     document.body.removeChild(vm.$el)\n   })\n \n+  it('should expose data.scopedSlots as scopedSlots', () => {\n+    const vm = new Vue({\n+      template: '<div><wrap><p slot-scope=\"a\">{{ a }}<\/p><\/wrap><\/div>',\n+      components: {\n+        wrap: {\n+          functional: true,\n+          render (h, { scopedSlots, data }) {\n+            expect(data.scopedSlots).toBe(scopedSlots)\n+            return data.scopedSlots.default('a')\n+          }\n+        }\n+      }\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe('a')\n+  })\n+\n   it('should support returning more than one root node', () => {\n     const vm = new Vue({\n       template: `<div><test><\/test><\/div>`,\n\n---\n file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -1,5 +1,5 @@\n import { Vue, CreateElement, CombinedVueInstance } from \".\/vue\";\n-import { VNode, VNodeData, VNodeDirective } from \".\/vnode\";\n+import { VNode, VNodeData, VNodeDirective, ScopedSlot } from \".\/vnode\";\n \n type Constructor = {\n   new (...args: any[]): any;\n@@ -140,6 +140,7 @@ export interface RenderContext<Props=DefaultProps> {\n   data: VNodeData;\n   parent: Vue;\n   listeners: { [key: string]: Function | Function[] };\n+  scopedSlots: { [key: string]: ScopedSlot };\n   injections: any\n }\n \n\n---\n file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -381,6 +381,7 @@ Vue.component('functional-component', {\n     context.slots();\n     context.data;\n     context.parent;\n+    context.scopedSlots;\n     context.listeners.click;\n     return createElement(\"div\", {}, context.children);\n   }\n\n\n###\n\n","completion":" feat(functional): add scopedSlots to context in functional components (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/resolve-slots.js | file path B: src\/core\/instance\/render-helpers\/resolve-slots.js\n\n@@ -1,6 +1,7 @@\n \/* @flow *\/\n \n import type VNode from 'core\/vdom\/vnode'\n+import { emptyObject } from 'core\/util\/index'\n \n \/**\n  * Runtime helper for resolving raw children VNodes into a slot object.\n@@ -9,10 +10,10 @@ export function resolveSlots (\n   children: ?Array<VNode>,\n   context: ?Component\n ): { [key: string]: Array<VNode> } {\n-  const slots = {}\n-  if (!children) {\n-    return slots\n+  if (!children || !children.length) {\n+    return emptyObject\n   }\n+  const slots = {}\n   for (let i = 0, l = children.length; i < l; i++) {\n     const child = children[i]\n     const data = child.data\n\n---\n file path A: src\/core\/instance\/render.js | file path B: src\/core\/instance\/render.js\n\n@@ -64,7 +64,10 @@ export function renderMixin (Vue: Class<Component>) {\n     const { render, _parentVnode } = vm.$options\n \n     if (_parentVnode) {\n-      vm.$scopedSlots = normalizeScopedSlots(_parentVnode.data.scopedSlots)\n+      vm.$scopedSlots = normalizeScopedSlots(\n+        _parentVnode.data.scopedSlots,\n+        vm.$slots\n+      )\n     }\n \n     \/\/ set parent vnode. this allows render functions to have access\n\n---\n file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -57,7 +57,7 @@ export function FunctionalRenderContext (\n     this.$options = options\n     \/\/ pre-resolve slots for renderSlot()\n     this.$slots = this.slots()\n-    this.$scopedSlots = normalizeScopedSlots(data.scopedSlots)\n+    this.$scopedSlots = normalizeScopedSlots(data.scopedSlots, this.$slots)\n   }\n \n   if (options._scopeId) {\n\n---\n file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -2,19 +2,31 @@\n \n import { emptyObject } from 'core\/util\/index'\n \n-export function normalizeScopedSlots (slots: { [key: string]: Function } | void): any {\n+export function normalizeScopedSlots (\n+  slots: { [key: string]: Function } | void,\n+  normalSlots: { [key: string]: Array<VNode> }\n+): any {\n+  let res\n   if (!slots) {\n-    return emptyObject\n+    if (normalSlots === emptyObject) {\n+      return emptyObject\n+    }\n+    res = {}\n   } else if (slots._normalized) {\n     return slots\n   } else {\n-    const res = {}\n+    res = {}\n     for (const key in slots) {\n       res[key] = normalizeScopedSlot(slots[key])\n     }\n     res._normalized = true\n-    return res\n   }\n+  if (normalSlots !== emptyObject) {\n+    for (const key in normalSlots) {\n+      res[key] = () => normalSlots[key]\n+    }\n+  }\n+  return res\n }\n \n function normalizeScopedSlot(fn: Function) {\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -455,6 +455,24 @@ describe('Component scoped slot', () => {\n     expect(vm.$el.outerHTML).toBe('<span>hello<\/span>')\n   })\n \n+  \/\/ new in 2.6, unifying all slots as functions\n+  it('non-scoped slots should also be available on $scopedSlots', () => {\n+    const vm = new Vue({\n+      template: `<foo>before <div slot=\"bar\">{{ $slot.msg }}<\/div> after<\/foo>`,\n+      components: {\n+        foo: {\n+          render(h) {\n+            return h('div', [\n+              this.$scopedSlots.default(),\n+              this.$scopedSlots.bar({ msg: 'hi' })\n+            ])\n+          }\n+        }\n+      }\n+    }).$mount()\n+    expect(vm.$el.innerHTML).toBe(`before  after<div>hi<\/div>`)\n+  })\n+\n   \/\/ #4779\n   it('should support dynamic slot target', done => {\n     const Child = {\n\n\n###\n\n","completion":" feat(core): expose all slots on $scopedSlots as functions\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -27,7 +27,7 @@ export class CodegenState {\n     this.dataGenFns = pluckModuleFunction(options.modules, 'genData')\n     this.directives = extend(extend({}, baseDirectives), options.directives)\n     const isReservedTag = options.isReservedTag || no\n-    this.maybeComponent = (el: ASTElement) => !(isReservedTag(el.tag) && !el.component)\n+    this.maybeComponent = (el: ASTElement) => el.component || !isReservedTag(el.tag)\n     this.onceId = 0\n     this.staticRenderFns = []\n     this.pre = false\n\n\n###\n\n","completion":" refactor(codegen): simplify conditions\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -97,6 +97,40 @@ export function parse (\n   }\n \n   function closeElement (element) {\n+    if (!inVPre && !element.processed) {\n+      element = processElement(element, options, currentParent)\n+    }\n+    \/\/ tree management\n+    if (!stack.length && element !== root) {\n+      \/\/ allow root elements with v-if, v-else-if and v-else\n+      if (root.if && (element.elseif || element.else)) {\n+        if (process.env.NODE_ENV !== 'production') {\n+          checkRootConstraints(element)\n+        }\n+        addIfCondition(root, {\n+          exp: element.elseif,\n+          block: element\n+        })\n+      } else if (process.env.NODE_ENV !== 'production') {\n+        warnOnce(\n+          `Component template should contain exactly one root element. ` +\n+          `If you are using v-if on multiple elements, ` +\n+          `use v-else-if to chain them instead.`,\n+          { start: element.start }\n+        )\n+      }\n+    }\n+    if (currentParent && !element.forbidden) {\n+      if (element.elseif || element.else) {\n+        processIfConditions(element, currentParent)\n+      } else if (element.slotScope) { \/\/ scoped slot\n+        const name = element.slotTarget || '\"default\"'\n+        ;(currentParent.scopedSlots || (currentParent.scopedSlots = {}))[name] = element\n+      } else {\n+        currentParent.children.push(element)\n+        element.parent = currentParent\n+      }\n+    }\n     \/\/ check pre state\n     if (element.pre) {\n       inVPre = false\n@@ -110,6 +144,23 @@ export function parse (\n     }\n   }\n \n+  function checkRootConstraints (el) {\n+    if (el.tag === 'slot' || el.tag === 'template') {\n+      warnOnce(\n+        `Cannot use <${el.tag}> as component root element because it may ` +\n+        'contain multiple nodes.',\n+        { start: el.start }\n+      )\n+    }\n+    if (el.attrsMap.hasOwnProperty('v-for')) {\n+      warnOnce(\n+        'Cannot use v-for on stateful component root element because ' +\n+        'it renders multiple elements.',\n+        el.rawAttrsMap['v-for']\n+      )\n+    }\n+  }\n+\n   parseHTML(template, {\n     warn,\n     expectHTML: options.expectHTML,\n@@ -174,62 +225,15 @@ export function parse (\n         processFor(element)\n         processIf(element)\n         processOnce(element)\n-        \/\/ element-scope stuff\n-        processElement(element, options)\n       }\n \n-      function checkRootConstraints (el) {\n-        if (process.env.NODE_ENV !== 'production') {\n-          if (el.tag === 'slot' || el.tag === 'template') {\n-            warnOnce(\n-              `Cannot use <${el.tag}> as component root element because it may ` +\n-              'contain multiple nodes.',\n-              { start: el.start }\n-            )\n-          }\n-          if (el.attrsMap.hasOwnProperty('v-for')) {\n-            warnOnce(\n-              'Cannot use v-for on stateful component root element because ' +\n-              'it renders multiple elements.',\n-              el.rawAttrsMap['v-for']\n-            )\n-          }\n-        }\n-      }\n-\n-      \/\/ tree management\n       if (!root) {\n         root = element\n-        checkRootConstraints(root)\n-      } else if (!stack.length) {\n-        \/\/ allow root elements with v-if, v-else-if and v-else\n-        if (root.if && (element.elseif || element.else)) {\n-          checkRootConstraints(element)\n-          addIfCondition(root, {\n-            exp: element.elseif,\n-            block: element\n-          })\n-        } else if (process.env.NODE_ENV !== 'production') {\n-          warnOnce(\n-            `Component template should contain exactly one root element. ` +\n-            `If you are using v-if on multiple elements, ` +\n-            `use v-else-if to chain them instead.`,\n-            { start: element.start }\n-          )\n-        }\n-      }\n-      if (currentParent && !element.forbidden) {\n-        if (element.elseif || element.else) {\n-          processIfConditions(element, currentParent)\n-        } else if (element.slotScope) { \/\/ scoped slot\n-          currentParent.plain = false\n-          const name = element.slotTarget || '\"default\"'\n-          ;(currentParent.scopedSlots || (currentParent.scopedSlots = {}))[name] = element\n-        } else {\n-          currentParent.children.push(element)\n-          element.parent = currentParent\n+        if (process.env.NODE_ENV !== 'production') {\n+          checkRootConstraints(root)\n         }\n       }\n+\n       if (!unary) {\n         currentParent = element\n         stack.push(element)\n@@ -370,20 +374,29 @@ function processRawAttrs (el) {\n   }\n }\n \n-export function processElement (element: ASTElement, options: CompilerOptions) {\n+export function processElement (\n+  element: ASTElement,\n+  options: CompilerOptions,\n+  parent: ASTElement | undefined\n+) {\n   processKey(element)\n \n   \/\/ determine whether this is a plain element after\n   \/\/ removing structural attributes\n-  element.plain = !element.key && !element.attrsList.length\n+  element.plain = (\n+    !element.key &&\n+    !element.scopedSlots &&\n+    !element.attrsList.length\n+  )\n \n   processRef(element)\n-  processSlot(element)\n+  processSlot(element, parent)\n   processComponent(element)\n   for (let i = 0; i < transforms.length; i++) {\n     element = transforms[i](element, options) || element\n   }\n   processAttrs(element)\n+  return element\n }\n \n function processKey (el) {\n\n\n###\n\n","completion":" refactor(parser): move element self processing to after children\n"}
{"prompt":" file path A: test\/ssr\/ssr-bundle-render.spec.js | file path B: test\/ssr\/ssr-bundle-render.spec.js\n\n@@ -195,7 +195,7 @@ function createAssertions (runInNewContext) {\n   })\n \n   it('render with cache (nested)', done => {\n-    const cache = LRU({ maxAge: Infinity })\n+    const cache = new LRU({ maxAge: Infinity })\n     spyOn(cache, 'get').and.callThrough()\n     spyOn(cache, 'set').and.callThrough()\n     const options = {\n\n\n###\n\n","completion":" test: fix LRU upgrade\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-scoped-slots.js | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -2,7 +2,7 @@\n \n import { emptyObject } from 'core\/util\/index'\n \n-export function normalizeScopedSlots (slots: { [key: string]: Function }) {\n+export function normalizeScopedSlots (slots: { [key: string]: Function } | void): any {\n   if (!slots) {\n     return emptyObject\n   } else if (slots._normalized) {\n\n\n###\n\n","completion":" chore: fix types\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/resolve-slots.js | file path B: src\/core\/instance\/render-helpers\/resolve-slots.js\n\n@@ -55,10 +55,11 @@ export function resolveScopedSlots (\n ): { [key: string]: Function } {\n   res = res || {}\n   for (let i = 0; i < fns.length; i++) {\n-    if (Array.isArray(fns[i])) {\n-      resolveScopedSlots(fns[i], res)\n+    const slot = fns[i]\n+    if (Array.isArray(slot)) {\n+      resolveScopedSlots(slot, res)\n     } else {\n-      res[fns[i].key] = fns[i].fn\n+      res[slot.key] = slot.fn\n     }\n   }\n   return res\n\n---\n file path A: src\/core\/instance\/render.js | file path B: src\/core\/instance\/render.js\n\n@@ -11,6 +11,7 @@ import {\n import { createElement } from '..\/vdom\/create-element'\n import { installRenderHelpers } from '.\/render-helpers\/index'\n import { resolveSlots } from '.\/render-helpers\/resolve-slots'\n+import { normalizeScopedSlots } from '..\/vdom\/helpers\/normalize-scoped-slots'\n import VNode, { createEmptyVNode } from '..\/vdom\/vnode'\n \n import { isUpdatingChildComponent } from '.\/lifecycle'\n@@ -63,7 +64,7 @@ export function renderMixin (Vue: Class<Component>) {\n     const { render, _parentVnode } = vm.$options\n \n     if (_parentVnode) {\n-      vm.$scopedSlots = _parentVnode.data.scopedSlots || emptyObject\n+      vm.$scopedSlots = normalizeScopedSlots(_parentVnode.data.scopedSlots)\n     }\n \n     \/\/ set parent vnode. this allows render functions to have access\n@@ -89,6 +90,10 @@ export function renderMixin (Vue: Class<Component>) {\n         vnode = vm._vnode\n       }\n     }\n+    \/\/ if the returned array contains only a single node, allow it\n+    if (Array.isArray(vnode) && vnode.length === 1) {\n+      vnode = vnode[0]\n+    }\n     \/\/ return empty vnode in case the render function errored out\n     if (!(vnode instanceof VNode)) {\n       if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n\n---\n file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -5,6 +5,7 @@ import { createElement } from '.\/create-element'\n import { resolveInject } from '..\/instance\/inject'\n import { normalizeChildren } from '..\/vdom\/helpers\/normalize-children'\n import { resolveSlots } from '..\/instance\/render-helpers\/resolve-slots'\n+import { normalizeScopedSlots } from '..\/vdom\/helpers\/normalize-scoped-slots'\n import { installRenderHelpers } from '..\/instance\/render-helpers\/index'\n \n import {\n@@ -56,7 +57,7 @@ export function FunctionalRenderContext (\n     this.$options = options\n     \/\/ pre-resolve slots for renderSlot()\n     this.$slots = this.slots()\n-    this.$scopedSlots = data.scopedSlots || emptyObject\n+    this.$scopedSlots = normalizeScopedSlots(data.scopedSlots)\n   }\n \n   if (options._scopeId) {\n\n---\n file path A: None | file path B: src\/core\/vdom\/helpers\/normalize-scoped-slots.js\n\n@@ -0,0 +1,25 @@\n+\/* @flow *\/\n+\n+import { emptyObject } from 'core\/util\/index'\n+\n+export function normalizeScopedSlots (slots: { [key: string]: Function }) {\n+  if (!slots) {\n+    return emptyObject\n+  } else if (slots._normalized) {\n+    return slots\n+  } else {\n+    const res = {}\n+    for (const key in slots) {\n+      res[key] = normalizeScopedSlot(slots[key])\n+    }\n+    res._normalized = true\n+    return res\n+  }\n+}\n+\n+function normalizeScopedSlot(fn: Function) {\n+  return scope => {\n+    const res = fn(scope)\n+    return Array.isArray(res) ? res : res ? [res] : res\n+  }\n+}\n\n---\n file path A: test\/unit\/features\/component\/component-scoped-slot.spec.js | file path B: test\/unit\/features\/component\/component-scoped-slot.spec.js\n\n@@ -395,11 +395,9 @@ describe('Component scoped slot', () => {\n             return { msg: 'hello' }\n           },\n           render (h) {\n-            return h('div', [\n-              this.$scopedSlots.item({\n-                text: this.msg\n-              })\n-            ])\n+            return h('div', this.$scopedSlots.item({\n+              text: this.msg\n+            }))\n           }\n         }\n       }\n@@ -425,9 +423,7 @@ describe('Component scoped slot', () => {\n             return { msg: 'hello' }\n           },\n           render (h) {\n-            return h('div', [\n-              this.$scopedSlots.default({ msg: this.msg })\n-            ])\n+            return h('div', this.$scopedSlots.default({ msg: this.msg }))\n           }\n         }\n       }\n@@ -435,6 +431,30 @@ describe('Component scoped slot', () => {\n     expect(vm.$el.innerHTML).toBe('<span>hello<\/span>')\n   })\n \n+  it('render function usage (default, as root)', () => {\n+    const vm = new Vue({\n+      render (h) {\n+        return h('test', [\n+          props => h('span', [props.msg])\n+        ])\n+      },\n+      components: {\n+        test: {\n+          data () {\n+            return { msg: 'hello' }\n+          },\n+          render (h) {\n+            const res = this.$scopedSlots.default({ msg: this.msg })\n+            \/\/ all scoped slots should be normalized into arrays\n+            expect(Array.isArray(res)).toBe(true)\n+            return res\n+          }\n+        }\n+      }\n+    }).$mount()\n+    expect(vm.$el.outerHTML).toBe('<span>hello<\/span>')\n+  })\n+\n   \/\/ #4779\n   it('should support dynamic slot target', done => {\n     const Child = {\n\n---\n file path A: test\/unit\/features\/component\/component-slot.spec.js | file path B: test\/unit\/features\/component\/component-slot.spec.js\n\n@@ -327,11 +327,11 @@ describe('Component slot', () => {\n \n   it('warn if user directly returns array', () => {\n     new Vue({\n-      template: '<test><div><\/div><\/test>',\n+      template: '<test><div slot=\"foo\"><\/div><div slot=\"foo\"><\/div><\/test>',\n       components: {\n         test: {\n           render () {\n-            return this.$slots.default\n+            return this.$slots.foo\n           }\n         }\n       }\n\n\n###\n\n","completion":" fix(scoped-slots): ensure $scopedSlots calls always return Arrays\n"}
{"prompt":" file path A: test\/unit\/features\/directives\/for.spec.js | file path B: test\/unit\/features\/directives\/for.spec.js\n\n@@ -125,6 +125,26 @@ describe('Directive v-for', () => {\n   })\n \n   if (hasSymbol) {\n+    it('should render native iterables (Map)', () => {\n+      const vm = new Vue({\n+        template: `<div><span v-for=\"[key, val] in list\">{{key}},{{val}}<\/span><\/div>`,\n+        data: {\n+          list: new Map([[1, 'foo'], [2, 'bar']])\n+        }\n+      }).$mount()\n+      expect(vm.$el.innerHTML).toBe(`<span>1,foo<\/span><span>2,bar<\/span>`)\n+    })\n+\n+    it('should render native iterables (Set)', () => {\n+      const vm = new Vue({\n+        template: `<div><span v-for=\"val in list\">{{val}}<\/span><\/div>`,\n+        data: {\n+          list: new Set([1, 2, 3])\n+        }\n+      }).$mount()\n+      expect(vm.$el.innerHTML).toBe(`<span>1<\/span><span>2<\/span><span>3<\/span>`)\n+    })\n+\n     it('should render iterable of primitive values', done => {\n       const iterable = {\n         models: ['a', 'b', 'c'],\n\n\n###\n\n","completion":" test: test case for v-for native collection support\n"}
{"prompt":" file path A: test\/unit\/karma.cover.config.js | file path B: test\/unit\/karma.cover.config.js\n\n@@ -4,7 +4,13 @@ process.env.CHROME_BIN = require('puppeteer').executablePath()\n \n module.exports = function (config) {\n   const options = Object.assign(base, {\n-    browsers: ['ChromeHeadless'],\n+    browsers: ['ChromeHeadlessCI'],\n+    customLaunchers: {\n+      'ChromeHeadlessCI': {\n+        base: 'ChromeHeadless',\n+        flags: ['--no-sandbox']\n+      }\n+    },\n     reporters: ['mocha', 'coverage'],\n     coverageReporter: {\n       reporters: [\n\n\n###\n\n","completion":" build: fix chrome headless on CI\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -123,6 +123,7 @@\n     \"nightwatch\": \"^0.9.16\",\n     \"nightwatch-helpers\": \"^1.2.0\",\n     \"phantomjs-prebuilt\": \"^2.1.14\",\n+    \"puppeteer\": \"^1.11.0\",\n     \"resolve\": \"^1.3.3\",\n     \"rollup\": \"^0.68.1\",\n     \"rollup-plugin-alias\": \"^1.3.1\",\n@@ -135,8 +136,8 @@\n     \"selenium-server\": \"^2.53.1\",\n     \"serialize-javascript\": \"^1.3.0\",\n     \"shelljs\": \"^0.8.1\",\n-    \"typescript\": \"^3.1.3\",\n     \"terser\": \"^3.10.2\",\n+    \"typescript\": \"^3.1.3\",\n     \"webpack\": \"^4.22.0\",\n     \"weex-js-runtime\": \"^0.23.6\",\n     \"weex-styler\": \"^0.3.0\",\n\n---\n file path A: test\/unit\/karma.cover.config.js | file path B: test\/unit\/karma.cover.config.js\n\n@@ -1,8 +1,10 @@\n const base = require('.\/karma.base.config.js')\n \n+process.env.CHROME_BIN = require('puppeteer').executablePath()\n+\n module.exports = function (config) {\n   const options = Object.assign(base, {\n-    browsers: ['PhantomJS'],\n+    browsers: ['ChromeHeadless'],\n     reporters: ['mocha', 'coverage'],\n     coverageReporter: {\n       reporters: [\n@@ -13,7 +15,7 @@ module.exports = function (config) {\n     singleRun: true,\n     plugins: base.plugins.concat([\n       'karma-coverage',\n-      'karma-phantomjs-launcher'\n+      'karma-chrome-launcher'\n     ])\n   })\n \n\n---\n file path A: test\/unit\/karma.dev.config.js | file path B: test\/unit\/karma.dev.config.js\n\n@@ -1,11 +1,13 @@\n const base = require('.\/karma.base.config.js')\n \n+process.env.CHROME_BIN = require('puppeteer').executablePath()\n+\n module.exports = function (config) {\n   config.set(Object.assign(base, {\n-    browsers: ['PhantomJS'],\n+    browsers: ['ChromeHeadless'],\n     reporters: ['progress'],\n     plugins: base.plugins.concat([\n-      'karma-phantomjs-launcher'\n+      'karma-chrome-launcher'\n     ])\n   }))\n }\n\n---\n file path A: yarn.lock | file path B: yarn.lock\n\n@@ -3364,7 +3364,7 @@ extglob@^2.0.4:\n     snapdragon \"^0.8.1\"\n     to-regex \"^3.0.1\"\n \n-extract-zip@^1.6.5, extract-zip@^1.6.7:\n+extract-zip@^1.6.5, extract-zip@^1.6.6, extract-zip@^1.6.7:\n   version \"1.6.7\"\n   resolved \"https:\/\/registry.yarnpkg.com\/extract-zip\/-\/extract-zip-1.6.7.tgz#a840b4b8af6403264c8db57f4f1a74333ef81fe9\"\n   integrity sha1-qEC0uK9kAyZMjbV\/Txp0Mz74H+k=\n@@ -5596,7 +5596,7 @@ mime@^1.6.0:\n   resolved \"https:\/\/registry.yarnpkg.com\/mime\/-\/mime-1.6.0.tgz#32cd9e5c64553bd58d19a568af452acff04981b1\"\n   integrity sha512-x0Vn8spI+wuJ1O6S7gnbaQg8Pxh4NNHb7KSINmEWKiPE4RKOplvijn+NkmYmmRgP68mc70j2EbeTFRsrswaQeg==\n \n-mime@^2.3.1:\n+mime@^2.0.3, mime@^2.3.1:\n   version \"2.4.0\"\n   resolved \"https:\/\/registry.yarnpkg.com\/mime\/-\/mime-2.4.0.tgz#e051fd881358585f3279df333fe694da0bcffdd6\"\n   integrity sha512-ikBcWwyqXQSHKtciCcctu9YfPbFYZ4+gbHEmE0Q8jzcTYQg5dHCr3g2wwAZjPoJfQVXZq6KXAjpXOTf5\/cjT7w==\n@@ -6527,7 +6527,7 @@ progress@^1.1.8:\n   resolved \"https:\/\/registry.yarnpkg.com\/progress\/-\/progress-1.1.8.tgz#e260c78f6161cdd9b0e56cc3e0a85de17c7a57be\"\n   integrity sha1-4mDHj2Fhzdmw5WzD4Khd4Xx6V74=\n \n-progress@^2.0.0:\n+progress@^2.0.0, progress@^2.0.1:\n   version \"2.0.3\"\n   resolved \"https:\/\/registry.yarnpkg.com\/progress\/-\/progress-2.0.3.tgz#7e8cf8d8f5b8f239c1bc68beb4eb78567d572ef8\"\n   integrity sha512-7PiHtLll5LdnKIMw100I+8xJXR5gW2QwWYkT6iJva0bXitZKa\/XMrSbdmg3r2Xnaidz9Qumd0VPaMrZlF9V9sA==\n@@ -6551,6 +6551,11 @@ proxy-agent@2.0.0:\n     pac-proxy-agent \"1\"\n     socks-proxy-agent \"2\"\n \n+proxy-from-env@^1.0.0:\n+  version \"1.0.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/proxy-from-env\/-\/proxy-from-env-1.0.0.tgz#33c50398f70ea7eb96d21f7b817630a55791c7ee\"\n+  integrity sha1-M8UDmPcOp+uW0h97gXYwpVeRx+4=\n+\n prr@~1.0.1:\n   version \"1.0.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/prr\/-\/prr-1.0.1.tgz#d3fc114ba06995a45ec6893f484ceb1d78f5f476\"\n@@ -6618,6 +6623,20 @@ punycode@^2.1.0:\n   resolved \"https:\/\/registry.yarnpkg.com\/punycode\/-\/punycode-2.1.1.tgz#b58b010ac40c22c5657616c8d2c2c02c7bf479ec\"\n   integrity sha512-XRsRjdf+j5ml+y\/6GKHPZbrF\/8p2Yga0JPtdqTIY2Xe5ohJPD9saDJJLPvp9+NSBprVvevdXZybnj2cv8OEd0A==\n \n+puppeteer@^1.11.0:\n+  version \"1.11.0\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/puppeteer\/-\/puppeteer-1.11.0.tgz#63cdbe12b07275cd6e0b94bce41f3fcb20305770\"\n+  integrity sha512-iG4iMOHixc2EpzqRV+pv7o3GgmU2dNYEMkvKwSaQO\/vMZURakwSOn\/EYJ6OIRFYOque1qorzIBvrytPIQB3YzQ==\n+  dependencies:\n+    debug \"^4.1.0\"\n+    extract-zip \"^1.6.6\"\n+    https-proxy-agent \"^2.2.1\"\n+    mime \"^2.0.3\"\n+    progress \"^2.0.1\"\n+    proxy-from-env \"^1.0.0\"\n+    rimraf \"^2.6.1\"\n+    ws \"^6.1.0\"\n+\n q@1.4.1:\n   version \"1.4.1\"\n   resolved \"https:\/\/registry.yarnpkg.com\/q\/-\/q-1.4.1.tgz#55705bcd93c5f3673530c2c2cbc0c2b3addc286e\"\n@@ -8377,6 +8396,13 @@ write@^0.2.1:\n   dependencies:\n     mkdirp \"^0.5.1\"\n \n+ws@^6.1.0:\n+  version \"6.1.2\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/ws\/-\/ws-6.1.2.tgz#3cc7462e98792f0ac679424148903ded3b9c3ad8\"\n+  integrity sha512-rfUqzvz0WxmSXtJpPMX2EeASXabOrSMk1ruMOV3JBTBjo4ac2lDjGGsbQSyxj8Odhw5fBib8ZKEjDNvgouNKYw==\n+  dependencies:\n+    async-limiter \"~1.0.0\"\n+\n ws@~3.3.1:\n   version \"3.3.3\"\n   resolved \"https:\/\/registry.yarnpkg.com\/ws\/-\/ws-3.3.3.tgz#f1cf84fe2d5e901ebce94efaece785f187a228f2\"\n\n\n###\n\n","completion":" build: use headless chrome by default for unit tests\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/render-list.js | file path B: src\/core\/instance\/render-helpers\/render-list.js\n\n@@ -1,6 +1,6 @@\n \/* @flow *\/\n \n-import { isObject, isDef } from 'core\/util\/index'\n+import { isObject, isDef, hasSymbol } from 'core\/util\/index'\n \n \/**\n  * Runtime helper for rendering v-for lists.\n@@ -25,11 +25,21 @@ export function renderList (\n       ret[i] = render(i + 1, i)\n     }\n   } else if (isObject(val)) {\n-    keys = Object.keys(val)\n-    ret = new Array(keys.length)\n-    for (i = 0, l = keys.length; i < l; i++) {\n-      key = keys[i]\n-      ret[i] = render(val[key], key, i)\n+    if (hasSymbol && val[Symbol.iterator]) {\n+      ret = []\n+      const iterator: Iterator<any> = val[Symbol.iterator]()\n+      let result = iterator.next()\n+      while (!result.done) {\n+        ret.push(render(result.value, ret.length))\n+        result = iterator.next()\n+      }\n+    } else {\n+      keys = Object.keys(val)\n+      ret = new Array(keys.length)\n+      for (i = 0, l = keys.length; i < l; i++) {\n+        key = keys[i]\n+        ret[i] = render(val[key], key, i)\n+      }\n     }\n   }\n   if (!isDef(ret)) {\n\n---\n file path A: test\/unit\/features\/directives\/for.spec.js | file path B: test\/unit\/features\/directives\/for.spec.js\n\n@@ -1,4 +1,5 @@\n import Vue from 'vue'\n+import { hasSymbol } from 'core\/util\/env'\n \n describe('Directive v-for', () => {\n   it('should render array of primitive values', done => {\n@@ -123,6 +124,205 @@ describe('Directive v-for', () => {\n     }).then(done)\n   })\n \n+  if (hasSymbol) {\n+    it('should render iterable of primitive values', done => {\n+      const iterable = {\n+        models: ['a', 'b', 'c'],\n+        index: 0,\n+        [Symbol.iterator] () {\n+          const iterator = {\n+            index: 0,\n+            models: this.models,\n+            next () {\n+              if (this.index < this.models.length) {\n+                return { value: this.models[this.index++] }\n+              } else {\n+                return { done: true }\n+              }\n+            }\n+          }\n+          return iterator\n+        }\n+      }\n+      const vm = new Vue({\n+        template: `\n+          <div>\n+            <span v-for=\"item in list\">{{item}}<\/span>\n+          <\/div>\n+        `,\n+        data: {\n+          list: iterable\n+        }\n+      }).$mount()\n+      expect(vm.$el.innerHTML).toBe('<span>a<\/span><span>b<\/span><span>c<\/span>')\n+      Vue.set(vm.list.models, 0, 'd')\n+      waitForUpdate(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>d<\/span><span>b<\/span><span>c<\/span>')\n+        vm.list.models.push('d')\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>d<\/span><span>b<\/span><span>c<\/span><span>d<\/span>')\n+        vm.list.models.splice(1, 2)\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>d<\/span><span>d<\/span>')\n+        vm.list.models = ['x', 'y']\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>x<\/span><span>y<\/span>')\n+      }).then(done)\n+    })\n+\n+    it('should render iterable of primitive values with index', done => {\n+      const iterable = {\n+        models: ['a', 'b', 'c'],\n+        index: 0,\n+        [Symbol.iterator] () {\n+          const iterator = {\n+            index: 0,\n+            models: this.models,\n+            next () {\n+              if (this.index < this.models.length) {\n+                return { value: this.models[this.index++] }\n+              } else {\n+                return { done: true }\n+              }\n+            }\n+          }\n+          return iterator\n+        }\n+      }\n+\n+      const vm = new Vue({\n+        template: `\n+          <div>\n+            <span v-for=\"(item, i) in list\">{{i}}-{{item}}<\/span>\n+          <\/div>\n+        `,\n+        data: {\n+          list: iterable\n+        }\n+      }).$mount()\n+      expect(vm.$el.innerHTML).toBe('<span>0-a<\/span><span>1-b<\/span><span>2-c<\/span>')\n+      Vue.set(vm.list.models, 0, 'd')\n+      waitForUpdate(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>0-d<\/span><span>1-b<\/span><span>2-c<\/span>')\n+        vm.list.models.push('d')\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>0-d<\/span><span>1-b<\/span><span>2-c<\/span><span>3-d<\/span>')\n+        vm.list.models.splice(1, 2)\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>0-d<\/span><span>1-d<\/span>')\n+        vm.list.models = ['x', 'y']\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>0-x<\/span><span>1-y<\/span>')\n+      }).then(done)\n+    })\n+\n+    it('should render iterable of object values', done => {\n+      const iterable = {\n+        models: [\n+          { value: 'a' },\n+          { value: 'b' },\n+          { value: 'c' }\n+        ],\n+        index: 0,\n+        [Symbol.iterator] () {\n+          const iterator = {\n+            index: 0,\n+            models: this.models,\n+            next () {\n+              if (this.index < this.models.length) {\n+                return { value: this.models[this.index++] }\n+              } else {\n+                return { done: true }\n+              }\n+            }\n+          }\n+          return iterator\n+        }\n+      }\n+\n+      const vm = new Vue({\n+        template: `\n+          <div>\n+            <span v-for=\"item in list\">{{item.value}}<\/span>\n+          <\/div>\n+        `,\n+        data: {\n+          list: iterable\n+        }\n+      }).$mount()\n+      expect(vm.$el.innerHTML).toBe('<span>a<\/span><span>b<\/span><span>c<\/span>')\n+      Vue.set(vm.list.models, 0, { value: 'd' })\n+      waitForUpdate(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>d<\/span><span>b<\/span><span>c<\/span>')\n+        vm.list.models[0].value = 'e'\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>e<\/span><span>b<\/span><span>c<\/span>')\n+        vm.list.models.push({})\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>e<\/span><span>b<\/span><span>c<\/span><span><\/span>')\n+        vm.list.models.splice(1, 2)\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>e<\/span><span><\/span>')\n+        vm.list.models = [{ value: 'x' }, { value: 'y' }]\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>x<\/span><span>y<\/span>')\n+      }).then(done)\n+    })\n+\n+    it('should render iterable of object values with index', done => {\n+      const iterable = {\n+        models: [\n+          { value: 'a' },\n+          { value: 'b' },\n+          { value: 'c' }\n+        ],\n+        index: 0,\n+        [Symbol.iterator] () {\n+          const iterator = {\n+            index: 0,\n+            models: this.models,\n+            next () {\n+              if (this.index < this.models.length) {\n+                return { value: this.models[this.index++] }\n+              } else {\n+                return { done: true }\n+              }\n+            }\n+          }\n+          return iterator\n+        }\n+      }\n+\n+      const vm = new Vue({\n+        template: `\n+          <div>\n+            <span v-for=\"(item, i) in list\">{{i}}-{{item.value}}<\/span>\n+          <\/div>\n+        `,\n+        data: {\n+          list: iterable\n+        }\n+      }).$mount()\n+      expect(vm.$el.innerHTML).toBe('<span>0-a<\/span><span>1-b<\/span><span>2-c<\/span>')\n+      Vue.set(vm.list.models, 0, { value: 'd' })\n+      waitForUpdate(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>0-d<\/span><span>1-b<\/span><span>2-c<\/span>')\n+        vm.list.models[0].value = 'e'\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>0-e<\/span><span>1-b<\/span><span>2-c<\/span>')\n+        vm.list.models.push({})\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>0-e<\/span><span>1-b<\/span><span>2-c<\/span><span>3-<\/span>')\n+        vm.list.models.splice(1, 2)\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>0-e<\/span><span>1-<\/span>')\n+        vm.list.models = [{ value: 'x' }, { value: 'y' }]\n+      }).then(() => {\n+        expect(vm.$el.innerHTML).toBe('<span>0-x<\/span><span>1-y<\/span>')\n+      }).then(done)\n+    })\n+  }\n+\n   it('should render an Object', done => {\n     const vm = new Vue({\n       template: `\n\n\n###\n\n","completion":" feat(v-for): support iterables in v-for (#<issue-num>)\n"}
{"prompt":" file path A: flow\/compiler.js | file path B: flow\/compiler.js\n\n@@ -6,7 +6,8 @@ declare type CompilerOptions = {\n   isUnaryTag?: (tag: string) => ?boolean; \/\/ check if a tag is unary for the platform\n   canBeLeftOpenTag?: (tag: string) => ?boolean; \/\/ check if a tag can be left opened\n   isReservedTag?: (tag: string) => ?boolean; \/\/ check if a tag is a native for the platform\n-  preserveWhitespace?: boolean; \/\/ preserve whitespace between elements?\n+  preserveWhitespace?: boolean; \/\/ preserve whitespace between elements? (Deprecated)\n+  whitespace?: 'preserve' | 'condense'; \/\/ whitespace handling strategy\n   optimize?: boolean; \/\/ optimize static content?\n \n   \/\/ web specific\n\n---\n file path A: packages\/vue-template-compiler\/README.md | file path B: packages\/vue-template-compiler\/README.md\n\n@@ -33,12 +33,48 @@ Note the returned function code uses `with` and thus cannot be used in strict mo\n \n #### Options\n \n-It's possible to hook into the compilation process to support custom template features. **However, beware that by injecting custom compile-time modules, your templates will not work with other build tools built on standard built-in modules, e.g `vue-loader` and `vueify`.**\n+- `whitespace`\n+  - Type: `string`\n+  - Valid values: `'preserve' | 'condense'`\n+  - Default: `'preserve'`\n \n-The optional `options` object can contain the following:\n+  The default value `'preserve'` handles whitespaces as follows:\n+\n+  - A whitespace-only text node between element tags is condensed into a single space.\n+  - All other whitespaces are preserved as-is.\n+\n+  If set to `'condense'`:\n+\n+  - A whitespace-only text node between element tags is removed if it contains new lines. Otherwise, it is condensed into a single space.\n+  - Consecutive whitespaces inside a non-whitespace-only text node is condensed into a single space.\n+\n+  Using condense mode will result in smaller compiled code size and slightly improved performance. However, it will produce minor visual layout differences compared to plain HTML in certain cases.\n+\n+  **This option does not affect the `<pre>` tag.**\n+\n+  Example:\n+\n+  ``` html\n+  <!-- source -->\n+  <div>\n+    <span>\n+      foo\n+    <\/span>   <span>bar<\/span>\n+  <\/div>\n+\n+  <!-- whitespace: 'preserve' -->\n+  <div> <span>\n+    foo\n+    <\/span> <span>bar<\/span> <\/div>\n+\n+  <!-- whitespace: 'condense' -->\n+  <div><span> foo <\/span> <span>bar<\/span><\/div>\n+  ```\n \n - `modules`\n \n+  It's possible to hook into the compilation process to support custom template features. **However, beware that by injecting custom compile-time modules, your templates will not work with other build tools built on standard built-in modules, e.g `vue-loader` and `vueify`.**\n+\n   An array of compiler modules. For details on compiler modules, refer to the `ModuleOptions` type in [flow declarations](https:\/\/github.com\/vuejs\/vue\/blob\/dev\/flow\/compiler.js#L38-L45) and the [built-in modules](https:\/\/github.com\/vuejs\/vue\/tree\/dev\/src\/platforms\/web\/compiler\/modules).\n \n - `directives`\n@@ -59,9 +95,11 @@ The optional `options` object can contain the following:\n \n   Refer to the implementation of some [built-in compile-time directives](https:\/\/github.com\/vuejs\/vue\/tree\/dev\/src\/platforms\/web\/compiler\/directives).\n \n-- `preserveWhitespace`\n+- `preserveWhitespace` **Deprecated since 2.6**\n+  - Type: `boolean`\n+  - Default: `true`\n \n-  Defaults to `true`. This means the compiled render function preserves all whitespace characters between HTML tags. If set to `false`, whitespace between tags will be ignored. This can result in slightly better performance but may affect layout for inline elements.\n+  By default, the compiled render function preserves all whitespace characters between HTML tags. If set to `false`, whitespace between tags will be ignored. This can result in slightly better performance but may affect layout for inline elements.\n \n ---\n \n\n---\n file path A: packages\/vue-template-compiler\/types\/index.d.ts | file path B: packages\/vue-template-compiler\/types\/index.d.ts\n\n@@ -7,6 +7,7 @@ interface CompilerOptions {\n   modules?: ModuleOptions[];\n   directives?: Record<string, DirectiveFunction>;\n   preserveWhitespace?: boolean;\n+  whitespace?: 'preserve' | 'condense';\n }\n \n interface CompiledResult {\n\n---\n file path A: packages\/vue-template-compiler\/types\/test.ts | file path B: packages\/vue-template-compiler\/types\/test.ts\n\n@@ -10,6 +10,7 @@ import {\n \/\/ check compile options\n const compiled = compile(\"<div>hi<\/div>\", {\n   preserveWhitespace: false,\n+  whitespace: 'condense',\n   modules: [\n     {\n       preTransformNode: el => el,\n\n---\n file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -30,6 +30,9 @@ const argRE = \/:(.*)$\/\n export const bindRE = \/^:|^v-bind:\/\n const modifierRE = \/\\.[^.]+\/g\n \n+const lineBreakRE = \/[\\r\\n]\/\n+const whitespaceRE = \/\\s+\/g\n+\n const decodeHTMLCached = cached(he.decode)\n \n \/\/ configurable state\n@@ -79,6 +82,7 @@ export function parse (\n \n   const stack = []\n   const preserveWhitespace = options.preserveWhitespace !== false\n+  const whitespaceOption = options.whitespace\n   let root\n   let currentParent\n   let inVPre = false\n@@ -235,11 +239,13 @@ export function parse (\n     },\n \n     end (tag, start, end) {\n-      \/\/ remove trailing whitespace\n       const element = stack[stack.length - 1]\n-      const lastNode = element.children[element.children.length - 1]\n-      if (lastNode && lastNode.type === 3 && lastNode.text === ' ' && !inPre) {\n-        element.children.pop()\n+      if (!inPre) {\n+        \/\/ remove trailing whitespace node\n+        const lastNode = element.children[element.children.length - 1]\n+        if (lastNode && lastNode.type === 3 && lastNode.text === ' ') {\n+          element.children.pop()\n+        }\n       }\n       \/\/ pop stack\n       stack.length -= 1\n@@ -276,11 +282,27 @@ export function parse (\n         return\n       }\n       const children = currentParent.children\n-      text = inPre || text.trim()\n-        ? isTextTag(currentParent) ? text : decodeHTMLCached(text)\n-        \/\/ only preserve whitespace if its not right after a starting tag\n-        : preserveWhitespace && children.length ? ' ' : ''\n+      if (inPre || text.trim()) {\n+        text = isTextTag(currentParent) ? text : decodeHTMLCached(text)\n+      } else if (!children.length) {\n+        \/\/ remove the whitespace-only node right after an opening tag\n+        text = ''\n+      } else if (whitespaceOption) {\n+        if (whitespaceOption === 'condense') {\n+          \/\/ in condense mode, remove the whitespace node if it contains\n+          \/\/ line break, otherwise condense to a single space\n+          text = lineBreakRE.test(text) ? '' : ' '\n+        } else {\n+          text = ' '\n+        }\n+      } else {\n+        text = preserveWhitespace ? ' ' : ''\n+      }\n       if (text) {\n+        if (whitespaceOption === 'condense') {\n+          \/\/ condense consecutive whitespaces into single space\n+          text = text.replace(whitespaceRE, ' ')\n+        }\n         let res\n         let child: ?ASTNode\n         if (!inVPre && text !== ' ' && (res = parseText(text, delimiters))) {\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -757,4 +757,45 @@ describe('parser', () => {\n     const ast = parse(`<p>{{\\r\\nmsg\\r\\n}}<\/p>`, baseOptions)\n     expect(ast.children[0].expression).toBe('_s(msg)')\n   })\n+\n+  it('preserveWhitespace: false', () => {\n+    const options = extend({\n+      preserveWhitespace: false\n+    }, baseOptions)\n+\n+     const ast = parse('<p>\\n  Welcome to <b>Vue.js<\/b>    <i>world<\/i>  \\n  <span>.\\n  Have fun!\\n<\/span><\/p>', options)\n+    expect(ast.tag).toBe('p')\n+    expect(ast.children.length).toBe(4)\n+    expect(ast.children[0].type).toBe(3)\n+    expect(ast.children[0].text).toBe('\\n  Welcome to ')\n+    expect(ast.children[1].tag).toBe('b')\n+    expect(ast.children[1].children[0].text).toBe('Vue.js')\n+    expect(ast.children[2].tag).toBe('i')\n+    expect(ast.children[2].children[0].text).toBe('world')\n+    expect(ast.children[3].tag).toBe('span')\n+    expect(ast.children[3].children[0].text).toBe('.\\n  Have fun!\\n')\n+  })\n+\n+  it(`whitespace: 'condense'`, () => {\n+    const options = extend({\n+      whitespace: 'condense',\n+      \/\/ should be ignored when whitespace is specified\n+      preserveWhitespace: false\n+    }, baseOptions)\n+    const ast = parse('<p>\\n  Welcome to <b>Vue.js<\/b>    <i>world<\/i>  \\n  <span>.\\n  Have fun!\\n<\/span><\/p>', options)\n+    expect(ast.tag).toBe('p')\n+    expect(ast.children.length).toBe(5)\n+    expect(ast.children[0].type).toBe(3)\n+    expect(ast.children[0].text).toBe(' Welcome to ')\n+    expect(ast.children[1].tag).toBe('b')\n+    expect(ast.children[1].children[0].text).toBe('Vue.js')\n+    expect(ast.children[2].type).toBe(3)\n+    \/\/ should condense inline whitespace into single space\n+    expect(ast.children[2].text).toBe(' ')\n+    expect(ast.children[3].tag).toBe('i')\n+    expect(ast.children[3].children[0].text).toBe('world')\n+    \/\/ should have removed the whitespace node between tags that contains newlines\n+    expect(ast.children[4].tag).toBe('span')\n+    expect(ast.children[4].children[0].text).toBe('. Have fun! ')\n+  })\n })\n\n\n###\n\n","completion":" feat(compiler): add whitespace option, deprecate preserveWhitespace option\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -11,12 +11,11 @@\n \n import { makeMap, no } from 'shared\/util'\n import { isNonPhrasingTag } from 'web\/compiler\/util'\n+import { unicodeLetters } from 'core\/util\/lang'\n \n \/\/ Regular Expressions for parsing tags and attributes\n const attribute = \/^\\s*([^\\s\"'<>\\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?\/\n-\/\/ could use https:\/\/www.w3.org\/TR\/1999\/REC-xml-names-19990114\/#NT-QName\n-\/\/ but for Vue templates we can enforce a simple charset\n-const ncname = '[a-zA-Z_][\\\\w\\\\-\\\\.]*'\n+const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeLetters}]*`\n const qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\n const startTagOpen = new RegExp(`^<${qnameCapture}`)\n const startTagClose = \/^\\s*(\\\/?)>\/\n\n---\n file path A: src\/core\/util\/lang.js | file path B: src\/core\/util\/lang.js\n\n@@ -1,5 +1,12 @@\n \/* @flow *\/\n \n+\/**\n+ * unicode letters used for parsing html tags, component names and property paths.\n+ * using https:\/\/www.w3.org\/TR\/html53\/semantics-scripting.html#potentialcustomelementname\n+ * skipping \\u10000-\\uEFFFF due to it freezing up PhantomJS\n+ *\/\n+export const unicodeLetters = 'a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD'\n+\n \/**\n  * Check if a string starts with $ or _\n  *\/\n@@ -23,7 +30,7 @@ export function def (obj: Object, key: string, val: any, enumerable?: boolean) {\n \/**\n  * Parse simple path.\n  *\/\n-const bailRE = \/[^\\w.$]\/\n+const bailRE = new RegExp(`[^${unicodeLetters}.$]`)\n export function parsePath (path: string): any {\n   if (bailRE.test(path)) {\n     return\n\n---\n file path A: src\/core\/util\/options.js | file path B: src\/core\/util\/options.js\n\n@@ -2,9 +2,9 @@\n \n import config from '..\/config'\n import { warn } from '.\/debug'\n-import { nativeWatch } from '.\/env'\n import { set } from '..\/observer\/index'\n-import { hasSymbol } from '..\/util\/index'\n+import { unicodeLetters } from '.\/lang'\n+import { nativeWatch, hasSymbol } from '.\/env'\n \n import {\n   ASSET_TYPES,\n@@ -264,11 +264,10 @@ function checkComponents (options: Object) {\n }\n \n export function validateComponentName (name: string) {\n-  if (!\/^[a-zA-Z][\\w-]*$\/.test(name)) {\n+  if (!new RegExp(`^[a-zA-Z][\\\\-\\\\.0-9_${unicodeLetters}]*$`).test(name)) {\n     warn(\n       'Invalid component name: \"' + name + '\". Component names ' +\n-      'can only contain alphanumeric characters and the hyphen, ' +\n-      'and must start with a letter.'\n+      'should conform to valid custom element name in html5 specification.'\n     )\n   }\n   if (isBuiltInTag(name) || config.isReservedTag(name)) {\n\n---\n file path A: test\/unit\/features\/instance\/methods-data.spec.js | file path B: test\/unit\/features\/instance\/methods-data.spec.js\n\n@@ -26,6 +26,9 @@ describe('Instance methods data', () => {\n         data: {\n           a: {\n             b: 1\n+          },\n+          : {\n+            : 'ok'\n           }\n         },\n         methods: {\n@@ -108,6 +111,15 @@ describe('Instance methods data', () => {\n       expect(spy).toHaveBeenCalledWith(1)\n     })\n \n+    it('handler option in string', () => {\n+      vm.$watch('.', {\n+        handler: 'foo',\n+        immediate: true\n+      })\n+      expect(spy.calls.count()).toBe(1)\n+      expect(spy).toHaveBeenCalledWith('ok')\n+    })\n+\n     it('warn expression', () => {\n       vm.$watch('a + b', spy)\n       expect('Watcher only accepts simple dot-delimited paths').toHaveBeenWarned()\n\n---\n file path A: test\/unit\/features\/options\/name.spec.js | file path B: test\/unit\/features\/options\/name.spec.js\n\n@@ -15,7 +15,7 @@ describe('Options name', () => {\n     })\n \n     \/* eslint-disable *\/\n-    expect(`Invalid component name: \"Hyper*Vue\". Component names can only contain alphanumeric characters and the hyphen, and must start with a letter.`)\n+    expect(`Invalid component name: \"Hyper*Vue\".`)\n       .toHaveBeenWarned()\n     \/* eslint-enable *\/\n \n@@ -24,7 +24,7 @@ describe('Options name', () => {\n     })\n \n     \/* eslint-disable *\/\n-    expect(`Invalid component name: \"2Cool2BValid\". Component names can only contain alphanumeric characters and the hyphen, and must start with a letter.`)\n+    expect(`Invalid component name: \"2Cool2BValid\".`)\n       .toHaveBeenWarned()\n     \/* eslint-enable *\/\n   })\n@@ -37,4 +37,12 @@ describe('Options name', () => {\n     expect(SuperComponent.options.components['SuperVue']).toEqual(SuperComponent)\n     expect(SuperComponent.options.components['super-component']).toEqual(SuperComponent)\n   })\n+\n+  it('should allow all potential custom element name for component name including non-alphanumeric characters', () => {\n+    Vue.extend({\n+      name: 'my-'\n+    })\n+\n+    expect(`Invalid component name`).not.toHaveBeenWarned()\n+  })\n })\n\n\n###\n\n","completion":" feat(compiler\/watch): allow unicode characters in component names and watch paths (#<issue-num>)\n"}
{"prompt":" file path A: None | file path B: src\/compiler\/codeframe.js\n\n@@ -0,0 +1,48 @@\n+\/* @flow *\/\n+\n+const range = 2\n+\n+export function generateCodeFrame (\n+  source: string,\n+  start: number = 0,\n+  end: number = source.length\n+): string {\n+  const lines = source.split(\/\\r?\\n\/)\n+  let count = 0\n+  const res = []\n+  for (let i = 0; i < lines.length; i++) {\n+    count += lines[i].length + 1\n+    if (count >= start) {\n+      for (let j = i - range; j <= i + range || end > count; j++) {\n+        if (j < 0 || j >= lines.length) continue\n+        res.push(`${j + 1}${repeat(` `, 3 - String(j + 1).length)}|  ${lines[j]}`)\n+        const lineLength = lines[j].length\n+        if (j === i) {\n+          \/\/ push underline\n+          const pad = start - (count - lineLength) + 1\n+          const length = end > count ? lineLength - pad : end - start\n+          res.push(`   |  ` + repeat(` `, pad) + repeat(`^`, length))\n+        } else if (j > i) {\n+          if (end > count) {\n+            const length = Math.min(end - count, lineLength)\n+            res.push(`   |  ` + repeat(`^`, length))\n+          }\n+          count += lineLength + 1\n+        }\n+      }\n+      break\n+    }\n+  }\n+  return res.join('\\n')\n+}\n+\n+function repeat (str, n) {\n+  let result = ''\n+  while (true) { \/\/ eslint-disable-line\n+    if (n & 1) result += str\n+    n >>>= 1\n+    if (n <= 0) break\n+    str += str\n+  }\n+  return result\n+}\n\n---\n file path A: src\/compiler\/to-function.js | file path B: src\/compiler\/to-function.js\n\n@@ -2,6 +2,7 @@\n \n import { noop, extend } from 'shared\/util'\n import { warn as baseWarn, tip } from 'core\/util\/debug'\n+import { generateCodeFrame } from '.\/codeframe'\n \n type CompiledFunctionResult = {\n   render: Function;\n@@ -61,14 +62,28 @@ export function createCompileToFunctionFn (compile: Function): Function {\n     \/\/ check compilation errors\/tips\n     if (process.env.NODE_ENV !== 'production') {\n       if (compiled.errors && compiled.errors.length) {\n-        warn(\n-          `Error compiling template:\\n\\n${template}\\n\\n` +\n-          compiled.errors.map(e => `- ${e}`).join('\\n') + '\\n',\n-          vm\n-        )\n+        if (options.outputSourceRange) {\n+          compiled.errors.forEach(e => {\n+            warn(\n+              `Error compiling template:\\n\\n${e.msg}\\n\\n` +\n+              generateCodeFrame(template, e.start, e.end),\n+              vm\n+            )\n+          })\n+        } else {\n+          warn(\n+            `Error compiling template:\\n\\n${template}\\n\\n` +\n+            compiled.errors.map(e => `- ${e}`).join('\\n') + '\\n',\n+            vm\n+          )\n+        }\n       }\n       if (compiled.tips && compiled.tips.length) {\n-        compiled.tips.forEach(msg => tip(msg, vm))\n+        if (options.outputSourceRange) {\n+          compiled.tips.forEach(e => tip(e.msg, vm))\n+        } else {\n+          compiled.tips.forEach(msg => tip(msg, vm))\n+        }\n       }\n     }\n \n\n---\n file path A: src\/platforms\/web\/entry-runtime-with-compiler.js | file path B: src\/platforms\/web\/entry-runtime-with-compiler.js\n\n@@ -63,6 +63,7 @@ Vue.prototype.$mount = function (\n       }\n \n       const { render, staticRenderFns } = compileToFunctions(template, {\n+        outputSourceRange: process.env.NODE_ENV !== 'production',\n         shouldDecodeNewlines,\n         shouldDecodeNewlinesForHref,\n         delimiters: options.delimiters,\n\n---\n file path A: None | file path B: test\/unit\/modules\/compiler\/codeframe.spec.js\n\n@@ -0,0 +1,74 @@\n+import { generateCodeFrame } from 'compiler\/codeframe'\n+\n+describe('codeframe', () => {\n+  const source = `\n+<div>\n+  <template key=\"one\"><\/template>\n+  <ul>\n+    <li v-for=\"foobar\">hi<\/li>\n+  <\/ul>\n+  <template key=\"two\"><\/template>\n+<\/div>\n+    `.trim()\n+\n+  it('line near top', () => {\n+    const keyStart = source.indexOf(`key=\"one\"`)\n+    const keyEnd = keyStart + `key=\"one\"`.length\n+    expect(generateCodeFrame(source, keyStart, keyEnd)).toBe(`\n+1  |  <div>\n+2  |    <template key=\"one\"><\/template>\n+   |              ^^^^^^^^^\n+3  |    <ul>\n+4  |      <li v-for=\"foobar\">hi<\/li>\n+    `.trim())\n+  })\n+\n+  it('line in middle', () => {\n+    \/\/ should cover 5 lines\n+    const forStart = source.indexOf(`v-for=`)\n+    const forEnd = forStart + `v-for=\"foobar\"`.length\n+    expect(generateCodeFrame(source, forStart, forEnd)).toBe(`\n+2  |    <template key=\"one\"><\/template>\n+3  |    <ul>\n+4  |      <li v-for=\"foobar\">hi<\/li>\n+   |          ^^^^^^^^^^^^^^\n+5  |    <\/ul>\n+6  |    <template key=\"two\"><\/template>\n+    `.trim())\n+  })\n+\n+  it('line near bottom', () => {\n+    const keyStart = source.indexOf(`key=\"two\"`)\n+    const keyEnd = keyStart + `key=\"two\"`.length\n+    expect(generateCodeFrame(source, keyStart, keyEnd)).toBe(`\n+4  |      <li v-for=\"foobar\">hi<\/li>\n+5  |    <\/ul>\n+6  |    <template key=\"two\"><\/template>\n+   |              ^^^^^^^^^\n+7  |  <\/div>\n+    `.trim())\n+  })\n+\n+  it('multi-line highlights', () => {\n+    const source = `\n+<div attr=\"some\n+  multiline\n+attr\n+\">\n+<\/div>\n+    `.trim()\n+\n+    const attrStart = source.indexOf(`attr=`)\n+    const attrEnd = source.indexOf(`\">`) + 1\n+    expect(generateCodeFrame(source, attrStart, attrEnd)).toBe(`\n+1  |  <div attr=\"some\n+   |       ^^^^^^^^^^\n+2  |    multiline\n+   |  ^^^^^^^^^^^\n+3  |  attr\n+   |  ^^^^\n+4  |  \">\n+   |  ^\n+    `.trim())\n+  })\n+})\n\n\n###\n\n","completion":" feat(compiler): output codeframe in browser compiler\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -341,7 +341,8 @@ function processKey (el) {\n         if (iterator && iterator === exp && parent && parent.tag === 'transition-group') {\n           warn(\n             `Do not use v-for index as key on <transition-group> children, ` +\n-            `this is the same as not using keys.`\n+            `this is the same as not using keys.`,\n+            true \/* tip *\/\n           )\n         }\n       }\n\n\n###\n\n","completion":" fix: make transition-group key warning a tip to avoid breaking compilation\n"}
{"prompt":" file path A: test\/unit\/features\/directives\/bind.spec.js | file path B: test\/unit\/features\/directives\/bind.spec.js\n\n@@ -168,20 +168,25 @@ describe('Directive v-bind', () => {\n \n   it('.sync modifier with kebab case event', done => {\n     const vm = new Vue({\n-      template: `<test :foo-bar.sync=\"bar\"\/>`,\n+      template: `<test ref=\"test\" :foo-bar.sync=\"bar\"\/>`,\n       data: {\n         bar: 1\n       },\n       components: {\n         test: {\n           props: ['fooBar'],\n-          template: `<div @click=\"$emit('update:foo-bar', 2)\">{{ fooBar }}<\/div>`\n+          template: `<div>{{ fooBar }}<\/div>`,\n+          methods: {\n+            update () {\n+              this.$emit('update:foo-bar', 2)\n+            }\n+          }\n         }\n       }\n     }).$mount()\n \n     expect(vm.$el.textContent).toBe('1')\n-    triggerEvent(vm.$el, 'click')\n+    vm.$refs.test.update()\n     waitForUpdate(() => {\n       expect(vm.$el.textContent).toBe('2')\n     }).then(done)\n\n\n###\n\n","completion":" test: fix test case for #8297\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -5,7 +5,7 @@ import { parseHTML } from '.\/html-parser'\n import { parseText } from '.\/text-parser'\n import { parseFilters } from '.\/filter-parser'\n import { genAssignmentCode } from '..\/directives\/model'\n-import { extend, cached, no, camelize } from 'shared\/util'\n+import { extend, cached, no, camelize, hyphenate } from 'shared\/util'\n import { isIE, isEdge, isServerRendering } from 'core\/util\/env'\n \n import {\n@@ -524,7 +524,7 @@ function processComponent (el) {\n \n function processAttrs (el) {\n   const list = el.attrsList\n-  let i, l, name, rawName, value, modifiers, isProp\n+  let i, l, name, rawName, value, modifiers, isProp, syncGen\n   for (i = 0, l = list.length; i < l; i++) {\n     name = rawName = list[i].name\n     value = list[i].value\n@@ -558,11 +558,19 @@ function processAttrs (el) {\n             name = camelize(name)\n           }\n           if (modifiers.sync) {\n+            syncGen = genAssignmentCode(value, `$event`)\n             addHandler(\n               el,\n               `update:${camelize(name)}`,\n-              genAssignmentCode(value, `$event`)\n+              syncGen\n             )\n+            if (hyphenate(name) !== camelize(name)) {\n+              addHandler(\n+                el,\n+                `update:${hyphenate(name)}`,\n+                syncGen\n+              )\n+            }\n           }\n         }\n         if (isProp || (\n\n---\n file path A: test\/unit\/features\/directives\/bind.spec.js | file path B: test\/unit\/features\/directives\/bind.spec.js\n\n@@ -166,6 +166,27 @@ describe('Directive v-bind', () => {\n     }).then(done)\n   })\n \n+  it('.sync modifier with kebab case event', done => {\n+    const vm = new Vue({\n+      template: `<test :foo-bar.sync=\"bar\"\/>`,\n+      data: {\n+        bar: 1\n+      },\n+      components: {\n+        test: {\n+          props: ['fooBar'],\n+          template: `<div @click=\"$emit('update:foo-bar', 2)\">{{ fooBar }}<\/div>`\n+        }\n+      }\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe('1')\n+    triggerEvent(vm.$el, 'click')\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toBe('2')\n+    }).then(done)\n+  })\n+\n   it('bind object', done => {\n     const vm = new Vue({\n       template: '<input v-bind=\"test\">',\n\n\n###\n\n","completion":" feat: v-bind.sync also listens for kebab-case update event (#<issue-num>)\n"}
{"prompt":" file path A: src\/shared\/util.js | file path B: src\/shared\/util.js\n\n@@ -85,7 +85,7 @@ export function isPromise (val: any): boolean {\n export function toString (val: any): string {\n   return val == null\n     ? ''\n-    : typeof val === 'object'\n+    : Array.isArray(val) || (isPlainObject(val) && val.toString === _toString)\n       ? JSON.stringify(val, null, 2)\n       : String(val)\n }\n\n---\n file path A: test\/unit\/features\/directives\/html.spec.js | file path B: test\/unit\/features\/directives\/html.spec.js\n\n@@ -44,6 +44,12 @@ describe('Directive v-html', () => {\n       vm.a = {}\n     }).then(() => {\n       expect(vm.$el.innerHTML).toBe('{}')\n+      vm.a = { toString () { return 'foo' } }\n+    }).then(() => {\n+      expect(vm.$el.innerHTML).toBe('foo')\n+      vm.a = { toJSON () { return { foo: 'bar' } } }\n+    }).then(() => {\n+      expect(vm.$el.innerHTML).toBe('{\\n  \"foo\": \"bar\"\\n}')\n       vm.a = 123\n     }).then(() => {\n       expect(vm.$el.innerHTML).toBe('123')\n\n---\n file path A: test\/unit\/features\/directives\/text.spec.js | file path B: test\/unit\/features\/directives\/text.spec.js\n\n@@ -30,6 +30,12 @@ describe('Directive v-text', () => {\n       vm.a = {}\n     }).then(() => {\n       expect(vm.$el.innerHTML).toBe('{}')\n+      vm.a = { toString () { return 'foo' } }\n+    }).then(() => {\n+      expect(vm.$el.innerHTML).toBe('foo')\n+      vm.a = { toJSON () { return { foo: 'bar' } } }\n+    }).then(() => {\n+      expect(vm.$el.innerHTML).toBe('{\\n  \"foo\": \"bar\"\\n}')\n       vm.a = 123\n     }).then(() => {\n       expect(vm.$el.innerHTML).toBe('123')\n\n\n###\n\n","completion":" feat: support custom toString() in text interpolation and v-html (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/options.js | file path B: src\/core\/util\/options.js\n\n@@ -4,6 +4,7 @@ import config from '..\/config'\n import { warn } from '.\/debug'\n import { nativeWatch } from '.\/env'\n import { set } from '..\/observer\/index'\n+import { hasSymbol } from '..\/util\/index'\n \n import {\n   ASSET_TYPES,\n@@ -48,9 +49,15 @@ if (process.env.NODE_ENV !== 'production') {\n function mergeData (to: Object, from: ?Object): Object {\n   if (!from) return to\n   let key, toVal, fromVal\n-  const keys = Object.keys(from)\n+\n+  const keys = hasSymbol\n+    ? Reflect.ownKeys(from)\n+    : Object.keys(from)\n+\n   for (let i = 0; i < keys.length; i++) {\n     key = keys[i]\n+    \/\/ in case the object is already observed...\n+    if (key === '__ob__') continue\n     toVal = to[key]\n     fromVal = from[key]\n     if (!hasOwn(to, key)) {\n\n---\n file path A: test\/unit\/features\/options\/inject.spec.js | file path B: test\/unit\/features\/options\/inject.spec.js\n\n@@ -188,6 +188,32 @@ describe('Options provide\/inject', () => {\n       }).$mount()\n       expect(vm.$el.textContent).toBe('123')\n     })\n+\n+    it('should merge symbol provide from mixins (functions)', () => {\n+      const keyA = Symbol('foo')\n+      const keyB = Symbol('bar')\n+\n+      const mixinA = { provide: () => ({ [keyA]: 'foo' }) }\n+      const mixinB = { provide: () => ({ [keyB]: 'bar' }) }\n+      const child = {\n+        inject: {\n+          foo: keyA,\n+          bar: keyB\n+        },\n+        template: `<span\/>`,\n+        created () {\n+          injected = [this.foo, this.bar]\n+        }\n+      }\n+      new Vue({\n+        mixins: [mixinA, mixinB],\n+        render (h) {\n+          return h(child)\n+        }\n+      }).$mount()\n+\n+      expect(injected).toEqual(['foo', 'bar'])\n+    })\n   }\n \n   \/\/ GitHub issue #5223\n\n\n###\n\n","completion":" fix(provide\/inject): Merges symbol provides (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/inject.js | file path B: src\/core\/instance\/inject.js\n\n@@ -41,14 +41,13 @@ export function resolveInject (inject: any, vm: Component): ?Object {\n     \/\/ inject is :any because flow is not smart enough to figure out cached\n     const result = Object.create(null)\n     const keys = hasSymbol\n-      ? Reflect.ownKeys(inject).filter(key => {\n-        \/* istanbul ignore next *\/\n-        return Object.getOwnPropertyDescriptor(inject, key).enumerable\n-      })\n+      ? Reflect.ownKeys(inject)\n       : Object.keys(inject)\n \n     for (let i = 0; i < keys.length; i++) {\n       const key = keys[i]\n+      \/\/ #6574 in case the inject object is observed...\n+      if (key === '__ob__') continue\n       const provideKey = inject[key].from\n       let source = vm\n       while (source) {\n\n\n###\n\n","completion":" refactor: speed up injection resolution\n"}
{"prompt":" file path A: src\/sfc\/parser.js | file path B: src\/sfc\/parser.js\n\n@@ -83,7 +83,10 @@ export function parseComponent (\n   function end (tag: string, start: number) {\n     if (depth === 1 && currentBlock) {\n       currentBlock.end = start\n-      let text = deindent(content.slice(currentBlock.start, currentBlock.end))\n+      let text = content.slice(currentBlock.start, currentBlock.end)\n+      if (options.deindent !== false) {\n+        text = deindent(text)\n+      }\n       \/\/ pad content so that linters and pre-processors can output correct\n       \/\/ line numbers in errors and warnings\n       if (currentBlock.type !== 'template' && options.pad) {\n\n---\n file path A: test\/unit\/modules\/sfc\/sfc-parser.spec.js | file path B: test\/unit\/modules\/sfc\/sfc-parser.spec.js\n\n@@ -55,6 +55,33 @@ describe('Single File Component parser', () => {\n     expect(res.template.content.trim()).toBe('<div><template v-if=\"ok\">hi<\/template><\/div>')\n   })\n \n+  it('deindent content', () => {\n+    const content = `\n+      <template>\n+        <div><\/div>\n+      <\/template>\n+      <script>\n+        export default {}\n+      <\/script>\n+      <style>\n+        h1 { color: red }\n+      <\/style>\n+    `\n+    const deindentDefault = parseComponent(content.trim(), { pad: false })\n+    const deindentEnabled = parseComponent(content.trim(), { pad: false, deindent: true })\n+    const deindentDisabled = parseComponent(content.trim(), { pad: false, deindent: false })\n+\n+    expect(deindentDefault.template.content).toBe('\\n<div><\/div>\\n')\n+    expect(deindentDefault.script.content).toBe('\\nexport default {}\\n')\n+    expect(deindentDefault.styles[0].content).toBe('\\nh1 { color: red }\\n')\n+    expect(deindentEnabled.template.content).toBe('\\n<div><\/div>\\n')\n+    expect(deindentEnabled.script.content).toBe('\\nexport default {}\\n')\n+    expect(deindentEnabled.styles[0].content).toBe('\\nh1 { color: red }\\n')\n+    expect(deindentDisabled.template.content).toBe('\\n        <div><\/div>\\n      ')\n+    expect(deindentDisabled.script.content).toBe('\\n        export default {}\\n      ')\n+    expect(deindentDisabled.styles[0].content).toBe('\\n        h1 { color: red }\\n      ')\n+  })\n+\n   it('pad content', () => {\n     const content = `\n       <template>\n\n\n###\n\n","completion":" feat(compiler): support deindent: false in vue-template-compiler (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/dom-props.js | file path B: src\/platforms\/web\/runtime\/modules\/dom-props.js\n\n@@ -1,6 +1,9 @@\n \/* @flow *\/\n \n import { isDef, isUndef, extend, toNumber } from 'shared\/util'\n+import { isSVG } from 'web\/util\/index'\n+\n+let svgContainer\n \n function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n   if (isUndef(oldVnode.data.domProps) && isUndef(vnode.data.domProps)) {\n@@ -55,6 +58,17 @@ function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n       if (shouldUpdateValue(elm, strCur)) {\n         elm.value = strCur\n       }\n+    } else if (key === 'innerHTML' && isSVG(elm.tagName) && isUndef(elm.innerHTML)) {\n+      \/\/ IE doesn't support innerHTML for SVG elements\n+      svgContainer = svgContainer || document.createElement('div')\n+      svgContainer.innerHTML = `<svg>${cur}<\/svg>`\n+      const svg = svgContainer.firstChild\n+      while (elm.firstChild) {\n+        elm.removeChild(elm.firstChild)\n+      }\n+      while (svg.firstChild) {\n+        elm.appendChild(svg.firstChild)\n+      }\n     } else {\n       elm[key] = cur\n     }\n\n\n###\n\n","completion":" feat: support v-html for SVG elements (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/index.js | file path B: src\/platforms\/web\/runtime\/index.js\n\n@@ -4,7 +4,7 @@ import Vue from 'core\/index'\n import config from 'core\/config'\n import { extend, noop } from 'shared\/util'\n import { mountComponent } from 'core\/instance\/lifecycle'\n-import { devtools, inBrowser, isChrome } from 'core\/util\/index'\n+import { devtools, inBrowser } from 'core\/util\/index'\n \n import {\n   query,\n@@ -51,8 +51,7 @@ if (inBrowser) {\n         devtools.emit('init', Vue)\n       } else if (\n         process.env.NODE_ENV !== 'production' &&\n-        process.env.NODE_ENV !== 'test' &&\n-        isChrome\n+        process.env.NODE_ENV !== 'test'\n       ) {\n         console[console.info ? 'info' : 'log'](\n           'Download the Vue Devtools extension for a better development experience:\\n' +\n\n\n###\n\n","completion":" fix(runtime): DevTools recommendation shows for all browsers (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/create-renderer.js | file path B: src\/server\/create-renderer.js\n\n@@ -29,6 +29,7 @@ export type RenderOptions = {\n   shouldPreload?: Function;\n   shouldPrefetch?: Function;\n   clientManifest?: ClientManifest;\n+  serializer?: Function;\n   runInNewContext?: boolean | 'once';\n };\n \n@@ -41,7 +42,8 @@ export function createRenderer ({\n   cache,\n   shouldPreload,\n   shouldPrefetch,\n-  clientManifest\n+  clientManifest,\n+  serializer\n }: RenderOptions = {}): Renderer {\n   const render = createRenderFunction(modules, directives, isUnaryTag, cache)\n   const templateRenderer = new TemplateRenderer({\n@@ -49,7 +51,8 @@ export function createRenderer ({\n     inject,\n     shouldPreload,\n     shouldPrefetch,\n-    clientManifest\n+    clientManifest,\n+    serializer\n   })\n \n   return {\n\n---\n file path A: src\/server\/template-renderer\/index.js | file path B: src\/server\/template-renderer\/index.js\n\n@@ -16,6 +16,7 @@ type TemplateRendererOptions = {\n   clientManifest?: ClientManifest;\n   shouldPreload?: (file: string, type: string) => boolean;\n   shouldPrefetch?: (file: string, type: string) => boolean;\n+  serializer?: Function;\n };\n \n export type ClientManifest = {\n@@ -47,6 +48,7 @@ export default class TemplateRenderer {\n   preloadFiles: Array<Resource>;\n   prefetchFiles: Array<Resource>;\n   mapFiles: AsyncFileMapper;\n+  serialize: Function;\n \n   constructor (options: TemplateRendererOptions) {\n     this.options = options\n@@ -57,6 +59,11 @@ export default class TemplateRenderer {\n       ? parseTemplate(options.template)\n       : null\n \n+    \/\/ function used to serialize initial state JSON\n+    this.serialize = options.serializer || (state => {\n+      return serialize(state, { isJSON: true })\n+    })\n+\n     \/\/ extra functionality with client manifest\n     if (options.clientManifest) {\n       const clientManifest = this.clientManifest = options.clientManifest\n@@ -194,7 +201,7 @@ export default class TemplateRenderer {\n       contextKey = 'state',\n       windowKey = '__INITIAL_STATE__'\n     } = options || {}\n-    const state = serialize(context[contextKey], { isJSON: true })\n+    const state = this.serialize(context[contextKey])\n     const autoRemove = process.env.NODE_ENV === 'production'\n       ? ';(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());'\n       : ''\n\n---\n file path A: test\/ssr\/ssr-template.spec.js | file path B: test\/ssr\/ssr-template.spec.js\n\n@@ -489,5 +489,27 @@ describe('SSR: template option', () => {\n         done()\n       })\n     })\n+\n+    it('renderToString + custom serializer', done => {\n+      const expected = `{\"foo\":123}`\n+      const renderer = createRenderer({\n+        template: defaultTemplate,\n+        serializer: () => expected\n+      })\n+\n+      const context = {\n+        state: { a: 1 }\n+      }\n+\n+      renderer.renderToString(new Vue({\n+        template: '<div>hi<\/div>'\n+      }), context, (err, res) => {\n+        expect(err).toBeNull()\n+        expect(res).toContain(\n+          `<script>window.__INITIAL_STATE__=${expected}<\/script>`\n+        )\n+        done()\n+      })\n+    })\n   }\n })\n\n\n###\n\n","completion":" feat(ssr): add custom state serializer option\n"}
{"prompt":" file path A: None | file path B: test\/ssr\/fixtures\/cache-opt-out.js\n\n@@ -0,0 +1,16 @@\n+import Vue from '..\/..\/..\/dist\/vue.runtime.common.js'\n+\n+const app = {\n+  name: 'app',\n+  props: ['id'],\n+  serverCacheKey: props => props.id === 1 ? false : props.id,\n+  render (h) {\n+    return h('div', '\/test')\n+  }\n+}\n+\n+export default () => {\n+  return Promise.resolve(new Vue({\n+    render: h => h(app, { props: { id: 1 }})\n+  }))\n+}\n\n---\n file path A: test\/ssr\/ssr-bundle-render.spec.js | file path B: test\/ssr\/ssr-bundle-render.spec.js\n\n@@ -231,6 +231,44 @@ function createAssertions (runInNewContext) {\n     })\n   })\n \n+  it('render with cache (opt-out)', done => {\n+    const cache = {}\n+    const get = jasmine.createSpy('get')\n+    const set = jasmine.createSpy('set')\n+    const options = {\n+      runInNewContext,\n+      cache: {\n+        \/\/ async\n+        get: (key, cb) => {\n+          setTimeout(() => {\n+            get(key)\n+            cb(cache[key])\n+          }, 0)\n+        },\n+        set: (key, val) => {\n+          set(key, val)\n+          cache[key] = val\n+        }\n+      }\n+    }\n+    createRenderer('cache-opt-out.js', options, renderer => {\n+      const expected = '<div data-server-rendered=\"true\">\/test<\/div>'\n+      renderer.renderToString((err, res) => {\n+        expect(err).toBeNull()\n+        expect(res).toBe(expected)\n+        expect(get).not.toHaveBeenCalled()\n+        expect(set).not.toHaveBeenCalled()\n+        renderer.renderToString((err, res) => {\n+          expect(err).toBeNull()\n+          expect(res).toBe(expected)\n+          expect(get).not.toHaveBeenCalled()\n+          expect(set).not.toHaveBeenCalled()\n+          done()\n+        })\n+      })\n+    })\n+  })\n+\n   it('renderToString (bundle format with code split)', done => {\n     createRenderer('split.js', { runInNewContext, asBundle: true }, renderer => {\n       const context = { url: '\/test' }\n\n\n###\n\n","completion":" test: test for #8790\n"}
{"prompt":" file path A: src\/server\/render.js | file path B: src\/server\/render.js\n\n@@ -114,7 +114,12 @@ function renderComponent (node, isRoot, context) {\n   const registerComponent = registerComponentForCache(Ctor.options, write)\n \n   if (isDef(getKey) && isDef(cache) && isDef(name)) {\n-    const key = name + '::' + getKey(node.componentOptions.propsData)\n+    const rawKey = getKey(node.componentOptions.propsData)\n+    if (rawKey === false) {\n+      renderComponentInner(node, isRoot, context)\n+      return\n+    }\n+    const key = name + '::' + rawKey\n     const { has, get } = context\n     if (isDef(has)) {\n       has(key, hit => {\n@@ -188,7 +193,7 @@ function renderComponentInner (node, isRoot, context) {\n     context.activeInstance\n   )\n   normalizeRender(child)\n-  \n+\n   const resolve = () => {\n     const childNode = child._render()\n     childNode.parent = node\n\n\n###\n\n","completion":" feat(ssr): allow opting-out of caching by returning false in serverCacheKey\n"}
{"prompt":" file path A: src\/server\/template-renderer\/index.js | file path B: src\/server\/template-renderer\/index.js\n\n@@ -198,8 +198,9 @@ export default class TemplateRenderer {\n     const autoRemove = process.env.NODE_ENV === 'production'\n       ? ';(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());'\n       : ''\n+    const nonceAttr = context.nonce ? ` nonce=\"${context.nonce}\"` : ''\n     return context[contextKey]\n-      ? `<script>window.${windowKey}=${state}${autoRemove}<\/script>`\n+      ? `<script${nonceAttr}>window.${windowKey}=${state}${autoRemove}<\/script>`\n       : ''\n   }\n \n\n---\n file path A: test\/ssr\/ssr-template.spec.js | file path B: test\/ssr\/ssr-template.spec.js\n\n@@ -387,5 +387,32 @@ describe('SSR: template option', () => {\n         done()\n       })\n     })\n+\n+    it('renderToString + nonce', done => {\n+      const interpolateTemplate = `<html><head><title>hello<\/title><\/head><body><!--vue-ssr-outlet--><\/body><\/html>`\n+      const renderer = createRenderer({\n+        template: interpolateTemplate\n+      })\n+\n+      const context = {\n+        state: { a: 1 },\n+        nonce: '4AEemGb0xJptoIGFP3Nd'\n+      }\n+\n+      renderer.renderToString(new Vue({\n+        template: '<div>hi<\/div>'\n+      }), context, (err, res) => {\n+        expect(err).toBeNull()\n+        expect(res).toContain(\n+          `<html><head>` +\n+          `<title>hello<\/title>` +\n+          `<\/head><body>` +\n+          `<div data-server-rendered=\"true\">hi<\/div>` +\n+          `<script nonce=\"4AEemGb0xJptoIGFP3Nd\">window.__INITIAL_STATE__={\"a\":1}<\/script>` +\n+          `<\/body><\/html>`\n+        )\n+        done()\n+      })\n+    })\n   }\n })\n\n\n###\n\n","completion":" feat(ssr): Add 'nonce' option to context for ssr outlet script (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/events.js | file path B: src\/compiler\/codegen\/events.js\n\n@@ -1,7 +1,7 @@\n \/* @flow *\/\n \n const fnExpRE = \/^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function\\s*\\(\/\n-const fnInvokeRE = \/\\([^)]*?\\)$\/\n+const fnInvokeRE = \/\\([^)]*?\\);*$\/\n const simplePathRE = \/^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$\/\n \n \/\/ KeyboardEvent.keyCode aliases\n@@ -95,7 +95,7 @@ function genHandler (\n \n   const isMethodPath = simplePathRE.test(handler.value)\n   const isFunctionExpression = fnExpRE.test(handler.value)\n-  const isFunctionInvocation = fnInvokeRE.test(handler.value)\n+  const isFunctionInvocation = simplePathRE.test(handler.value.replace(fnInvokeRE, ''))\n \n   if (!handler.modifiers) {\n     if (isMethodPath || isFunctionExpression) {\n@@ -106,7 +106,7 @@ function genHandler (\n       return genWeexHandler(handler.params, handler.value)\n     }\n     return `function($event){${\n-      isFunctionInvocation ? `return (${handler.value})` : handler.value\n+      isFunctionInvocation ? `return ${handler.value}` : handler.value\n     }}` \/\/ inline statement\n   } else {\n     let code = ''\n@@ -143,7 +143,7 @@ function genHandler (\n       : isFunctionExpression\n         ? `return (${handler.value})($event)`\n         : isFunctionInvocation\n-          ? `return (${handler.value})`\n+          ? `return ${handler.value}`\n           : handler.value\n     \/* istanbul ignore if *\/\n     if (__WEEX__ && handler.params) {\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -304,32 +304,32 @@ describe('codegen', () => {\n   it('generate events with method call', () => {\n     assertCodegen(\n       '<input @input=\"onInput($event);\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){onInput($event);}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){return onInput($event);}}})}`\n     )\n     \/\/ empty arguments\n     assertCodegen(\n       '<input @input=\"onInput();\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){onInput();}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){return onInput();}}})}`\n     )\n     \/\/ without semicolon\n     assertCodegen(\n       '<input @input=\"onInput($event)\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){return onInput($event)}}})}`\n     )\n     \/\/ multiple args\n     assertCodegen(\n       '<input @input=\"onInput($event, \\'abc\\', 5);\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){onInput($event, 'abc', 5);}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){return onInput($event, 'abc', 5);}}})}`\n     )\n     \/\/ expression in args\n     assertCodegen(\n       '<input @input=\"onInput($event, 2+2);\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){onInput($event, 2+2);}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){return onInput($event, 2+2);}}})}`\n     )\n     \/\/ tricky symbols in args\n     assertCodegen(\n-      '<input @input=\"onInput(\\');[\\'());\\');\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){onInput(');[\\'());');}}})}`\n+      `<input @input=\"onInput(');[\\\\'());');\">`,\n+      `with(this){return _c('input',{on:{\"input\":function($event){onInput(');[\\\\'());');}}})}`\n     )\n   })\n \n\n---\n file path A: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js | file path B: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js\n\n@@ -49,12 +49,9 @@ describe('vdom patch: edge cases', () => {\n           bind (el, binding, vnode) {\n             waitForUpdate(() => {\n               expect(vnode.children[0].data.on.click()).toBe(5)\n-            }).then(() => {\n               expect(vnode.children[2].data.on.click(dummyEvt)).toBe(5)\n-            }).then(() => {\n-              expect(vnode.children[4].data.on.click()).not.toBeDefined()\n-            }).then(() => {\n-              expect(vnode.children[6].data.on.click(dummyEvt)).not.toBeDefined()\n+              expect(vnode.children[4].data.on.click()).toBe(10)\n+              expect(vnode.children[6].data.on.click(dummyEvt)).toBe(10)\n             }).then(done)\n           }\n         }\n\n\n###\n\n","completion":" fix: cover more cases in v-on inline return value\n"}
{"prompt":" file path A: src\/compiler\/codegen\/events.js | file path B: src\/compiler\/codegen\/events.js\n\n@@ -1,6 +1,7 @@\n \/* @flow *\/\n \n const fnExpRE = \/^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function\\s*\\(\/\n+const fnInvokeRE = \/\\([^)]*?\\)$\/\n const simplePathRE = \/^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$\/\n \n \/\/ KeyboardEvent.keyCode aliases\n@@ -94,6 +95,7 @@ function genHandler (\n \n   const isMethodPath = simplePathRE.test(handler.value)\n   const isFunctionExpression = fnExpRE.test(handler.value)\n+  const isFunctionInvocation = fnInvokeRE.test(handler.value)\n \n   if (!handler.modifiers) {\n     if (isMethodPath || isFunctionExpression) {\n@@ -103,7 +105,9 @@ function genHandler (\n     if (__WEEX__ && handler.params) {\n       return genWeexHandler(handler.params, handler.value)\n     }\n-    return `function($event){${handler.value}}` \/\/ inline statement\n+    return `function($event){${\n+      isFunctionInvocation ? `return (${handler.value})` : handler.value\n+    }}` \/\/ inline statement\n   } else {\n     let code = ''\n     let genModifierCode = ''\n@@ -138,7 +142,9 @@ function genHandler (\n       ? `return ${handler.value}($event)`\n       : isFunctionExpression\n         ? `return (${handler.value})($event)`\n-        : handler.value\n+        : isFunctionInvocation\n+          ? `return (${handler.value})`\n+          : handler.value\n     \/* istanbul ignore if *\/\n     if (__WEEX__ && handler.params) {\n       return genWeexHandler(handler.params, code + handlerCode)\n\n---\n file path A: test\/unit\/features\/directives\/on.spec.js | file path B: test\/unit\/features\/directives\/on.spec.js\n\n@@ -923,4 +923,28 @@ describe('Directive v-on', () => {\n       expect(spy.calls.count()).toBe(0)\n     }).then(done)\n   })\n+\n+  \/\/ #7628\n+  it('handler should return the return value of inline function invocation', () => {\n+    let value\n+    new Vue({\n+      template: `<test @foo=\"bar()\"><\/test>`,\n+      methods: {\n+        bar() {\n+          return 1\n+        }\n+      },\n+      components: {\n+        test: {\n+          created() {\n+            value = this.$listeners.foo()\n+          },\n+          render(h) {\n+            return h('div')\n+          }\n+        }\n+      }\n+    }).$mount()\n+    expect(value).toBe(1)\n+  })\n })\n\n\n###\n\n","completion":" fix: return inline invocation return value in v-on handlers\n"}
{"prompt":" file path A: src\/core\/instance\/events.js | file path B: src\/core\/instance\/events.js\n\n@@ -4,9 +4,8 @@ import {\n   tip,\n   toArray,\n   hyphenate,\n-  handleError,\n   formatComponentName,\n-  handlePromiseError\n+  invokeWithErrorHandling\n } from '..\/util\/index'\n import { updateListeners } from '..\/vdom\/helpers\/index'\n \n@@ -134,13 +133,9 @@ export function eventsMixin (Vue: Class<Component>) {\n     if (cbs) {\n       cbs = cbs.length > 1 ? toArray(cbs) : cbs\n       const args = toArray(arguments, 1)\n+      const info = `event handler for \"${event}\"`\n       for (let i = 0, l = cbs.length; i < l; i++) {\n-        try {\n-          const cbResult = cbs[i].apply(vm, args)\n-          handlePromiseError(cbResult, vm, `event handler for \"${event}\"`)\n-        } catch (e) {\n-          handleError(e, vm, `event handler for \"${event}\"`)\n-        }\n+        invokeWithErrorHandling(cbs[i], vm, args, vm, info)\n       }\n     }\n     return vm\n\n---\n file path A: src\/core\/instance\/lifecycle.js | file path B: src\/core\/instance\/lifecycle.js\n\n@@ -13,10 +13,9 @@ import {\n   warn,\n   noop,\n   remove,\n-  handleError,\n   emptyObject,\n   validateProp,\n-  handlePromiseError\n+  invokeWithErrorHandling\n } from '..\/util\/index'\n \n export let activeInstance: any = null\n@@ -324,14 +323,10 @@ export function callHook (vm: Component, hook: string) {\n   \/\/ #7573 disable dep collection when invoking lifecycle hooks\n   pushTarget()\n   const handlers = vm.$options[hook]\n+  const info = `${hook} hook`\n   if (handlers) {\n     for (let i = 0, j = handlers.length; i < j; i++) {\n-      try {\n-        const fnResult = handlers[i].call(vm)\n-        handlePromiseError(fnResult, vm, `${hook} hook`)\n-      } catch (e) {\n-        handleError(e, vm, `${hook} hook`)\n-      }\n+      invokeWithErrorHandling(handlers[i], vm, null, vm, info)\n     }\n   }\n   if (vm._hasHookEvent) {\n\n---\n file path A: src\/core\/util\/error.js | file path B: src\/core\/util\/error.js\n\n@@ -25,11 +25,23 @@ export function handleError (err: Error, vm: any, info: string) {\n   globalHandleError(err, vm, info)\n }\n \n-export function handlePromiseError (value: any, vm: any, info: string) {\n-  \/\/ if value is promise, handle it (a promise must have a then function)\n-  if (isPromise(value)) {\n-    value.catch(e => handleError(e, vm, info))\n+export function invokeWithErrorHandling (\n+  handler: Function,\n+  context: any,\n+  args: null | any[],\n+  vm: any,\n+  info: string\n+) {\n+  let res\n+  try {\n+    res = args ? handler.apply(context, args) : handler.call(context)\n+    if (isPromise(res)) {\n+      res.catch(e => handleError(e, vm, info + ` (Promise\/async)`))\n+    }\n+  } catch (e) {\n+    handleError(e, vm, info)\n   }\n+  return res\n }\n \n function globalHandleError (err, vm, info) {\n\n---\n file path A: src\/core\/vdom\/helpers\/update-listeners.js | file path B: src\/core\/vdom\/helpers\/update-listeners.js\n\n@@ -1,6 +1,9 @@\n \/* @flow *\/\n \n-import { warn, handleError, handlePromiseError } from 'core\/util\/index'\n+import {\n+  warn,\n+  invokeWithErrorHandling\n+} from 'core\/util\/index'\n import {\n   cached,\n   isUndef,\n@@ -36,23 +39,11 @@ export function createFnInvoker (fns: Function | Array<Function>, vm: ?Component\n     if (Array.isArray(fns)) {\n       const cloned = fns.slice()\n       for (let i = 0; i < cloned.length; i++) {\n-        try {\n-          const result = cloned[i].apply(null, arguments)\n-          handlePromiseError(result, vm, 'v-on async')\n-        } catch (e) {\n-          handleError(e, vm, 'v-on')\n-        }\n+        invokeWithErrorHandling(cloned[i], null, arguments, vm, `v-on handler`)\n       }\n     } else {\n       \/\/ return handler return value for single handlers\n-      let result\n-      try {\n-        result = fns.apply(null, arguments)\n-        handlePromiseError(result, vm, 'v-on async')\n-      } catch (e) {\n-        handleError(e, vm, 'v-on')\n-      }\n-      return result\n+      return invokeWithErrorHandling(fns, null, arguments, vm, `v-on handler`)\n     }\n   }\n   invoker.fns = fns\n\n---\n file path A: test\/unit\/features\/error-handling.spec.js | file path B: test\/unit\/features\/error-handling.spec.js\n\n@@ -33,7 +33,7 @@ describe('Error handling', () => {\n     it(`should recover from promise errors in ${type}`, done => {\n       createTestInstance(components[`${type}Async`])\n       waitForUpdate(() => {\n-        expect(`Error in ${description}`).toHaveBeenWarned()\n+        expect(`Error in ${description} (Promise\/async)`).toHaveBeenWarned()\n         expect(`Error: ${type}`).toHaveBeenWarned()\n       }).then(done)\n     })\n@@ -70,7 +70,7 @@ describe('Error handling', () => {\n     it(`should recover from promise errors in ${type} hook`, done => {\n       const vm = createTestInstance(components[`${type}Async`])\n       assertBothInstancesActive(vm).then(() => {\n-        expect(`Error in ${description}`).toHaveBeenWarned()\n+        expect(`Error in ${description} (Promise\/async)`).toHaveBeenWarned()\n         expect(`Error: ${type}`).toHaveBeenWarned()\n       }).then(done)\n     })\n@@ -101,7 +101,7 @@ describe('Error handling', () => {\n       const vm = createTestInstance(components[`${type}Async`])\n       vm.ok = false\n       setTimeout(() => {\n-        expect(`Error in ${description}`).toHaveBeenWarned()\n+        expect(`Error in ${description} (Promise\/async)`).toHaveBeenWarned()\n         expect(`Error: ${type}`).toHaveBeenWarned()\n         assertRootInstanceActive(vm).then(done)\n       })\n@@ -211,7 +211,7 @@ describe('Error handling', () => {\n       }).$mount()\n       document.body.appendChild(vm.$el)\n       triggerEvent(vm.$el, 'click')\n-      expect('Error in v-on').toHaveBeenWarned()\n+      expect('Error in v-on handler').toHaveBeenWarned()\n       expect('Error: v-on').toHaveBeenWarned()\n       document.body.removeChild(vm.$el)\n     })\n@@ -226,8 +226,8 @@ describe('Error handling', () => {\n       document.body.appendChild(vm.$el)\n       triggerEvent(vm.$el, 'click')\n       waitForUpdate(() => {\n-        expect('Error in v-on async').toHaveBeenWarned()\n-        expect('Error: v-on async').toHaveBeenWarned()\n+        expect('Error in v-on handler (Promise\/async)').toHaveBeenWarned()\n+        expect('Error: v-on').toHaveBeenWarned()\n         document.body.removeChild(vm.$el)\n       }).then(done)\n     })\n\n\n###\n\n","completion":" refactor: extract async error handling logic\n"}
{"prompt":" file path A: src\/core\/util\/error.js | file path B: src\/core\/util\/error.js\n\n@@ -3,6 +3,7 @@\n import config from '..\/config'\n import { warn } from '.\/debug'\n import { inBrowser, inWeex } from '.\/env'\n+import { isPromise } from 'shared\/util'\n \n export function handleError (err: Error, vm: any, info: string) {\n   if (vm) {\n@@ -26,7 +27,7 @@ export function handleError (err: Error, vm: any, info: string) {\n \n export function handlePromiseError (value: any, vm: any, info: string) {\n   \/\/ if value is promise, handle it (a promise must have a then function)\n-  if (value && typeof value.then === 'function' && typeof value.catch === 'function') {\n+  if (isPromise(value)) {\n     value.catch(e => handleError(e, vm, info))\n   }\n }\n\n---\n file path A: src\/core\/vdom\/helpers\/resolve-async-component.js | file path B: src\/core\/vdom\/helpers\/resolve-async-component.js\n\n@@ -7,7 +7,8 @@ import {\n   isUndef,\n   isTrue,\n   isObject,\n-  hasSymbol\n+  hasSymbol,\n+  isPromise\n } from 'core\/util\/index'\n \n import { createEmptyVNode } from 'core\/vdom\/vnode'\n@@ -95,12 +96,12 @@ export function resolveAsyncComponent (\n     const res = factory(resolve, reject)\n \n     if (isObject(res)) {\n-      if (typeof res.then === 'function') {\n+      if (isPromise(res)) {\n         \/\/ () => Promise\n         if (isUndef(factory.resolved)) {\n           res.then(resolve, reject)\n         }\n-      } else if (isDef(res.component) && typeof res.component.then === 'function') {\n+      } else if (isPromise(res.component)) {\n         res.component.then(resolve, reject)\n \n         if (isDef(res.error)) {\n\n---\n file path A: src\/shared\/util.js | file path B: src\/shared\/util.js\n\n@@ -71,6 +71,14 @@ export function isValidArrayIndex (val: any): boolean {\n   return n >= 0 && Math.floor(n) === n && isFinite(val)\n }\n \n+export function isPromise (val: any): boolean {\n+  return (\n+    isDef(val) &&\n+    typeof val.then === 'function' &&\n+    typeof val.catch === 'function'\n+  )\n+}\n+\n \/**\n  * Convert a value to a string that is actually rendered.\n  *\/\n\n\n###\n\n","completion":" refactor: extract isPromise util\n"}
{"prompt":" file path A: src\/core\/instance\/events.js | file path B: src\/core\/instance\/events.js\n\n@@ -5,7 +5,8 @@ import {\n   toArray,\n   hyphenate,\n   handleError,\n-  formatComponentName\n+  formatComponentName,\n+  handlePromiseError\n } from '..\/util\/index'\n import { updateListeners } from '..\/vdom\/helpers\/index'\n \n@@ -135,7 +136,8 @@ export function eventsMixin (Vue: Class<Component>) {\n       const args = toArray(arguments, 1)\n       for (let i = 0, l = cbs.length; i < l; i++) {\n         try {\n-          cbs[i].apply(vm, args)\n+          const cbResult = cbs[i].apply(vm, args)\n+          handlePromiseError(cbResult, vm, `event handler for \"${event}\"`)\n         } catch (e) {\n           handleError(e, vm, `event handler for \"${event}\"`)\n         }\n\n---\n file path A: src\/core\/instance\/lifecycle.js | file path B: src\/core\/instance\/lifecycle.js\n\n@@ -15,7 +15,8 @@ import {\n   remove,\n   handleError,\n   emptyObject,\n-  validateProp\n+  validateProp,\n+  handlePromiseError\n } from '..\/util\/index'\n \n export let activeInstance: any = null\n@@ -326,7 +327,8 @@ export function callHook (vm: Component, hook: string) {\n   if (handlers) {\n     for (let i = 0, j = handlers.length; i < j; i++) {\n       try {\n-        handlers[i].call(vm)\n+        const fnResult = handlers[i].call(vm)\n+        handlePromiseError(fnResult, vm, `${hook} hook`)\n       } catch (e) {\n         handleError(e, vm, `${hook} hook`)\n       }\n\n---\n file path A: src\/core\/util\/error.js | file path B: src\/core\/util\/error.js\n\n@@ -24,6 +24,13 @@ export function handleError (err: Error, vm: any, info: string) {\n   globalHandleError(err, vm, info)\n }\n \n+export function handlePromiseError (value: any, vm: any, info: string) {\n+  \/\/ if value is promise, handle it (a promise must have a then function)\n+  if (value && typeof value.then === 'function' && typeof value.catch === 'function') {\n+    value.catch(e => handleError(e, vm, info))\n+  }\n+}\n+\n function globalHandleError (err, vm, info) {\n   if (config.errorHandler) {\n     try {\n\n---\n file path A: src\/core\/vdom\/helpers\/update-listeners.js | file path B: src\/core\/vdom\/helpers\/update-listeners.js\n\n@@ -1,7 +1,6 @@\n \/* @flow *\/\n \n-import { warn } from 'core\/util\/index'\n-\n+import { warn, handleError, handlePromiseError } from 'core\/util\/index'\n import {\n   cached,\n   isUndef,\n@@ -31,17 +30,29 @@ const normalizeEvent = cached((name: string): {\n   }\n })\n \n-export function createFnInvoker (fns: Function | Array<Function>): Function {\n+export function createFnInvoker (fns: Function | Array<Function>, vm: ?Component): Function {\n   function invoker () {\n     const fns = invoker.fns\n     if (Array.isArray(fns)) {\n       const cloned = fns.slice()\n       for (let i = 0; i < cloned.length; i++) {\n-        cloned[i].apply(null, arguments)\n+        try {\n+          const result = cloned[i].apply(null, arguments)\n+          handlePromiseError(result, vm, 'v-on async')\n+        } catch (e) {\n+          handleError(e, vm, 'v-on')\n+        }\n       }\n     } else {\n       \/\/ return handler return value for single handlers\n-      return fns.apply(null, arguments)\n+      let result\n+      try {\n+        result = fns.apply(null, arguments)\n+        handlePromiseError(result, vm, 'v-on async')\n+      } catch (e) {\n+        handleError(e, vm, 'v-on')\n+      }\n+      return result\n     }\n   }\n   invoker.fns = fns\n@@ -73,7 +84,7 @@ export function updateListeners (\n       )\n     } else if (isUndef(old)) {\n       if (isUndef(cur.fns)) {\n-        cur = on[name] = createFnInvoker(cur)\n+        cur = on[name] = createFnInvoker(cur, vm)\n       }\n       if (isTrue(event.once)) {\n         cur = on[name] = createOnceHandler(event.name, cur, event.capture)\n\n---\n file path A: test\/unit\/features\/error-handling.spec.js | file path B: test\/unit\/features\/error-handling.spec.js\n\n@@ -22,6 +22,23 @@ describe('Error handling', () => {\n     })\n   })\n \n+  \/\/ hooks that can return rejected promise\n+  ;[\n+    ['beforeCreate', 'beforeCreate hook'],\n+    ['created', 'created hook'],\n+    ['beforeMount', 'beforeMount hook'],\n+    ['mounted', 'mounted hook'],\n+    ['event', 'event handler for \"e\"']\n+  ].forEach(([type, description]) => {\n+    it(`should recover from promise errors in ${type}`, done => {\n+      createTestInstance(components[`${type}Async`])\n+      waitForUpdate(() => {\n+        expect(`Error in ${description}`).toHaveBeenWarned()\n+        expect(`Error: ${type}`).toHaveBeenWarned()\n+      }).then(done)\n+    })\n+  })\n+\n   \/\/ error in mounted hook should affect neither child nor parent\n   it('should recover from errors in mounted hook', done => {\n     const vm = createTestInstance(components.mounted)\n@@ -45,6 +62,20 @@ describe('Error handling', () => {\n     })\n   })\n \n+  \/\/ hooks that can return rejected promise\n+  ;[\n+    ['beforeUpdate', 'beforeUpdate hook'],\n+    ['updated', 'updated hook']\n+  ].forEach(([type, description]) => {\n+    it(`should recover from promise errors in ${type} hook`, done => {\n+      const vm = createTestInstance(components[`${type}Async`])\n+      assertBothInstancesActive(vm).then(() => {\n+        expect(`Error in ${description}`).toHaveBeenWarned()\n+        expect(`Error: ${type}`).toHaveBeenWarned()\n+      }).then(done)\n+    })\n+  })\n+\n   ;[\n     ['beforeDestroy', 'beforeDestroy hook'],\n     ['destroyed', 'destroyed hook'],\n@@ -62,6 +93,21 @@ describe('Error handling', () => {\n     })\n   })\n \n+  ;[\n+    ['beforeDestroy', 'beforeDestroy hook'],\n+    ['destroyed', 'destroyed hook']\n+  ].forEach(([type, description]) => {\n+    it(`should recover from promise errors in ${type} hook`, done => {\n+      const vm = createTestInstance(components[`${type}Async`])\n+      vm.ok = false\n+      setTimeout(() => {\n+        expect(`Error in ${description}`).toHaveBeenWarned()\n+        expect(`Error: ${type}`).toHaveBeenWarned()\n+        assertRootInstanceActive(vm).then(done)\n+      })\n+    })\n+  })\n+\n   it('should recover from errors in user watcher getter', done => {\n     const vm = createTestInstance(components.userWatcherGetter)\n     vm.n++\n@@ -152,6 +198,40 @@ describe('Error handling', () => {\n     expect(vm.$el.textContent).toContain('error in render')\n     Vue.config.errorHandler = null\n   })\n+\n+  \/\/ event handlers that can throw errors or return rejected promise\n+  ;[\n+    ['single handler', '<div v-on:click=\"bork\"><\/div>'],\n+    ['multiple handlers', '<div v-on=\"{ click: [bork, function test() {}] }\"><\/div>']\n+  ].forEach(([type, template]) => {\n+    it(`should recover from v-on errors for ${type} registered`, () => {\n+      const vm = new Vue({\n+        template,\n+        methods: { bork () { throw new Error('v-on') } }\n+      }).$mount()\n+      document.body.appendChild(vm.$el)\n+      triggerEvent(vm.$el, 'click')\n+      expect('Error in v-on').toHaveBeenWarned()\n+      expect('Error: v-on').toHaveBeenWarned()\n+      document.body.removeChild(vm.$el)\n+    })\n+\n+    it(`should recover from v-on async errors for ${type} registered`, (done) => {\n+      const vm = new Vue({\n+        template,\n+        methods: { bork () {\n+          return new Promise((resolve, reject) => reject(new Error('v-on async')))\n+        } }\n+      }).$mount()\n+      document.body.appendChild(vm.$el)\n+      triggerEvent(vm.$el, 'click')\n+      waitForUpdate(() => {\n+        expect('Error in v-on async').toHaveBeenWarned()\n+        expect('Error: v-on async').toHaveBeenWarned()\n+        document.body.removeChild(vm.$el)\n+      }).then(done)\n+    })\n+  })\n })\n \n function createErrorTestComponents () {\n@@ -188,6 +268,16 @@ function createErrorTestComponents () {\n       throw new Error(before)\n     }\n \n+    const beforeCompAsync = components[`${before}Async`] = {\n+      props: ['n'],\n+      render (h) {\n+        return h('div', this.n)\n+      }\n+    }\n+    beforeCompAsync[before] = function () {\n+      return new Promise((resolve, reject) => reject(new Error(before)))\n+    }\n+\n     \/\/ after\n     const after = hook.replace(\/e?$\/, 'ed')\n     const afterComp = components[after] = {\n@@ -199,6 +289,16 @@ function createErrorTestComponents () {\n     afterComp[after] = function () {\n       throw new Error(after)\n     }\n+\n+    const afterCompAsync = components[`${after}Async`] = {\n+      props: ['n'],\n+      render (h) {\n+        return h('div', this.n)\n+      }\n+    }\n+    afterCompAsync[after] = function () {\n+      return new Promise((resolve, reject) => reject(new Error(after)))\n+    }\n   })\n \n   \/\/ directive hooks errors\n@@ -272,6 +372,18 @@ function createErrorTestComponents () {\n     }\n   }\n \n+  components.eventAsync = {\n+    beforeCreate () {\n+      this.$on('e', () => new Promise((resolve, reject) => reject(new Error('event'))))\n+    },\n+    mounted () {\n+      this.$emit('e')\n+    },\n+    render (h) {\n+      return h('div')\n+    }\n+  }\n+\n   return components\n }\n \n\n\n###\n\n","completion":" feat(errors): sync\/async error handling for lifecycle hooks and v-on handlers (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/env.js | file path B: src\/core\/util\/env.js\n\n@@ -14,6 +14,7 @@ export const isEdge = UA && UA.indexOf('edge\/') > 0\n export const isAndroid = (UA && UA.indexOf('android') > 0) || (weexPlatform === 'android')\n export const isIOS = (UA && \/iphone|ipad|ipod|ios\/.test(UA)) || (weexPlatform === 'ios')\n export const isChrome = UA && \/chrome\\\/\\d+\/.test(UA) && !isEdge\n+export const isPhantomJS = UA && \/phantomjs\/.test(UA)\n \n \/\/ Firefox has a \"watch\" function on Object.prototype...\n export const nativeWatch = ({}).watch\n\n---\n file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -2,7 +2,7 @@\n \n import { isDef, isUndef } from 'shared\/util'\n import { updateListeners } from 'core\/vdom\/helpers\/index'\n-import { isIE, supportsPassive } from 'core\/util\/index'\n+import { isIE, isPhantomJS, supportsPassive } from 'core\/util\/index'\n import { RANGE_TOKEN, CHECKBOX_RADIO_TOKEN } from 'web\/compiler\/directives\/model'\n \n \/\/ normalize v-model event tokens that can only be determined at runtime.\n@@ -38,32 +38,130 @@ function createOnceHandler (event, handler, capture) {\n   }\n }\n \n+const delegateRE = \/^(?:click|dblclick|submit|(?:key|mouse|touch|pointer).*)$\/\n+const eventCounts = {}\n+const attachedGlobalHandlers = {}\n+\n+type TargetRef = { el: Element | Document }\n+\n function add (\n-  event: string,\n+  name: string,\n   handler: Function,\n   capture: boolean,\n   passive: boolean\n ) {\n-  target.addEventListener(\n-    event,\n-    handler,\n-    supportsPassive\n-      ? { capture, passive }\n-      : capture\n-  )\n+  if (!capture && !passive && delegateRE.test(name)) {\n+    const count = eventCounts[name]\n+    let store = target.__events\n+    if (!count) {\n+      attachGlobalHandler(name)\n+    }\n+    if (!store) {\n+      store = target.__events = {}\n+    }\n+    if (!store[name]) {\n+      eventCounts[name]++\n+    }\n+    store[name] = handler\n+  } else {\n+    target.addEventListener(\n+      name,\n+      handler,\n+      supportsPassive\n+        ? { capture, passive }\n+        : capture\n+    )\n+  }\n+}\n+\n+function attachGlobalHandler(name: string) {\n+  const handler = (attachedGlobalHandlers[name] = (e: any) => {\n+    const isClick = e.type === 'click' || e.type === 'dblclick'\n+    if (isClick && e.button !== 0) {\n+      e.stopPropagation()\n+      return false\n+    }\n+    const targetRef: TargetRef = { el: document }\n+    dispatchEvent(e, name, isClick, targetRef)\n+  })\n+  document.addEventListener(name, handler)\n+  eventCounts[name] = 0\n+}\n+\n+function stopPropagation() {\n+  this.cancelBubble = true\n+  if (!this.immediatePropagationStopped) {\n+    this.stopImmediatePropagation()\n+  }\n+}\n+\n+function dispatchEvent(\n+  e: Event,\n+  name: string,\n+  isClick: boolean,\n+  targetRef: TargetRef\n+) {\n+  let el: any = e.target\n+  let userEvent\n+  if (isPhantomJS) {\n+    \/\/ in PhantomJS it throws if we try to re-define currentTarget,\n+    \/\/ so instead we create a wrapped event to the user\n+    userEvent = Object.create((e: any))\n+    userEvent.stopPropagation = stopPropagation.bind((e: any))\n+    userEvent.preventDefault = e.preventDefault.bind(e)\n+  } else {\n+    userEvent = e\n+  }\n+  Object.defineProperty(userEvent, 'currentTarget', ({\n+    configurable: true,\n+    get() {\n+      return targetRef.el\n+    }\n+  }: any))\n+  while (el != null) {\n+    \/\/ Don't process clicks on disabled elements\n+    if (isClick && el.disabled) {\n+      break\n+    }\n+    const store = el.__events\n+    if (store) {\n+      const handler = store[name]\n+      if (handler) {\n+        targetRef.el = el\n+        handler(userEvent)\n+        if (e.cancelBubble) {\n+          break\n+        }\n+      }\n+    }\n+    el = el.parentNode\n+  }\n+}\n+\n+function removeGlobalHandler(name: string) {\n+  document.removeEventListener(name, attachedGlobalHandlers[name])\n+  attachedGlobalHandlers[name] = null\n }\n \n function remove (\n-  event: string,\n+  name: string,\n   handler: Function,\n   capture: boolean,\n   _target?: HTMLElement\n ) {\n-  (_target || target).removeEventListener(\n-    event,\n-    handler._withTask || handler,\n-    capture\n-  )\n+  const el: any = _target || target\n+  if (!capture && delegateRE.test(name)) {\n+    el.__events[name] = null\n+    if (--eventCounts[name] === 0) {\n+      removeGlobalHandler(name)\n+    }\n+  } else {\n+    el.removeEventListener(\n+      name,\n+      handler._withTask || handler,\n+      capture\n+    )\n+  }\n }\n \n function updateDOMListeners (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n\n---\n file path A: test\/e2e\/specs\/async-edge-cases.js | file path B: test\/e2e\/specs\/async-edge-cases.js\n\n@@ -15,19 +15,19 @@ module.exports = {\n       .assert.checked('#case-1 input', false)\n \n       \/\/ \/\/ #6566\n-      \/\/ .assert.containsText('#case-2 button', 'Expand is True')\n-      \/\/ .assert.containsText('.count-a', 'countA: 0')\n-      \/\/ .assert.containsText('.count-b', 'countB: 0')\n+      .assert.containsText('#case-2 button', 'Expand is True')\n+      .assert.containsText('.count-a', 'countA: 0')\n+      .assert.containsText('.count-b', 'countB: 0')\n \n-      \/\/ .click('#case-2 button')\n-      \/\/ .assert.containsText('#case-2 button', 'Expand is False')\n-      \/\/ .assert.containsText('.count-a', 'countA: 1')\n-      \/\/ .assert.containsText('.count-b', 'countB: 0')\n+      .click('#case-2 button')\n+      .assert.containsText('#case-2 button', 'Expand is False')\n+      .assert.containsText('.count-a', 'countA: 1')\n+      .assert.containsText('.count-b', 'countB: 0')\n \n-      \/\/ .click('#case-2 button')\n-      \/\/ .assert.containsText('#case-2 button', 'Expand is True')\n-      \/\/ .assert.containsText('.count-a', 'countA: 1')\n-      \/\/ .assert.containsText('.count-b', 'countB: 1')\n+      .click('#case-2 button')\n+      .assert.containsText('#case-2 button', 'Expand is True')\n+      .assert.containsText('.count-a', 'countA: 1')\n+      .assert.containsText('.count-b', 'countB: 1')\n \n       .end()\n   }\n\n---\n file path A: test\/helpers\/trigger-event.js | file path B: test\/helpers\/trigger-event.js\n\n@@ -1,6 +1,9 @@\n window.triggerEvent = function triggerEvent (target, event, process) {\n   const e = document.createEvent('HTMLEvents')\n   e.initEvent(event, true, true)\n+  if (event === 'click') {\n+    e.button = 0\n+  }\n   if (process) process(e)\n   target.dispatchEvent(e)\n }\n\n---\n file path A: test\/unit\/features\/component\/component-slot.spec.js | file path B: test\/unit\/features\/component\/component-slot.spec.js\n\n@@ -542,6 +542,7 @@ describe('Component slot', () => {\n       }\n     }).$mount()\n \n+    document.body.appendChild(vm.$el)\n     expect(vm.$el.textContent).toBe('hi')\n     vm.$children[0].toggle = false\n     waitForUpdate(() => {\n@@ -549,6 +550,8 @@ describe('Component slot', () => {\n     }).then(() => {\n       triggerEvent(vm.$el.querySelector('.click'), 'click')\n       expect(spy).toHaveBeenCalled()\n+    }).then(() => {\n+      document.body.removeChild(vm.$el)\n     }).then(done)\n   })\n \n\n---\n file path A: test\/unit\/features\/directives\/bind.spec.js | file path B: test\/unit\/features\/directives\/bind.spec.js\n\n@@ -157,10 +157,12 @@ describe('Directive v-bind', () => {\n       }\n     }).$mount()\n \n+    document.body.appendChild(vm.$el)\n     expect(vm.$el.textContent).toBe('1')\n     triggerEvent(vm.$el, 'click')\n     waitForUpdate(() => {\n       expect(vm.$el.textContent).toBe('2')\n+      document.body.removeChild(vm.$el)\n     }).then(done)\n   })\n \n@@ -227,6 +229,7 @@ describe('Directive v-bind', () => {\n         }\n       }\n     }).$mount()\n+    document.body.appendChild(vm.$el)\n     expect(vm.$el.textContent).toBe('1')\n     triggerEvent(vm.$el, 'click')\n     waitForUpdate(() => {\n@@ -234,6 +237,7 @@ describe('Directive v-bind', () => {\n       vm.test.fooBar = 3\n     }).then(() => {\n       expect(vm.$el.textContent).toBe('3')\n+      document.body.removeChild(vm.$el)\n     }).then(done)\n   })\n \n\n---\n file path A: test\/unit\/features\/directives\/on.spec.js | file path B: test\/unit\/features\/directives\/on.spec.js\n\n@@ -735,10 +735,11 @@ describe('Directive v-on', () => {\n \n   it('should transform click.middle to mouseup', () => {\n     const spy = jasmine.createSpy('click.middle')\n-    const vm = new Vue({\n+    vm = new Vue({\n+      el,\n       template: `<div @click.middle=\"foo\"><\/div>`,\n       methods: { foo: spy }\n-    }).$mount()\n+    })\n     triggerEvent(vm.$el, 'mouseup', e => { e.button = 0 })\n     expect(spy).not.toHaveBeenCalled()\n     triggerEvent(vm.$el, 'mouseup', e => { e.button = 1 })\n\n---\n file path A: test\/unit\/features\/options\/functional.spec.js | file path B: test\/unit\/features\/options\/functional.spec.js\n\n@@ -70,11 +70,13 @@ describe('Options functional', () => {\n       }\n     }).$mount()\n \n+    document.body.appendChild(vm.$el)\n     triggerEvent(vm.$el.children[0], 'click')\n     expect(foo).toHaveBeenCalled()\n     expect(foo.calls.argsFor(0)[0].type).toBe('click') \/\/ should have click event\n     triggerEvent(vm.$el.children[0], 'mousedown')\n     expect(bar).toHaveBeenCalledWith('bar')\n+    document.body.removeChild(vm.$el)\n   })\n \n   it('should support returning more than one root node', () => {\n\n\n###\n\n","completion":" feat: use event delegation when possible\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/modules\/dom-props.js | file path B: src\/platforms\/web\/runtime\/modules\/dom-props.js\n\n@@ -86,10 +86,6 @@ function isDirtyWithModifiers (elm: any, newVal: string): boolean {\n   const value = elm.value\n   const modifiers = elm._vModifiers \/\/ injected by v-model runtime\n   if (isDef(modifiers)) {\n-    if (modifiers.lazy) {\n-      \/\/ inputs with lazy should only be updated when not in focus\n-      return false\n-    }\n     if (modifiers.number) {\n       return toNumber(value) !== toNumber(newVal)\n     }\n\n\n###\n\n","completion":" fix(next-tick): revert 60da366\n"}
{"prompt":" file path A: src\/core\/util\/next-tick.js | file path B: src\/core\/util\/next-tick.js\n\n@@ -1,9 +1,9 @@\n \/* @flow *\/\n-\/* globals MessageChannel *\/\n+\/* globals MutationObserver *\/\n \n import { noop } from 'shared\/util'\n import { handleError } from '.\/error'\n-import { isIOS, isNative } from '.\/env'\n+import { isIE, isIOS, isNative } from '.\/env'\n \n const callbacks = []\n let pending = false\n@@ -17,76 +17,67 @@ function flushCallbacks () {\n   }\n }\n \n-\/\/ Here we have async deferring wrappers using both microtasks and (macro) tasks.\n-\/\/ In < 2.4 we used microtasks everywhere, but there are some scenarios where\n-\/\/ microtasks have too high a priority and fire in between supposedly\n-\/\/ sequential events (e.g. #4521, #6690) or even between bubbling of the same\n-\/\/ event (#6566). However, using (macro) tasks everywhere also has subtle problems\n-\/\/ when state is changed right before repaint (e.g. #6813, out-in transitions).\n-\/\/ Here we use microtask by default, but expose a way to force (macro) task when\n-\/\/ needed (e.g. in event handlers attached by v-on).\n-let microTimerFunc\n-let macroTimerFunc\n-let useMacroTask = false\n+\/\/ Here we have async deferring wrappers using microtasks.\n+\/\/ In 2.5 we used (macro) tasks (in combination with microtasks).\n+\/\/ However, it has subtle problems when state is changed right before repaint\n+\/\/ (e.g. #6813, out-in transitions).\n+\/\/ Also, using (macro) tasks in event handler would cause some weird behaviors\n+\/\/ that cannot be circumvented (e.g. #7109, #7153, #7546, #7834, #8109).\n+\/\/ So we now use microtasks everywhere, again.\n+\/\/ A major drawback of this tradeoff is that there are some scenarios\n+\/\/ where microtasks have too high a priority and fire in between supposedly\n+\/\/ sequential events (e.g. #4521, #6690, which have workarounds)\n+\/\/ or even between bubbling of the same event (#6566).\n+let timerFunc\n \n-\/\/ Determine (macro) task defer implementation.\n-\/\/ Technically setImmediate should be the ideal choice, but it's only available\n-\/\/ in IE. The only polyfill that consistently queues the callback after all DOM\n-\/\/ events triggered in the same loop is by using MessageChannel.\n-\/* istanbul ignore if *\/\n-if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n-  macroTimerFunc = () => {\n-    setImmediate(flushCallbacks)\n-  }\n-} else if (typeof MessageChannel !== 'undefined' && (\n-  isNative(MessageChannel) ||\n-  \/\/ PhantomJS\n-  MessageChannel.toString() === '[object MessageChannelConstructor]'\n-)) {\n-  const channel = new MessageChannel()\n-  const port = channel.port2\n-  channel.port1.onmessage = flushCallbacks\n-  macroTimerFunc = () => {\n-    port.postMessage(1)\n-  }\n-} else {\n-  \/* istanbul ignore next *\/\n-  macroTimerFunc = () => {\n-    setTimeout(flushCallbacks, 0)\n-  }\n-}\n-\n-\/\/ Determine microtask defer implementation.\n+\/\/ The nextTick behavior leverages the microtask queue, which can be accessed\n+\/\/ via either native Promise.then or MutationObserver.\n+\/\/ MutationObserver has wider support, however it is seriously bugged in\n+\/\/ UIWebView in iOS >= 9.3.3 when triggered in touch event handlers. It\n+\/\/ completely stops working after triggering a few times... so, if native\n+\/\/ Promise is available, we will use it:\n \/* istanbul ignore next, $flow-disable-line *\/\n if (typeof Promise !== 'undefined' && isNative(Promise)) {\n   const p = Promise.resolve()\n-  microTimerFunc = () => {\n+  timerFunc = () => {\n     p.then(flushCallbacks)\n-    \/\/ in problematic UIWebViews, Promise.then doesn't completely break, but\n+    \/\/ In problematic UIWebViews, Promise.then doesn't completely break, but\n     \/\/ it can get stuck in a weird state where callbacks are pushed into the\n     \/\/ microtask queue but the queue isn't being flushed, until the browser\n     \/\/ needs to do some other work, e.g. handle a timer. Therefore we can\n     \/\/ \"force\" the microtask queue to be flushed by adding an empty timer.\n     if (isIOS) setTimeout(noop)\n   }\n-} else {\n-  \/\/ fallback to macro\n-  microTimerFunc = macroTimerFunc\n-}\n-\n-\/**\n- * Wrap a function so that if any code inside triggers state change,\n- * the changes are queued using a (macro) task instead of a microtask.\n- *\/\n-export function withMacroTask (fn: Function): Function {\n-  return fn._withTask || (fn._withTask = function () {\n-    useMacroTask = true\n-    try {\n-      return fn.apply(null, arguments)\n-    } finally {\n-      useMacroTask = false    \n-    }\n+} else if (!isIE && typeof MutationObserver !== 'undefined' && (\n+  isNative(MutationObserver) ||\n+  \/\/ PhantomJS and iOS 7.x\n+  MutationObserver.toString() === '[object MutationObserverConstructor]'\n+)) {\n+  \/\/ Use MutationObserver where native Promise is not available,\n+  \/\/ e.g. PhantomJS, iOS7, Android 4.4\n+  \/\/ (#6466 MutationObserver is unreliable in IE11)\n+  let counter = 1\n+  const observer = new MutationObserver(flushCallbacks)\n+  const textNode = document.createTextNode(String(counter))\n+  observer.observe(textNode, {\n+    characterData: true\n   })\n+  timerFunc = () => {\n+    counter = (counter + 1) % 2\n+    textNode.data = String(counter)\n+  }\n+} else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n+  \/\/ Fallback to setImmediate.\n+  \/\/ Techinically it leverages the (macro) task queue,\n+  \/\/ but it is still a better choice than setTimeout.\n+  timerFunc = () => {\n+    setImmediate(flushCallbacks)\n+  }\n+} else {\n+  \/\/ Fallback to setTimeout.\n+  timerFunc = () => {\n+    setTimeout(flushCallbacks, 0)\n+  }\n }\n \n export function nextTick (cb?: Function, ctx?: Object) {\n@@ -104,11 +95,7 @@ export function nextTick (cb?: Function, ctx?: Object) {\n   })\n   if (!pending) {\n     pending = true\n-    if (useMacroTask) {\n-      macroTimerFunc()\n-    } else {\n-      microTimerFunc()\n-    }\n+    timerFunc()\n   }\n   \/\/ $flow-disable-line\n   if (!cb && typeof Promise !== 'undefined') {\n\n---\n file path A: src\/platforms\/web\/runtime\/modules\/dom-props.js | file path B: src\/platforms\/web\/runtime\/modules\/dom-props.js\n\n@@ -35,6 +35,17 @@ function updateDOMProps (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n       }\n     }\n \n+    \/\/ #4521: if a click event triggers update before the change event is\n+    \/\/ dispatched on a checkbox\/radio input, the input's checked state will\n+    \/\/ be reset and fail to trigger another update.\n+    \/\/ The root cause here is that browsers may fire microtasks in between click\/change.\n+    \/\/ In Chrome \/ Firefox, click event fires before change, thus having this problem.\n+    \/\/ In Safari \/ Edge, the order is opposite.\n+    \/\/ Note: in Edge, if you click too fast, only the click event would fire twice.\n+    if (key === 'checked' && !isNotInFocusAndDirty(elm, cur)) {\n+      continue\n+    }\n+\n     if (key === 'value') {\n       \/\/ store value as _value as well since\n       \/\/ non-string values will be stringified\n\n---\n file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -2,7 +2,7 @@\n \n import { isDef, isUndef } from 'shared\/util'\n import { updateListeners } from 'core\/vdom\/helpers\/index'\n-import { withMacroTask, isIE, supportsPassive } from 'core\/util\/index'\n+import { isIE, supportsPassive } from 'core\/util\/index'\n import { RANGE_TOKEN, CHECKBOX_RADIO_TOKEN } from 'web\/compiler\/directives\/model'\n \n \/\/ normalize v-model event tokens that can only be determined at runtime.\n@@ -44,7 +44,6 @@ function add (\n   capture: boolean,\n   passive: boolean\n ) {\n-  handler = withMacroTask(handler)\n   target.addEventListener(\n     event,\n     handler,\n\n---\n file path A: test\/e2e\/specs\/async-edge-cases.js | file path B: test\/e2e\/specs\/async-edge-cases.js\n\n@@ -14,20 +14,20 @@ module.exports = {\n       .assert.containsText('#case-1', '3')\n       .assert.checked('#case-1 input', false)\n \n-      \/\/ #6566\n-      .assert.containsText('#case-2 button', 'Expand is True')\n-      .assert.containsText('.count-a', 'countA: 0')\n-      .assert.containsText('.count-b', 'countB: 0')\n+      \/\/ \/\/ #6566\n+      \/\/ .assert.containsText('#case-2 button', 'Expand is True')\n+      \/\/ .assert.containsText('.count-a', 'countA: 0')\n+      \/\/ .assert.containsText('.count-b', 'countB: 0')\n \n-      .click('#case-2 button')\n-      .assert.containsText('#case-2 button', 'Expand is False')\n-      .assert.containsText('.count-a', 'countA: 1')\n-      .assert.containsText('.count-b', 'countB: 0')\n+      \/\/ .click('#case-2 button')\n+      \/\/ .assert.containsText('#case-2 button', 'Expand is False')\n+      \/\/ .assert.containsText('.count-a', 'countA: 1')\n+      \/\/ .assert.containsText('.count-b', 'countB: 0')\n \n-      .click('#case-2 button')\n-      .assert.containsText('#case-2 button', 'Expand is True')\n-      .assert.containsText('.count-a', 'countA: 1')\n-      .assert.containsText('.count-b', 'countB: 1')\n+      \/\/ .click('#case-2 button')\n+      \/\/ .assert.containsText('#case-2 button', 'Expand is True')\n+      \/\/ .assert.containsText('.count-a', 'countA: 1')\n+      \/\/ .assert.containsText('.count-b', 'countB: 1')\n \n       .end()\n   }\n\n\n###\n\n","completion":" fix: always use microtasks for nextTick (#<issue-num>)\n"}
{"prompt":" file path A: packages\/vue-template-compiler\/package.json | file path B: packages\/vue-template-compiler\/package.json\n\n@@ -6,6 +6,7 @@\n   \"unpkg\": \"browser.js\",\n   \"jsdelivr\": \"browser.js\",\n   \"browser\": \"browser.js\",\n+  \"types\": \"types\/index.d.ts\",\n   \"repository\": {\n     \"type\": \"git\",\n     \"url\": \"git+https:\/\/github.com\/vuejs\/vue.git\"\n@@ -23,5 +24,8 @@\n   \"dependencies\": {\n     \"he\": \"^1.1.0\",\n     \"de-indent\": \"^1.0.2\"\n+  },\n+  \"devDependencies\": {\n+    \"vue\": \"file:..\/..\"\n   }\n }\n\n---\n file path A: None | file path B: packages\/vue-template-compiler\/types\/index.d.ts\n\n@@ -0,0 +1,221 @@\n+import Vue, { VNode } from \"vue\"\n+\n+\/*\n+ * Template compilation options \/ results\n+ *\/\n+interface CompilerOptions {\n+  modules?: ModuleOptions[];\n+  directives?: Record<string, DirectiveFunction>;\n+  preserveWhitespace?: boolean;\n+}\n+\n+interface CompiledResult {\n+  ast: ASTElement | undefined;\n+  render: string;\n+  staticRenderFns: string[];\n+  errors: string[];\n+  tips: string[];\n+}\n+\n+interface CompiledResultFunctions {\n+  render: () => VNode;\n+  staticRenderFns: (() => VNode)[];\n+}\n+\n+interface ModuleOptions {\n+  preTransformNode: (el: ASTElement) => ASTElement | undefined;\n+  transformNode: (el: ASTElement) => ASTElement | undefined;\n+  postTransformNode: (el: ASTElement) => void;\n+  genData: (el: ASTElement) => string;\n+  transformCode?: (el: ASTElement, code: string) => string;\n+  staticKeys?: string[];\n+}\n+\n+type DirectiveFunction = (node: ASTElement, directiveMeta: ASTDirective) => void;\n+\n+\/*\n+ * AST Types\n+ *\/\n+\n+\/**\n+ * - 0: FALSE - whole sub tree un-optimizable\n+ * - 1: FULL - whole sub tree optimizable\n+ * - 2: SELF - self optimizable but has some un-optimizable children\n+ * - 3: CHILDREN - self un-optimizable but have fully optimizable children\n+ * - 4: PARTIAL - self un-optimizable with some un-optimizable children\n+ *\/\n+export type SSROptimizability = 0 | 1 | 2 | 3 | 4\n+\n+export interface ASTModifiers {\n+  [key: string]: boolean;\n+}\n+\n+export interface ASTIfCondition {\n+  exp: string | undefined;\n+  block: ASTElement;\n+}\n+\n+export interface ASTElementHandler {\n+  value: string;\n+  params?: any[];\n+  modifiers: ASTModifiers | undefined;\n+}\n+\n+export interface ASTElementHandlers {\n+  [key: string]: ASTElementHandler | ASTElementHandler[];\n+}\n+\n+export interface ASTDirective {\n+  name: string;\n+  rawName: string;\n+  value: string;\n+  arg: string | undefined;\n+  modifiers: ASTModifiers | undefined;\n+}\n+\n+export type ASTNode = ASTElement | ASTText | ASTExpression;\n+\n+export interface ASTElement {\n+  type: 1;\n+  tag: string;\n+  attrsList: { name: string; value: any }[];\n+  attrsMap: Record<string, any>;\n+  parent: ASTElement | undefined;\n+  children: ASTNode[];\n+\n+  processed?: true;\n+\n+  static?: boolean;\n+  staticRoot?: boolean;\n+  staticInFor?: boolean;\n+  staticProcessed?: boolean;\n+  hasBindings?: boolean;\n+\n+  text?: string;\n+  attrs?: { name: string; value: any }[];\n+  props?: { name: string; value: string }[];\n+  plain?: boolean;\n+  pre?: true;\n+  ns?: string;\n+\n+  component?: string;\n+  inlineTemplate?: true;\n+  transitionMode?: string | null;\n+  slotName?: string;\n+  slotTarget?: string;\n+  slotScope?: string;\n+  scopedSlots?: Record<string, ASTElement>;\n+\n+  ref?: string;\n+  refInFor?: boolean;\n+\n+  if?: string;\n+  ifProcessed?: boolean;\n+  elseif?: string;\n+  else?: true;\n+  ifConditions?: ASTIfCondition[];\n+\n+  for?: string;\n+  forProcessed?: boolean;\n+  key?: string;\n+  alias?: string;\n+  iterator1?: string;\n+  iterator2?: string;\n+\n+  staticClass?: string;\n+  classBinding?: string;\n+  staticStyle?: string;\n+  styleBinding?: string;\n+  events?: ASTElementHandlers;\n+  nativeEvents?: ASTElementHandlers;\n+\n+  transition?: string | true;\n+  transitionOnAppear?: boolean;\n+\n+  model?: {\n+    value: string;\n+    callback: string;\n+    expression: string;\n+  };\n+\n+  directives?: ASTDirective[];\n+\n+  forbidden?: true;\n+  once?: true;\n+  onceProcessed?: boolean;\n+  wrapData?: (code: string) => string;\n+  wrapListeners?: (code: string) => string;\n+\n+  \/\/ 2.4 ssr optimization\n+  ssrOptimizability?: SSROptimizability;\n+\n+  \/\/ weex specific\n+  appendAsTree?: boolean;\n+}\n+\n+export interface ASTExpression {\n+  type: 2;\n+  expression: string;\n+  text: string;\n+  tokens: (string | Record<string, any>)[];\n+  static?: boolean;\n+  \/\/ 2.4 ssr optimization\n+  ssrOptimizability?: SSROptimizability;\n+}\n+\n+export interface ASTText {\n+  type: 3;\n+  text: string;\n+  static?: boolean;\n+  isComment?: boolean;\n+  \/\/ 2.4 ssr optimization\n+  ssrOptimizability?: SSROptimizability;\n+}\n+\n+\/*\n+ * SFC parser related types\n+ *\/\n+interface SFCParserOptions {\n+  pad?: true | 'line' | 'space';\n+}\n+\n+export interface SFCBlock {\n+  type: string;\n+  content: string;\n+  attrs: Record<string, string>;\n+  start?: number;\n+  end?: number;\n+  lang?: string;\n+  src?: string;\n+  scoped?: boolean;\n+  module?: string | boolean;\n+}\n+\n+export interface SFCDescriptor {\n+  template: SFCBlock | undefined;\n+  script: SFCBlock | undefined;\n+  styles: SFCBlock[];\n+  customBlocks: SFCBlock[];\n+}\n+\n+\/*\n+ * Exposed functions\n+ *\/\n+export function compile(\n+  template: string,\n+  options?: CompilerOptions\n+): CompiledResult;\n+\n+export function compileToFunctions(template: string): CompiledResultFunctions;\n+\n+export function ssrCompile(\n+  template: string,\n+  options?: CompilerOptions\n+): CompiledResult;\n+\n+export function ssrCompileToFunctions(template: string): CompiledResultFunctions;\n+\n+export function parseComponent(\n+  file: string,\n+  options?: SFCParserOptions\n+): SFCDescriptor;\n\n---\n file path A: None | file path B: packages\/vue-template-compiler\/types\/test.ts\n\n@@ -0,0 +1,60 @@\n+import Vue, { VNode } from \"vue\";\n+import {\n+  compile,\n+  compileToFunctions,\n+  ssrCompile,\n+  ssrCompileToFunctions,\n+  parseComponent\n+} from \".\/\";\n+\n+\/\/ check compile options\n+const compiled = compile(\"<div>hi<\/div>\", {\n+  preserveWhitespace: false,\n+  modules: [\n+    {\n+      preTransformNode: el => el,\n+      transformNode: el => el,\n+      postTransformNode: el => {\n+        el.tag = \"p\";\n+      },\n+      genData: el => el.tag,\n+      transformCode: (el, code) => code,\n+      staticKeys: [\"test\"]\n+    }\n+  ],\n+  directives: {\n+    test: (node, directiveMeta) => {\n+      node.tag;\n+      directiveMeta.value;\n+    }\n+  }\n+});\n+\n+\/\/ can be passed to function constructor\n+new Function(compiled.render);\n+compiled.staticRenderFns.map(fn => new Function(fn));\n+\n+const compiledFns = compileToFunctions(\"<div>hi<\/div>\");\n+\n+\/\/ can be passed to component render \/ staticRenderFns options\n+const vm = new Vue({\n+  data() {\n+    return {\n+      test: \"Test\"\n+    };\n+  },\n+  render: compiledFns.render,\n+  staticRenderFns: compiledFns.staticRenderFns\n+});\n+\n+\/\/ can be called with component instance\n+const vnode: VNode = compiledFns.render.call(vm);\n+\n+\/\/ check SFC parser\n+const desc = parseComponent(\"<template><\/template>\", {\n+  pad: \"space\"\n+});\n+\n+const templateContent: string = desc.template!.content;\n+const scriptContent: string = desc.script!.content;\n+const styleContent: string = desc.styles.map(s => s.content).join(\"\\n\");\n\n---\n file path A: None | file path B: packages\/vue-template-compiler\/types\/tsconfig.json\n\n@@ -0,0 +1,13 @@\n+{\n+  \"compilerOptions\": {\n+    \"target\": \"es5\",\n+    \"module\": \"commonjs\",\n+    \"moduleResolution\": \"node\",\n+    \"strict\": true,\n+    \"noEmit\": true\n+  },\n+  \"compileOnSave\": false,\n+  \"include\": [\n+    \"**\/*.ts\"\n+  ]\n+}\n\n\n###\n\n","completion":" feat(types): add types for vue-template-compiler (#<issue-num>)\n"}
{"prompt":" file path A: types\/index.d.ts | file path B: types\/index.d.ts\n\n@@ -15,6 +15,7 @@ export {\n   ComponentOptions,\n   FunctionalComponentOptions,\n   RenderContext,\n+  PropType,\n   PropOptions,\n   ComputedOptions,\n   WatchHandler,\n\n---\n file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -142,12 +142,14 @@ export interface RenderContext<Props=DefaultProps> {\n   injections: any\n }\n \n-export type Prop<T> = { (): T } | { new (...args: any[]): T & object }\n+export type Prop<T> = { (): T } | { new(...args: any[]): T & object }\n \n-export type PropValidator<T> = PropOptions<T> | Prop<T> | Prop<T>[];\n+export type PropType<T> = Prop<T> | Prop<T>[];\n+\n+export type PropValidator<T> = PropOptions<T> | PropType<T>;\n \n export interface PropOptions<T=any> {\n-  type?: Prop<T> | Prop<T>[];\n+  type?: PropType<T>;\n   required?: boolean;\n   default?: T | null | undefined | (() => T | null | undefined);\n   validator?(value: T): boolean;\n\n---\n file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -1,4 +1,4 @@\n-import Vue, { VNode } from \"..\/index\";\n+import Vue, { PropType, VNode } from \"..\/index\";\n import { ComponentOptions, Component } from \"..\/index\";\n import { CreateElement } from \"..\/vue\";\n \n@@ -59,20 +59,36 @@ class Cat {\n   private u = 1\n }\n \n+interface IUser {\n+  foo: string,\n+  bar: number\n+}\n+\n+interface ICat {\n+  foo: any,\n+  bar: object\n+}\n+\n Vue.component('union-prop', {\n   props: {\n-    primitive: [String, Number],\n+    cat: Object as PropType<ICat>,\n+    complexUnion: { type: [User, Number] as PropType<User | number> },\n+    kittyUser: Object as PropType<ICat & IUser>,\n+    mixed: [RegExp, Array],\n     object: [Cat, User],\n+    primitive: [String, Number],\n     regex: RegExp,\n-    mixed: [RegExp, Array],\n-    union: [User, Number] as {new(): User | Number}[] \/\/ requires annotation\n+    union: [User, Number] as PropType<User | number>\n   },\n   data() {\n-    this.primitive;\n+    this.cat;\n+    this.complexUnion;\n+    this.kittyUser;\n+    this.mixed;\n     this.object;\n-    this.union;\n+    this.primitive;\n     this.regex.compile;\n-    this.mixed;\n+    this.union;\n     return {\n       fixedSize: this.union,\n     }\n\n\n###\n\n","completion":" feat(types): add Prop to main type declaration file (#<issue-num>)\n"}
{"prompt":" file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -84,7 +84,7 @@ const builds = {\n     banner\n   },\n   \/\/ Runtime+compiler ES modules build (for direct import in browser)\n-  'web-full-esm-browser': {\n+  'web-full-esm-browser-dev': {\n     entry: resolve('web\/entry-runtime-with-compiler.js'),\n     dest: resolve('dist\/vue.esm.browser.js'),\n     format: 'es',\n@@ -93,6 +93,16 @@ const builds = {\n     alias: { he: '.\/entity-decoder' },\n     banner\n   },\n+  \/\/ Runtime+compiler ES modules build (for direct import in browser)\n+  'web-full-esm-browser-prod': {\n+    entry: resolve('web\/entry-runtime-with-compiler.js'),\n+    dest: resolve('dist\/vue.esm.browser.min.js'),\n+    format: 'es',\n+    transpile: false,\n+    env: 'production',\n+    alias: { he: '.\/entity-decoder' },\n+    banner\n+  },\n   \/\/ runtime-only build (Browser)\n   'web-runtime-dev': {\n     entry: resolve('web\/entry-runtime.js'),\n\n\n###\n\n","completion":" build: add esm browser prod build\n"}
{"prompt":" file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -75,7 +75,7 @@ const builds = {\n     format: 'es',\n     banner\n   },\n-  \/\/ Runtime+compiler CommonJS build (ES Modules)\n+  \/\/ Runtime+compiler ES modules build (for bundlers)\n   'web-full-esm': {\n     entry: resolve('web\/entry-runtime-with-compiler.js'),\n     dest: resolve('dist\/vue.esm.js'),\n@@ -83,6 +83,16 @@ const builds = {\n     alias: { he: '.\/entity-decoder' },\n     banner\n   },\n+  \/\/ Runtime+compiler ES modules build (for direct import in browser)\n+  'web-full-esm-browser': {\n+    entry: resolve('web\/entry-runtime-with-compiler.js'),\n+    dest: resolve('dist\/vue.esm.browser.js'),\n+    format: 'es',\n+    transpile: false,\n+    env: 'development',\n+    alias: { he: '.\/entity-decoder' },\n+    banner\n+  },\n   \/\/ runtime-only build (Browser)\n   'web-runtime-dev': {\n     entry: resolve('web\/entry-runtime.js'),\n@@ -205,7 +215,6 @@ function genConfig (name) {\n         __VERSION__: version\n       }),\n       flow(),\n-      buble(),\n       alias(Object.assign({}, aliases, opts.alias))\n     ].concat(opts.plugins || []),\n     output: {\n@@ -227,6 +236,10 @@ function genConfig (name) {\n     }))\n   }\n \n+  if (opts.transpile !== false) {\n+    config.plugins.push(buble())\n+  }\n+\n   Object.defineProperty(config, '_name', {\n     enumerable: false,\n     value: name\n\n\n###\n\n","completion":" feat: add browser ESM build\n"}
{"prompt":" file path A: src\/core\/instance\/events.js | file path B: src\/core\/instance\/events.js\n\n@@ -102,16 +102,14 @@ export function eventsMixin (Vue: Class<Component>) {\n       vm._events[event] = null\n       return vm\n     }\n-    if (fn) {\n-      \/\/ specific handler\n-      let cb\n-      let i = cbs.length\n-      while (i--) {\n-        cb = cbs[i]\n-        if (cb === fn || cb.fn === fn) {\n-          cbs.splice(i, 1)\n-          break\n-        }\n+    \/\/ specific handler\n+    let cb\n+    let i = cbs.length\n+    while (i--) {\n+      cb = cbs[i]\n+      if (cb === fn || cb.fn === fn) {\n+        cbs.splice(i, 1)\n+        break\n       }\n     }\n     return vm\n\n---\n file path A: src\/core\/util\/debug.js | file path B: src\/core\/util\/debug.js\n\n@@ -41,7 +41,7 @@ if (process.env.NODE_ENV !== 'production') {\n       ? vm.options\n       : vm._isVue\n         ? vm.$options || vm.constructor.options\n-        : vm || {}\n+        : vm\n     let name = options.name || options._componentTag\n     const file = options.__file\n     if (!name && file) {\n\n---\n file path A: src\/server\/template-renderer\/index.js | file path B: src\/server\/template-renderer\/index.js\n\n@@ -207,7 +207,7 @@ export default class TemplateRenderer {\n     if (this.clientManifest) {\n       const initial = this.preloadFiles.filter(({ file }) => isJS(file))\n       const async = (this.getUsedAsyncFiles(context) || []).filter(({ file }) => isJS(file))\n-      const needed = [initial[0]].concat(async || [], initial.slice(1))\n+      const needed = [initial[0]].concat(async, initial.slice(1))\n       return needed.map(({ file }) => {\n         return `<script src=\"${this.publicPath}${file}\" defer><\/script>`\n       }).join('')\n\n\n###\n\n","completion":" refactor: tiny cleanup changes (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/dep.js | file path B: src\/core\/observer\/dep.js\n\n@@ -49,9 +49,9 @@ export default class Dep {\n   }\n }\n \n-\/\/ the current target watcher being evaluated.\n-\/\/ this is globally unique because there could be only one\n-\/\/ watcher being evaluated at any time.\n+\/\/ The current target watcher being evaluated.\n+\/\/ This is globally unique because only one watcher\n+\/\/ can be evaluated at a time.\n Dep.target = null\n const targetStack = []\n \n\n\n###\n\n","completion":" chore: minor comment cleanup (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/optimizing-compiler\/codegen.js | file path B: src\/server\/optimizing-compiler\/codegen.js\n\n@@ -225,7 +225,11 @@ function nodesToSegments (\n     } else if (c.type === 2) {\n       segments.push({ type: INTERPOLATION, value: c.expression })\n     } else if (c.type === 3) {\n-      segments.push({ type: RAW, value: escape(c.text) })\n+      let text = escape(c.text)\n+      if (c.isComment) {\n+        text = '<!--' + text + '-->'\n+      }\n+      segments.push({ type: RAW, value: text })\n     }\n   }\n   return segments\n\n---\n file path A: None | file path B: test\/unit\/modules\/server-compiler\/compiler-options.spec.js\n\n@@ -0,0 +1,13 @@\n+import { ssrCompile } from 'web\/server\/compiler'\n+\n+describe('ssrCompile options', () => {\n+  it('comments', () => {\n+    const compiled = ssrCompile(`\n+      <div>\n+        <!-- test comments -->\n+      <\/div>\n+    `, { comments: true })\n+\n+    expect(compiled.render).toContain('<!-- test comments -->')\n+  })\n+})\n\n\n###\n\n","completion":" fix(ssr): support rendering comment (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.5.20\",\n+  \"version\": \"2.5.21\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.5.21\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/render-list.js | file path B: src\/core\/instance\/render-helpers\/render-list.js\n\n@@ -32,8 +32,9 @@ export function renderList (\n       ret[i] = render(val[key], key, i)\n     }\n   }\n-  if (isDef(ret)) {\n-    (ret: any)._isVList = true\n+  if (!isDef(ret)) {\n+    ret = []\n   }\n+  (ret: any)._isVList = true\n   return ret\n }\n\n---\n file path A: src\/core\/vdom\/helpers\/normalize-children.js | file path B: src\/core\/vdom\/helpers\/normalize-children.js\n\n@@ -16,9 +16,6 @@ import { isFalse, isTrue, isDef, isUndef, isPrimitive } from 'shared\/util'\n \/\/ thing with Array.prototype.concat. It is guaranteed to be only 1-level deep\n \/\/ because functional components already normalize their own children.\n export function simpleNormalizeChildren (children: any) {\n-  if (!Array.isArray(children)) {\n-    return\n-  }\n   for (let i = 0; i < children.length; i++) {\n     if (Array.isArray(children[i])) {\n       return Array.prototype.concat.apply([], children)\n\n---\n file path A: test\/unit\/features\/directives\/for.spec.js | file path B: test\/unit\/features\/directives\/for.spec.js\n\n@@ -489,7 +489,7 @@ describe('Directive v-for', () => {\n     const vm = new Vue({\n       template:\n         '<div attr>' +\n-          '<foo v-for=\"item in list\">{{ item }}<\/foo>' +\n+          '<foo v-for=\"item in list\" :key=\"item\">{{ item }}<\/foo>' +\n         '<\/div>',\n       data: {\n         list: undefined\n@@ -507,6 +507,23 @@ describe('Directive v-for', () => {\n     }).then(done)\n   })\n \n+  it('elements with v-for and empty list', done => {\n+    const vm = new Vue({\n+      template:\n+        '<div attr>' +\n+          '<div v-for=\"item in list\">{{ item }}<\/div>' +\n+        '<\/div>',\n+      data: {\n+        list: undefined\n+      }\n+    }).$mount()\n+    expect(vm.$el.innerHTML).toBe('')\n+    vm.list = [1, 2, 3]\n+    waitForUpdate(() => {\n+      expect(vm.$el.innerHTML).toBe('<div>1<\/div><div>2<\/div><div>3<\/div>')\n+    }).then(done)\n+  })\n+\n   const supportsDestructuring = (() => {\n     try {\n       new Function('var { foo } = bar')\n\n\n###\n\n","completion":" fix: fix single v-for child optimization\n"}
{"prompt":" file path A: examples\/todomvc\/index.html | file path B: examples\/todomvc\/index.html\n\n@@ -15,7 +15,7 @@\n           autofocus autocomplete=\"off\"\n           placeholder=\"What needs to be done?\"\n           v-model=\"newTodo\"\n-          @keypress.enter=\"addTodo\">\n+          @keyup.enter=\"addTodo\">\n       <\/header>\n       <section class=\"main\" v-show=\"todos.length\" v-cloak>\n         <input class=\"toggle-all\" type=\"checkbox\" v-model=\"allDone\">\n@@ -33,7 +33,7 @@\n               v-model=\"todo.title\"\n               v-todo-focus=\"todo == editedTodo\"\n               @blur=\"doneEdit(todo)\"\n-              @keypress.enter=\"doneEdit(todo)\"\n+              @keyup.enter=\"doneEdit(todo)\"\n               @keyup.esc=\"cancelEdit(todo)\">\n           <\/li>\n         <\/ul>\n\n\n###\n\n","completion":" revert: \"chore: use keypress in TodoMVC example for IME input methods (#<issue-num>)\"\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -406,7 +406,9 @@ export function genChildren (\n       el.tag !== 'template' &&\n       el.tag !== 'slot'\n     ) {\n-      const normalizationType = checkSkip && state.maybeComponent(el) ? `,1` : ``\n+      const normalizationType = checkSkip\n+        ? state.maybeComponent(el) ? `,1` : `,0`\n+        : ``\n       return `${(altGenElement || genElement)(el, state)}${normalizationType}`\n     }\n     const normalizationType = checkSkip\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -54,25 +54,25 @@ describe('codegen', () => {\n   it('generate v-for directive', () => {\n     assertCodegen(\n       '<div><li v-for=\"item in items\" :key=\"item.uid\"><\/li><\/div>',\n-      `with(this){return _c('div',_l((items),function(item){return _c('li',{key:item.uid})}))}`\n+      `with(this){return _c('div',_l((items),function(item){return _c('li',{key:item.uid})}),0)}`\n     )\n     \/\/ iterator syntax\n     assertCodegen(\n       '<div><li v-for=\"(item, i) in items\"><\/li><\/div>',\n-      `with(this){return _c('div',_l((items),function(item,i){return _c('li')}))}`\n+      `with(this){return _c('div',_l((items),function(item,i){return _c('li')}),0)}`\n     )\n     assertCodegen(\n       '<div><li v-for=\"(item, key, index) in items\"><\/li><\/div>',\n-      `with(this){return _c('div',_l((items),function(item,key,index){return _c('li')}))}`\n+      `with(this){return _c('div',_l((items),function(item,key,index){return _c('li')}),0)}`\n     )\n     \/\/ destructuring\n     assertCodegen(\n       '<div><li v-for=\"{ a, b } in items\"><\/li><\/div>',\n-      `with(this){return _c('div',_l((items),function({ a, b }){return _c('li')}))}`\n+      `with(this){return _c('div',_l((items),function({ a, b }){return _c('li')}),0)}`\n     )\n     assertCodegen(\n       '<div><li v-for=\"({ a, b }, key, index) in items\"><\/li><\/div>',\n-      `with(this){return _c('div',_l((items),function({ a, b },key,index){return _c('li')}))}`\n+      `with(this){return _c('div',_l((items),function({ a, b },key,index){return _c('li')}),0)}`\n     )\n     \/\/ v-for with extra element\n     assertCodegen(\n@@ -126,7 +126,7 @@ describe('codegen', () => {\n   it('generate ref on v-for', () => {\n     assertCodegen(\n       '<ul><li v-for=\"item in items\" ref=\"component1\"><\/li><\/ul>',\n-      `with(this){return _c('ul',_l((items),function(item){return _c('li',{ref:\"component1\",refInFor:true})}))}`\n+      `with(this){return _c('ul',_l((items),function(item){return _c('li',{ref:\"component1\",refInFor:true})}),0)}`\n     )\n   })\n \n@@ -597,7 +597,7 @@ describe('codegen', () => {\n   it('generate static trees inside v-for', () => {\n     assertCodegen(\n       `<div><div v-for=\"i in 10\"><p><span><\/span><\/p><\/div><\/div>`,\n-      `with(this){return _c('div',_l((10),function(i){return _c('div',[_m(0,true)])}))}`,\n+      `with(this){return _c('div',_l((10),function(i){return _c('div',[_m(0,true)])}),0)}`,\n       [`with(this){return _c('p',[_c('span')])}`]\n     )\n   })\n\n\n###\n\n","completion":" perf: skip normalization on single child element v-for\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/normalize-children.js | file path B: src\/core\/vdom\/helpers\/normalize-children.js\n\n@@ -16,6 +16,9 @@ import { isFalse, isTrue, isDef, isUndef, isPrimitive } from 'shared\/util'\n \/\/ thing with Array.prototype.concat. It is guaranteed to be only 1-level deep\n \/\/ because functional components already normalize their own children.\n export function simpleNormalizeChildren (children: any) {\n+  if (!Array.isArray(children)) {\n+    return\n+  }\n   for (let i = 0; i < children.length; i++) {\n     if (Array.isArray(children[i])) {\n       return Array.prototype.concat.apply([], children)\n\n---\n file path A: test\/unit\/features\/directives\/for.spec.js | file path B: test\/unit\/features\/directives\/for.spec.js\n\n@@ -484,6 +484,29 @@ describe('Directive v-for', () => {\n     expect(vm.$el.textContent).toBe('12')\n   })\n \n+  \/\/ #9181\n+  it('components with v-for and empty list', done => {\n+    const vm = new Vue({\n+      template:\n+        '<div attr>' +\n+          '<foo v-for=\"item in list\">{{ item }}<\/foo>' +\n+        '<\/div>',\n+      data: {\n+        list: undefined\n+      },\n+      components: {\n+        foo: {\n+          template: '<div><slot><\/slot><\/div>'\n+        },\n+      }\n+    }).$mount()\n+    expect(vm.$el.innerHTML).toBe('')\n+    vm.list = [1, 2, 3]\n+    waitForUpdate(() => {\n+      expect(vm.$el.innerHTML).toBe('<div>1<\/div><div>2<\/div><div>3<\/div>')\n+    }).then(done)\n+  })\n+\n   const supportsDestructuring = (() => {\n     try {\n       new Function('var { foo } = bar')\n\n\n###\n\n","completion":" fix: fix v-for component with undefined value\n"}
{"prompt":" file path A: test\/unit\/features\/directives\/model-text.spec.js | file path B: test\/unit\/features\/directives\/model-text.spec.js\n\n@@ -238,7 +238,7 @@ describe('Directive v-model text', () => {\n       template: '<input v-model=\"a\" @input=\"onInput\">',\n       methods: {\n         onInput (e) {\n-          spy(e.target.value)\n+          spy(this.a)\n         }\n       }\n     }).$mount()\n\n\n###\n\n","completion":" test: change model text's priority case (#<issue-num>)\n"}
{"prompt":" file path A: examples\/todomvc\/index.html | file path B: examples\/todomvc\/index.html\n\n@@ -15,7 +15,7 @@\n           autofocus autocomplete=\"off\"\n           placeholder=\"What needs to be done?\"\n           v-model=\"newTodo\"\n-          @keyup.enter=\"addTodo\">\n+          @keypress.enter=\"addTodo\">\n       <\/header>\n       <section class=\"main\" v-show=\"todos.length\" v-cloak>\n         <input class=\"toggle-all\" type=\"checkbox\" v-model=\"allDone\">\n@@ -33,7 +33,7 @@\n               v-model=\"todo.title\"\n               v-todo-focus=\"todo == editedTodo\"\n               @blur=\"doneEdit(todo)\"\n-              @keyup.enter=\"doneEdit(todo)\"\n+              @keypress.enter=\"doneEdit(todo)\"\n               @keyup.esc=\"cancelEdit(todo)\">\n           <\/li>\n         <\/ul>\n\n\n###\n\n","completion":" chore: use keypress in TodoMVC example for IME input methods (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/lifecycle.js | file path B: src\/core\/instance\/lifecycle.js\n\n@@ -196,7 +196,7 @@ export function mountComponent (\n   \/\/ component's mounted hook), which relies on vm._watcher being already defined\n   new Watcher(vm, updateComponent, noop, {\n     before () {\n-      if (vm._isMounted) {\n+      if (vm._isMounted && !vm._isDestroyed) {\n         callHook(vm, 'beforeUpdate')\n       }\n     }\n\n---\n file path A: test\/unit\/features\/options\/lifecycle.spec.js | file path B: test\/unit\/features\/options\/lifecycle.spec.js\n\n@@ -152,6 +152,43 @@ describe('Options lifecycle hooks', () => {\n         expect(vm.$el.textContent).toBe('bar!')\n       }).then(done)\n     })\n+\n+    \/\/ #8076\n+    it('should not be called after destroy', done => {\n+      const beforeUpdate = jasmine.createSpy('beforeUpdate')\n+      const destroyed = jasmine.createSpy('destroyed')\n+\n+      Vue.component('todo', {\n+        template: '<div>{{todo.done}}<\/div>',\n+        props: ['todo'],\n+        destroyed,\n+        beforeUpdate\n+      })\n+\n+      const vm = new Vue({\n+        template: `\n+          <div>\n+            <todo v-for=\"t in pendingTodos\" :todo=\"t\" :key=\"t.id\"><\/todo>\n+          <\/div>\n+        `,\n+        data () {\n+          return {\n+            todos: [{ id: 1, done: false }]\n+          }\n+        },\n+        computed: {\n+          pendingTodos () {\n+            return this.todos.filter(t => !t.done)\n+          }\n+        }\n+      }).$mount()\n+\n+      vm.todos[0].done = true\n+      waitForUpdate(() => {\n+        expect(destroyed).toHaveBeenCalled()\n+        expect(beforeUpdate).not.toHaveBeenCalled()\n+      }).then(done)\n+    })\n   })\n \n   describe('updated', () => {\n\n\n###\n\n","completion":" fix(lifecycle): beforeUpdated should not be called if component is destroyed (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/weex\/runtime\/modules\/class.js | file path B: src\/platforms\/weex\/runtime\/modules\/class.js\n\n@@ -44,6 +44,8 @@ function makeClassList (data: VNodeData): Array<string> {\n     classList.push.apply(classList, dataClass)\n   } else if (isObject(dataClass)) {\n     classList.push.apply(classList, Object.keys(dataClass).filter(className => dataClass[className]))\n+  } else if (typeof dataClass === 'string') {\n+    classList.push.apply(classList, dataClass.trim().split(\/\\s+\/))\n   }\n   return classList\n }\n\n\n###\n\n","completion":" fix(weex): support data class type that is string (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -340,7 +340,7 @@ function processKey (el) {\n         const parent = el.parent\n         if (iterator && iterator === exp && parent && parent.tag === 'transition-group') {\n           warn(\n-            `Do not use v-for index as key on <transtion-group> children, ` +\n+            `Do not use v-for index as key on <transition-group> children, ` +\n             `this is the same as not using keys.`\n           )\n         }\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -250,7 +250,7 @@ describe('parser', () => {\n         <\/transition-group>\n       <\/div>\n     `, baseOptions)\n-    expect('Do not use v-for index as key on <transtion-group> children').toHaveBeenWarned()\n+    expect('Do not use v-for index as key on <transition-group> children').toHaveBeenWarned()\n   })\n \n   it('v-pre directive', () => {\n\n\n###\n\n","completion":" chore: fix tag name in compiler\/parser\/index.js (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/directives\/model.js | file path B: src\/compiler\/directives\/model.js\n\n@@ -25,7 +25,7 @@ export function genComponentModel (\n \n   el.model = {\n     value: `(${value})`,\n-    expression: `\"${value}\"`,\n+    expression: JSON.stringify(value),\n     callback: `function (${baseValueExpression}) {${assignment}}`\n   }\n }\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -151,6 +151,27 @@ describe('codegen', () => {\n     )\n   })\n \n+  it('generate v-model directive', () => {\n+    assertCodegen(\n+      '<input v-model=\"test\">',\n+      `with(this){return _c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(test),expression:\"test\"}],domProps:{\"value\":(test)},on:{\"input\":function($event){if($event.target.composing)return;test=$event.target.value}}})}`\n+    )\n+  })\n+\n+  it('generate multiline v-model directive', () => {\n+    assertCodegen(\n+      '<input v-model=\"\\n test \\n\">',\n+      `with(this){return _c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(\\n test \\n),expression:\"\\\\n test \\\\n\"}],domProps:{\"value\":(\\n test \\n)},on:{\"input\":function($event){if($event.target.composing)return;\\n test \\n=$event.target.value}}})}`\n+    )\n+  })\n+\n+  it('generate multiline v-model directive on custom component', () => {\n+    assertCodegen(\n+      '<my-component v-model=\"\\n test \\n\" \/>',\n+      `with(this){return _c('my-component',{model:{value:(\\n test \\n),callback:function ($$v) {\\n test \\n=$$v},expression:\"\\\\n test \\\\n\"}})}`\n+    )\n+  })\n+\n   it('generate template tag', () => {\n     assertCodegen(\n       '<div><template><p>{{hello}}<\/p><\/template><\/div>',\n\n\n###\n\n","completion":" fix(v-model): properly handle multiline v-model expressions (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -281,6 +281,12 @@ Vue.component('provide-function', {\n   })\n })\n \n+Vue.component('component-with-slot', {\n+  render (h): VNode {\n+    return h('div', this.$slots.default)\n+  }\n+})\n+\n Vue.component('component-with-scoped-slot', {\n   render (h) {\n     interface ScopedSlotProps {\n@@ -301,6 +307,12 @@ Vue.component('component-with-scoped-slot', {\n       h('child', {\n         \/\/ Passing down all slots from parent\n         scopedSlots: this.$scopedSlots\n+      }),\n+      h('child', {\n+        \/\/ Passing down single slot from parent\n+        scopedSlots: {\n+          default: this.$scopedSlots.default\n+        }\n       })\n     ])\n   },\n@@ -320,16 +332,22 @@ Vue.component('narrow-array-of-vnode-type', {\n   render (h): VNode {\n     const slot = this.$scopedSlots.default!({})\n     if (typeof slot === 'string') {\n+      \/\/ <template slot-scope=\"data\">bare string<\/template>\n       return h('span', slot)\n     } else if (Array.isArray(slot)) {\n+      \/\/ template with multiple children\n       const first = slot[0]\n-      if (!Array.isArray(first) && typeof first !== 'string') {\n+      if (!Array.isArray(first) && typeof first !== 'string' && first) {\n         return first\n       } else {\n         return h()\n       }\n-    } else {\n+    } else if (slot) {\n+      \/\/ <div slot-scope=\"data\">bare VNode<\/div>\n       return slot\n+    } else {\n+      \/\/ empty template, slot === undefined\n+      return h()\n     }\n   }\n })\n\n---\n file path A: types\/vnode.d.ts | file path B: types\/vnode.d.ts\n\n@@ -1,9 +1,14 @@\n import { Vue } from \".\/vue\";\n \n-export type ScopedSlot = (props: any) => VNodeChildrenArrayContents | VNode | string;\n+\/\/ Scoped slots can technically return anything if used from\n+\/\/ a render function, but this is \"good enough\" for templates\n+export type ScopedSlot = (props: any) => ScopedSlotChildren;\n+export type ScopedSlotChildren = ScopedSlotArrayContents | VNode | string | undefined;\n+export interface ScopedSlotArrayContents extends Array<ScopedSlotChildren> {}\n \n-export type VNodeChildren = VNodeChildrenArrayContents | [ScopedSlot] | string;\n-export interface VNodeChildrenArrayContents extends Array<VNode | string | VNodeChildrenArrayContents> {}\n+\/\/ Relaxed type compatible with $createElement\n+export type VNodeChildren = VNodeChildrenArrayContents | [ScopedSlot] | string | boolean | null | undefined;\n+export interface VNodeChildrenArrayContents extends Array<VNodeChildren | VNode> {}\n \n export interface VNode {\n   tag?: string;\n@@ -27,7 +32,7 @@ export interface VNodeComponentOptions {\n   Ctor: typeof Vue;\n   propsData?: object;\n   listeners?: object;\n-  children?: VNodeChildren;\n+  children?: VNode[];\n   tag?: string;\n }\n \n\n\n###\n\n","completion":" fix(types): accept primatives and falsy values in createElement children (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.5.19\",\n+  \"version\": \"2.5.20\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.5.20\n"}
{"prompt":" file path A: types\/test\/tsconfig.json | file path B: types\/test\/tsconfig.json\n\n@@ -1,6 +1,7 @@\n {\n   \"compilerOptions\": {\n     \"target\": \"es5\",\n+    \"experimentalDecorators\": true,\n     \"lib\": [\n       \"dom\",\n       \"es2015\"\n\n---\n file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -102,10 +102,10 @@ class Test extends Vue {\n     this.compile(\"<div>{{ message }}<\/div>\");\n     this\n       .use(() => {\n-        \n+\n       })\n       .use(() => {\n-        \n+\n       })\n       .mixin({})\n       .mixin({});\n@@ -193,3 +193,10 @@ Vue.extend({\n     return h('canvas', {}, [a])\n   }\n })\n+\n+declare function decorate<VC extends typeof Vue>(v: VC): VC;\n+\n+@decorate\n+class Decorated extends Vue {\n+  a = 123;\n+}\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -111,9 +111,9 @@ export interface VueConstructor<V extends Vue = Vue> {\n   component<Props>(id: string, definition: FunctionalComponentOptions<Props, RecordPropsDefinition<Props>>): ExtendedVue<V, {}, {}, {}, Props>;\n   component(id: string, definition?: ComponentOptions<V>): ExtendedVue<V, {}, {}, {}, {}>;\n \n-  use<T>(plugin: PluginObject<T> | PluginFunction<T>, options?: T): this;\n-  use(plugin: PluginObject<any> | PluginFunction<any>, ...options: any[]): this;\n-  mixin(mixin: VueConstructor | ComponentOptions<Vue>): this;\n+  use<T>(plugin: PluginObject<T> | PluginFunction<T>, options?: T): VueConstructor<V>;\n+  use(plugin: PluginObject<any> | PluginFunction<any>, ...options: any[]): VueConstructor<V>;\n+  mixin(mixin: VueConstructor | ComponentOptions<Vue>): VueConstructor<V>;\n   compile(template: string): {\n     render(createElement: typeof Vue.prototype.$createElement): VNode;\n     staticRenderFns: (() => VNode)[];\n\n\n###\n\n","completion":" fix(types): avoid `this` in VueConstructor signature (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.5.18\",\n+  \"version\": \"2.5.19\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.5.19\n"}
{"prompt":" file path A: src\/core\/vdom\/patch.js | file path B: src\/core\/vdom\/patch.js\n\n@@ -32,12 +32,6 @@ export const emptyNode = new VNode('', {}, [])\n \n const hooks = ['create', 'activate', 'update', 'remove', 'destroy']\n \n-function childrenIgnored (vnode) {\n-  return vnode && vnode.data && vnode.data.domProps && (\n-    vnode.data.domProps.innerHTML || vnode.data.domProps.textContent\n-  )\n-}\n-\n function sameVnode (a, b) {\n   return (\n     a.key === b.key && (\n@@ -45,7 +39,6 @@ function sameVnode (a, b) {\n         a.tag === b.tag &&\n         a.isComment === b.isComment &&\n         isDef(a.data) === isDef(b.data) &&\n-        !childrenIgnored(a) && !childrenIgnored(b) &&\n         sameInputType(a, b)\n       ) || (\n         isTrue(a.isAsyncPlaceholder) &&\n\n\n###\n\n","completion":" fix(vdom): remove unnecessary sameVnode condition\n"}
{"prompt":" file path A: src\/sfc\/parser.js | file path B: src\/sfc\/parser.js\n\n@@ -83,15 +83,11 @@ export function parseComponent (\n   function end (tag: string, start: number) {\n     if (depth === 1 && currentBlock) {\n       currentBlock.end = start\n-      let text = content.slice(currentBlock.start, currentBlock.end)\n+      let text = deindent(content.slice(currentBlock.start, currentBlock.end))\n       \/\/ pad content so that linters and pre-processors can output correct\n       \/\/ line numbers in errors and warnings\n-      if (options.pad) {\n+      if (currentBlock.type !== 'template' && options.pad) {\n         text = padContent(currentBlock, options.pad) + text\n-      } else {\n-        \/\/ avoid to deindent if pad option is specified\n-        \/\/ to retain original source position.\n-        text = deindent(text)\n       }\n       currentBlock.content = text\n       currentBlock = null\n\n---\n file path A: test\/unit\/modules\/sfc\/sfc-parser.spec.js | file path B: test\/unit\/modules\/sfc\/sfc-parser.spec.js\n\n@@ -71,42 +71,21 @@ describe('Single File Component parser', () => {\n     const padLine = parseComponent(content.trim(), { pad: 'line' })\n     const padSpace = parseComponent(content.trim(), { pad: 'space' })\n \n-    expect(padDefault.template.content).toBe(Array(1).join('\\n') + `\n-        <div><\/div>\n-      `)\n-    expect(padDefault.script.content).toBe(Array(3 + 1).join('\/\/\\n') + `\n-        export default {}\n-      `)\n-    expect(padDefault.styles[0].content).toBe(Array(6 + 1).join('\\n') + `\n-        h1 { color: red }\n-      `)\n-    expect(padLine.template.content).toBe(Array(1).join('\\n') + `\n-        <div><\/div>\n-      `)\n-    expect(padLine.script.content).toBe(Array(3 + 1).join('\/\/\\n') + `\n-        export default {}\n-      `)\n-    expect(padLine.styles[0].content).toBe(Array(6 + 1).join('\\n') + `\n-        h1 { color: red }\n-      `)\n-    expect(padSpace.template.content).toBe(`<template>`.replace(\/.\/g, ' ') + `\n-        <div><\/div>\n-      `)\n+    expect(padDefault.script.content).toBe(Array(3 + 1).join('\/\/\\n') + '\\nexport default {}\\n')\n+    expect(padDefault.styles[0].content).toBe(Array(6 + 1).join('\\n') + '\\nh1 { color: red }\\n')\n+    expect(padLine.script.content).toBe(Array(3 + 1).join('\/\/\\n') + '\\nexport default {}\\n')\n+    expect(padLine.styles[0].content).toBe(Array(6 + 1).join('\\n') + '\\nh1 { color: red }\\n')\n     expect(padSpace.script.content).toBe(`<template>\n         <div><\/div>\n       <\/template>\n-      <script>`.replace(\/.\/g, ' ') + `\n-        export default {}\n-      `)\n+      <script>`.replace(\/.\/g, ' ') + '\\nexport default {}\\n')\n     expect(padSpace.styles[0].content).toBe(`<template>\n         <div><\/div>\n       <\/template>\n       <script>\n         export default {}\n       <\/script>\n-      <style>`.replace(\/.\/g, ' ') + `\n-        h1 { color: red }\n-      `)\n+      <style>`.replace(\/.\/g, ' ') + '\\nh1 { color: red }\\n')\n   })\n \n   it('should handle template blocks with lang as special text', () => {\n\n\n###\n\n","completion":" revert: fix(sfc): avoid deindent when pad option is specified (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/render.js | file path B: src\/server\/render.js\n\n@@ -326,7 +326,7 @@ function renderStartingTag (node: VNode, context) {\n       for (let i = 0; i < dirs.length; i++) {\n         const name = dirs[i].name\n         if (name !== 'show') {\n-          const dirRenderer = resolveAsset(context, 'directives', name, true)\n+          const dirRenderer = resolveAsset(context, 'directives', name)\n           if (dirRenderer) {\n             \/\/ directives mutate the node's data\n             \/\/ which then gets rendered by modules\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -794,23 +794,6 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n-  it('should resolve custom directive', done => {\n-    renderToString(new Vue({\n-      directives: {\n-        test: {\n-          bind(node) {\n-            node.data.domProps = { textContent: 'test' }\n-          }\n-        }\n-      },\n-      template: '<div v-test><\/div>',\n-    }), (err, result) => {\n-      expect('Failed to resolve directive: test').not.toHaveBeenWarned()\n-      expect(result).toContain('<div data-server-rendered=\"true\">test<\/div>')\n-      done()\n-    })\n-  })\n-\n   it('custom directives', done => {\n     const renderer = createRenderer({\n       directives: {\n@@ -843,6 +826,22 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n+  it('should not warn for custom directives that do not have server-side implementation', done => {\n+    renderToString(new Vue({\n+      directives: {\n+        test: {\n+          bind() {\n+            \/\/ noop\n+          }\n+        }\n+      },\n+      template: '<div v-test><\/div>',\n+    }), () => {\n+      expect('Failed to resolve directive: test').not.toHaveBeenWarned()\n+      done()\n+    })\n+  })\n+\n   it('_scopeId', done => {\n     renderVmWithOptions({\n       _scopeId: '_v-parent',\n\n\n###\n\n","completion":" fix(ssr): should not warn for custom directives that do not have ssr implementation\n"}
{"prompt":" file path A: test\/ssr\/jasmine.js | file path B: test\/ssr\/jasmine.js\n\n@@ -4,6 +4,7 @@ module.exports = {\n     '*.spec.js'\n   ],\n   helpers: [\n-    require.resolve('@babel\/register')\n+    require.resolve('@babel\/register'),\n+    '..\/helpers\/to-have-been-warned.js'\n   ]\n }\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -794,6 +794,23 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n+  it('should resolve custom directive', done => {\n+    renderToString(new Vue({\n+      directives: {\n+        test: {\n+          bind(node) {\n+            node.data.domProps = { textContent: 'test' }\n+          }\n+        }\n+      },\n+      template: '<div v-test><\/div>',\n+    }), (err, result) => {\n+      expect('Failed to resolve directive: test').not.toHaveBeenWarned()\n+      expect(result).toContain('<div data-server-rendered=\"true\">test<\/div>')\n+      done()\n+    })\n+  })\n+\n   it('custom directives', done => {\n     const renderer = createRenderer({\n       directives: {\n\n\n###\n\n","completion":" test(ssr): add basic directives test (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.5.18-beta.0\",\n+  \"version\": \"2.5.18\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.5.18\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -15,12 +15,24 @@ export type Component<Data=DefaultData<never>, Methods=DefaultMethods<never>, Co\n interface EsModuleComponent {\n   default: Component\n }\n+                      \n+export type AsyncComponent<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps>\n+  = AsyncComponentPromise<Data, Methods, Computed, Props>\n+  | AsyncComponentFactory<Data, Methods, Computed, Props>\n \n-export type AsyncComponent<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps> = (\n+export type AsyncComponentPromise<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps> = (\n   resolve: (component: Component<Data, Methods, Computed, Props>) => void,\n   reject: (reason?: any) => void\n ) => Promise<Component | EsModuleComponent> | void;\n \n+export type AsyncComponentFactory<Data=DefaultData<never>, Methods=DefaultMethods<never>, Computed=DefaultComputed, Props=DefaultProps> = () => {\n+  component: AsyncComponentPromise<Data, Methods, Computed, Props>;\n+  loading?: Component | EsModuleComponent;\n+  error?: Component | EsModuleComponent;\n+  delay?: number;\n+  timeout?: number;\n+}\n+\n \/**\n  * When the `Computed` type parameter on `ComponentOptions` is inferred,\n  * it should have a property with the return type of every get-accessor.\n\n\n###\n\n","completion":" fix(types): type support for advanced async components (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/lifecycle.js | file path B: src\/core\/instance\/lifecycle.js\n\n@@ -21,6 +21,14 @@ import {\n export let activeInstance: any = null\n export let isUpdatingChildComponent: boolean = false\n \n+export function setActiveInstance(vm: Component) {\n+  const prevActiveInstance = activeInstance\n+  activeInstance = vm\n+  return () => {\n+    activeInstance = prevActiveInstance\n+  }\n+}\n+\n export function initLifecycle (vm: Component) {\n   const options = vm.$options\n \n@@ -52,8 +60,7 @@ export function lifecycleMixin (Vue: Class<Component>) {\n     const vm: Component = this\n     const prevEl = vm.$el\n     const prevVnode = vm._vnode\n-    const prevActiveInstance = activeInstance\n-    activeInstance = vm\n+    const restoreActiveInstance = setActiveInstance(vm)\n     vm._vnode = vnode\n     \/\/ Vue.prototype.__patch__ is injected in entry points\n     \/\/ based on the rendering backend used.\n@@ -64,7 +71,7 @@ export function lifecycleMixin (Vue: Class<Component>) {\n       \/\/ updates\n       vm.$el = vm.__patch__(prevVnode, vnode)\n     }\n-    activeInstance = prevActiveInstance\n+    restoreActiveInstance()\n     \/\/ update __vue__ reference\n     if (prevEl) {\n       prevEl.__vue__ = null\n\n---\n file path A: src\/platforms\/web\/runtime\/components\/transition-group.js | file path B: src\/platforms\/web\/runtime\/components\/transition-group.js\n\n@@ -14,6 +14,7 @@\n import { warn, extend } from 'core\/util\/index'\n import { addClass, removeClass } from '..\/class-util'\n import { transitionProps, extractTransitionData } from '.\/transition'\n+import { setActiveInstance } from 'core\/instance\/lifecycle'\n \n import {\n   hasTransition,\n@@ -36,6 +37,7 @@ export default {\n   beforeMount () {\n     const update = this._update\n     this._update = (vnode, hydrating) => {\n+      const restoreActiveInstance = setActiveInstance(this)\n       \/\/ force removing pass\n       this.__patch__(\n         this._vnode,\n@@ -44,6 +46,7 @@ export default {\n         true \/\/ removeOnly (!important, avoids unnecessary moves)\n       )\n       this._vnode = this.kept\n+      restoreActiveInstance()\n       update.call(this, vnode, hydrating)\n     }\n   },\n\n\n###\n\n","completion":" fix(transition-group): fix activeInstance regression\n"}
{"prompt":" file path A: src\/compiler\/codegen\/events.js | file path B: src\/compiler\/codegen\/events.js\n\n@@ -22,13 +22,15 @@ const keyNames: { [key: string]: string | Array<string> } = {\n   esc: ['Esc', 'Escape'],\n   tab: 'Tab',\n   enter: 'Enter',\n-  space: ' ',\n+  \/\/ #9112: IE11 uses `Spacebar` for Space key name.\n+  space: [' ', 'Spacebar'],\n   \/\/ #7806: IE11 uses key names without `Arrow` prefix for arrow keys.\n   up: ['Up', 'ArrowUp'],\n   left: ['Left', 'ArrowLeft'],\n   right: ['Right', 'ArrowRight'],\n   down: ['Down', 'ArrowDown'],\n-  'delete': ['Backspace', 'Delete']\n+  \/\/ #9112: IE11 uses `Del` for Delete key name.\n+  'delete': ['Backspace', 'Delete', 'Del']\n }\n \n \/\/ #4868: modifiers that prevent the execution of the listener\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -333,12 +333,22 @@ describe('codegen', () => {\n     \/\/ multiple keycodes (delete)\n     assertCodegen(\n       '<input @input.delete=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"input\":function($event){if(!('button' in $event)&&_k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\"]))return null;return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"input\":function($event){if(!('button' in $event)&&_k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"]))return null;return onInput($event)}}})}`\n+    )\n+    \/\/ multiple keycodes (esc)\n+    assertCodegen(\n+      '<input @input.esc=\"onInput\">',\n+      `with(this){return _c('input',{on:{\"input\":function($event){if(!('button' in $event)&&_k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"]))return null;return onInput($event)}}})}`\n+    )\n+    \/\/ multiple keycodes (space)\n+    assertCodegen(\n+      '<input @input.space=\"onInput\">',\n+      `with(this){return _c('input',{on:{\"input\":function($event){if(!('button' in $event)&&_k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"]))return null;return onInput($event)}}})}`\n     )\n     \/\/ multiple keycodes (chained)\n     assertCodegen(\n       '<input @keydown.enter.delete=\"onInput\">',\n-      `with(this){return _c('input',{on:{\"keydown\":function($event){if(!('button' in $event)&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\")&&_k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\"]))return null;return onInput($event)}}})}`\n+      `with(this){return _c('input',{on:{\"keydown\":function($event){if(!('button' in $event)&&_k($event.keyCode,\"enter\",13,$event.key,\"Enter\")&&_k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"]))return null;return onInput($event)}}})}`\n     )\n     \/\/ number keycode\n     assertCodegen(\n\n\n###\n\n","completion":" fix: fix keyName checking for space and delete in IE11 (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/template-renderer\/index.js | file path B: src\/server\/template-renderer\/index.js\n\n@@ -60,7 +60,10 @@ export default class TemplateRenderer {\n     \/\/ extra functionality with client manifest\n     if (options.clientManifest) {\n       const clientManifest = this.clientManifest = options.clientManifest\n-      this.publicPath = clientManifest.publicPath\n+      \/\/ ensure publicPath ends with \/\n+      this.publicPath = clientManifest.publicPath === ''\n+        ? ''\n+        : clientManifest.publicPath.replace(\/([^\\\/])$\/, '$1\/')\n       \/\/ preload\/prefetch directives\n       this.preloadFiles = (clientManifest.initial || []).map(normalizeFile)\n       this.prefetchFiles = (clientManifest.async || []).map(normalizeFile)\n@@ -114,7 +117,7 @@ export default class TemplateRenderer {\n     return (\n       \/\/ render links for css files\n       (cssFiles.length\n-        ? cssFiles.map(({ file }) => `<link rel=\"stylesheet\" href=\"${this.getPublicPath(file)}\">`).join('')\n+        ? cssFiles.map(({ file }) => `<link rel=\"stylesheet\" href=\"${this.publicPath}${file}\">`).join('')\n         : '') +\n       \/\/ context.styles is a getter exposed by vue-style-loader which contains\n       \/\/ the inline component styles collected during SSR\n@@ -153,7 +156,7 @@ export default class TemplateRenderer {\n           extra = ` type=\"font\/${extension}\" crossorigin`\n         }\n         return `<link rel=\"preload\" href=\"${\n-          this.getPublicPath(file)\n+          this.publicPath}${file\n         }\"${\n           asType !== '' ? ` as=\"${asType}\"` : ''\n         }${\n@@ -179,7 +182,7 @@ export default class TemplateRenderer {\n         if (alreadyRendered(file)) {\n           return ''\n         }\n-        return `<link rel=\"prefetch\" href=\"${this.getPublicPath(file)}\">`\n+        return `<link rel=\"prefetch\" href=\"${this.publicPath}${file}\">`\n       }).join('')\n     } else {\n       return ''\n@@ -206,7 +209,7 @@ export default class TemplateRenderer {\n       const async = (this.getUsedAsyncFiles(context) || []).filter(({ file }) => isJS(file))\n       const needed = [initial[0]].concat(async || [], initial.slice(1))\n       return needed.map(({ file }) => {\n-        return `<script src=\"${this.getPublicPath(file)}\" defer><\/script>`\n+        return `<script src=\"${this.publicPath}${file}\" defer><\/script>`\n       }).join('')\n     } else {\n       return ''\n@@ -228,10 +231,6 @@ export default class TemplateRenderer {\n     }\n     return new TemplateStream(this, this.parsedTemplate, context || {})\n   }\n-\n-  getPublicPath (file: string) {\n-    return path.posix.join(this.publicPath, file)\n-  }\n }\n \n function normalizeFile (file: string): Resource {\n\n\n###\n\n","completion":" fix(ssr): fix ssr template publicPath generation\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -406,9 +406,7 @@ export function genChildren (\n       el.tag !== 'template' &&\n       el.tag !== 'slot'\n     ) {\n-      \/\/ because el may be a functional component and return an Array instead of a single root.\n-      \/\/ In this case, just a simple normalization is needed\n-      const normalizationType = state.maybeComponent(el) ? `,1` : ``\n+      const normalizationType = checkSkip && state.maybeComponent(el) ? `,1` : ``\n       return `${(altGenElement || genElement)(el, state)}${normalizationType}`\n     }\n     const normalizationType = checkSkip\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -631,5 +631,13 @@ describe('codegen', () => {\n       { isReservedTag }\n     )\n   })\n+\n+  \/\/ #9142\n+  it('should compile single v-for component inside template', () => {\n+    assertCodegen(\n+      `<div><template v-if=\"ok\"><foo v-for=\"i in 1\" :key=\"i\"><\/foo><\/template><\/div>`,\n+      `with(this){return _c('div',[(ok)?_l((1),function(i){return _c('foo',{key:i})}):_e()],2)}`\n+    )\n+  })\n })\n \/* eslint-enable quotes *\/\n\n\n###\n\n","completion":" fix(compiler): fix codegen for v-for component inside template\n"}
{"prompt":" file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -1,5 +1,5 @@\n import Vue, { VNode } from \"..\/index\";\n-import { AsyncComponent, ComponentOptions, FunctionalComponentOptions, Component } from \"..\/index\";\n+import { ComponentOptions, Component } from \"..\/index\";\n import { CreateElement } from \"..\/vue\";\n \n interface MyComponent extends Vue {\n@@ -297,6 +297,10 @@ Vue.component('component-with-scoped-slot', {\n           \/\/ named scoped slot as vnode data\n           item: (props: ScopedSlotProps) => [h('span', [props.msg])]\n         }\n+      }),\n+      h('child', {\n+        \/\/ Passing down all slots from parent\n+        scopedSlots: this.$scopedSlots\n       })\n     ])\n   },\n@@ -315,13 +319,18 @@ Vue.component('component-with-scoped-slot', {\n Vue.component('narrow-array-of-vnode-type', {\n   render (h): VNode {\n     const slot = this.$scopedSlots.default!({})\n-    if (typeof slot !== 'string') {\n+    if (typeof slot === 'string') {\n+      return h('span', slot)\n+    } else if (Array.isArray(slot)) {\n       const first = slot[0]\n       if (!Array.isArray(first) && typeof first !== 'string') {\n-        return first;\n+        return first\n+      } else {\n+        return h()\n       }\n+    } else {\n+      return slot\n     }\n-    return h();\n   }\n })\n \n\n---\n file path A: types\/vnode.d.ts | file path B: types\/vnode.d.ts\n\n@@ -1,6 +1,6 @@\n import { Vue } from \".\/vue\";\n \n-export type ScopedSlot = (props: any) => VNodeChildrenArrayContents | string;\n+export type ScopedSlot = (props: any) => VNodeChildrenArrayContents | VNode | string;\n \n export type VNodeChildren = VNodeChildrenArrayContents | [ScopedSlot] | string;\n export interface VNodeChildrenArrayContents extends Array<VNode | string | VNodeChildrenArrayContents> {}\n@@ -34,7 +34,7 @@ export interface VNodeComponentOptions {\n export interface VNodeData {\n   key?: string | number;\n   slot?: string;\n-  scopedSlots?: { [key: string]: ScopedSlot };\n+  scopedSlots?: { [key: string]: ScopedSlot | undefined };\n   ref?: string;\n   refInFor?: boolean;\n   tag?: string;\n\n\n###\n\n","completion":" fix(types): correct scopedSlot types (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -194,6 +194,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devsquad.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.inkloop.in\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/inkloop.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -315,14 +320,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n \n <!--50 start-->\n - Wasim Khamlichi\n-- errorrik\n+- errorrik \n - Alex Balashov\n - Konstantin Levinski\n - Evan Leonardi\n - Ernest Sim\n - Blaise Laflamme\n-- Dilettant\n-- Sean Ferguson\n+- Dilettant \n <!--50 end-->\n \n <h2 align=\"center\">Backers via Patreon<\/h2>\n@@ -341,10 +345,10 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Kirk Lewis\n - Karol F\n - Miljan Aleksic\n-- \n+-  \n - Jake Ingman\n - Barbara Liau\n-- 4\n+- 4 \n - Jarek Tkaczyk\n - David Hess\n - Niannian Modisette\n@@ -353,7 +357,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Duncan J Kenzie\n - Mike Margerum\n - Guy Gavergun\n-- Edithvale\n - Intevation GmbH\n - Luiz Eduardo  Tanure Bacelar\n - Chengzhi Yin\n@@ -394,20 +397,18 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Bohdan Kokotko\n - Donald Fischer\n - Alexander Weiher\n-- Daniel Cook\n - Shinya Katayama\n - Jere Sjroos\n - Wakana Seki\n - David Ang\n-- Dom\n+- Dom \n - Ben Hong\n - David Kaplan\n - John Cleveland\n - Jaeyoung Lee\n-- Amor\n+- Amor \n - Tom Ootes\n - Andy Foster\n-- Blake Campbell\n - Joe Cochran\n - Matt Sencenbaugh\n - The Commission Cafe, LLC.\n@@ -427,11 +428,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Rob Mellett\n - Abraham Arango\n - Marko Bokovi\n-- Andrej Noskaj\n - Ed Linklater\n - Garion Herman\n - Chris Bemister\n - Anfrew Willis\n+- Carlos Adrin\n+- Timothy J Bass\n+- Yusuke Kawabata\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -199,6 +199,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/devsquad.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.inkloop.in\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/inkloop.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors\/backers [ci skip]\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.5.17-beta.0\",\n+  \"version\": \"2.5.18-beta.0\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release v2.5.18-beta.0\n"}
{"prompt":" file path A: src\/server\/render.js | file path B: src\/server\/render.js\n\n@@ -3,6 +3,7 @@\n import { escape } from 'web\/server\/util'\n import { SSR_ATTR } from 'shared\/constants'\n import { RenderContext } from '.\/render-context'\n+import { resolveAsset } from 'core\/util\/options'\n import { generateComponentTrace } from 'core\/util\/debug'\n import { ssrCompileToFunctions } from 'web\/server\/compiler'\n import { installSSRHelpers } from '.\/optimizing-compiler\/runtime-helpers'\n@@ -324,11 +325,13 @@ function renderStartingTag (node: VNode, context) {\n     if (dirs) {\n       for (let i = 0; i < dirs.length; i++) {\n         const name = dirs[i].name\n-        const dirRenderer = directives[name]\n-        if (dirRenderer && name !== 'show') {\n-          \/\/ directives mutate the node's data\n-          \/\/ which then gets rendered by modules\n-          dirRenderer(node, dirs[i])\n+        if (name !== 'show') {\n+          const dirRenderer = resolveAsset(context, 'directives', name, true)\n+          if (dirRenderer) {\n+            \/\/ directives mutate the node's data\n+            \/\/ which then gets rendered by modules\n+            dirRenderer(node, dirs[i])\n+          }\n         }\n       }\n     }\n\n\n###\n\n","completion":" fix(ssr): resolve server directives the same as on client (#<issue-num>)\n"}
{"prompt":" file path A: .circleci\/config.yml | file path B: .circleci\/config.yml\n\n@@ -62,6 +62,16 @@ jobs:\n       - run: npm run test:ssr\n       - run: npm run test:weex\n \n+  trigger-regression-test:\n+    <<: *defaults\n+    steps:\n+      - run:\n+          command: |\n+            curl --user ${CIRCLE_TOKEN}: \\\n+            --data build_parameters[CIRCLE_JOB]=update \\\n+            --data build_parameters[VUE_REVISION]=${CIRCLE_SHA1} \\\n+            https:\/\/circleci.com\/api\/v1.1\/project\/github\/vuejs\/regression-testing\/tree\/master\n+\n workflows:\n   version: 2\n   install-and-parallel-test:\n@@ -79,3 +89,42 @@ workflows:\n       - test-ssr-weex:\n           requires:\n             - install\n+      - trigger-regression-test:\n+          filters:\n+            branches:\n+              only:\n+                - regression-test\n+          requires:\n+            - test-cover\n+            - lint-flow-types\n+            - test-e2e\n+            - test-ssr-weex\n+  weekly_regression_test:\n+    triggers:\n+      - schedule:\n+          # At 13:00 UTC (9:00 EDT) on every Monday\n+          cron: \"0 13 * * 1\"\n+          filters:\n+            branches:\n+              only:\n+                dev\n+    jobs:\n+      - install\n+      - test-cover:\n+          requires:\n+            - install\n+      - lint-flow-types:\n+          requires:\n+            - install\n+      - test-e2e:\n+          requires:\n+            - install\n+      - test-ssr-weex:\n+          requires:\n+            - install\n+      - trigger-regression-test:\n+          requires:\n+            - test-cover\n+            - lint-flow-types\n+            - test-e2e\n+            - test-ssr-weex\n\n\n###\n\n","completion":" ci: add regression test for popular libraries in Vue.js ecosystem (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/render-context.js | file path B: src\/server\/render-context.js\n\n@@ -66,55 +66,54 @@ export class RenderContext {\n   }\n \n   next () {\n-    const lastState = this.renderStates[this.renderStates.length - 1]\n-    if (isUndef(lastState)) {\n-      return this.done()\n-    }\n-    \/* eslint-disable no-case-declarations *\/\n-    switch (lastState.type) {\n-      case 'Element':\n-      case 'Fragment':\n-        const { children, total } = lastState\n-        const rendered = lastState.rendered++\n-        if (rendered < total) {\n-          this.renderNode(children[rendered], false, this)\n-        } else {\n+    \/\/ eslint-disable-next-line\n+    while (true) {\n+      const lastState = this.renderStates[this.renderStates.length - 1]\n+      if (isUndef(lastState)) {\n+        return this.done()\n+      }\n+      \/* eslint-disable no-case-declarations *\/\n+      switch (lastState.type) {\n+        case 'Element':\n+        case 'Fragment':\n+          const { children, total } = lastState\n+          const rendered = lastState.rendered++\n+          if (rendered < total) {\n+            return this.renderNode(children[rendered], false, this)\n+          } else {\n+            this.renderStates.pop()\n+            if (lastState.type === 'Element') {\n+              return this.write(lastState.endTag, this.next)\n+            }\n+          }\n+          break\n+        case 'Component':\n           this.renderStates.pop()\n-          if (lastState.type === 'Element') {\n-            this.write(lastState.endTag, this.next)\n+          this.activeInstance = lastState.prevActive\n+          break\n+        case 'ComponentWithCache':\n+          this.renderStates.pop()\n+          const { buffer, bufferIndex, componentBuffer, key } = lastState\n+          const result = {\n+            html: buffer[bufferIndex],\n+            components: componentBuffer[bufferIndex]\n+          }\n+          this.cache.set(key, result)\n+          if (bufferIndex === 0) {\n+            \/\/ this is a top-level cached component,\n+            \/\/ exit caching mode.\n+            this.write.caching = false\n           } else {\n-            this.next()\n+            \/\/ parent component is also being cached,\n+            \/\/ merge self into parent's result\n+            buffer[bufferIndex - 1] += result.html\n+            const prev = componentBuffer[bufferIndex - 1]\n+            result.components.forEach(c => prev.add(c))\n           }\n-        }\n-        break\n-      case 'Component':\n-        this.renderStates.pop()\n-        this.activeInstance = lastState.prevActive\n-        this.next()\n-        break\n-      case 'ComponentWithCache':\n-        this.renderStates.pop()\n-        const { buffer, bufferIndex, componentBuffer, key } = lastState\n-        const result = {\n-          html: buffer[bufferIndex],\n-          components: componentBuffer[bufferIndex]\n-        }\n-        this.cache.set(key, result)\n-        if (bufferIndex === 0) {\n-          \/\/ this is a top-level cached component,\n-          \/\/ exit caching mode.\n-          this.write.caching = false\n-        } else {\n-          \/\/ parent component is also being cached,\n-          \/\/ merge self into parent's result\n-          buffer[bufferIndex - 1] += result.html\n-          const prev = componentBuffer[bufferIndex - 1]\n-          result.components.forEach(c => prev.add(c))\n-        }\n-        buffer.length = bufferIndex\n-        componentBuffer.length = bufferIndex\n-        this.next()\n-        break\n+          buffer.length = bufferIndex\n+          componentBuffer.length = bufferIndex\n+          break\n+      }\n     }\n   }\n }\n\n---\n file path A: src\/server\/write.js | file path B: src\/server\/write.js\n\n@@ -1,6 +1,6 @@\n \/* @flow *\/\n \n-const MAX_STACK_DEPTH = 1000\n+const MAX_STACK_DEPTH = 900\n const noop = _ => _\n \n const defer = typeof process !== 'undefined' && process.nextTick\n\n\n###\n\n","completion":" fix(ssr): adjust call stack size defer threshold\n"}
{"prompt":" file path A: src\/core\/instance\/events.js | file path B: src\/core\/instance\/events.js\n\n@@ -21,25 +21,31 @@ export function initEvents (vm: Component) {\n \n let target: any\n \n-function add (event, fn, once) {\n-  if (once) {\n-    target.$once(event, fn)\n-  } else {\n-    target.$on(event, fn)\n-  }\n+function add (event, fn) {\n+  target.$on(event, fn)\n }\n \n function remove (event, fn) {\n   target.$off(event, fn)\n }\n \n+function createOnceHandler (event, fn) {\n+  const _target = target\n+  return function onceHandler () {\n+    const res = fn.apply(null, arguments)\n+    if (res !== null) {\n+      _target.$off(event, onceHandler)\n+    }\n+  }\n+}\n+\n export function updateComponentListeners (\n   vm: Component,\n   listeners: Object,\n   oldListeners: ?Object\n ) {\n   target = vm\n-  updateListeners(listeners, oldListeners || {}, add, remove, vm)\n+  updateListeners(listeners, oldListeners || {}, add, remove, createOnceHandler, vm)\n   target = undefined\n }\n \n\n---\n file path A: src\/core\/vdom\/helpers\/update-listeners.js | file path B: src\/core\/vdom\/helpers\/update-listeners.js\n\n@@ -1,7 +1,13 @@\n \/* @flow *\/\n \n import { warn } from 'core\/util\/index'\n-import { cached, isUndef, isPlainObject } from 'shared\/util'\n+\n+import {\n+  cached,\n+  isUndef,\n+  isTrue,\n+  isPlainObject\n+} from 'shared\/util'\n \n const normalizeEvent = cached((name: string): {\n   name: string,\n@@ -47,6 +53,7 @@ export function updateListeners (\n   oldOn: Object,\n   add: Function,\n   remove: Function,\n+  createOnceHandler: Function,\n   vm: Component\n ) {\n   let name, def, cur, old, event\n@@ -68,7 +75,10 @@ export function updateListeners (\n       if (isUndef(cur.fns)) {\n         cur = on[name] = createFnInvoker(cur)\n       }\n-      add(event.name, cur, event.once, event.capture, event.passive, event.params)\n+      if (isTrue(event.once)) {\n+        cur = on[name] = createOnceHandler(event.name, cur, event.capture)\n+      }\n+      add(event.name, cur, event.capture, event.passive, event.params)\n     } else if (cur !== old) {\n       old.fns = cur\n       on[name] = old\n\n---\n file path A: src\/platforms\/web\/runtime\/modules\/events.js | file path B: src\/platforms\/web\/runtime\/modules\/events.js\n\n@@ -28,7 +28,7 @@ function normalizeEvents (on) {\n \n let target: any\n \n-function createOnceHandler (handler, event, capture) {\n+function createOnceHandler (event, handler, capture) {\n   const _target = target \/\/ save current target element in closure\n   return function onceHandler () {\n     const res = handler.apply(null, arguments)\n@@ -41,12 +41,10 @@ function createOnceHandler (handler, event, capture) {\n function add (\n   event: string,\n   handler: Function,\n-  once: boolean,\n   capture: boolean,\n   passive: boolean\n ) {\n   handler = withMacroTask(handler)\n-  if (once) handler = createOnceHandler(handler, event, capture)\n   target.addEventListener(\n     event,\n     handler,\n@@ -77,7 +75,7 @@ function updateDOMListeners (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n   const oldOn = oldVnode.data.on || {}\n   target = vnode.elm\n   normalizeEvents(on)\n-  updateListeners(on, oldOn, add, remove, vnode.context)\n+  updateListeners(on, oldOn, add, remove, createOnceHandler, vnode.context)\n   target = undefined\n }\n \n\n---\n file path A: src\/platforms\/weex\/runtime\/modules\/events.js | file path B: src\/platforms\/weex\/runtime\/modules\/events.js\n\n@@ -4,10 +4,19 @@ import { updateListeners } from 'core\/vdom\/helpers\/update-listeners'\n \n let target: any\n \n+function createOnceHandler (event, handler, capture) {\n+  const _target = target \/\/ save current target element in closure\n+  return function onceHandler () {\n+    const res = handler.apply(null, arguments)\n+    if (res !== null) {\n+      remove(event, onceHandler, capture, _target)\n+    }\n+  }\n+}\n+\n function add (\n   event: string,\n   handler: Function,\n-  once: boolean,\n   capture: boolean,\n   passive?: boolean,\n   params?: Array<any>\n@@ -16,18 +25,6 @@ function add (\n     console.log('Weex do not support event in bubble phase.')\n     return\n   }\n-  if (once) {\n-    const oldHandler = handler\n-    const _target = target \/\/ save current target element in closure\n-    handler = function (ev) {\n-      const res = arguments.length === 1\n-        ? oldHandler(ev)\n-        : oldHandler.apply(null, arguments)\n-      if (res !== null) {\n-        remove(event, null, null, _target)\n-      }\n-    }\n-  }\n   target.addEvent(event, handler, params)\n }\n \n@@ -47,7 +44,7 @@ function updateDOMListeners (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n   const on = vnode.data.on || {}\n   const oldOn = oldVnode.data.on || {}\n   target = vnode.elm\n-  updateListeners(on, oldOn, add, remove, vnode.context)\n+  updateListeners(on, oldOn, add, remove, createOnceHandler, vnode.context)\n   target = undefined\n }\n \n\n---\n file path A: test\/unit\/features\/directives\/on.spec.js | file path B: test\/unit\/features\/directives\/on.spec.js\n\n@@ -895,4 +895,31 @@ describe('Directive v-on', () => {\n     }).$mount()\n     expect(`v-on without argument expects an Object value`).toHaveBeenWarned()\n   })\n+\n+  it('should correctly remove once listener', done => {\n+    const vm = new Vue({\n+      template: `\n+        <div>\n+          <span v-if=\"ok\" @click.once=\"foo\">\n+            a\n+          <\/span>\n+          <span v-else a=\"a\">\n+            b\n+          <\/span>\n+        <\/div>\n+      `,\n+      data: {\n+        ok: true\n+      },\n+      methods: {\n+        foo: spy\n+      }\n+    }).$mount()\n+\n+    vm.ok = false\n+    waitForUpdate(() => {\n+      triggerEvent(vm.$el.childNodes[0], 'click')\n+      expect(spy.calls.count()).toBe(0)\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix(v-on): correctly remove once listener (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/render-slot.js | file path B: src\/core\/instance\/render-helpers\/render-slot.js\n\n@@ -26,19 +26,7 @@ export function renderSlot (\n     }\n     nodes = scopedSlotFn(props) || fallback\n   } else {\n-    const slotNodes = this.$slots[name]\n-    \/\/ warn duplicate slot usage\n-    if (slotNodes) {\n-      if (process.env.NODE_ENV !== 'production' && slotNodes._rendered) {\n-        warn(\n-          `Duplicate presence of slot \"${name}\" found in the same render tree ` +\n-          `- this will likely cause render errors.`,\n-          this\n-        )\n-      }\n-      slotNodes._rendered = true\n-    }\n-    nodes = slotNodes || fallback\n+    nodes = this.$slots[name] || fallback\n   }\n \n   const target = props && props.slot\n\n---\n file path A: src\/core\/instance\/render.js | file path B: src\/core\/instance\/render.js\n\n@@ -62,14 +62,6 @@ export function renderMixin (Vue: Class<Component>) {\n     const vm: Component = this\n     const { render, _parentVnode } = vm.$options\n \n-    \/\/ reset _rendered flag on slots for duplicate slot check\n-    if (process.env.NODE_ENV !== 'production') {\n-      for (const key in vm.$slots) {\n-        \/\/ $flow-disable-line\n-        vm.$slots[key]._rendered = false\n-      }\n-    }\n-\n     if (_parentVnode) {\n       vm.$scopedSlots = _parentVnode.data.scopedSlots || emptyObject\n     }\n\n---\n file path A: src\/core\/vdom\/patch.js | file path B: src\/core\/vdom\/patch.js\n\n@@ -434,20 +434,20 @@ export function createPatchFunction (backend) {\n       } else if (isUndef(oldEndVnode)) {\n         oldEndVnode = oldCh[--oldEndIdx]\n       } else if (sameVnode(oldStartVnode, newStartVnode)) {\n-        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue)\n+        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)\n         oldStartVnode = oldCh[++oldStartIdx]\n         newStartVnode = newCh[++newStartIdx]\n       } else if (sameVnode(oldEndVnode, newEndVnode)) {\n-        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue)\n+        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx)\n         oldEndVnode = oldCh[--oldEndIdx]\n         newEndVnode = newCh[--newEndIdx]\n       } else if (sameVnode(oldStartVnode, newEndVnode)) { \/\/ Vnode moved right\n-        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue)\n+        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx)\n         canMove && nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm))\n         oldStartVnode = oldCh[++oldStartIdx]\n         newEndVnode = newCh[--newEndIdx]\n       } else if (sameVnode(oldEndVnode, newStartVnode)) { \/\/ Vnode moved left\n-        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue)\n+        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)\n         canMove && nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm)\n         oldEndVnode = oldCh[--oldEndIdx]\n         newStartVnode = newCh[++newStartIdx]\n@@ -461,7 +461,7 @@ export function createPatchFunction (backend) {\n         } else {\n           vnodeToMove = oldCh[idxInOld]\n           if (sameVnode(vnodeToMove, newStartVnode)) {\n-            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue)\n+            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)\n             oldCh[idxInOld] = undefined\n             canMove && nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm)\n           } else {\n@@ -505,11 +505,23 @@ export function createPatchFunction (backend) {\n     }\n   }\n \n-  function patchVnode (oldVnode, vnode, insertedVnodeQueue, removeOnly) {\n+  function patchVnode (\n+    oldVnode,\n+    vnode,\n+    insertedVnodeQueue,\n+    ownerArray,\n+    index,\n+    removeOnly\n+  ) {\n     if (oldVnode === vnode) {\n       return\n     }\n \n+    if (isDef(vnode.elm) && isDef(ownerArray)) {\n+      \/\/ clone reused vnode\n+      vnode = ownerArray[index] = cloneVNode(vnode)\n+    }\n+\n     const elm = vnode.elm = oldVnode.elm\n \n     if (isTrue(oldVnode.isAsyncPlaceholder)) {\n@@ -709,7 +721,7 @@ export function createPatchFunction (backend) {\n       const isRealElement = isDef(oldVnode.nodeType)\n       if (!isRealElement && sameVnode(oldVnode, vnode)) {\n         \/\/ patch existing root node\n-        patchVnode(oldVnode, vnode, insertedVnodeQueue, removeOnly)\n+        patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly)\n       } else {\n         if (isRealElement) {\n           \/\/ mounting to a real element\n\n---\n file path A: test\/unit\/features\/component\/component-slot.spec.js | file path B: test\/unit\/features\/component\/component-slot.spec.js\n\n@@ -482,44 +482,46 @@ describe('Component slot', () => {\n     }).then(done)\n   })\n \n-  it('warn duplicate slots', () => {\n-    new Vue({\n-      template: `<div>\n-        <test>\n-          <div>foo<\/div>\n-          <div slot=\"a\">bar<\/div>\n-        <\/test>\n-      <\/div>`,\n-      components: {\n-        test: {\n-          template: `<div>\n-            <slot><\/slot><slot><\/slot>\n-            <div v-for=\"i in 3\"><slot name=\"a\"><\/slot><\/div>\n-          <\/div>`\n-        }\n-      }\n-    }).$mount()\n-    expect('Duplicate presence of slot \"default\"').toHaveBeenWarned()\n-    expect('Duplicate presence of slot \"a\"').toHaveBeenWarned()\n-  })\n-\n-  it('should not warn valid conditional slots', () => {\n-    new Vue({\n-      template: `<div>\n-        <test>\n-          <div>foo<\/div>\n-        <\/test>\n-      <\/div>`,\n+  it('should support duplicate slots', done => {\n+    const vm = new Vue({\n+      template: `\n+        <foo ref=\"foo\">\n+          <div slot=\"a\">{{ n }}<\/div>\n+        <\/foo>\n+      `,\n+      data: {\n+        n: 1\n+      },\n       components: {\n-        test: {\n-          template: `<div>\n-            <slot v-if=\"true\"><\/slot>\n-            <slot v-else><\/slot>\n-          <\/div>`\n+        foo: {\n+          data() {\n+            return { ok: true }\n+          },\n+          template: `\n+            <div>\n+              <slot name=\"a\" \/>\n+              <slot v-if=\"ok\" name=\"a\" \/>\n+              <pre><slot name=\"a\" \/><\/pre>\n+            <\/div>\n+          `\n         }\n       }\n     }).$mount()\n-    expect('Duplicate presence of slot \"default\"').not.toHaveBeenWarned()\n+    expect(vm.$el.innerHTML).toBe(`<div>1<\/div> <div>1<\/div> <pre><div>1<\/div><\/pre>`)\n+    vm.n++\n+    waitForUpdate(() => {\n+      expect(vm.$el.innerHTML).toBe(`<div>2<\/div> <div>2<\/div> <pre><div>2<\/div><\/pre>`)\n+      vm.n++\n+    }).then(() => {\n+      expect(vm.$el.innerHTML).toBe(`<div>3<\/div> <div>3<\/div> <pre><div>3<\/div><\/pre>`)\n+      vm.$refs.foo.ok = false\n+    }).then(() => {\n+      expect(vm.$el.innerHTML).toBe(`<div>3<\/div> <!----> <pre><div>3<\/div><\/pre>`)\n+      vm.n++\n+      vm.$refs.foo.ok = true\n+    }).then(() => {\n+      expect(vm.$el.innerHTML).toBe(`<div>4<\/div> <div>4<\/div> <pre><div>4<\/div><\/pre>`)\n+    }).then(done)\n   })\n \n   \/\/ #3518\n\n\n###\n\n","completion":" fix(core): properly handle reused vnodes\n"}
{"prompt":" file path A: src\/core\/vdom\/vnode.js | file path B: src\/core\/vdom\/vnode.js\n\n@@ -90,7 +90,10 @@ export function cloneVNode (vnode: VNode): VNode {\n   const cloned = new VNode(\n     vnode.tag,\n     vnode.data,\n-    vnode.children,\n+    \/\/ #7975\n+    \/\/ clone children array to avoid mutating original in case of cloning\n+    \/\/ a child.\n+    vnode.children && vnode.children.slice(),\n     vnode.text,\n     vnode.elm,\n     vnode.context,\n\n---\n file path A: test\/unit\/features\/component\/component-slot.spec.js | file path B: test\/unit\/features\/component\/component-slot.spec.js\n\n@@ -886,4 +886,58 @@ describe('Component slot', () => {\n       expect(vm.$el.textContent).toBe('foo')\n     }).then(done)\n   })\n+\n+  \/\/ #7975\n+  it('should update named slot correctly when its position in the tree changed', done => {\n+    const ChildComponent = {\n+      template: '<b>{{ message }}<\/b>',\n+      props: ['message']\n+    }\n+     let parentVm\n+    const ParentComponent = {\n+      template: `\n+        <div>\n+          <span v-if=\"alter\">\n+            <span><slot name=\"foo\" \/><\/span>\n+          <\/span>\n+          <span v-else>\n+            <slot name=\"foo\" \/>\n+          <\/span>\n+        <\/div>\n+      `,\n+      data () {\n+        return {\n+          alter: true\n+        }\n+      },\n+      mounted () {\n+        parentVm = this\n+      }\n+    }\n+     const vm = new Vue({\n+      template: `\n+        <parent-component>\n+          <span slot=\"foo\">\n+            <child-component :message=\"message\" \/>\n+          <\/span>\n+        <\/parent-component>\n+      `,\n+      components: {\n+        ChildComponent,\n+        ParentComponent\n+      },\n+      data () {\n+        return {\n+          message: 1\n+        }\n+      }\n+    }).$mount()\n+     expect(vm.$el.firstChild.innerHTML).toBe('<span><span><b>1<\/b><\/span><\/span>')\n+    parentVm.alter = false\n+    waitForUpdate(() => {\n+      vm.message = 2\n+    }).then(() => {\n+      expect(vm.$el.firstChild.innerHTML).toBe('<span><b>2<\/b><\/span>')\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix(core): avoid mutating original children when cloning vnode\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -367,7 +367,7 @@ function genScopedSlot (\n   const fn = `function(${String(el.slotScope)}){` +\n     `return ${el.tag === 'template'\n       ? el.if\n-        ? `${el.if}?${genChildren(el, state) || 'undefined'}:undefined`\n+        ? `(${el.if})?${genChildren(el, state) || 'undefined'}:undefined`\n         : genChildren(el, state) || 'undefined'\n       : genElement(el, state)\n     }}`\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -208,6 +208,17 @@ describe('codegen', () => {\n     )\n   })\n \n+  it('generate scoped slot with multiline v-if', () => {\n+    assertCodegen(\n+      '<foo><template v-if=\"\\nshow\\n\" slot-scope=\"bar\">{{ bar }}<\/template><\/foo>',\n+      `with(this){return _c('foo',{scopedSlots:_u([{key:\"default\",fn:function(bar){return (\\nshow\\n)?[_v(_s(bar))]:undefined}}])})}`\n+    )\n+    assertCodegen(\n+      '<foo><div v-if=\"\\nshow\\n\" slot=\"foo\" slot-scope=\"bar\">{{ bar }}<\/div><\/foo>',\n+      `with(this){return _c(\\'foo\\',{scopedSlots:_u([{key:\"foo\",fn:function(bar){return (\\nshow\\n)?_c(\\'div\\',{},[_v(_s(bar))]):_e()}}])})}`\n+    )\n+  })\n+\n   it('generate class binding', () => {\n     \/\/ static\n     assertCodegen(\n\n\n###\n\n","completion":" fix(compiler):  wrap scoped slots v-if conditions in parens (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/index.js | file path B: src\/core\/observer\/index.js\n\n@@ -37,7 +37,7 @@ export function toggleObserving (value: boolean) {\n export class Observer {\n   value: any;\n   dep: Dep;\n-  vmCount: number; \/\/ number of vms that has this object as root $data\n+  vmCount: number; \/\/ number of vms that have this object as root $data\n \n   constructor (value: any) {\n     this.value = value\n@@ -57,7 +57,7 @@ export class Observer {\n   }\n \n   \/**\n-   * Walk through each property and convert them into\n+   * Walk through all properties and convert them into\n    * getter\/setters. This method should only be called when\n    * value type is Object.\n    *\/\n@@ -81,7 +81,7 @@ export class Observer {\n \/\/ helpers\n \n \/**\n- * Augment an target Object or Array by intercepting\n+ * Augment a target Object or Array by intercepting\n  * the prototype chain using __proto__\n  *\/\n function protoAugment (target, src: Object) {\n@@ -91,7 +91,7 @@ function protoAugment (target, src: Object) {\n }\n \n \/**\n- * Augment an target Object or Array by defining\n+ * Augment a target Object or Array by defining\n  * hidden properties.\n  *\/\n \/* istanbul ignore next *\/\n\n\n###\n\n","completion":" chore: fix grammar in core\/observer\/index.js comments (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/dep.js | file path B: src\/core\/observer\/dep.js\n\n@@ -55,11 +55,12 @@ export default class Dep {\n Dep.target = null\n const targetStack = []\n \n-export function pushTarget (_target: ?Watcher) {\n-  if (Dep.target) targetStack.push(Dep.target)\n-  Dep.target = _target\n+export function pushTarget (target: ?Watcher) {\n+  targetStack.push(target)\n+  Dep.target = target\n }\n \n export function popTarget () {\n-  Dep.target = targetStack.pop()\n+  targetStack.pop()\n+  Dep.target = targetStack[targetStack.length - 1]\n }\n\n---\n file path A: test\/unit\/features\/instance\/methods-lifecycle.spec.js | file path B: test\/unit\/features\/instance\/methods-lifecycle.spec.js\n\n@@ -1,4 +1,5 @@\n import Vue from 'vue'\n+import Dep from 'core\/observer\/dep'\n \n describe('Instance methods lifecycle', () => {\n   describe('$mount', () => {\n@@ -32,6 +33,26 @@ describe('Instance methods lifecycle', () => {\n       expect(vm.$el.tagName).toBe('DIV')\n       expect(vm.$el.textContent).toBe('hi')\n     })\n+\n+    it('Dep.target should be undefined in lifecycle', () => {\n+      const vm = new Vue({\n+        template: '<div><my-component><\/my-component><\/div>',\n+        components: {\n+          myComponent: {\n+            template: '<div>hi<\/div>',\n+            mounted () {\n+              const _msg = this.msg\n+              expect(Dep.target).toBe(undefined)\n+            },\n+            computed: {\n+              msg () {\n+                return 1\n+              }\n+            }\n+          }\n+        }\n+      }).$mount()\n+    })\n   })\n \n   describe('$destroy', () => {\n\n\n###\n\n","completion":" fix: actually disable dep collection when invoking lifecycle hooks (#<issue-num>)\n"}
{"prompt":" file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -79,7 +79,7 @@ export interface VueConfiguration {\n \n export interface VueConstructor<V extends Vue = Vue> {\n   new <Data = object, Methods = object, Computed = object, PropNames extends string = never>(options?: ThisTypedComponentOptionsWithArrayProps<V, Data, Methods, Computed, PropNames>): CombinedVueInstance<V, Data, Methods, Computed, Record<PropNames, any>>;\n-  \/\/ ideally, the return type should just contains Props, not Record<keyof Props, any>. But TS requires Base constructors must all have the same return type.\n+  \/\/ ideally, the return type should just contain Props, not Record<keyof Props, any>. But TS requires to have Base constructors with the same return type.\n   new <Data = object, Methods = object, Computed = object, Props = object>(options?: ThisTypedComponentOptionsWithRecordProps<V, Data, Methods, Computed, Props>): CombinedVueInstance<V, Data, Methods, Computed, Record<keyof Props, any>>;\n   new (options?: ComponentOptions<V>): CombinedVueInstance<V, object, object, object, Record<keyof object, any>>;\n \n\n\n###\n\n","completion":" chore: rephrase comment (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/next-tick.js | file path B: src\/core\/util\/next-tick.js\n\n@@ -81,9 +81,11 @@ if (typeof Promise !== 'undefined' && isNative(Promise)) {\n export function withMacroTask (fn: Function): Function {\n   return fn._withTask || (fn._withTask = function () {\n     useMacroTask = true\n-    const res = fn.apply(null, arguments)\n-    useMacroTask = false\n-    return res\n+    try {\n+      return fn.apply(null, arguments)\n+    } finally {\n+      useMacroTask = false    \n+    }\n   })\n }\n \n\n\n###\n\n","completion":" fix: make sure global state is restored in the case of an exception in macrotask callback (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/state.js | file path B: src\/core\/instance\/state.js\n\n@@ -216,13 +216,13 @@ export function defineComputed (\n   if (typeof userDef === 'function') {\n     sharedPropertyDefinition.get = shouldCache\n       ? createComputedGetter(key)\n-      : userDef\n+      : createGetterInvoker(userDef)\n     sharedPropertyDefinition.set = noop\n   } else {\n     sharedPropertyDefinition.get = userDef.get\n       ? shouldCache && userDef.cache !== false\n         ? createComputedGetter(key)\n-        : userDef.get\n+        : createGetterInvoker(userDef.get)\n       : noop\n     sharedPropertyDefinition.set = userDef.set || noop\n   }\n@@ -253,6 +253,12 @@ function createComputedGetter (key) {\n   }\n }\n \n+function createGetterInvoker(fn) {\n+  return function computedGetter () {\n+    return fn.call(this, this)\n+  }\n+}\n+\n function initMethods (vm: Component, methods: Object) {\n   const props = vm.$options.props\n   for (const key in methods) {\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -1076,6 +1076,24 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n+  \/\/ #8977\n+  it('should call computed properties with vm as first argument', done => {\n+    renderToString(new Vue({\n+      data: {\n+        firstName: 'Evan',\n+        lastName: 'You'\n+      },\n+      computed: {\n+        fullName: ({ firstName, lastName }) => `${firstName} ${lastName}`,\n+      },\n+      template: '<div>{{ fullName }}<\/div>',\n+    }), (err, result) => {\n+      expect(err).toBeNull()\n+      expect(result).toContain('<div data-server-rendered=\"true\">Evan You<\/div>')\n+      done()\n+    })\n+  })\n+\n   it('return Promise', done => {\n     renderToString(new Vue({\n       template: `<div>{{ foo }}<\/div>`,\n\n\n###\n\n","completion":" fix(ssr): computed properties should pass vm as first argument in ssr (#<issue-num>)\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -68,7 +68,7 @@ export interface ComponentOptions<\n \n   el?: Element | string;\n   template?: string;\n-  \/\/ hack is for funcitonal component type inference, should not used in user code\n+  \/\/ hack is for functional component type inference, should not be used in user code\n   render?(createElement: CreateElement, hack: RenderContext<Props>): VNode;\n   renderError?(createElement: CreateElement, err: Error): VNode;\n   staticRenderFns?: ((createElement: CreateElement) => VNode)[];\n\n\n###\n\n","completion":" chore(typo): fix typo (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/env.js | file path B: src\/core\/util\/env.js\n\n@@ -41,7 +41,7 @@ export const isServerRendering = () => {\n     if (!inBrowser && !inWeex && typeof global !== 'undefined') {\n       \/\/ detect presence of vue-server-renderer and avoid\n       \/\/ Webpack shimming the process\n-      _isServer = global['process'].env.VUE_ENV === 'server'\n+      _isServer = global['process'] && global['process'].env.VUE_ENV === 'server'\n     } else {\n       _isServer = false\n     }\n\n\n###\n\n","completion":" fix: fix server env detection in wechat mini program (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/render.js | file path B: src\/core\/instance\/render.js\n\n@@ -86,15 +86,11 @@ export function renderMixin (Vue: Class<Component>) {\n       \/\/ return error render result,\n       \/\/ or previous vnode to prevent render error causing blank component\n       \/* istanbul ignore else *\/\n-      if (process.env.NODE_ENV !== 'production') {\n-        if (vm.$options.renderError) {\n-          try {\n-            vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e)\n-          } catch (e) {\n-            handleError(e, vm, `renderError`)\n-            vnode = vm._vnode\n-          }\n-        } else {\n+      if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n+        try {\n+          vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e)\n+        } catch (e) {\n+          handleError(e, vm, `renderError`)\n           vnode = vm._vnode\n         }\n       } else {\n\n\n###\n\n","completion":" refactor: reduce if-else nesting, coalesce conditions (#<issue-num>)\n"}
{"prompt":" file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -53,7 +53,7 @@ export interface Vue {\n     options?: WatchOptions\n   ): (() => void);\n   $on(event: string | string[], callback: Function): this;\n-  $once(event: string, callback: Function): this;\n+  $once(event: string | string[], callback: Function): this;\n   $off(event?: string | string[], callback?: Function): this;\n   $emit(event: string, ...args: any[]): this;\n   $nextTick(callback: (this: this) => void): void;\n\n\n###\n\n","completion":" fix(types): fix vm.$once argument type (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -19,6 +19,7 @@ class Test extends Vue {\n   }\n \n   \/\/ test property reification\n+  $el!: HTMLElement | SVGElement;\n   $refs!: {\n     vue: Vue,\n     element: HTMLInputElement,\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -21,7 +21,7 @@ export interface CreateElement {\n }\n \n export interface Vue {\n-  readonly $el: HTMLElement;\n+  readonly $el: Element;\n   readonly $options: ComponentOptions<Vue>;\n   readonly $parent: Vue;\n   readonly $root: Vue;\n\n\n###\n\n","completion":" fix(types): support typing $el as SVGElement (#<issue-num>)\n"}
{"prompt":" file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -87,8 +87,10 @@ class Test extends Vue {\n     this.nextTick(() => {});\n     this.nextTick().then(() => {});\n     this.set({}, \"\", \"\");\n+    this.set({}, 1, \"\");\n     this.set([true, false, true], 1, true);\n     this.delete({}, \"\");\n+    this.delete({}, 1);\n     this.delete([true, false], 0);\n     this.directive(\"\", {bind() {}});\n     this.filter(\"\", (value: number) => value);\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -91,9 +91,9 @@ export interface VueConstructor<V extends Vue = Vue> {\n \n   nextTick(callback: () => void, context?: any[]): void;\n   nextTick(): Promise<void>\n-  set<T>(object: object, key: string, value: T): T;\n+  set<T>(object: object, key: string | number, value: T): T;\n   set<T>(array: T[], key: number, value: T): T;\n-  delete(object: object, key: string): void;\n+  delete(object: object, key: string | number): void;\n   delete<T>(array: T[], key: number): void;\n \n   directive(\n\n\n###\n\n","completion":" fix(types): accept `number` type as key on Vue.set\/delete (#<issue-num>) (#<issue-num>)\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -70,7 +70,7 @@ export interface ComponentOptions<\n   template?: string;\n   \/\/ hack is for funcitonal component type inference, should not used in user code\n   render?(createElement: CreateElement, hack: RenderContext<Props>): VNode;\n-  renderError?: (h: () => VNode, err: Error) => VNode;\n+  renderError?(createElement: CreateElement, err: Error): VNode;\n   staticRenderFns?: ((createElement: CreateElement) => VNode)[];\n \n   beforeCreate?(this: V): void;\n\n---\n file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -202,6 +202,9 @@ Vue.component('component', {\n       [createElement(\"div\", \"message\")]\n     ]);\n   },\n+  renderError(createElement, err) {\n+    return createElement('pre', { style: { color: 'red' }}, err.stack)\n+  },\n   staticRenderFns: [],\n \n   beforeCreate() {\n\n\n###\n\n","completion":" fix(types): fix `renderError`arguments type (#<issue-num>)\n"}
{"prompt":" file path A: flow\/global-api.js | file path B: flow\/global-api.js\n\n@@ -8,8 +8,8 @@ declare interface GlobalAPI {\n   set: <T>(target: Object | Array<T>, key: string | number, value: T) => T;\n   delete: <T>(target: Object| Array<T>, key: string | number) => void;\n   nextTick: (fn: Function, context?: Object) => void | Promise<*>;\n-  use: (plugin: Function | Object) => void;\n-  mixin: (mixin: Object) => void;\n+  use: (plugin: Function | Object) => GlobalAPI;\n+  mixin: (mixin: Object) => GlobalAPI;\n   compile: (template: string) => { render: Function, staticRenderFns: Array<Function> };\n \n   directive: (id: string, def?: Function | Object) => Function | Object | void;\n\n---\n file path A: test\/unit\/features\/global-api\/mixin.spec.js | file path B: test\/unit\/features\/global-api\/mixin.spec.js\n\n@@ -162,4 +162,9 @@ describe('Global API: mixin', () => {\n     expect(base).toHaveBeenCalled()\n     expect(injected).toHaveBeenCalled()\n   })\n+\n+  \/\/ #8595\n+  it('chain call', () => {\n+    expect(Vue.mixin({})).toBe(Vue)\n+  })\n })\n\n---\n file path A: test\/unit\/features\/global-api\/use.spec.js | file path B: test\/unit\/features\/global-api\/use.spec.js\n\n@@ -49,4 +49,9 @@ describe('Global API: use', () => {\n     expect(Vue.options.directives['plugin-test']).toBeUndefined()\n     expect(Ctor2.options.directives['plugin-test']).toBe(def)\n   })\n+\n+  \/\/ #8595\n+  it('chain call', () => {\n+    expect(Vue.use(() => {})).toBe(Vue)\n+  })\n })\n\n---\n file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -97,6 +97,15 @@ class Test extends Vue {\n     this.use;\n     this.mixin(Test);\n     this.compile(\"<div>{{ message }}<\/div>\");\n+    this\n+      .use(() => {\n+        \n+      })\n+      .use(() => {\n+        \n+      })\n+      .mixin({})\n+      .mixin({});\n   }\n }\n \n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -111,9 +111,9 @@ export interface VueConstructor<V extends Vue = Vue> {\n   component<Props>(id: string, definition: FunctionalComponentOptions<Props, RecordPropsDefinition<Props>>): ExtendedVue<V, {}, {}, {}, Props>;\n   component(id: string, definition?: ComponentOptions<V>): ExtendedVue<V, {}, {}, {}, {}>;\n \n-  use<T>(plugin: PluginObject<T> | PluginFunction<T>, options?: T): void;\n-  use(plugin: PluginObject<any> | PluginFunction<any>, ...options: any[]): void;\n-  mixin(mixin: VueConstructor | ComponentOptions<Vue>): void;\n+  use<T>(plugin: PluginObject<T> | PluginFunction<T>, options?: T): this;\n+  use(plugin: PluginObject<any> | PluginFunction<any>, ...options: any[]): this;\n+  mixin(mixin: VueConstructor | ComponentOptions<Vue>): this;\n   compile(template: string): {\n     render(createElement: typeof Vue.prototype.$createElement): VNode;\n     staticRenderFns: (() => VNode)[];\n\n\n###\n\n","completion":" fix(types): support chain call for Vue.use and Vue.mixin (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/options.js | file path B: src\/core\/util\/options.js\n\n@@ -55,7 +55,11 @@ function mergeData (to: Object, from: ?Object): Object {\n     fromVal = from[key]\n     if (!hasOwn(to, key)) {\n       set(to, key, fromVal)\n-    } else if (isPlainObject(toVal) && isPlainObject(fromVal)) {\n+    } else if (\n+      toVal !== fromVal &&\n+      isPlainObject(toVal) &&\n+      isPlainObject(fromVal)\n+    ) {\n       mergeData(toVal, fromVal)\n     }\n   }\n\n\n###\n\n","completion":" fix(data): skip recursive call if values are identical (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -106,7 +106,7 @@ export function parseHTML (html, options) {\n         const startTagMatch = parseStartTag()\n         if (startTagMatch) {\n           handleStartTag(startTagMatch)\n-          if (shouldIgnoreFirstNewline(lastTag, html)) {\n+          if (shouldIgnoreFirstNewline(startTagMatch.tagName, html)) {\n             advance(1)\n           }\n           continue\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -667,6 +667,15 @@ describe('parser', () => {\n     expect(pre2.children[0].text).toBe('\\nabc')\n   })\n \n+  it('keep first newline after unary tag in <pre>', () => {\n+    const options = extend({}, baseOptions)\n+    const ast = parse('<pre>abc<input>\\ndef<\/pre>', options)\n+    expect(ast.children[1].type).toBe(1)\n+    expect(ast.children[1].tag).toBe('input')\n+    expect(ast.children[2].type).toBe(3)\n+    expect(ast.children[2].text).toBe('\\ndef')\n+  })\n+\n   it('forgivingly handle < in plain text', () => {\n     const options = extend({}, baseOptions)\n     const ast = parse('<p>1 < 2 < 3<\/p>', options)\n\n\n###\n\n","completion":" fix(compiler): should keep newline after unary tags in <pre> (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/render-helpers\/bind-object-props.js | file path B: src\/core\/instance\/render-helpers\/bind-object-props.js\n\n@@ -6,7 +6,8 @@ import {\n   warn,\n   isObject,\n   toObject,\n-  isReservedAttribute\n+  isReservedAttribute,\n+  camelize\n } from 'core\/util\/index'\n \n \/**\n@@ -43,12 +44,13 @@ export function bindObjectProps (\n             ? data.domProps || (data.domProps = {})\n             : data.attrs || (data.attrs = {})\n         }\n-        if (!(key in hash)) {\n+        const camelizedKey = camelize(key)\n+        if (!(key in hash) && !(camelizedKey in hash)) {\n           hash[key] = value[key]\n \n           if (isSync) {\n             const on = data.on || (data.on = {})\n-            on[`update:${key}`] = function ($event) {\n+            on[`update:${camelizedKey}`] = function ($event) {\n               value[key] = $event\n             }\n           }\n\n---\n file path A: test\/unit\/features\/directives\/bind.spec.js | file path B: test\/unit\/features\/directives\/bind.spec.js\n\n@@ -187,6 +187,26 @@ describe('Directive v-bind', () => {\n     }).then(done)\n   })\n \n+  it('bind object with explicit overrides', () => {\n+    const vm = new Vue({\n+      template: `<test v-bind=\"test\" data-foo=\"foo\" dataBar=\"bar\"\/>`,\n+      components: {\n+        test: {\n+          template: '<div :data-foo=\"dataFoo\" :data-bar=\"dataBar\"><\/div>',\n+          props: ['dataFoo', 'dataBar']\n+        }\n+      },\n+      data: {\n+        test: {\n+          dataFoo: 'hi',\n+          dataBar: 'bye'\n+        }\n+      }\n+    }).$mount()\n+    expect(vm.$el.getAttribute('data-foo')).toBe('foo')\n+    expect(vm.$el.getAttribute('data-bar')).toBe('bar')\n+  })\n+\n   it('.sync modifier with bind object', done => {\n     const vm = new Vue({\n       template: `<test v-bind.sync=\"test\"\/>`,\n\n\n###\n\n","completion":" fix: v-bind object should be overridable with kebab-cased props (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/options.js | file path B: src\/core\/util\/options.js\n\n@@ -378,15 +378,22 @@ export function mergeOptions (\n   normalizeProps(child, vm)\n   normalizeInject(child, vm)\n   normalizeDirectives(child)\n-  const extendsFrom = child.extends\n-  if (extendsFrom) {\n-    parent = mergeOptions(parent, extendsFrom, vm)\n-  }\n-  if (child.mixins) {\n-    for (let i = 0, l = child.mixins.length; i < l; i++) {\n-      parent = mergeOptions(parent, child.mixins[i], vm)\n+  \n+  \/\/ Apply extends and mixins on the child options,\n+  \/\/ but only if it is a raw options object that isn't\n+  \/\/ the result of another mergeOptions call.\n+  \/\/ Only merged options has the _base property.\n+  if (!child._base) {\n+    if (child.extends) {\n+      parent = mergeOptions(parent, child.extends, vm)\n+    }\n+    if (child.mixins) {\n+      for (let i = 0, l = child.mixins.length; i < l; i++) {\n+        parent = mergeOptions(parent, child.mixins[i], vm)\n+      }\n     }\n   }\n+\n   const options = {}\n   let key\n   for (key in parent) {\n\n---\n file path A: test\/unit\/features\/global-api\/extend.spec.js | file path B: test\/unit\/features\/global-api\/extend.spec.js\n\n@@ -71,6 +71,25 @@ describe('Global API: extend', () => {\n     expect(calls).toEqual([1, 2, 3])\n   })\n \n+  it('should not merge nested mixins created with Vue.extend', () => {\n+    const A = Vue.extend({\n+      created: () => {}\n+    })\n+    const B = Vue.extend({\n+      mixins: [A],\n+      created: () => {}\n+    })\n+    const C = Vue.extend({\n+      extends: B,\n+      created: () => {}\n+    })\n+    const D = Vue.extend({\n+      mixins: [C],\n+      created: () => {}\n+    })\n+    expect(D.options.created.length).toBe(4)\n+  })\n+\n   it('should merge methods', () => {\n     const A = Vue.extend({\n       methods: {\n\n\n###\n\n","completion":" fix(core): skip mixins and extends if child is already merged (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/state.js | file path B: src\/core\/instance\/state.js\n\n@@ -224,9 +224,7 @@ export function defineComputed (\n         ? createComputedGetter(key)\n         : userDef.get\n       : noop\n-    sharedPropertyDefinition.set = userDef.set\n-      ? userDef.set\n-      : noop\n+    sharedPropertyDefinition.set = userDef.set || noop\n   }\n   if (process.env.NODE_ENV !== 'production' &&\n       sharedPropertyDefinition.set === noop) {\n\n\n###\n\n","completion":" refactor: remove redundant ternary (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -124,7 +124,7 @@ function cloneAndMarkFunctionalResult (vnode, data, contextVm, options, renderCo\n   clone.fnContext = contextVm\n   clone.fnOptions = options\n   if (process.env.NODE_ENV !== 'production') {\n-    ;(clone.devtoolsMeta = clone.devtoolsMeta || {}).renderContext = renderContext\n+    (clone.devtoolsMeta = clone.devtoolsMeta || {}).renderContext = renderContext\n   }\n   if (data.slot) {\n     (clone.data || (clone.data = {})).slot = data.slot\n\n\n###\n\n","completion":" chore: fix lint\n"}
{"prompt":" file path A: src\/core\/vdom\/helpers\/resolve-async-component.js | file path B: src\/core\/vdom\/helpers\/resolve-async-component.js\n\n@@ -61,10 +61,14 @@ export function resolveAsyncComponent (\n     const contexts = factory.contexts = [context]\n     let sync = true\n \n-    const forceRender = () => {\n+    const forceRender = (renderCompleted: boolean) => {\n       for (let i = 0, l = contexts.length; i < l; i++) {\n         contexts[i].$forceUpdate()\n       }\n+\n+      if (renderCompleted) {\n+        contexts.length = 0\n+      }\n     }\n \n     const resolve = once((res: Object | Class<Component>) => {\n@@ -73,7 +77,7 @@ export function resolveAsyncComponent (\n       \/\/ invoke callbacks only if this is not a synchronous resolve\n       \/\/ (async resolves are shimmed as synchronous during SSR)\n       if (!sync) {\n-        forceRender()\n+        forceRender(true)\n       }\n     })\n \n@@ -84,7 +88,7 @@ export function resolveAsyncComponent (\n       )\n       if (isDef(factory.errorComp)) {\n         factory.error = true\n-        forceRender()\n+        forceRender(true)\n       }\n     })\n \n@@ -111,7 +115,7 @@ export function resolveAsyncComponent (\n             setTimeout(() => {\n               if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                 factory.loading = true\n-                forceRender()\n+                forceRender(false)\n               }\n             }, res.delay || 200)\n           }\n\n---\n file path A: test\/unit\/features\/transition\/transition-mode.spec.js | file path B: test\/unit\/features\/transition\/transition-mode.spec.js\n\n@@ -457,7 +457,7 @@ if (!isIE9) {\n             setTimeout(() => {\n               resolve({ template: '<div><h1>component B<\/h1><\/div>' })\n               Vue.nextTick(next)\n-            }, (duration + buffer) * 1.5)\n+            }, (duration + buffer) * 1.7)\n           }\n         },\n         data: {\n\n---\n file path A: test\/unit\/modules\/vdom\/create-component.spec.js | file path B: test\/unit\/modules\/vdom\/create-component.spec.js\n\n@@ -58,6 +58,7 @@ describe('create-component', () => {\n       vnode = createComponent(async, data, vm, vm)\n       expect(vnode.isComment).toBe(true) \/\/ not to be loaded yet.\n       expect(vnode.asyncFactory).toBe(async)\n+      expect(vnode.asyncFactory.contexts.length).toEqual(1)\n     }\n     function loaded () {\n       vnode = createComponent(async, data, vm, vm)\n@@ -68,6 +69,7 @@ describe('create-component', () => {\n       expect(vnode.elm).toBeUndefined()\n       expect(vnode.ns).toBeUndefined()\n       expect(vnode.context).toEqual(vm)\n+      expect(vnode.asyncFactory.contexts.length).toEqual(0)\n       expect(vm.$forceUpdate).toHaveBeenCalled()\n       done()\n     }\n\n\n###\n\n","completion":" fix(component): clean up memory leak after loading async component completes (fix #8740) (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/webpack-plugin\/server.js | file path B: src\/server\/webpack-plugin\/server.js\n\n@@ -43,7 +43,7 @@ export default class VueSSRServerPlugin {\n       }\n \n       stats.assets.forEach(asset => {\n-        if (asset.name.match(\/\\.js$\/)) {\n+        if (isJS(asset.name)) {\n           bundle.files[asset.name] = compilation.assets[asset.name].source()\n         } else if (asset.name.match(\/\\.js\\.map$\/)) {\n           bundle.maps[asset.name.replace(\/\\.map$\/, '')] = JSON.parse(compilation.assets[asset.name].source())\n\n\n###\n\n","completion":" fix(ssr): check js assets more accurate in ssr webpack plugin (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -105,24 +105,27 @@ export function createFunctionalComponent (\n   const vnode = options.render.call(null, renderContext._c, renderContext)\n \n   if (vnode instanceof VNode) {\n-    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options)\n+    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options, renderContext)\n   } else if (Array.isArray(vnode)) {\n     const vnodes = normalizeChildren(vnode) || []\n     const res = new Array(vnodes.length)\n     for (let i = 0; i < vnodes.length; i++) {\n-      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options)\n+      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options, renderContext)\n     }\n     return res\n   }\n }\n \n-function cloneAndMarkFunctionalResult (vnode, data, contextVm, options) {\n+function cloneAndMarkFunctionalResult (vnode, data, contextVm, options, renderContext) {\n   \/\/ #7817 clone node before setting fnContext, otherwise if the node is reused\n   \/\/ (e.g. it was from a cached normal slot) the fnContext causes named slots\n   \/\/ that should not be matched to match.\n   const clone = cloneVNode(vnode)\n   clone.fnContext = contextVm\n   clone.fnOptions = options\n+  if (process.env.NODE_ENV !== 'production') {\n+    ;(clone.devtoolsMeta = clone.devtoolsMeta || {}).renderContext = renderContext\n+  }\n   if (data.slot) {\n     (clone.data || (clone.data = {})).slot = data.slot\n   }\n\n---\n file path A: src\/core\/vdom\/vnode.js | file path B: src\/core\/vdom\/vnode.js\n\n@@ -26,6 +26,7 @@ export default class VNode {\n   ssrContext: Object | void;\n   fnContext: Component | void; \/\/ real context vm for functional nodes\n   fnOptions: ?ComponentOptions; \/\/ for SSR caching\n+  devtoolsMeta: ?Object; \/\/ used to store functional render context for devtools\n   fnScopeId: ?string; \/\/ functional scope id support\n \n   constructor (\n\n\n###\n\n","completion":" feat(devtools): store functional render context on vnode in development (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/state.js | file path B: src\/core\/instance\/state.js\n\n@@ -351,7 +351,11 @@ export function stateMixin (Vue: Class<Component>) {\n     options.user = true\n     const watcher = new Watcher(vm, expOrFn, cb, options)\n     if (options.immediate) {\n-      cb.call(vm, watcher.value)\n+      try {\n+        cb.call(vm, watcher.value)\n+      } catch (error) {\n+        handleError(error, vm, `callback for immediate watcher \"${watcher.expression}\"`)\n+      }\n     }\n     return function unwatchFn () {\n       watcher.teardown()\n\n---\n file path A: test\/unit\/features\/error-handling.spec.js | file path B: test\/unit\/features\/error-handling.spec.js\n\n@@ -92,6 +92,16 @@ describe('Error handling', () => {\n     }).then(done)\n   })\n \n+  it('should recover from errors in user immediate watcher callback', done => {\n+    const vm = createTestInstance(components.userImmediateWatcherCallback)\n+    waitForUpdate(() => {\n+      expect(`Error in callback for immediate watcher \"n\"`).toHaveBeenWarned()\n+      expect(`Error: userImmediateWatcherCallback error`).toHaveBeenWarned()\n+    }).thenWaitFor(next => {\n+      assertBothInstancesActive(vm).end(next)\n+    }).then(done)\n+  })\n+\n   it('config.errorHandler should capture render errors', done => {\n     const spy = Vue.config.errorHandler = jasmine.createSpy('errorHandler')\n     const vm = createTestInstance(components.render)\n@@ -234,6 +244,21 @@ function createErrorTestComponents () {\n     }\n   }\n \n+  components.userImmediateWatcherCallback = {\n+    props: ['n'],\n+    watch: {\n+      n: {\n+        immediate: true,\n+        handler () {\n+          throw new Error('userImmediateWatcherCallback error')\n+        }\n+      }\n+    },\n+    render (h) {\n+      return h('div', this.n)\n+    }\n+  }\n+\n   \/\/ event errors\n   components.event = {\n     beforeCreate () {\n\n\n###\n\n","completion":" fix(error handling): handle errors on immediate watcher execution (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/create-component.js | file path B: src\/core\/vdom\/create-component.js\n\n@@ -252,9 +252,17 @@ function transformModel (options, data: any) {\n   const event = (options.model && options.model.event) || 'input'\n   ;(data.props || (data.props = {}))[prop] = data.model.value\n   const on = data.on || (data.on = {})\n-  if (isDef(on[event])) {\n-    on[event] = [data.model.callback].concat(on[event])\n+  const existing = on[event]\n+  const callback = data.model.callback\n+  if (isDef(existing)) {\n+    if (\n+      Array.isArray(existing)\n+        ? existing.indexOf(callback) === -1\n+        : existing !== callback\n+    ) {\n+      on[event] = [callback].concat(existing)\n+    }\n   } else {\n-    on[event] = data.model.callback\n+    on[event] = callback\n   }\n }\n\n---\n file path A: test\/unit\/features\/directives\/model-component.spec.js | file path B: test\/unit\/features\/directives\/model-component.spec.js\n\n@@ -148,4 +148,60 @@ describe('Directive v-model component', () => {\n     vm.$refs.input.$emit('input', '   foo o  ')\n     expect(vm.text).toBe('foo o')\n   })\n+\n+  \/\/ #8436\n+  it('should not double transform mode props', () => {\n+    const BaseInput = {\n+      props: ['value'],\n+      render (h) {\n+        return h('input', {\n+          domProps: {\n+            value: this.value\n+          },\n+          on: {\n+            input: e => this.$emit('input', e.target.value)\n+          }\n+        })\n+      }\n+    }\n+\n+    const FunctionalWrapper = {\n+      functional: true,\n+      render (h, ctx) {\n+        return h(BaseInput, ctx.data)\n+      }\n+    }\n+\n+    let triggerCount = 0\n+\n+    const vm = new Vue({\n+      components: {\n+        FunctionalWrapper\n+      },\n+      template: `\n+        <div>\n+          <functional-wrapper v-model=\"val\"\/>\n+        <\/div>\n+      `,\n+      data: {\n+        internalVal: ''\n+      },\n+      computed: {\n+        val: {\n+          get () {\n+            return this.internalVal\n+          },\n+          set (val) {\n+            triggerCount++\n+            this.internalVal = val\n+          }\n+        }\n+      }\n+    }).$mount()\n+\n+    document.body.appendChild(vm.$el)\n+    triggerEvent(vm.$el.querySelector('input'), 'input')\n+    expect(triggerCount).toBe(1)\n+    document.body.removeChild(vm.$el)\n+  })\n })\n\n\n###\n\n","completion":" fix(v-model): avoid duplicate model transforms\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -253,7 +253,7 @@ Vue.js supports all browsers that are [ES5-compliant](http:\/\/kangax.github.io\/co\n \n [vue-router-status]: https:\/\/img.shields.io\/npm\/v\/vue-router.svg\n [vuex-status]: https:\/\/img.shields.io\/npm\/v\/vuex.svg\n-[vue-cli-status]: https:\/\/img.shields.io\/npm\/v\/vue-cli.svg\n+[vue-cli-status]: https:\/\/img.shields.io\/npm\/v\/@vue\/cli.svg\n [vue-loader-status]: https:\/\/img.shields.io\/npm\/v\/vue-loader.svg\n [vue-server-renderer-status]: https:\/\/img.shields.io\/npm\/v\/vue-server-renderer.svg\n [vue-class-component-status]: https:\/\/img.shields.io\/npm\/v\/vue-class-component.svg\n@@ -262,7 +262,7 @@ Vue.js supports all browsers that are [ES5-compliant](http:\/\/kangax.github.io\/co\n \n [vue-router-package]: https:\/\/npmjs.com\/package\/vue-router\n [vuex-package]: https:\/\/npmjs.com\/package\/vuex\n-[vue-cli-package]: https:\/\/npmjs.com\/package\/vue-cli\n+[vue-cli-package]: https:\/\/npmjs.com\/package\/@vue\/cli\n [vue-loader-package]: https:\/\/npmjs.com\/package\/vue-loader\n [vue-server-renderer-package]: https:\/\/npmjs.com\/package\/vue-server-renderer\n [vue-class-component-package]: https:\/\/npmjs.com\/package\/vue-class-component\n\n\n###\n\n","completion":" chore: update badge for Vue CLI 3 (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -406,7 +406,10 @@ export function genChildren (\n       el.tag !== 'template' &&\n       el.tag !== 'slot'\n     ) {\n-      return (altGenElement || genElement)(el, state)\n+      \/\/ because el may be a functional component and return an Array instead of a single root.\n+      \/\/ In this case, just a simple normalization is needed\n+      const normalizationType = state.maybeComponent(el) ? `,1` : ``\n+      return `${(altGenElement || genElement)(el, state)}${normalizationType}`\n     }\n     const normalizationType = checkSkip\n       ? getNormalizationType(children, state.maybeComponent)\n\n---\n file path A: test\/unit\/features\/options\/functional.spec.js | file path B: test\/unit\/features\/options\/functional.spec.js\n\n@@ -316,4 +316,25 @@ describe('Options functional', () => {\n     triggerEvent(parent.$el.querySelector('.clickable'), 'click')\n     waitForUpdate(assertMarkup).then(done)\n   })\n+\n+  \/\/ #8468\n+  it('should normalize nested arrays when use functional components with v-for', () => {\n+    const Foo = {\n+      functional: true,\n+      props: {\n+        name: {}\n+      },\n+      render (h, context) {\n+        return [h('span', 'hi'), h('span', context.props.name)]\n+      }\n+    }\n+    const vm = new Vue({\n+      template: `<div><foo v-for=\"name in names\" :name=\"name\" \/><\/div>`,\n+      data: {\n+        names: ['foo', 'bar']\n+      },\n+      components: { Foo }\n+    }).$mount()\n+    expect(vm.$el.innerHTML).toBe('<span>hi<\/span><span>foo<\/span><span>hi<\/span><span>bar<\/span>')\n+  })\n })\n\n\n###\n\n","completion":" fix(compiler): normalize potential functional component children in v-for (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/transition-util.js | file path B: src\/platforms\/web\/runtime\/transition-util.js\n\n@@ -181,6 +181,10 @@ function getTimeout (delays: Array<string>, durations: Array<string>): number {\n   }))\n }\n \n+\/\/ Old versions of Chromium (below 61.0.3163.100) formats floating pointer numbers\n+\/\/ in a locale-dependent way, using a comma instead of a dot.\n+\/\/ If comma is not replaced with a dot, the input will be rounded down (i.e. acting\n+\/\/ as a floor function) causing unexpected behaviors\n function toMs (s: string): number {\n-  return Number(s.slice(0, -1)) * 1000\n+  return Number(s.slice(0, -1).replace(',', '.')) * 1000\n }\n\n\n###\n\n","completion":" fix(transition): handle local-formatted floats in toMs function.  (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -248,12 +248,9 @@ export function parseHTML (html, options) {\n     if (start == null) start = index\n     if (end == null) end = index\n \n-    if (tagName) {\n-      lowerCasedTagName = tagName.toLowerCase()\n-    }\n-\n     \/\/ Find the closest opened tag of the same type\n     if (tagName) {\n+      lowerCasedTagName = tagName.toLowerCase()\n       for (pos = stack.length - 1; pos >= 0; pos--) {\n         if (stack[pos].lowerCasedTag === lowerCasedTagName) {\n           break\n\n\n###\n\n","completion":" refactor: remove unnecessary judgment (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/helpers.js | file path B: src\/compiler\/helpers.js\n\n@@ -65,6 +65,18 @@ export function addHandler (\n     )\n   }\n \n+  \/\/ normalize click.right and click.middle since they don't actually fire\n+  \/\/ this is technically browser-specific, but at least for now browsers are\n+  \/\/ the only target envs that have right\/middle clicks.\n+  if (name === 'click') {\n+    if (modifiers.right) {\n+      name = 'contextmenu'\n+      delete modifiers.right\n+    } else if (modifiers.middle) {\n+      name = 'mouseup'\n+    }\n+  }\n+\n   \/\/ check capture modifier\n   if (modifiers.capture) {\n     delete modifiers.capture\n@@ -80,18 +92,6 @@ export function addHandler (\n     name = '&' + name \/\/ mark the event as passive\n   }\n \n-  \/\/ normalize click.right and click.middle since they don't actually fire\n-  \/\/ this is technically browser-specific, but at least for now browsers are\n-  \/\/ the only target envs that have right\/middle clicks.\n-  if (name === 'click') {\n-    if (modifiers.right) {\n-      name = 'contextmenu'\n-      delete modifiers.right\n-    } else if (modifiers.middle) {\n-      name = 'mouseup'\n-    }\n-  }\n-\n   let events\n   if (modifiers.native) {\n     delete modifiers.native\n\n\n###\n\n","completion":" fix: support modifier combination of click.right + .once (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -75,7 +75,7 @@ export function genElement (el: ASTElement, state: CodegenState): string {\n       code = genComponent(el.component, el, state)\n     } else {\n       let data\n-      if (!el.plain || el.pre) {\n+      if (!el.plain || (el.pre && state.maybeComponent(el))) {\n         data = genData(el, state)\n       }\n \n\n\n###\n\n","completion":" refactor(codegen): only generate pre data for possible components\n"}
{"prompt":" file path A: src\/core\/vdom\/patch.js | file path B: src\/core\/vdom\/patch.js\n\n@@ -32,6 +32,12 @@ export const emptyNode = new VNode('', {}, [])\n \n const hooks = ['create', 'activate', 'update', 'remove', 'destroy']\n \n+function childrenIgnored (vnode) {\n+  return vnode && vnode.data && vnode.data.domProps && (\n+    vnode.data.domProps.innerHTML || vnode.data.domProps.textContent\n+  )\n+}\n+\n function sameVnode (a, b) {\n   return (\n     a.key === b.key && (\n@@ -39,6 +45,7 @@ function sameVnode (a, b) {\n         a.tag === b.tag &&\n         a.isComment === b.isComment &&\n         isDef(a.data) === isDef(b.data) &&\n+        !childrenIgnored(a) && !childrenIgnored(b) &&\n         sameInputType(a, b)\n       ) || (\n         isTrue(a.isAsyncPlaceholder) &&\n\n---\n file path A: src\/platforms\/web\/runtime\/modules\/transition.js | file path B: src\/platforms\/web\/runtime\/modules\/transition.js\n\n@@ -251,7 +251,7 @@ export function leave (vnode: VNodeWithData, rm: Function) {\n       return\n     }\n     \/\/ record leaving element\n-    if (!vnode.data.show) {\n+    if (!vnode.data.show && el.parentNode) {\n       (el.parentNode._pending || (el.parentNode._pending = {}))[(vnode.key: any)] = vnode\n     }\n     beforeLeave && beforeLeave(el)\n\n---\n file path A: test\/unit\/features\/transition\/transition.spec.js | file path B: test\/unit\/features\/transition\/transition.spec.js\n\n@@ -1167,5 +1167,27 @@ if (!isIE9) {\n         expect(vm.$el.innerHTML).toBe('<!---->')\n       }).then(done)\n     })\n+\n+    \/\/ #8199\n+    it('should not throw error when replaced by v-html contents', (done) => {\n+      const vm = new Vue({\n+        template: `\n+          <div>\n+            <div v-if=\"ok\" :class=\"ok\">\n+              <transition>\n+                <span>a<\/span>\n+              <\/transition>\n+            <\/div>\n+            <div v-else v-html=\"ok\"><\/div>\n+          <\/div>\n+        `,\n+        data: { ok: true }\n+      }).$mount(el)\n+\n+      vm.ok = false\n+      waitForUpdate(() => {\n+        expect(vm.$el.children[0].innerHTML).toBe('false')\n+      }).then(done)\n+    })\n   })\n }\n\n\n###\n\n","completion":" fix(transition): check existence of `el.parentNode` (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/text-parser.js | file path B: src\/compiler\/parser\/text-parser.js\n\n@@ -3,7 +3,7 @@\n import { cached } from 'shared\/util'\n import { parseFilters } from '.\/filter-parser'\n \n-const defaultTagRE = \/\\{\\{((?:.|\\n)+?)\\}\\}\/g\n+const defaultTagRE = \/\\{\\{((?:.|\\r?\\n)+?)\\}\\}\/g\n const regexEscapeRE = \/[-.*+?^${}()|[\\]\\\/\\\\]\/g\n \n const buildRegex = cached(delimiters => {\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -731,4 +731,10 @@ describe('parser', () => {\n     expect(ast.children[1].isComment).toBe(true) \/\/ parse comment with ASTText\n     expect(ast.children[1].text).toBe('comment here')\n   })\n+\n+  \/\/ #8103\n+  it('should allow CRLFs in string interpolations', () => {\n+    const ast = parse(`<p>{{\\r\\nmsg\\r\\n}}<\/p>`, baseOptions)\n+    expect(ast.children[0].expression).toBe('_s(msg)')\n+  })\n })\n\n\n###\n\n","completion":" fix(parser): allow CRLFs in string interpolations (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/scheduler.js | file path B: src\/core\/observer\/scheduler.js\n\n@@ -98,7 +98,7 @@ function callUpdatedHooks (queue) {\n   while (i--) {\n     const watcher = queue[i]\n     const vm = watcher.vm\n-    if (vm._watcher === watcher && vm._isMounted) {\n+    if (vm._watcher === watcher && vm._isMounted && !vm._isDestroyed) {\n       callHook(vm, 'updated')\n     }\n   }\n\n---\n file path A: test\/unit\/features\/options\/lifecycle.spec.js | file path B: test\/unit\/features\/options\/lifecycle.spec.js\n\n@@ -199,6 +199,43 @@ describe('Options lifecycle hooks', () => {\n         expect(calls).toEqual(['child', 'parent'])\n       }).then(done)\n     })\n+\n+    \/\/ #8076\n+    it('should not be called after destroy', done => {\n+      const updated = jasmine.createSpy('updated')\n+      const destroyed = jasmine.createSpy('destroyed')\n+\n+      Vue.component('todo', {\n+        template: '<div>{{todo.done}}<\/div>',\n+        props: ['todo'],\n+        destroyed,\n+        updated\n+      })\n+\n+      const vm = new Vue({\n+        template: `\n+          <div>\n+            <todo v-for=\"t in pendingTodos\" :todo=\"t\" :key=\"t.id\"><\/todo>\n+          <\/div>\n+        `,\n+        data () {\n+          return {\n+            todos: [{ id: 1, done: false }]\n+          }\n+        },\n+        computed: {\n+          pendingTodos () {\n+            return this.todos.filter(t => !t.done)\n+          }\n+        }\n+      }).$mount()\n+\n+      vm.todos[0].done = true\n+      waitForUpdate(() => {\n+        expect(destroyed).toHaveBeenCalled()\n+        expect(updated).not.toHaveBeenCalled()\n+      }).then(done)\n+    })\n   })\n \n   describe('beforeDestroy', () => {\n\n\n###\n\n","completion":" fix(lifecycle): updated should not be called after component being destroyed (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -52,6 +52,10 @@ export function generate (\n }\n \n export function genElement (el: ASTElement, state: CodegenState): string {\n+  if (el.parent) {\n+    el.pre = el.pre || el.parent.pre\n+  }\n+\n   if (el.staticRoot && !el.staticProcessed) {\n     return genStatic(el, state)\n   } else if (el.once && !el.onceProcessed) {\n@@ -70,7 +74,10 @@ export function genElement (el: ASTElement, state: CodegenState): string {\n     if (el.component) {\n       code = genComponent(el.component, el, state)\n     } else {\n-      const data = el.plain ? undefined : genData(el, state)\n+      let data\n+      if (!el.plain || el.pre) {\n+        data = genData(el, state)\n+      }\n \n       const children = el.inlineTemplate ? null : genChildren(el, state, true)\n       code = `_c('${el.tag}'${\n\n---\n file path A: src\/core\/vdom\/create-element.js | file path B: src\/core\/vdom\/create-element.js\n\n@@ -102,7 +102,7 @@ export function _createElement (\n         config.parsePlatformTagName(tag), data, children,\n         undefined, undefined, context\n       )\n-    } else if (isDef(Ctor = resolveAsset(context.$options, 'components', tag))) {\n+    } else if ((!data || !data.pre) && isDef(Ctor = resolveAsset(context.$options, 'components', tag))) {\n       \/\/ component\n       vnode = createComponent(Ctor, data, context, children, tag)\n     } else {\n\n---\n file path A: test\/unit\/features\/directives\/pre.spec.js | file path B: test\/unit\/features\/directives\/pre.spec.js\n\n@@ -7,7 +7,7 @@ describe('Directive v-pre', function () {\n         <div v-pre>{{ a }}<\/div>\n         <div>{{ a }}<\/div>\n         <div v-pre>\n-          <component><\/component>\n+          <component is=\"div\"><\/component>\n         <\/div>\n       <\/div>`,\n       data: {\n@@ -17,7 +17,7 @@ describe('Directive v-pre', function () {\n     vm.$mount()\n     expect(vm.$el.firstChild.textContent).toBe('{{ a }}')\n     expect(vm.$el.children[1].textContent).toBe('123')\n-    expect(vm.$el.lastChild.innerHTML).toBe('<component><\/component>')\n+    expect(vm.$el.lastChild.innerHTML).toBe('<component is=\"div\"><\/component>')\n   })\n \n   it('should not compile on root node', function () {\n@@ -31,4 +31,15 @@ describe('Directive v-pre', function () {\n     vm.$mount()\n     expect(vm.$el.firstChild.textContent).toBe('{{ a }}')\n   })\n+\n+  \/\/ #8286\n+  it('should not compile custom component tags', function () {\n+    Vue.component('vtest', { template: ` <div>Hello World<\/div>` })\n+    const vm = new Vue({\n+      template: '<div v-pre><vtest><\/vtest><\/div>',\n+      replace: true\n+    })\n+    vm.$mount()\n+    expect(vm.$el.firstChild.tagName).toBe('VTEST')\n+  })\n })\n\n\n###\n\n","completion":" fix(v-pre): skip compiling custom component tags in v-pre blocks (fix #8286) (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/components\/transition-group.js | file path B: src\/platforms\/web\/runtime\/components\/transition-group.js\n\n@@ -116,6 +116,9 @@ export default {\n         addTransitionClass(el, moveClass)\n         s.transform = s.WebkitTransform = s.transitionDuration = ''\n         el.addEventListener(transitionEndEvent, el._moveCb = function cb (e) {\n+          if (e && e.target !== el) {\n+            return\n+          }\n           if (!e || \/transform$\/.test(e.propertyName)) {\n             el.removeEventListener(transitionEndEvent, cb)\n             el._moveCb = null\n\n\n###\n\n","completion":" fix(transition): transition-group should only listen for first-level children's end events (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/html-parser.js | file path B: src\/compiler\/parser\/html-parser.js\n\n@@ -26,11 +26,6 @@ const doctype = \/^<!DOCTYPE [^>]+>\/i\n const comment = \/^<!\\--\/\n const conditionalComment = \/^<!\\[\/\n \n-let IS_REGEX_CAPTURING_BROKEN = false\n-'x'.replace(\/x(.)?\/g, function (m, g) {\n-  IS_REGEX_CAPTURING_BROKEN = g === ''\n-})\n-\n \/\/ Special Elements (can contain anything)\n export const isPlainTextElement = makeMap('script,style,textarea', true)\n const reCache = {}\n@@ -228,12 +223,6 @@ export function parseHTML (html, options) {\n     const attrs = new Array(l)\n     for (let i = 0; i < l; i++) {\n       const args = match.attrs[i]\n-      \/\/ hackish work around FF bug https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=369778\n-      if (IS_REGEX_CAPTURING_BROKEN && args[0].indexOf('\"\"') === -1) {\n-        if (args[3] === '') { delete args[3] }\n-        if (args[4] === '') { delete args[4] }\n-        if (args[5] === '') { delete args[5] }\n-      }\n       const value = args[3] || args[4] || args[5] || ''\n       const shouldDecodeNewlines = tagName === 'a' && args[1] === 'href'\n         ? options.shouldDecodeNewlinesForHref\n\n\n###\n\n","completion":" refactor: remove unnecessary code in html-parser.js (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/state.js | file path B: src\/core\/instance\/state.js\n\n@@ -86,7 +86,7 @@ function initProps (vm: Component, propsOptions: Object) {\n         )\n       }\n       defineReactive(props, key, value, () => {\n-        if (vm.$parent && !isUpdatingChildComponent) {\n+        if (!isRoot && !isUpdatingChildComponent) {\n           warn(\n             `Avoid mutating a prop directly since the value will be ` +\n             `overwritten whenever the parent component re-renders. ` +\n\n\n###\n\n","completion":" refactor: keep single source of truth (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/transition-util.js | file path B: src\/platforms\/web\/runtime\/transition-util.js\n\n@@ -122,11 +122,12 @@ export function getTransitionInfo (el: Element, expectedType?: ?string): {\n   hasTransform: boolean;\n } {\n   const styles: any = window.getComputedStyle(el)\n-  const transitionDelays: Array<string> = styles[transitionProp + 'Delay'].split(', ')\n-  const transitionDurations: Array<string> = styles[transitionProp + 'Duration'].split(', ')\n+  \/\/ JSDOM may return undefined for transition properties\n+  const transitionDelays: Array<string> = (styles[transitionProp + 'Delay'] || '').split(', ')\n+  const transitionDurations: Array<string> = (styles[transitionProp + 'Duration'] || '').split(', ')\n   const transitionTimeout: number = getTimeout(transitionDelays, transitionDurations)\n-  const animationDelays: Array<string> = styles[animationProp + 'Delay'].split(', ')\n-  const animationDurations: Array<string> = styles[animationProp + 'Duration'].split(', ')\n+  const animationDelays: Array<string> = (styles[animationProp + 'Delay'] || '').split(', ')\n+  const animationDurations: Array<string> = (styles[animationProp + 'Duration'] || '').split(', ')\n   const animationTimeout: number = getTimeout(animationDelays, animationDurations)\n \n   let type: ?string\n\n\n###\n\n","completion":" fix: handle undefined style properties in jsdom (fix #7444) (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/template-renderer\/index.js | file path B: src\/server\/template-renderer\/index.js\n\n@@ -60,7 +60,7 @@ export default class TemplateRenderer {\n     \/\/ extra functionality with client manifest\n     if (options.clientManifest) {\n       const clientManifest = this.clientManifest = options.clientManifest\n-      this.publicPath = clientManifest.publicPath.replace(\/\\\/$\/, '')\n+      this.publicPath = clientManifest.publicPath\n       \/\/ preload\/prefetch directives\n       this.preloadFiles = (clientManifest.initial || []).map(normalizeFile)\n       this.prefetchFiles = (clientManifest.async || []).map(normalizeFile)\n@@ -114,7 +114,7 @@ export default class TemplateRenderer {\n     return (\n       \/\/ render links for css files\n       (cssFiles.length\n-        ? cssFiles.map(({ file }) => `<link rel=\"stylesheet\" href=\"${this.publicPath}\/${file}\">`).join('')\n+        ? cssFiles.map(({ file }) => `<link rel=\"stylesheet\" href=\"${this.getPublicPath(file)}\">`).join('')\n         : '') +\n       \/\/ context.styles is a getter exposed by vue-style-loader which contains\n       \/\/ the inline component styles collected during SSR\n@@ -153,7 +153,7 @@ export default class TemplateRenderer {\n           extra = ` type=\"font\/${extension}\" crossorigin`\n         }\n         return `<link rel=\"preload\" href=\"${\n-          this.publicPath}\/${file\n+          this.getPublicPath(file)\n         }\"${\n           asType !== '' ? ` as=\"${asType}\"` : ''\n         }${\n@@ -179,7 +179,7 @@ export default class TemplateRenderer {\n         if (alreadyRendered(file)) {\n           return ''\n         }\n-        return `<link rel=\"prefetch\" href=\"${this.publicPath}\/${file}\">`\n+        return `<link rel=\"prefetch\" href=\"${this.getPublicPath(file)}\">`\n       }).join('')\n     } else {\n       return ''\n@@ -206,7 +206,7 @@ export default class TemplateRenderer {\n       const async = (this.getUsedAsyncFiles(context) || []).filter(({ file }) => isJS(file))\n       const needed = [initial[0]].concat(async || [], initial.slice(1))\n       return needed.map(({ file }) => {\n-        return `<script src=\"${this.publicPath}\/${file}\" defer><\/script>`\n+        return `<script src=\"${this.getPublicPath(file)}\" defer><\/script>`\n       }).join('')\n     } else {\n       return ''\n@@ -228,6 +228,10 @@ export default class TemplateRenderer {\n     }\n     return new TemplateStream(this, this.parsedTemplate, context || {})\n   }\n+\n+  getPublicPath (file: string) {\n+    return path.posix.join(this.publicPath, file)\n+  }\n }\n \n function normalizeFile (file: string): Resource {\n\n---\n file path A: test\/ssr\/ssr-template.spec.js | file path B: test\/ssr\/ssr-template.spec.js\n\n@@ -11,6 +11,7 @@ function generateClientManifest (file, cb) {\n   compileWithWebpack(file, {\n     output: {\n       path: '\/',\n+      publicPath: '\/',\n       filename: '[name].js'\n     },\n     optimization: {\n\n\n###\n\n","completion":" fix(server): use path.posix.join to generate public path (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -18,6 +18,7 @@ export class CodegenState {\n   maybeComponent: (el: ASTElement) => boolean;\n   onceId: number;\n   staticRenderFns: Array<string>;\n+  pre: boolean;\n \n   constructor (options: CompilerOptions) {\n     this.options = options\n@@ -29,6 +30,7 @@ export class CodegenState {\n     this.maybeComponent = (el: ASTElement) => !(isReservedTag(el.tag) && !el.component)\n     this.onceId = 0\n     this.staticRenderFns = []\n+    this.pre = false\n   }\n }\n \n@@ -58,7 +60,7 @@ export function genElement (el: ASTElement, state: CodegenState): string {\n     return genFor(el, state)\n   } else if (el.if && !el.ifProcessed) {\n     return genIf(el, state)\n-  } else if (el.tag === 'template' && !el.slotTarget) {\n+  } else if (el.tag === 'template' && !el.slotTarget && !state.pre) {\n     return genChildren(el, state) || 'void 0'\n   } else if (el.tag === 'slot') {\n     return genSlot(el, state)\n@@ -88,7 +90,15 @@ export function genElement (el: ASTElement, state: CodegenState): string {\n \/\/ hoist static sub-trees out\n function genStatic (el: ASTElement, state: CodegenState): string {\n   el.staticProcessed = true\n+  \/\/ Some elements (templates) need to behave differently inside of a v-pre\n+  \/\/ node.  All pre nodes are static roots, so we can use this as a location to\n+  \/\/ wrap a state change and reset it upon exiting the pre node.\n+  const originalPreState = state.pre\n+  if (el.pre) {\n+    state.pre = el.pre\n+  }\n   state.staticRenderFns.push(`with(this){return ${genElement(el, state)}}`)\n+  state.pre = originalPreState\n   return `_m(${\n     state.staticRenderFns.length - 1\n   }${\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -595,6 +595,18 @@ describe('codegen', () => {\n     expect(res.render).toBe(generatedCode)\n   })\n \n+  \/\/ #8041\n+  it('does not squash templates inside v-pre', () => {\n+    const template = '<div v-pre><template><p>{{msg}}<\/p><\/template><\/div>'\n+    const generatedCode = `with(this){return _m(0)}`\n+    const renderFn = `with(this){return _c('div',{pre:true},[_c('template',[_c('p',[_v(\"{{msg}}\")])])],2)}`\n+    const ast = parse(template, baseOptions)\n+    optimize(ast, baseOptions)\n+    const res = generate(ast, baseOptions)\n+    expect(res.render).toBe(generatedCode)\n+    expect(res.staticRenderFns).toEqual([renderFn])\n+  })\n+\n   it('not specified ast type', () => {\n     const res = generate(null, baseOptions)\n     expect(res.render).toBe(`with(this){return _c(\"div\")}`)\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -250,6 +250,15 @@ describe('parser', () => {\n     expect(ast.children[0].children[0].text).toBe('{{msg}}')\n   })\n \n+  it('v-pre directive should leave template in DOM', () => {\n+    const ast = parse('<div v-pre id=\"message1\"><template id=\"template1\"><p>{{msg}}<\/p><\/template><\/div>', baseOptions)\n+    expect(ast.pre).toBe(true)\n+    expect(ast.attrs[0].name).toBe('id')\n+    expect(ast.attrs[0].value).toBe('\"message1\"')\n+    expect(ast.children[0].attrs[0].name).toBe('id')\n+    expect(ast.children[0].attrs[0].value).toBe('\"template1\"')\n+  })\n+\n   it('v-for directive basic syntax', () => {\n     const ast = parse('<ul><li v-for=\"item in items\"><\/li><\/ul>', baseOptions)\n     const liAst = ast.children[0]\n\n\n###\n\n","completion":" fix(compiler): templates inside v-pre should be rendered to HTML (#<issue-num>)\n"}
{"prompt":" file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -512,7 +512,7 @@ describe('parser', () => {\n \n   it('empty v-bind expression', () => {\n     parse('<div :empty-msg=\"\"><\/div>', baseOptions)\n-    expect('The value for a v-bind expression cannot be empty. Found in \"empty-msg\"').toHaveBeenWarned()\n+    expect('The value for a v-bind expression cannot be empty. Found in \"v-bind:empty-msg\"').toHaveBeenWarned()\n   })\n \n   \/\/ #6887\n\n\n###\n\n","completion":" test: fix assertion\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -26,7 +26,7 @@ export class CodegenState {\n     this.dataGenFns = pluckModuleFunction(options.modules, 'genData')\n     this.directives = extend(extend({}, baseDirectives), options.directives)\n     const isReservedTag = options.isReservedTag || no\n-    this.maybeComponent = (el: ASTElement) => !isReservedTag(el.tag)\n+    this.maybeComponent = (el: ASTElement) => !(isReservedTag(el.tag) && !el.component)\n     this.onceId = 0\n     this.staticRenderFns = []\n   }\n\n---\n file path A: test\/unit\/modules\/compiler\/codegen.spec.js | file path B: test\/unit\/modules\/compiler\/codegen.spec.js\n\n@@ -524,6 +524,11 @@ describe('codegen', () => {\n       '<div :is=\"component1\"><\/div>',\n       `with(this){return _c(component1,{tag:\"div\"})}`\n     )\n+    \/\/ maybe a component and normalize type should be 1\n+    assertCodegen(\n+      '<div><div is=\"component1\"><\/div><\/div>',\n+      `with(this){return _c('div',[_c(\"component1\",{tag:\"div\"})],1)}`\n+    )\n   })\n \n   it('generate component with inline-template', () => {\n\n\n###\n\n","completion":" fix(compiler): maybeComponent should return true when \"is\" attribute exists (#<issue-num>)\n"}
{"prompt":" file path A: scripts\/config.js | file path B: scripts\/config.js\n\n@@ -10,8 +10,8 @@ const weexVersion = process.env.WEEX_VERSION || require('..\/packages\/weex-vue-fr\n \n const banner =\n   '\/*!\\n' +\n-  ' * Vue.js v' + version + '\\n' +\n-  ' * (c) 2014-' + new Date().getFullYear() + ' Evan You\\n' +\n+  ` * Vue.js v${version}\\n` +\n+  ` * (c) 2014-${new Date().getFullYear()} Evan You\\n` +\n   ' * Released under the MIT License.\\n' +\n   ' *\/'\n \n\n\n###\n\n","completion":" chore: use template strings in config.js (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -21,7 +21,7 @@ import {\n \n export const onRE = \/^@|^v-on:\/\n export const dirRE = \/^v-|^@|^:\/\n-export const forAliasRE = \/([^]*?)\\s+(?:in|of)\\s+([^]*)\/\n+export const forAliasRE = \/([\\s\\S]*?)\\s+(?:in|of)\\s+([\\s\\S]*)\/\n export const forIteratorRE = \/,([^,\\}\\]]*)(?:,([^,\\}\\]]*))?$\/\n const stripParensRE = \/^\\(|\\)$\/g\n \n\n\n###\n\n","completion":" fix(for): use IE compatible regex in v-for regex (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -528,6 +528,14 @@ function processAttrs (el) {\n         name = name.replace(bindRE, '')\n         value = parseFilters(value)\n         isProp = false\n+        if (\n+          process.env.NODE_ENV !== 'production' &&\n+          value.trim().length === 0\n+        ) {\n+          warn(\n+            `The value for a v-bind expression cannot be empty. Found in \"v-bind:${name}\"`\n+          )\n+        }\n         if (modifiers) {\n           if (modifiers.prop) {\n             isProp = true\n\n---\n file path A: test\/unit\/modules\/compiler\/parser.spec.js | file path B: test\/unit\/modules\/compiler\/parser.spec.js\n\n@@ -510,6 +510,11 @@ describe('parser', () => {\n     expect(ast.props[0].value).toBe('msg')\n   })\n \n+  it('empty v-bind expression', () => {\n+    parse('<div :empty-msg=\"\"><\/div>', baseOptions)\n+    expect('The value for a v-bind expression cannot be empty. Found in \"empty-msg\"').toHaveBeenWarned()\n+  })\n+\n   \/\/ #6887\n   it('special case static attribute that must be props', () => {\n     const ast = parse('<video muted><\/video>', baseOptions)\n\n\n###\n\n","completion":" refactor: add empty v-bind warning(re #7973) (#<issue-num>)\n"}
{"prompt":" file path A: src\/shared\/util.js | file path B: src\/shared\/util.js\n\n@@ -286,6 +286,8 @@ export function looseEqual (a: any, b: any): boolean {\n         return a.length === b.length && a.every((e, i) => {\n           return looseEqual(e, b[i])\n         })\n+      } else if (a instanceof Date && b instanceof Date) {\n+        return a.getTime() === b.getTime()\n       } else if (!isArrayA && !isArrayB) {\n         const keysA = Object.keys(a)\n         const keysB = Object.keys(b)\n\n---\n file path A: test\/unit\/features\/directives\/model-select.spec.js | file path B: test\/unit\/features\/directives\/model-select.spec.js\n\n@@ -588,4 +588,31 @@ describe('Directive v-model select', () => {\n       }).then(done)\n     })\n   })\n+\n+  \/\/ #7928\n+  it('should correctly handle option with date value', done => {\n+    const vm = new Vue({\n+      data: {\n+        dates: [\n+          new Date(1520000000000),\n+          new Date(1522000000000),\n+          new Date(1516000000000)\n+        ],\n+        selectedDate: null\n+      },\n+      template:\n+        '<div>' +\n+          '<select v-model=\"selectedDate\">' +\n+            '<option v-for=\"(date, i) in dates\" :key=\"i\" :value=\"date\">' +\n+              '{{date}}' +\n+            '<\/option>' +\n+          '<\/select>' +\n+        '<\/div>'\n+    }).$mount()\n+\n+    vm.selectedDate = vm.dates[2]\n+    waitForUpdate(() => {\n+      expect(vm.$el.firstChild.selectedIndex).toBe(2)\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix(shared): check dates in looseEqual (#<issue-num>)\n"}
{"prompt":" file path A: test\/ssr\/compile-with-webpack.js | file path B: test\/ssr\/compile-with-webpack.js\n\n@@ -4,6 +4,7 @@ import MemoryFS from 'memory-fs'\n \n export function compileWithWebpack (file, extraConfig, cb) {\n   const config = Object.assign({\n+    mode: 'development',\n     entry: path.resolve(__dirname, 'fixtures', file),\n     module: {\n       rules: [\n\n---\n file path A: test\/ssr\/ssr-template.spec.js | file path B: test\/ssr\/ssr-template.spec.js\n\n@@ -1,4 +1,3 @@\n-import webpack from 'webpack'\n import Vue from '..\/..\/dist\/vue.runtime.common.js'\n import { compileWithWebpack } from '.\/compile-with-webpack'\n import { createRenderer } from '..\/..\/packages\/vue-server-renderer'\n@@ -14,11 +13,12 @@ function generateClientManifest (file, cb) {\n       path: '\/',\n       filename: '[name].js'\n     },\n+    optimization: {\n+      runtimeChunk: {\n+        name: 'manifest'\n+      }\n+    },\n     plugins: [\n-      new webpack.optimize.CommonsChunkPlugin({\n-        name: 'manifest',\n-        minChunks: Infinity\n-      }),\n       new VueSSRClientPlugin()\n     ]\n   }, fs => {\n@@ -227,8 +227,8 @@ describe('SSR: template option', () => {\n       `<link rel=\"preload\" href=\"\/0.js\" as=\"script\">` +\n       `<link rel=\"preload\" href=\"\/test.css\" as=\"style\">` +\n       \/\/ images and fonts are only preloaded when explicitly asked for\n-      (options.preloadOtherAssets ? `<link rel=\"preload\" href=\"\/test.woff2\" as=\"font\" type=\"font\/woff2\" crossorigin>` : ``) +\n       (options.preloadOtherAssets ? `<link rel=\"preload\" href=\"\/test.png\" as=\"image\">` : ``) +\n+      (options.preloadOtherAssets ? `<link rel=\"preload\" href=\"\/test.woff2\" as=\"font\" type=\"font\/woff2\" crossorigin>` : ``) +\n       \/\/ unused chunks should have prefetch\n       (options.noPrefetch ? `` : `<link rel=\"prefetch\" href=\"\/1.js\">`) +\n       \/\/ css assets should be loaded\n\n\n###\n\n","completion":" test: fix ssr tests\n"}
{"prompt":" file path A: src\/sfc\/parser.js | file path B: src\/sfc\/parser.js\n\n@@ -83,11 +83,15 @@ export function parseComponent (\n   function end (tag: string, start: number) {\n     if (depth === 1 && currentBlock) {\n       currentBlock.end = start\n-      let text = deindent(content.slice(currentBlock.start, currentBlock.end))\n+      let text = content.slice(currentBlock.start, currentBlock.end)\n       \/\/ pad content so that linters and pre-processors can output correct\n       \/\/ line numbers in errors and warnings\n-      if (currentBlock.type !== 'template' && options.pad) {\n+      if (options.pad) {\n         text = padContent(currentBlock, options.pad) + text\n+      } else {\n+        \/\/ avoid to deindent if pad option is specified\n+        \/\/ to retain original source position.\n+        text = deindent(text)\n       }\n       currentBlock.content = text\n       currentBlock = null\n\n---\n file path A: test\/unit\/modules\/sfc\/sfc-parser.spec.js | file path B: test\/unit\/modules\/sfc\/sfc-parser.spec.js\n\n@@ -71,21 +71,42 @@ describe('Single File Component parser', () => {\n     const padLine = parseComponent(content.trim(), { pad: 'line' })\n     const padSpace = parseComponent(content.trim(), { pad: 'space' })\n \n-    expect(padDefault.script.content).toBe(Array(3 + 1).join('\/\/\\n') + '\\nexport default {}\\n')\n-    expect(padDefault.styles[0].content).toBe(Array(6 + 1).join('\\n') + '\\nh1 { color: red }\\n')\n-    expect(padLine.script.content).toBe(Array(3 + 1).join('\/\/\\n') + '\\nexport default {}\\n')\n-    expect(padLine.styles[0].content).toBe(Array(6 + 1).join('\\n') + '\\nh1 { color: red }\\n')\n+    expect(padDefault.template.content).toBe(Array(1).join('\\n') + `\n+        <div><\/div>\n+      `)\n+    expect(padDefault.script.content).toBe(Array(3 + 1).join('\/\/\\n') + `\n+        export default {}\n+      `)\n+    expect(padDefault.styles[0].content).toBe(Array(6 + 1).join('\\n') + `\n+        h1 { color: red }\n+      `)\n+    expect(padLine.template.content).toBe(Array(1).join('\\n') + `\n+        <div><\/div>\n+      `)\n+    expect(padLine.script.content).toBe(Array(3 + 1).join('\/\/\\n') + `\n+        export default {}\n+      `)\n+    expect(padLine.styles[0].content).toBe(Array(6 + 1).join('\\n') + `\n+        h1 { color: red }\n+      `)\n+    expect(padSpace.template.content).toBe(`<template>`.replace(\/.\/g, ' ') + `\n+        <div><\/div>\n+      `)\n     expect(padSpace.script.content).toBe(`<template>\n         <div><\/div>\n       <\/template>\n-      <script>`.replace(\/.\/g, ' ') + '\\nexport default {}\\n')\n+      <script>`.replace(\/.\/g, ' ') + `\n+        export default {}\n+      `)\n     expect(padSpace.styles[0].content).toBe(`<template>\n         <div><\/div>\n       <\/template>\n       <script>\n         export default {}\n       <\/script>\n-      <style>`.replace(\/.\/g, ' ') + '\\nh1 { color: red }\\n')\n+      <style>`.replace(\/.\/g, ' ') + `\n+        h1 { color: red }\n+      `)\n   })\n \n   it('should handle template blocks with lang as special text', () => {\n\n\n###\n\n","completion":" fix(sfc): avoid deindent when pad option is specified (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -138,7 +138,7 @@\n     \"serialize-javascript\": \"^1.3.0\",\n     \"shelljs\": \"^0.8.1\",\n     \"typescript\": \"^3.1.3\",\n-    \"uglify-js\": \"^3.0.15\",\n+    \"terser\": \"^3.10.2\",\n     \"webpack\": \"^4.22.0\",\n     \"weex-js-runtime\": \"^0.23.6\",\n     \"weex-styler\": \"^0.3.0\",\n\n---\n file path A: scripts\/build.js | file path B: scripts\/build.js\n\n@@ -2,7 +2,7 @@ const fs = require('fs')\n const path = require('path')\n const zlib = require('zlib')\n const rollup = require('rollup')\n-const uglify = require('uglify-js')\n+const terser = require('terser')\n \n if (!fs.existsSync('dist')) {\n   fs.mkdirSync('dist')\n@@ -48,7 +48,7 @@ function buildEntry (config) {\n     .then(bundle => bundle.generate(output))\n     .then(({ code }) => {\n       if (isProd) {\n-        var minified = (banner ? banner + '\\n' : '') + uglify.minify(code, {\n+        var minified = (banner ? banner + '\\n' : '') + terser.minify(code, {\n           output: {\n             ascii_only: true\n           },\n\n---\n file path A: yarn.lock | file path B: yarn.lock\n\n@@ -7562,7 +7562,7 @@ source-map-resolve@^0.5.0, source-map-resolve@^0.5.2:\n     source-map-url \"^0.4.0\"\n     urix \"^0.1.0\"\n \n-source-map-support@^0.5.9:\n+source-map-support@^0.5.9, source-map-support@~0.5.6:\n   version \"0.5.9\"\n   resolved \"https:\/\/registry.yarnpkg.com\/source-map-support\/-\/source-map-support-0.5.9.tgz#41bc953b2534267ea2d605bccfa7bfa3111ced5f\"\n   integrity sha512-gR6Rw4MvUlYy83vP0vxoVNzM6t8MUXqNuRsuBmBHQDu1Fh6X015FrLdgoDKcNdkwGubozq0P4N0Q37UyFVr1EA==\n@@ -7914,6 +7914,15 @@ tar@^4:\n     safe-buffer \"^5.1.2\"\n     yallist \"^3.0.2\"\n \n+terser@^3.10.2:\n+  version \"3.10.2\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/terser\/-\/terser-3.10.2.tgz#a61d2c97065f9fdc8c49a18655e2a80ca7298a94\"\n+  integrity sha512-+QrFoqBImmsQGB4c\/HvaqgZynmbNvNBwoBxuu7fYXtq5EEtlLUzph+WimDj+xMkuqawXPMl2lgCIz81CdXvt+w==\n+  dependencies:\n+    commander \"~2.17.1\"\n+    source-map \"~0.6.1\"\n+    source-map-support \"~0.5.6\"\n+\n test-exclude@^5.0.0:\n   version \"5.0.0\"\n   resolved \"https:\/\/registry.yarnpkg.com\/test-exclude\/-\/test-exclude-5.0.0.tgz#cdce7cece785e0e829cd5c2b27baf18bc583cfb7\"\n@@ -8123,7 +8132,7 @@ uglify-es@^3.3.4:\n     commander \"~2.13.0\"\n     source-map \"~0.6.1\"\n \n-uglify-js@^3.0.15, uglify-js@^3.1.4:\n+uglify-js@^3.1.4:\n   version \"3.4.9\"\n   resolved \"https:\/\/registry.yarnpkg.com\/uglify-js\/-\/uglify-js-3.4.9.tgz#af02f180c1207d76432e473ed24a28f4a782bae3\"\n   integrity sha512-8CJsbKOtEbnJsTyv6LE6m6ZKniqMiFWmm9sRbopbkGs3gMPPfd3Fh8iIA4Ykv5MgaTbqHr4BaoGLJLZNhsrW1Q==\n\n\n###\n\n","completion":" build: use terser instead of uglify\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -137,7 +137,7 @@\n     \"selenium-server\": \"^2.53.1\",\n     \"serialize-javascript\": \"^1.3.0\",\n     \"shelljs\": \"^0.8.1\",\n-    \"typescript\": \"^2.7.1\",\n+    \"typescript\": \"^3.1.3\",\n     \"uglify-js\": \"^3.0.15\",\n     \"webpack\": \"^4.22.0\",\n     \"weex-js-runtime\": \"^0.23.6\",\n\n---\n file path A: yarn.lock | file path B: yarn.lock\n\n@@ -8110,10 +8110,10 @@ typedarray@^0.0.6:\n   resolved \"https:\/\/registry.yarnpkg.com\/typedarray\/-\/typedarray-0.0.6.tgz#867ac74e3864187b1d3d47d996a78ec5c8830777\"\n   integrity sha1-hnrHTjhkGHsdPUfZlqeOxciDB3c=\n \n-typescript@^2.7.1:\n-  version \"2.9.2\"\n-  resolved \"https:\/\/registry.yarnpkg.com\/typescript\/-\/typescript-2.9.2.tgz#1cbf61d05d6b96269244eb6a3bce4bd914e0f00c\"\n-  integrity sha512-Gr4p6nFNaoufRIY4NMdpQRNmgxVIGMs4Fcu\/ujdYk3nAZqk7supzBE9idmvfZIlH\/Cuj\/\/dvi+019qEue9lV0w==\n+typescript@^3.1.3:\n+  version \"3.1.3\"\n+  resolved \"https:\/\/registry.yarnpkg.com\/typescript\/-\/typescript-3.1.3.tgz#01b70247a6d3c2467f70c45795ef5ea18ce191d5\"\n+  integrity sha512-+81MUSyX+BaSo+u2RbozuQk\/UWx6hfG0a5gHu4ANEM4sU96XbuIyAB+rWBW1u70c6a5QuZfuYICn3s2UjuHUpA==\n \n uglify-es@^3.3.4:\n   version \"3.3.9\"\n\n\n###\n\n","completion":" build: upgrade typescript\n"}
{"prompt":" file path A: .eslintrc | file path B: .eslintrc.json\n\n\n\n###\n\n","completion":" chore: add extension to .eslintrc (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/class-util.js | file path B: src\/platforms\/web\/runtime\/class-util.js\n\n@@ -1,5 +1,7 @@\n \/* @flow *\/\n \n+const whitespaceRE = \/\\s+\/\n+\n \/**\n  * Add class with compatibility for SVG since classList is not supported on\n  * SVG elements in IE\n@@ -13,7 +15,7 @@ export function addClass (el: HTMLElement, cls: ?string) {\n   \/* istanbul ignore else *\/\n   if (el.classList) {\n     if (cls.indexOf(' ') > -1) {\n-      cls.split(\/\\s+\/).forEach(c => el.classList.add(c))\n+      cls.split(whitespaceRE).forEach(c => el.classList.add(c))\n     } else {\n       el.classList.add(cls)\n     }\n@@ -38,7 +40,7 @@ export function removeClass (el: HTMLElement, cls: ?string) {\n   \/* istanbul ignore else *\/\n   if (el.classList) {\n     if (cls.indexOf(' ') > -1) {\n-      cls.split(\/\\s+\/).forEach(c => el.classList.remove(c))\n+      cls.split(whitespaceRE).forEach(c => el.classList.remove(c))\n     } else {\n       el.classList.remove(cls)\n     }\n\n\n###\n\n","completion":" refactor(class-util): cache whitespace regex (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/watcher.js | file path B: src\/core\/observer\/watcher.js\n\n@@ -6,7 +6,8 @@ import {\n   isObject,\n   parsePath,\n   _Set as Set,\n-  handleError\n+  handleError,\n+  noop\n } from '..\/util\/index'\n \n import { traverse } from '.\/traverse'\n@@ -80,7 +81,7 @@ export default class Watcher {\n     } else {\n       this.getter = parsePath(expOrFn)\n       if (!this.getter) {\n-        this.getter = function () {}\n+        this.getter = noop\n         process.env.NODE_ENV !== 'production' && warn(\n           `Failed watching path: \"${expOrFn}\" ` +\n           'Watcher only accepts simple dot-delimited paths. ' +\n\n---\n file path A: src\/platforms\/weex\/util\/element.js | file path B: src\/platforms\/weex\/util\/element.js\n\n@@ -4,7 +4,7 @@\n \/\/ makeMap() due to potential side effects, so these variables end up\n \/\/ bloating the web builds.\n \n-import { makeMap } from 'shared\/util'\n+import { makeMap, noop } from 'shared\/util'\n \n export const isReservedTag = makeMap(\n   'template,script,style,element,content,slot,link,meta,svg,view,' +\n@@ -46,7 +46,7 @@ export function isUnknownElement (tag?: string): boolean {\n export function query (el: string | Element, document: Object) {\n   \/\/ document is injected by weex factory wrapper\n   const placeholder = document.createComment('root')\n-  placeholder.hasAttribute = placeholder.removeAttribute = function () {} \/\/ hack for patch\n+  placeholder.hasAttribute = placeholder.removeAttribute = noop \/\/ hack for patch\n   document.documentElement.appendChild(placeholder)\n   return placeholder\n }\n\n\n###\n\n","completion":" refactor: empty function replace to noop (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/index.js | file path B: src\/compiler\/codegen\/index.js\n\n@@ -435,7 +435,7 @@ function needsNormalization (el: ASTElement): boolean {\n function genNode (node: ASTNode, state: CodegenState): string {\n   if (node.type === 1) {\n     return genElement(node, state)\n-  } if (node.type === 3 && node.isComment) {\n+  } else if (node.type === 3 && node.isComment) {\n     return genComment(node)\n   } else {\n     return genText(node)\n\n\n###\n\n","completion":" refactor: add missing else in genNode (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/runtime\/components\/transition.js | file path B: src\/platforms\/web\/runtime\/components\/transition.js\n\n@@ -76,6 +76,10 @@ function isSameChild (child: VNode, oldChild: VNode): boolean {\n   return oldChild.key === child.key && oldChild.tag === child.tag\n }\n \n+const isNotTextNode = (c: VNode) => c.tag || isAsyncPlaceholder(c)\n+\n+const isVShowDirective = d => d.name === 'show'\n+\n export default {\n   name: 'transition',\n   props: transitionProps,\n@@ -88,7 +92,7 @@ export default {\n     }\n \n     \/\/ filter out text nodes (possible whitespaces)\n-    children = children.filter((c: VNode) => c.tag || isAsyncPlaceholder(c))\n+    children = children.filter(isNotTextNode)\n     \/* istanbul ignore if *\/\n     if (!children.length) {\n       return\n@@ -153,7 +157,7 @@ export default {\n \n     \/\/ mark v-show\n     \/\/ so that the transition module can hand over the control to the directive\n-    if (child.data.directives && child.data.directives.some(d => d.name === 'show')) {\n+    if (child.data.directives && child.data.directives.some(isVShowDirective)) {\n       child.data.show = true\n     }\n \n\n\n###\n\n","completion":" refactor(transition): replace nested closure with static ones (#<issue-num>)\n"}
{"prompt":" file path A: src\/shared\/util.js | file path B: src\/shared\/util.js\n\n@@ -2,8 +2,8 @@\n \n export const emptyObject = Object.freeze({})\n \n-\/\/ these helpers produces better vm code in JS engines due to their\n-\/\/ explicitness and function inlining\n+\/\/ These helpers produce better VM code in JS engines due to their\n+\/\/ explicitness and function inlining.\n export function isUndef (v: any): boolean %checks {\n   return v === undefined || v === null\n }\n@@ -21,7 +21,7 @@ export function isFalse (v: any): boolean %checks {\n }\n \n \/**\n- * Check if value is primitive\n+ * Check if value is primitive.\n  *\/\n export function isPrimitive (value: any): boolean %checks {\n   return (\n@@ -43,7 +43,7 @@ export function isObject (obj: mixed): boolean %checks {\n }\n \n \/**\n- * Get the raw type string of a value e.g. [object Object]\n+ * Get the raw type string of a value, e.g., [object Object].\n  *\/\n const _toString = Object.prototype.toString\n \n@@ -83,7 +83,7 @@ export function toString (val: any): string {\n }\n \n \/**\n- * Convert a input value to a number for persistence.\n+ * Convert an input value to a number for persistence.\n  * If the conversion fails, return original string.\n  *\/\n export function toNumber (val: string): number | string {\n@@ -115,12 +115,12 @@ export function makeMap (\n export const isBuiltInTag = makeMap('slot,component', true)\n \n \/**\n- * Check if a attribute is a reserved attribute.\n+ * Check if an attribute is a reserved attribute.\n  *\/\n export const isReservedAttribute = makeMap('key,ref,slot,slot-scope,is')\n \n \/**\n- * Remove an item from an array\n+ * Remove an item from an array.\n  *\/\n export function remove (arr: Array<any>, item: any): Array<any> | void {\n   if (arr.length) {\n@@ -132,7 +132,7 @@ export function remove (arr: Array<any>, item: any): Array<any> | void {\n }\n \n \/**\n- * Check whether the object has the property.\n+ * Check whether an object has the property.\n  *\/\n const hasOwnProperty = Object.prototype.hasOwnProperty\n export function hasOwn (obj: Object | Array<*>, key: string): boolean {\n@@ -174,11 +174,11 @@ export const hyphenate = cached((str: string): string => {\n })\n \n \/**\n- * Simple bind polyfill for environments that do not support it... e.g.\n- * PhantomJS 1.x. Technically we don't need this anymore since native bind is\n- * now more performant in most browsers, but removing it would be breaking for\n- * code that was able to run in PhantomJS 1.x, so this must be kept for\n- * backwards compatibility.\n+ * Simple bind polyfill for environments that do not support it,\n+ * e.g., PhantomJS 1.x. Technically, we don't need this anymore\n+ * since native bind is now performant enough in most browsers.\n+ * But removing it would mean breaking code that was able to run in\n+ * PhantomJS 1.x, so this must be kept for backward compatibility.\n  *\/\n \n \/* istanbul ignore next *\/\n@@ -243,7 +243,7 @@ export function toObject (arr: Array<any>): Object {\n \/**\n  * Perform no operation.\n  * Stubbing args to make Flow happy without leaving useless transpiled code\n- * with ...rest (https:\/\/flow.org\/blog\/2017\/05\/07\/Strict-Function-Call-Arity\/)\n+ * with ...rest (https:\/\/flow.org\/blog\/2017\/05\/07\/Strict-Function-Call-Arity\/).\n  *\/\n export function noop (a?: any, b?: any, c?: any) {}\n \n@@ -253,12 +253,12 @@ export function noop (a?: any, b?: any, c?: any) {}\n export const no = (a?: any, b?: any, c?: any) => false\n \n \/**\n- * Return same value\n+ * Return the same value.\n  *\/\n export const identity = (_: any) => _\n \n \/**\n- * Generate a static keys string from compiler modules.\n+ * Generate a string containing static keys from compiler modules.\n  *\/\n export function genStaticKeys (modules: Array<ModuleOptions>): string {\n   return modules.reduce((keys, m) => {\n@@ -303,6 +303,11 @@ export function looseEqual (a: any, b: any): boolean {\n   }\n }\n \n+\/**\n+ * Return the first index at which a loosely equal value can be\n+ * found in the array (if value is a plain object, the array must\n+ * contain an object of the same shape), or -1 if it is not present.\n+ *\/\n export function looseIndexOf (arr: Array<mixed>, val: mixed): number {\n   for (let i = 0; i < arr.length; i++) {\n     if (looseEqual(arr[i], val)) return i\n\n\n###\n\n","completion":" refactor(shared-utils): Improve readability and consistency in code comments (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/events.js | file path B: src\/core\/instance\/events.js\n\n@@ -49,7 +49,7 @@ export function eventsMixin (Vue: Class<Component>) {\n     const vm: Component = this\n     if (Array.isArray(event)) {\n       for (let i = 0, l = event.length; i < l; i++) {\n-        this.$on(event[i], fn)\n+        vm.$on(event[i], fn)\n       }\n     } else {\n       (vm._events[event] || (vm._events[event] = [])).push(fn)\n@@ -83,7 +83,7 @@ export function eventsMixin (Vue: Class<Component>) {\n     \/\/ array of events\n     if (Array.isArray(event)) {\n       for (let i = 0, l = event.length; i < l; i++) {\n-        this.$off(event[i], fn)\n+        vm.$off(event[i], fn)\n       }\n       return vm\n     }\n\n\n###\n\n","completion":" chore: update reference to already defined variable (#<issue-num>)\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -13,7 +13,7 @@\n \n <h2 align=\"center\">Supporting Vue.js<\/h2>\n \n-Vue.js is an MIT-licensed open source project. It's an independent project with its ongoing development made possible entirely thanks to the support by these awesome [backers](https:\/\/github.com\/vuejs\/vue\/blob\/dev\/BACKERS.md). If you'd like to join them, please consider:\n+Vue.js is an MIT-licensed open source project with its ongoing development made possible entirely by the support of these awesome [backers](https:\/\/github.com\/vuejs\/vue\/blob\/dev\/BACKERS.md). If you'd like to join them, please consider:\n \n - [Become a backer or sponsor on Patreon](https:\/\/www.patreon.com\/evanyou).\n - [Become a backer or sponsor on Open Collective](https:\/\/opencollective.com\/vuejs).\n\n\n###\n\n","completion":" chore: tweak description (#<issue-num>)\n"}
{"prompt":" file path A: .circleci\/config.yml | file path B: .circleci\/config.yml\n\n@@ -3,7 +3,7 @@ version: 2\n defaults: &defaults\n   working_directory: ~\/project\/vue\n   docker:\n-    - image: circleci\/node:6-browsers\n+    - image: vuejs\/ci\n \n jobs:\n   install:\n\n\n###\n\n","completion":" ci: use customized ci image\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -160,9 +160,13 @@ export interface WatchOptionsWithHandler<T> extends WatchOptions {\n   handler: WatchHandler<T>;\n }\n \n+export interface DirectiveBinding extends Readonly<VNodeDirective> {\n+  readonly modifiers: { [key: string]: boolean };\n+}\n+\n export type DirectiveFunction = (\n   el: HTMLElement,\n-  binding: VNodeDirective,\n+  binding: DirectiveBinding,\n   vnode: VNode,\n   oldVnode: VNode\n ) => void;\n\n---\n file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -154,6 +154,10 @@ Vue.component('component', {\n       props: {\n         myProp: \"bar\"\n       },\n+      directives: [{\n+        name: 'a',\n+        value: 'foo'\n+      }],\n       domProps: {\n         innerHTML: \"baz\"\n       },\n\n---\n file path A: types\/vnode.d.ts | file path B: types\/vnode.d.ts\n\n@@ -58,10 +58,10 @@ export interface VNodeData {\n }\n \n export interface VNodeDirective {\n-  readonly name: string;\n-  readonly value: any;\n-  readonly oldValue: any;\n-  readonly expression: any;\n-  readonly arg: string;\n-  readonly modifiers: { [key: string]: boolean };\n+  name: string;\n+  value?: any;\n+  oldValue?: any;\n+  expression?: any;\n+  arg?: string;\n+  modifiers?: { [key: string]: boolean };\n }\n\n\n###\n\n","completion":" fix(types): make VNodeDirective properties optional, fix #8013 (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/webpack-plugin\/client.js | file path B: src\/server\/webpack-plugin\/client.js\n\n@@ -54,12 +54,6 @@ export default class VueSSRClientPlugin {\n         }\n       })\n \n-      \/\/ const debug = (file, obj) => {\n-      \/\/   require('fs').writeFileSync(__dirname + '\/' + file, JSON.stringify(obj, null, 2))\n-      \/\/ }\n-      \/\/ debug('stats.json', stats)\n-      \/\/ debug('client-manifest.json', manifest)\n-\n       const json = JSON.stringify(manifest, null, 2)\n       compilation.assets[this.options.filename] = {\n         source: () => json,\n\n\n###\n\n","completion":" chore: remove useless code (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/index.js | file path B: src\/core\/observer\/index.js\n\n@@ -179,6 +179,8 @@ export function defineReactive (\n       if (process.env.NODE_ENV !== 'production' && customSetter) {\n         customSetter()\n       }\n+      \/\/ #7981: for accessor properties without setter\n+      if (getter && !setter) return\n       if (setter) {\n         setter.call(obj, newVal)\n       } else {\n\n\n###\n\n","completion":" refactor: set should return early if original def has getter but no setter (#<issue-num>)\n"}
{"prompt":" file path A: examples\/firebase\/index.html | file path B: examples\/firebase\/index.html\n\n@@ -21,8 +21,8 @@\n         <\/li>\n       <\/ul>\n       <form id=\"form\" v-on:submit.prevent=\"addUser\">\n-        <input v-model=\"newUser.name\">\n-        <input v-model=\"newUser.email\">\n+        <input v-model=\"newUser.name\" placeholder=\"Add Name\">\n+        <input v-model=\"newUser.email\" placeholder=\"Add Email\">\n         <input type=\"submit\" value=\"Add User\">\n       <\/form>\n       <ul class=\"errors\">\n\n\n###\n\n","completion":" chore: add placeholder to firebase example (#<issue-num>)\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -8,7 +8,7 @@\n   <a href=\"https:\/\/www.npmjs.com\/package\/vue\"><img src=\"https:\/\/img.shields.io\/npm\/l\/vue.svg\" alt=\"License\"><\/a>\n   <a href=\"https:\/\/chat.vuejs.org\/\"><img src=\"https:\/\/img.shields.io\/badge\/chat-on%20discord-7289da.svg\" alt=\"Chat\"><\/a>\n   <br>\n-  <a href=\"https:\/\/saucelabs.com\/u\/vuejs\"><img src=\"https:\/\/saucelabs.com\/browser-matrix\/vuejs.svg\" alt=\"Sauce Test Status\"><\/a>\n+  <a href=\"https:\/\/app.saucelabs.com\/builds\/50f8372d79f743a3b25fb6ca4851ca4c\"><img src=\"https:\/\/app.saucelabs.com\/buildstatus\/vuejs\" alt=\"Build Status\"><\/a>\n <\/p>\n \n <h2 align=\"center\">Supporting Vue.js<\/h2>\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/codexyz.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n\n\n###\n\n","completion":" chore: update suacelabs link\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -1,7 +1,7 @@\n <p align=\"center\"><a href=\"https:\/\/vuejs.org\" target=\"_blank\" rel=\"noopener noreferrer\"><img width=\"100\" src=\"https:\/\/vuejs.org\/images\/logo.png\" alt=\"Vue logo\"><\/a><\/p>\n \n <p align=\"center\">\n-  <a href=\"https:\/\/circleci.com\/gh\/vuejs\/vue\/tree\/dev\"><img src=\"https:\/\/img.shields.io\/circleci\/project\/vuejs\/vue\/dev.svg\" alt=\"Build Status\"><\/a>\n+  <a href=\"https:\/\/circleci.com\/gh\/vuejs\/vue\/tree\/dev\"><img src=\"https:\/\/img.shields.io\/circleci\/project\/github\/vuejs\/vue\/dev.svg\" alt=\"Build Status\"><\/a>\n   <a href=\"https:\/\/codecov.io\/github\/vuejs\/vue?branch=dev\"><img src=\"https:\/\/img.shields.io\/codecov\/c\/github\/vuejs\/vue\/dev.svg\" alt=\"Coverage Status\"><\/a>\n   <a href=\"https:\/\/npmcharts.com\/compare\/vue?minimal=true\"><img src=\"https:\/\/img.shields.io\/npm\/dm\/vue.svg\" alt=\"Downloads\"><\/a>\n   <a href=\"https:\/\/www.npmjs.com\/package\/vue\"><img src=\"https:\/\/img.shields.io\/npm\/v\/vue.svg\" alt=\"Version\"><\/a>\n\n\n###\n\n","completion":" chore(readme): correct badge link (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -194,6 +194,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/issue.sh\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/issue-sh.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -219,6 +219,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/issue.sh\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/issue-sh.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/codexyz.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -189,6 +189,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/kintohub.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/opteo.com\/vue\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/codexyz.png\">\n   <\/a>\n <\/p>\n-\n+  \n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n@@ -214,6 +214,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/kintohub.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/opteo.com\/vue\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/opteo.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -179,6 +179,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webdock.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/syncfusion.com\/products\/vue\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/syncfusion.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -186,6 +186,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webdock.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/syncfusion.com\/products\/vue\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/syncfusion.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -170,6 +170,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.pubnub.com\/vue-js\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pubnub.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -177,6 +177,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.pubnub.com\/vue-js\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pubnub.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n---\n file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -164,6 +164,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/valuecoders.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.nsoft.com\/careers\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nsoft.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -171,6 +171,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/valuecoders.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/www.nsoft.com\/careers\/\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nsoft.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -54,6 +54,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vueschool.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/vehikl.com\/\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vehikl.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -66,6 +66,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vueschool.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/vehikl.com\/\" target=\"_blank\">\n+          <img width=\"222px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vehikl.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: new sponsor\n"}
{"prompt":" file path A: README.md | file path B: README.md\n\n@@ -290,7 +290,7 @@ To check out [live examples](https:\/\/vuejs.org\/v2\/examples\/) and docs, visit [vu\n \n ## Questions\n \n-For questions and support please use the [the official forum](http:\/\/forum.vuejs.org) or [community chat](https:\/\/chat.vuejs.org\/). The issue list of this repo is **exclusively** for bug reports and feature requests.\n+For questions and support please use [the official forum](http:\/\/forum.vuejs.org) or [community chat](https:\/\/chat.vuejs.org\/). The issue list of this repo is **exclusively** for bug reports and feature requests.\n \n ## Issues\n \n\n\n###\n\n","completion":" docs(readme): grammar fix, extra 'the' (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,7 +21,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/codexyz.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h2 align=\"center\">Platinum via Patreon<\/h2>\n@@ -226,6 +226,12 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n <\/table>\n <!--silver end-->\n \n+<h4 align=\"center\">Silver via OpenCollective<\/h4>\n+\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/0\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/0\/avatar.svg\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/1\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/1\/avatar.svg\"><\/a>\n+<a href=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/2\/website\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https:\/\/opencollective.com\/vuejs\/tiers\/silver-sponsors\/2\/avatar.svg\"><\/a>\n+\n <h2 align=\"center\">Bronze via Patreon<\/h2>\n \n <!--bronze start-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,7 +31,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/codexyz.png\">\n   <\/a>\n <\/p>\n-  \n+\n <!--special end-->\n \n <h3 align=\"center\">Platinum Sponsors<\/h3>\n\n\n###\n\n","completion":" chore: fix OpenCollective silver tier\n"}
{"prompt":" file path A: types\/options.d.ts | file path B: types\/options.d.ts\n\n@@ -133,7 +133,7 @@ export type PropValidator<T> = PropOptions<T> | Prop<T> | Prop<T>[];\n export interface PropOptions<T=any> {\n   type?: Prop<T> | Prop<T>[];\n   required?: boolean;\n-  default?: T | null | undefined | (() => object);\n+  default?: T | null | undefined | (() => T | null | undefined);\n   validator?(value: T): boolean;\n }\n \n\n---\n file path A: types\/test\/options-test.ts | file path B: types\/test\/options-test.ts\n\n@@ -79,6 +79,18 @@ Vue.component('union-prop', {\n   }\n });\n \n+Vue.component('prop-with-primitive-default', {\n+  props: {\n+    id: {\n+      type: String,\n+      default: () => String(Math.round(Math.random() * 10000000))\n+    }\n+  },\n+  created() {\n+    this.id;\n+  }\n+});\n+\n Vue.component('component', {\n   data() {\n     this.$mount\n\n\n###\n\n","completion":" fix(types): relax the return type of props default option (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/patch.js | file path B: src\/core\/vdom\/patch.js\n\n@@ -272,7 +272,7 @@ export function createPatchFunction (backend) {\n   function insert (parent, elm, ref) {\n     if (isDef(parent)) {\n       if (isDef(ref)) {\n-        if (ref.parentNode === parent) {\n+        if (nodeOps.parentNode(ref) === parent) {\n           nodeOps.insertBefore(parent, elm, ref)\n         }\n       } else {\n\n\n###\n\n","completion":" fix: replace hardcoded .parentNode with abstract ops, fix #8713 (#<issue-num>)\n"}
{"prompt":" file path A: test\/e2e\/specs\/todomvc.js | file path B: test\/e2e\/specs\/todomvc.js\n\n@@ -119,7 +119,7 @@ module.exports = {\n       .assert.focused('.todo:nth-child(1) .edit')\n       .clearValue('.todo:nth-child(1) .edit')\n       .setValue('.todo:nth-child(1) .edit', 'edited!')\n-      .click('footer') \/\/ blur\n+      .click('.new-todo') \/\/ blur\n       .assert.count('.todo.editing', 0)\n       .assert.containsText('.todo:nth-child(1) label', 'edited!')\n \n\n\n###\n\n","completion":" test(e2e): trigger click on .new-todo instead of footer (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/optimizing-compiler\/modules.js | file path B: src\/server\/optimizing-compiler\/modules.js\n\n@@ -92,7 +92,7 @@ export function genClassSegments (\n   classBinding: ?string\n ): Array<StringSegment> {\n   if (staticClass && !classBinding) {\n-    return [{ type: RAW, value: ` class=${staticClass}` }]\n+    return [{ type: RAW, value: ` class=\"${JSON.parse(staticClass)}\"` }]\n   } else {\n     return [{\n       type: EXPRESSION,\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -1245,6 +1245,20 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n+  \/\/ #7859\n+  it('should not double escape class values', done => {\n+    renderVmWithOptions({\n+      template: `\n+      <div>\n+        <div class=\"a\\nb\"><\/div>\n+      <\/div>\n+      `\n+    }, result => {\n+      expect(result).toContain(`<div class=\"a\\nb\"><\/div>`)\n+      done()\n+    })\n+  })\n+\n   it('should expose ssr helpers on functional context', done => {\n     let called = false\n     renderVmWithOptions({\n\n\n###\n\n","completion":" fix(ssr): fix double escaping of staticClass values (#<issue-num>) (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/util\/props.js | file path B: src\/core\/util\/props.js\n\n@@ -127,11 +127,10 @@ function assertProp (\n       valid = assertedType.valid\n     }\n   }\n+\n   if (!valid) {\n     warn(\n-      `Invalid prop: type check failed for prop \"${name}\".` +\n-      ` Expected ${expectedTypes.map(capitalize).join(', ')}` +\n-      `, got ${toRawType(value)}.`,\n+      getInvalidTypeMessage(name, value, expectedTypes),\n       vm\n     )\n     return\n@@ -200,3 +199,43 @@ function getTypeIndex (type, expectedTypes): number {\n   }\n   return -1\n }\n+\n+function getInvalidTypeMessage (name, value, expectedTypes) {\n+  let message = `Invalid prop: type check failed for prop \"${name}\".` +\n+    ` Expected ${expectedTypes.map(capitalize).join(', ')}`\n+  const expectedType = expectedTypes[0]\n+  const receivedType = toRawType(value)\n+  const expectedValue = styleValue(value, expectedType)\n+  const receivedValue = styleValue(value, receivedType)\n+  \/\/ check if we need to specify expected value\n+  if (expectedTypes.length === 1 &&\n+      isExplicable(expectedType) &&\n+      !isBoolean(expectedType, receivedType)) {\n+    message += ` with value ${expectedValue}`\n+  }\n+  message += `, got ${receivedType} `\n+  \/\/ check if we need to specify received value\n+  if (isExplicable(receivedType)) {\n+    message += `with value ${receivedValue}.`\n+  }\n+  return message\n+}\n+\n+function styleValue (value, type) {\n+  if (type === 'String') {\n+    return `\"${value}\"`\n+  } else if (type === 'Number') {\n+    return `${Number(value)}`\n+  } else {\n+    return `${value}`\n+  }\n+}\n+\n+function isExplicable (value) {\n+  const explicitTypes = ['string', 'number', 'boolean']\n+  return explicitTypes.some(elem => value.toLowerCase() === elem)\n+}\n+\n+function isBoolean (...args) {\n+  return args.some(elem => elem.toLowerCase() === 'boolean')\n+}\n\n---\n file path A: test\/unit\/features\/options\/props.spec.js | file path B: test\/unit\/features\/options\/props.spec.js\n\n@@ -171,42 +171,56 @@ describe('Options props', () => {\n       makeInstance('hello', String)\n       expect(console.error.calls.count()).toBe(0)\n       makeInstance(123, String)\n-      expect('Expected String').toHaveBeenWarned()\n+      expect('Expected String with value \"123\", got Number with value 123').toHaveBeenWarned()\n     })\n \n     it('number', () => {\n       makeInstance(123, Number)\n       expect(console.error.calls.count()).toBe(0)\n       makeInstance('123', Number)\n-      expect('Expected Number').toHaveBeenWarned()\n+      expect('Expected Number with value 123, got String with value \"123\"').toHaveBeenWarned()\n+    })\n+\n+    it('number & boolean', () => {\n+      makeInstance(123, Number)\n+      expect(console.error.calls.count()).toBe(0)\n+      makeInstance(false, Number)\n+      expect('Expected Number, got Boolean with value false').toHaveBeenWarned()\n+    })\n+\n+    it('string & boolean', () => {\n+      makeInstance('hello', String)\n+      expect(console.error.calls.count()).toBe(0)\n+      makeInstance(true, String)\n+      expect('Expected String, got Boolean with value true').toHaveBeenWarned()\n     })\n \n     it('boolean', () => {\n       makeInstance(true, Boolean)\n       expect(console.error.calls.count()).toBe(0)\n       makeInstance('123', Boolean)\n-      expect('Expected Boolean').toHaveBeenWarned()\n+      expect('Expected Boolean, got String with value \"123\"').toHaveBeenWarned()\n     })\n \n     it('function', () => {\n       makeInstance(() => {}, Function)\n       expect(console.error.calls.count()).toBe(0)\n       makeInstance(123, Function)\n-      expect('Expected Function').toHaveBeenWarned()\n+      expect('Expected Function, got Number with value 123').toHaveBeenWarned()\n     })\n \n     it('object', () => {\n       makeInstance({}, Object)\n       expect(console.error.calls.count()).toBe(0)\n       makeInstance([], Object)\n-      expect('Expected Object').toHaveBeenWarned()\n+      expect('Expected Object, got Array').toHaveBeenWarned()\n     })\n \n     it('array', () => {\n       makeInstance([], Array)\n       expect(console.error.calls.count()).toBe(0)\n       makeInstance({}, Array)\n-      expect('Expected Array').toHaveBeenWarned()\n+      expect('Expected Array, got Object').toHaveBeenWarned()\n     })\n \n     it('primitive wrapper objects', () => {\n@@ -225,7 +239,7 @@ describe('Options props', () => {\n         makeInstance(Symbol('foo'), Symbol)\n         expect(console.error.calls.count()).toBe(0)\n         makeInstance({}, Symbol)\n-        expect('Expected Symbol').toHaveBeenWarned()\n+        expect('Expected Symbol, got Object').toHaveBeenWarned()\n       })\n     }\n \n@@ -257,7 +271,7 @@ describe('Options props', () => {\n       makeInstance(123, Number, v => v === 234)\n       expect('custom validator check failed').toHaveBeenWarned()\n       makeInstance(123, String, v => v === 123)\n-      expect('Expected String').toHaveBeenWarned()\n+      expect('Expected String with value \"123\", got Number with value 123').toHaveBeenWarned()\n     })\n \n     it('multiple types + custom validator', () => {\n\n\n###\n\n","completion":" refactor: make the warning messages more explicit (close #7764) (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/config.js | file path B: src\/core\/config.js\n\n@@ -28,6 +28,9 @@ export type Config = {\n   getTagNamespace: (x?: string) => string | void;\n   mustUseProp: (tag: string, type: ?string, name: string) => boolean;\n \n+  \/\/ private\n+  async: boolean;\n+\n   \/\/ legacy\n   _lifecycleHooks: Array<string>;\n };\n@@ -114,6 +117,12 @@ export default ({\n    *\/\n   mustUseProp: no,\n \n+  \/**\n+   * Perform updates asynchronously. Intended to be used by Vue Test Utils\n+   * This will significantly reduce performance if set to false.\n+   *\/\n+  async: true,\n+\n   \/**\n    * Exposed for legacy reasons\n    *\/\n\n---\n file path A: src\/core\/observer\/dep.js | file path B: src\/core\/observer\/dep.js\n\n@@ -2,6 +2,7 @@\n \n import type Watcher from '.\/watcher'\n import { remove } from '..\/util\/index'\n+import config from '..\/config'\n \n let uid = 0\n \n@@ -36,6 +37,12 @@ export default class Dep {\n   notify () {\n     \/\/ stabilize the subscriber list first\n     const subs = this.subs.slice()\n+    if (process.env.NODE_ENV !== 'production' && !config.async) {\n+      \/\/ subs aren't sorted in scheduler if not running async\n+      \/\/ we need to sort them now to make sure they fire in correct\n+      \/\/ order\n+      subs.sort((a, b) => a.id - b.id)\n+    }\n     for (let i = 0, l = subs.length; i < l; i++) {\n       subs[i].update()\n     }\n\n---\n file path A: src\/core\/observer\/scheduler.js | file path B: src\/core\/observer\/scheduler.js\n\n@@ -145,6 +145,11 @@ export function queueWatcher (watcher: Watcher) {\n     \/\/ queue the flush\n     if (!waiting) {\n       waiting = true\n+\n+      if (process.env.NODE_ENV !== 'production' && !config.async) {\n+        flushSchedulerQueue()\n+        return\n+      }\n       nextTick(flushSchedulerQueue)\n     }\n   }\n\n---\n file path A: test\/unit\/features\/global-api\/config.spec.js | file path B: test\/unit\/features\/global-api\/config.spec.js\n\n@@ -55,4 +55,71 @@ describe('Global config', () => {\n       Vue.config.ignoredElements = []\n     })\n   })\n+\n+  describe('async', () => {\n+    it('does not update synchronously when true', () => {\n+      const spy = jasmine.createSpy()\n+      const vm = new Vue({\n+        template: `<div :class=\"value\"><\/div>`,\n+        updated: spy,\n+        data: { value: true }\n+      }).$mount()\n+      vm.value = false\n+      expect(spy).not.toHaveBeenCalled()\n+    })\n+\n+    it('updates synchronously when false', () => {\n+      const spy = jasmine.createSpy()\n+      Vue.config.async = false\n+      const vm = new Vue({\n+        template: `<div :class=\"value\"><\/div>`,\n+        updated: spy,\n+        data: { value: true }\n+      }).$mount()\n+      vm.value = false\n+      expect(spy).toHaveBeenCalled()\n+      Vue.config.async = true\n+    })\n+\n+    it('runs watchers in correct order when false', () => {\n+      Vue.config.async = false\n+      const vm = new Vue({\n+        template: `\n+          <div id=\"app\">\n+            {{ computed }}\n+          <\/div>`,\n+        props: ['prop'],\n+        propsData: {\n+          'prop': []\n+        },\n+        data: () => ({\n+          data: ''\n+        }),\n+        computed: {\n+          computed () {\n+            return this.prop.join(',')\n+          }\n+        },\n+        watch: {\n+          prop: 'execute'\n+        },\n+        methods: {\n+          execute () {\n+            this.data = this.computed\n+          }\n+        }\n+      }).$mount()\n+      expect(vm.computed).toBe('')\n+      expect(vm.data).toBe('')\n+\n+      vm.prop = [1, 2, 3]\n+      expect(vm.computed).toBe('1,2,3')\n+      expect(vm.data).toBe('1,2,3')\n+\n+      vm.prop.push(4, 5)\n+      expect(vm.computed).toBe('1,2,3,4,5')\n+      expect(vm.data).toBe('1,2,3,4,5')\n+      Vue.config.async = true\n+    })\n+  })\n })\n\n---\n file path A: types\/test\/vue-test.ts | file path B: types\/test\/vue-test.ts\n\n@@ -73,6 +73,7 @@ class Test extends Vue {\n     };\n     config.keyCodes = { esc: 27 };\n     config.ignoredElements = ['foo', \/^ion-\/];\n+    config.async = false\n   }\n \n   static testMethods() {\n\n---\n file path A: types\/vue.d.ts | file path B: types\/vue.d.ts\n\n@@ -74,6 +74,7 @@ export interface VueConfiguration {\n   warnHandler(msg: string, vm: Vue, trace: string): void;\n   ignoredElements: (string | RegExp)[];\n   keyCodes: { [key: string]: number | number[] };\n+  async: boolean;\n }\n \n export interface VueConstructor<V extends Vue = Vue> {\n\n\n###\n\n","completion":" feat: add async option (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/server\/util.js | file path B: src\/platforms\/web\/server\/util.js\n\n@@ -18,7 +18,7 @@ const isAttr = makeMap(\n   'target,title,type,usemap,value,width,wrap'\n )\n \n-const unsafeAttrCharRE = \/[>\/=\"'\\u0009\\u000a\\u000c\\u0020]\/\n+const unsafeAttrCharRE = \/[>\/=\"'\\u0009\\u000a\\u000c\\u0020]\/ \/\/ eslint-disable-line no-control-regex\n export const isSSRUnsafeAttr = (name: string): boolean => {\n   return unsafeAttrCharRE.test(name)\n }\n\n\n###\n\n","completion":" refactor: ignore control-regex lint for unsafeAttrCharRE (#<issue-num>)\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -252,6 +252,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/i.imgur.com\/qX0SNa7.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/polyglotengineer.com\/derek.pollard\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/polyglotengineer.com\/DP.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update backers (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/server\/modules\/attrs.js | file path B: src\/platforms\/web\/server\/modules\/attrs.js\n\n@@ -14,6 +14,8 @@ import {\n   isFalsyAttrValue\n } from 'web\/util\/attrs'\n \n+import { isSSRUnsafeAttr } from 'web\/server\/util'\n+\n export default function renderAttrs (node: VNodeWithData): string {\n   let attrs = node.data.attrs\n   let res = ''\n@@ -34,6 +36,9 @@ export default function renderAttrs (node: VNodeWithData): string {\n   }\n \n   for (const key in attrs) {\n+    if (isSSRUnsafeAttr(key)) {\n+      continue\n+    }\n     if (key === 'style') {\n       \/\/ leave it to the style module\n       continue\n\n---\n file path A: src\/platforms\/web\/server\/util.js | file path B: src\/platforms\/web\/server\/util.js\n\n@@ -18,6 +18,11 @@ const isAttr = makeMap(\n   'target,title,type,usemap,value,width,wrap'\n )\n \n+const unsafeAttrCharRE = \/[>\/=\"'\\u0009\\u000a\\u000c\\u0020]\/\n+export const isSSRUnsafeAttr = (name: string): boolean => {\n+  return unsafeAttrCharRE.test(name)\n+}\n+\n \/* istanbul ignore next *\/\n const isRenderableAttr = (name: string): boolean => {\n   return (\n\n---\n file path A: src\/server\/optimizing-compiler\/runtime-helpers.js | file path B: src\/server\/optimizing-compiler\/runtime-helpers.js\n\n@@ -1,6 +1,6 @@\n \/* @flow *\/\n \n-import { escape } from 'web\/server\/util'\n+import { escape, isSSRUnsafeAttr } from 'web\/server\/util'\n import { isObject, extend } from 'shared\/util'\n import { renderAttr } from 'web\/server\/modules\/attrs'\n import { renderClass } from 'web\/util\/class'\n@@ -109,6 +109,9 @@ function renderStringList (\n function renderAttrs (obj: Object): string {\n   let res = ''\n   for (const key in obj) {\n+    if (isSSRUnsafeAttr(key)) {\n+      continue\n+    }\n     res += renderAttr(key, obj[key])\n   }\n   return res\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -929,6 +929,40 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n+  it('should prevent xss in attribute names', done => {\n+    renderVmWithOptions({\n+      data: {\n+        xss: {\n+          'foo=\"bar\"><\/div><script>alert(1)<\/script>': ''\n+        }\n+      },\n+      template: `\n+        <div v-bind=\"xss\"><\/div>\n+      `\n+    }, res => {\n+      expect(res).not.toContain(`<script>alert(1)<\/script>`)\n+      done()\n+    })\n+  })\n+\n+  it('should prevent xss in attribute names (optimized)', done => {\n+    renderVmWithOptions({\n+      data: {\n+        xss: {\n+          'foo=\"bar\"><\/div><script>alert(1)<\/script>': ''\n+        }\n+      },\n+      template: `\n+        <div>\n+          <a v-bind=\"xss\">foo<\/a>\n+        <\/div>\n+      `\n+    }, res => {\n+      expect(res).not.toContain(`<script>alert(1)<\/script>`)\n+      done()\n+    })\n+  })\n+\n   it('should prevent script xss with v-bind object syntax + array value', done => {\n     renderVmWithOptions({\n       data: {\n\n\n###\n\n","completion":" fix: fix potential xss vulnerability in ssr when using v-bind\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -174,6 +174,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/webdock.io\/en\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webdock.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n@@ -311,10 +316,7 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Jake Ingman\n - Barbara Liau\n - 4 \n-- The Graphic Design School\n-- Christian Griffith\n - Jarek Tkaczyk\n-- Andrew Davis\n - Sean MacIsaac\n - Xiaojie LI\n - David Hess\n@@ -322,13 +324,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Dariusz Jastrzbski\n - Ivan Sieder\n - Matt Jones\n-- Dave Chenell\n - Duncan J Kenzie\n - Mike Margerum\n - Guy Gavergun\n - Edithvale \n - Intevation GmbH\n - Luiz Eduardo  Tanure Bacelar\n+- Chengzhi Yin\n - Zoran Knezevic\n - James Simpson\n - Pascal Germain\n@@ -347,7 +349,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Thong Yong Jun\n - Tai Shi Lgin\n - Bryan Gruneberg\n-- Roman Kuba\n - Matias Verdier\n - Jamie McElwain\n - Vivekanandhan Natarajan\n@@ -362,11 +363,9 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Brian Jorden\n - Cliff Hess\n - Joe Ray Gregory\n-- Oskar Lindgren\n - RADD Creative\n - Rua Cura D'ars\n - Richard Simpson\n-- Charles McKeever\n - Alok Pant\n - Sandro Das Neves\n - Jessie Hernandez\n@@ -392,7 +391,22 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n - Tom Ootes\n - Andy Foster\n - Blake Campbell\n-- David Nunn\n+- Daniel da Rocha\n+- Joe Cochran\n+- Matt Sencenbaugh\n+- The Commission Cafe, LLC.\n+- Leon Seipp\n+- Daniel Mattingley\n+- HANDI PRIYONO\n+- Zhenping WANG\n+- Teon Ooi\n+- Hannes Kochni\n+- Juan Bermudez\n+- Seiji Komatsu\n+- Alberto T. Payero Mota\n+- Colt Borg\n+- Luis F Rocha\n+- Chris Calo\n <!--10 end-->\n \n <h2 align=\"center\">Backers via OpenCollective<\/h2>\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -181,6 +181,11 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n         <\/a>\n       <\/td>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/webdock.io\/en\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/webdock.png\">\n+        <\/a>\n+      <\/td>\n     <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n\n\n###\n\n","completion":" chore: update sponsors and backers\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -21,12 +21,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  ,\n-<p align=\"center\">\n-  <a href=\"https:\/\/www.bmqb.com\/jobs\" target=\"_blank\">\n-    <img width=\"220px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/cn.vuejs.org\/master\/themes\/vue\/source\/images\/bmqb.png\">\n-  <\/a>\n-<\/p>\n   \n <!--special end-->\n \n\n---\n file path A: README.md | file path B: README.md\n\n@@ -31,12 +31,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n     <img width=\"260px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/stdlib.png\">\n   <\/a>\n <\/p>\n-  ,\n-<p align=\"center\">\n-  <a href=\"https:\/\/www.bmqb.com\/jobs\" target=\"_blank\">\n-    <img width=\"220px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/cn.vuejs.org\/master\/themes\/vue\/source\/images\/bmqb.png\">\n-  <\/a>\n-<\/p>\n   \n <!--special end-->\n \n\n\n###\n\n","completion":" chore: remove bmqb\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -167,6 +167,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/tidelift.com\/subscription\/npm\/vue\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -174,6 +174,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n         <\/a>\n       <\/td>\n     <\/tr><tr><\/tr>\n+    <tr>\n+      <td align=\"center\" valign=\"middle\">\n+        <a href=\"https:\/\/tidelift.com\/subscription\/npm\/vue\" target=\"_blank\">\n+          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tidelift.png\">\n+        <\/a>\n+      <\/td>\n+    <\/tr><tr><\/tr>\n   <\/tbody>\n <\/table>\n <!--gold end-->\n\n\n###\n\n","completion":" chore: sponsors\n"}
{"prompt":" file path A: BACKERS.md | file path B: BACKERS.md\n\n@@ -90,11 +90,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/chaitin.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/anymod.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/anymod.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.frontenddeveloperlove.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/frontend-love.png\">\n@@ -105,13 +100,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/onsen-ui.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vuetifyjs.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuetify.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/neds.com.au\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/neds.png\">\n@@ -132,13 +127,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/leanpub.com\/vuejs2\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tmvuejs2.png\">\n-        <\/a>\n-      <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/codepilot.ai\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/codepilot.png\">\n@@ -149,11 +137,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/teamextension.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/jsguru.io\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/jsguru.png\">\n-        <\/a>\n-      <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/aaha.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/aaha.png\">\n@@ -169,13 +154,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nsoft.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.pubnub.com\/vue-js\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pubnub.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vuemastery.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuemastery.png\">\n\n---\n file path A: README.md | file path B: README.md\n\n@@ -97,11 +97,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/chaitin.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/anymod.com\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/anymod.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.frontenddeveloperlove.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/frontend-love.png\">\n@@ -112,13 +107,13 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/onsen-ui.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/vuetifyjs.com\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuetify.png\">\n         <\/a>\n       <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/neds.com.au\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/neds.png\">\n@@ -139,13 +134,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuejobs.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/leanpub.com\/vuejs2\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/tmvuejs2.png\">\n-        <\/a>\n-      <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/codepilot.ai\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/codepilot.png\">\n@@ -156,11 +144,8 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/teamextension.png\">\n         <\/a>\n       <\/td>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/jsguru.io\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/jsguru.png\">\n-        <\/a>\n-      <\/td>\n+    <\/tr><tr><\/tr>\n+    <tr>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"http:\/\/aaha.co\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/aaha.png\">\n@@ -176,13 +161,6 @@ Funds donated via Patreon go directly to support Evan You's full-time work on Vu\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/nsoft.png\">\n         <\/a>\n       <\/td>\n-    <\/tr><tr><\/tr>\n-    <tr>\n-      <td align=\"center\" valign=\"middle\">\n-        <a href=\"https:\/\/www.pubnub.com\/vue-js\/\" target=\"_blank\">\n-          <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/pubnub.png\">\n-        <\/a>\n-      <\/td>\n       <td align=\"center\" valign=\"middle\">\n         <a href=\"https:\/\/www.vuemastery.com\/\" target=\"_blank\">\n           <img width=\"148px\" src=\"https:\/\/raw.githubusercontent.com\/vuejs\/vuejs.org\/master\/themes\/vue\/source\/images\/vuemastery.png\">\n\n\n###\n\n","completion":" chore: sponsor cleanup\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -12,6 +12,7 @@\n     \"dist\/*.js\",\n     \"types\/*.d.ts\"\n   ],\n+  \"sideEffects\": false,\n   \"scripts\": {\n     \"dev\": \"rollup -w -c scripts\/config.js --environment TARGET:web-full-dev\",\n     \"dev:cjs\": \"rollup -w -c scripts\/config.js --environment TARGET:web-runtime-cjs\",\n\n\n###\n\n","completion":" chore(package.json): Add sideEffects: false field in package.json (#<issue-num>)\n"}
{"prompt":" file path A: flow\/compiler.js | file path B: flow\/compiler.js\n\n@@ -173,7 +173,7 @@ declare type ASTText = {\n \n \/\/ SFC-parser related declarations\n \n-\/\/ an object format describing a single-file component.\n+\/\/ an object format describing a single-file component\n declare type SFCDescriptor = {\n   template: ?SFCBlock;\n   script: ?SFCBlock;\n\n\n###\n\n","completion":" chore(typo): no dots at the end of the comments (#<issue-num>)\n"}
{"prompt":" file path A: benchmarks\/reorder-list\/index.html | file path B: benchmarks\/reorder-list\/index.html\n\n@@ -15,7 +15,7 @@\n \n     <script type=\"text\/x-template\" id=\"t\">\n       <div>\n-        <h1>{{ total }} Components<\/h1>\n+        <h1>{{ items.length }} Components<\/h1>\n         <p>{{ action }} took {{time}}ms.<\/p>\n         <button @click=\"shuffle\">shuffle<\/button>\n         <button @click=\"add\">add<\/button>\n\n\n###\n\n","completion":" chore: use reactive components count in benchmark (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/weex\/runtime\/modules\/class.js | file path B: src\/platforms\/weex\/runtime\/modules\/class.js\n\n@@ -1,6 +1,6 @@\n \/* @flow *\/\n \n-import { extend } from 'shared\/util'\n+import { extend, isObject } from 'shared\/util'\n \n function updateClass (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n   const el = vnode.elm\n@@ -15,25 +15,8 @@ function updateClass (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n     return\n   }\n \n-  const oldClassList = []\n-  \/\/ unlike web, weex vnode staticClass is an Array\n-  const oldStaticClass: any = oldData.staticClass\n-  if (oldStaticClass) {\n-    oldClassList.push.apply(oldClassList, oldStaticClass)\n-  }\n-  if (oldData.class) {\n-    oldClassList.push.apply(oldClassList, oldData.class)\n-  }\n-\n-  const classList = []\n-  \/\/ unlike web, weex vnode staticClass is an Array\n-  const staticClass: any = data.staticClass\n-  if (staticClass) {\n-    classList.push.apply(classList, staticClass)\n-  }\n-  if (data.class) {\n-    classList.push.apply(classList, data.class)\n-  }\n+  const oldClassList = makeClassList(oldData)\n+  const classList = makeClassList(data)\n \n   if (typeof el.setClassList === 'function') {\n     el.setClassList(classList)\n@@ -49,6 +32,22 @@ function updateClass (oldVnode: VNodeWithData, vnode: VNodeWithData) {\n   }\n }\n \n+function makeClassList (data: VNodeData): Array<string> {\n+  const classList = []\n+  \/\/ unlike web, weex vnode staticClass is an Array\n+  const staticClass: any = data.staticClass\n+  const dataClass = data.class\n+  if (staticClass) {\n+    classList.push.apply(classList, staticClass)\n+  }\n+  if (Array.isArray(dataClass)) {\n+    classList.push.apply(classList, dataClass)\n+  } else if (isObject(dataClass)) {\n+    classList.push.apply(classList, Object.keys(dataClass).filter(className => dataClass[className]))\n+  }\n+  return classList\n+}\n+\n function getStyle (oldClassList: Array<string>, classList: Array<string>, ctx: Component): Object {\n   \/\/ style is a weex-only injected object\n   \/\/ compiled from <style> tags in weex files\n\n---\n file path A: test\/weex\/cases\/cases.spec.js | file path B: test\/weex\/cases\/cases.spec.js\n\n@@ -54,6 +54,7 @@ function createEventTestCase (name) {\n describe('Usage', () => {\n   describe('render', () => {\n     it('sample', createRenderTestCase('render\/sample'))\n+    it('class', createRenderTestCase('render\/class'))\n   })\n \n   describe('event', () => {\n\n---\n file path A: None | file path B: test\/weex\/cases\/render\/class.vdom.js\n\n@@ -0,0 +1,19 @@\n+({\n+  type: 'div',\n+  children: [{\n+    type: 'div',\n+    classList: ['box', 'box1']\n+  }, {\n+    type: 'div',\n+    classList: ['box', 'box2']\n+  }, {\n+    type: 'div',\n+    classList: ['box', 'box3']\n+  }, {\n+    type: 'div',\n+    classList: ['box', 'box4']\n+  }, {\n+    type: 'div',\n+    classList: ['box', 'box5']\n+  }]\n+})\n\n---\n file path A: None | file path B: test\/weex\/cases\/render\/class.vue\n\n@@ -0,0 +1,56 @@\n+<template>\n+  <div>\n+    <div :class=\"class1\"><\/div>\n+    <div :class=\"class2\"><\/div>\n+    <div class=\"box\" :class=\"class3\"><\/div>\n+    <div class=\"box\" :class=\"class4\"><\/div>\n+    <div class=\"box\" :class=\"{ box5: class5 }\"><\/div>\n+  <\/div>\n+<\/template>\n+\n+<style scoped>\n+  .box {\n+    width: 100px;\n+    height: 100px;\n+  }\n+\n+  .box1 {\n+    background-color: #DDD;\n+  }\n+\n+  .box2 {\n+    background-color: #CCC;\n+  }\n+\n+  .box3 {\n+    background-color: #BBB;\n+  }\n+\n+  .box4 {\n+    background-color: #AAA;\n+  }\n+\n+  .box5 {\n+    background-color: #999;\n+  }\n+<\/style>\n+\n+<script>\n+  module.exports = {\n+    data () {\n+      return {\n+        class1: ['box', 'box1'],\n+        class2: {\n+          'box': true,\n+          'box1': false,\n+          'box2': true\n+        },\n+        class3: ['box3'],\n+        class4: {\n+          'box4': true\n+        },\n+        class5: true\n+      }\n+    }\n+  }\n+<\/script>\n\\ No newline at end of file\n\n\n###\n\n","completion":" feat(weex): support object syntax of class (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/webpack-plugin\/client.js | file path B: src\/server\/webpack-plugin\/client.js\n\n@@ -1,6 +1,6 @@\n const hash = require('hash-sum')\n const uniq = require('lodash.uniq')\n-import { isJS, isCSS } from '.\/util'\n+import { isJS, isCSS, onEmit } from '.\/util'\n \n export default class VueSSRClientPlugin {\n   constructor (options = {}) {\n@@ -10,7 +10,7 @@ export default class VueSSRClientPlugin {\n   }\n \n   apply (compiler) {\n-    compiler.plugin('emit', (compilation, cb) => {\n+    onEmit(compiler, 'vue-client-plugin', (compilation, cb) => {\n       const stats = compilation.getStats().toJson()\n \n       const allFiles = uniq(stats.assets\n\n---\n file path A: src\/server\/webpack-plugin\/server.js | file path B: src\/server\/webpack-plugin\/server.js\n\n@@ -1,4 +1,4 @@\n-import { validate, isJS } from '.\/util'\n+import { validate, isJS, onEmit } from '.\/util'\n \n export default class VueSSRServerPlugin {\n   constructor (options = {}) {\n@@ -10,7 +10,7 @@ export default class VueSSRServerPlugin {\n   apply (compiler) {\n     validate(compiler)\n \n-    compiler.plugin('emit', (compilation, cb) => {\n+    onEmit(compiler, 'vue-server-plugin', (compilation, cb) => {\n       const stats = compilation.getStats().toJson()\n       const entryName = Object.keys(stats.entrypoints)[0]\n       const entryInfo = stats.entrypoints[entryName]\n\n---\n file path A: src\/server\/webpack-plugin\/util.js | file path B: src\/server\/webpack-plugin\/util.js\n\n@@ -21,4 +21,14 @@ export const validate = compiler => {\n   }\n }\n \n+export const onEmit = (compiler, name, hook) => {\n+  if (compiler.hooks) {\n+    \/\/ Webpack >= 4.0.0\n+    compiler.hooks.emit.tapAsync(name, hook)\n+  } else {\n+    \/\/ Webpack < 4.0.0\n+    compiler.plugin('emit', hook)\n+  }\n+}\n+\n export { isJS, isCSS } from '..\/util'\n\n\n###\n\n","completion":" feat(server, webpack-plugin): webpack 4 support (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/template-renderer\/index.js | file path B: src\/server\/template-renderer\/index.js\n\n@@ -108,13 +108,13 @@ export default class TemplateRenderer {\n   }\n \n   renderStyles (context: Object): string {\n-    const cssFiles = this.clientManifest\n-      ? this.clientManifest.all.filter(isCSS)\n-      : []\n+    const initial = this.preloadFiles || []\n+    const async = this.getUsedAsyncFiles(context) || []\n+    const cssFiles = initial.concat(async).filter(({ file }) => isCSS(file))\n     return (\n       \/\/ render links for css files\n       (cssFiles.length\n-        ? cssFiles.map(file => `<link rel=\"stylesheet\" href=\"${this.publicPath}\/${file}\">`).join('')\n+        ? cssFiles.map(({ file }) => `<link rel=\"stylesheet\" href=\"${this.publicPath}\/${file}\">`).join('')\n         : '') +\n       \/\/ context.styles is a getter exposed by vue-style-loader which contains\n       \/\/ the inline component styles collected during SSR\n@@ -202,10 +202,10 @@ export default class TemplateRenderer {\n \n   renderScripts (context: Object): string {\n     if (this.clientManifest) {\n-      const initial = this.preloadFiles\n-      const async = this.getUsedAsyncFiles(context)\n+      const initial = this.preloadFiles.filter(({ file }) => isJS(file))\n+      const async = (this.getUsedAsyncFiles(context) || []).filter(({ file }) => isJS(file))\n       const needed = [initial[0]].concat(async || [], initial.slice(1))\n-      return needed.filter(({ file }) => isJS(file)).map(({ file }) => {\n+      return needed.map(({ file }) => {\n         return `<script src=\"${this.publicPath}\/${file}\" defer><\/script>`\n       }).join('')\n     } else {\n\n---\n file path A: src\/server\/webpack-plugin\/client.js | file path B: src\/server\/webpack-plugin\/client.js\n\n@@ -1,6 +1,6 @@\n const hash = require('hash-sum')\n const uniq = require('lodash.uniq')\n-import { isJS } from '.\/util'\n+import { isJS, isCSS } from '.\/util'\n \n export default class VueSSRClientPlugin {\n   constructor (options = {}) {\n@@ -19,10 +19,10 @@ export default class VueSSRClientPlugin {\n       const initialFiles = uniq(Object.keys(stats.entrypoints)\n         .map(name => stats.entrypoints[name].assets)\n         .reduce((assets, all) => all.concat(assets), [])\n-        .filter(isJS))\n+        .filter((file) => isJS(file) || isCSS(file)))\n \n       const asyncFiles = allFiles\n-        .filter(isJS)\n+        .filter((file) => isJS(file) || isCSS(file))\n         .filter(file => initialFiles.indexOf(file) < 0)\n \n       const manifest = {\n\n\n###\n\n","completion":" fix(ssr): render initial and used async css chunks (#<issue-num>)\n"}
{"prompt":" file path A: src\/server\/webpack-plugin\/client.js | file path B: src\/server\/webpack-plugin\/client.js\n\n@@ -43,7 +43,8 @@ export default class VueSSRClientPlugin {\n           if (!chunk || !chunk.files) {\n             return\n           }\n-          const files = manifest.modules[hash(m.identifier)] = chunk.files.map(fileToIndex)\n+          const id = m.identifier.replace(\/\\s\\w+$\/, '') \/\/ remove appended hash\n+          const files = manifest.modules[hash(id)] = chunk.files.map(fileToIndex)\n           \/\/ find all asset modules associated with the same chunk\n           assetModules.forEach(m => {\n             if (m.chunks.some(id => id === cid)) {\n\n\n###\n\n","completion":" fix(ssr): remove trailing hash in webpack module identifier when\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.5.16\",\n+  \"version\": \"2.5.17-beta.0\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.5.17-beta.0\n"}
{"prompt":" file path A: test\/unit\/features\/directives\/model-checkbox.spec.js | file path B: test\/unit\/features\/directives\/model-checkbox.spec.js\n\n@@ -337,7 +337,7 @@ describe('Directive v-model checkbox', () => {\n       expect(vm.$el.children[1].textContent).toBe('false')\n     }).then(done)\n   })\n-  \n+\n   \/\/ #7811\n   it('type should not be overwritten by v-bind', () => {\n     const vm = new Vue({\n\n\n###\n\n","completion":" chore: format\n"}
{"prompt":" file path A: src\/core\/vdom\/create-component.js | file path B: src\/core\/vdom\/create-component.js\n\n@@ -236,9 +236,9 @@ function installComponentHooks (data: VNodeData) {\n }\n \n function mergeHook (f1, f2) {\n-  const merged = (a, b, c, d) => {\n-    f1(a, b, c, d)\n-    f2(a, b, c, d)\n+  const merged = (a, b) => {\n+    f1(a, b)\n+    f2(a, b)\n   }\n   merged._merged = true\n   return merged\n\n\n###\n\n","completion":" refactor: reduce component mergeHook arg count\n"}
{"prompt":" file path A: src\/core\/vdom\/vnode.js | file path B: src\/core\/vdom\/vnode.js\n\n@@ -103,6 +103,7 @@ export function cloneVNode (vnode: VNode): VNode {\n   cloned.fnContext = vnode.fnContext\n   cloned.fnOptions = vnode.fnOptions\n   cloned.fnScopeId = vnode.fnScopeId\n+  cloned.asyncMeta = vnode.asyncMeta\n   cloned.isCloned = true\n   return cloned\n }\n\n\n###\n\n","completion":" fix: add missing `asyncMeta` during VNode cloning (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/codegen\/events.js | file path B: src\/compiler\/codegen\/events.js\n\n@@ -18,7 +18,8 @@ const keyCodes: { [key: string]: number | Array<number> } = {\n \n \/\/ KeyboardEvent.key aliases\n const keyNames: { [key: string]: string | Array<string> } = {\n-  esc: 'Escape',\n+  \/\/ #7880: IE11 and Edge use `Esc` for Escape key name.\n+  esc: ['Esc', 'Escape'],\n   tab: 'Tab',\n   enter: 'Enter',\n   space: ' ',\n\n\n###\n\n","completion":" fix(codegen): support IE11 and Edge use of \"Esc\" key (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/observer\/index.js | file path B: src\/core\/observer\/index.js\n\n@@ -147,10 +147,10 @@ export function defineReactive (\n \n   \/\/ cater for pre-defined getter\/setters\n   const getter = property && property.get\n-  if (!getter && arguments.length === 2) {\n+  const setter = property && property.set\n+  if ((!getter || setter) && arguments.length === 2) {\n     val = obj[key]\n   }\n-  const setter = property && property.set\n \n   let childOb = !shallow && observe(val)\n   Object.defineProperty(obj, key, {\n\n\n###\n\n","completion":" fix(observer): invoke getters on initial observation if setter defined (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/state.js | file path B: src\/core\/instance\/state.js\n\n@@ -2,7 +2,7 @@\n \n import config from '..\/config'\n import Watcher from '..\/observer\/watcher'\n-import Dep, { pushTarget, popTarget } from '..\/observer\/dep'\n+import { pushTarget, popTarget } from '..\/observer\/dep'\n import { isUpdatingChildComponent } from '.\/lifecycle'\n \n import {\n@@ -164,7 +164,7 @@ export function getData (data: Function, vm: Component): any {\n   }\n }\n \n-const computedWatcherOptions = { lazy: true }\n+const computedWatcherOptions = { computed: true }\n \n function initComputed (vm: Component, computed: Object) {\n   \/\/ $flow-disable-line\n@@ -244,13 +244,8 @@ function createComputedGetter (key) {\n   return function computedGetter () {\n     const watcher = this._computedWatchers && this._computedWatchers[key]\n     if (watcher) {\n-      if (watcher.dirty) {\n-        watcher.evaluate()\n-      }\n-      if (Dep.target) {\n-        watcher.depend()\n-      }\n-      return watcher.value\n+      watcher.depend()\n+      return watcher.evaluate()\n     }\n   }\n }\n\n---\n file path A: src\/core\/observer\/watcher.js | file path B: src\/core\/observer\/watcher.js\n\n@@ -29,10 +29,11 @@ export default class Watcher {\n   id: number;\n   deep: boolean;\n   user: boolean;\n-  lazy: boolean;\n+  computed: boolean;\n   sync: boolean;\n   dirty: boolean;\n   active: boolean;\n+  dep: Dep;\n   deps: Array<Dep>;\n   newDeps: Array<Dep>;\n   depIds: SimpleSet;\n@@ -57,16 +58,16 @@ export default class Watcher {\n     if (options) {\n       this.deep = !!options.deep\n       this.user = !!options.user\n-      this.lazy = !!options.lazy\n+      this.computed = !!options.computed\n       this.sync = !!options.sync\n       this.before = options.before\n     } else {\n-      this.deep = this.user = this.lazy = this.sync = false\n+      this.deep = this.user = this.computed = this.sync = false\n     }\n     this.cb = cb\n     this.id = ++uid \/\/ uid for batching\n     this.active = true\n-    this.dirty = this.lazy \/\/ for lazy watchers\n+    this.dirty = this.computed \/\/ for computed watchers\n     this.deps = []\n     this.newDeps = []\n     this.depIds = new Set()\n@@ -89,9 +90,12 @@ export default class Watcher {\n         )\n       }\n     }\n-    this.value = this.lazy\n-      ? undefined\n-      : this.get()\n+    if (this.computed) {\n+      this.value = undefined\n+      this.dep = new Dep()\n+    } else {\n+      this.value = this.get()\n+    }\n   }\n \n   \/**\n@@ -162,8 +166,24 @@ export default class Watcher {\n    *\/\n   update () {\n     \/* istanbul ignore else *\/\n-    if (this.lazy) {\n-      this.dirty = true\n+    if (this.computed) {\n+      \/\/ A computed property watcher has two modes: lazy and activated.\n+      \/\/ It initializes as lazy by default, and only becomes activated when\n+      \/\/ it is depended on by at least one subscriber, which is typically\n+      \/\/ another computed property or a component's render function.\n+      if (this.dep.subs.length === 0) {\n+        \/\/ In lazy mode, we don't want to perform computations until necessary,\n+        \/\/ so we simply mark the watcher as dirty. The actual computation is\n+        \/\/ performed just-in-time in this.evaluate() when the computed property\n+        \/\/ is accessed.\n+        this.dirty = true\n+      } else {\n+        \/\/ In activated mode, we want to proactively perform the computation\n+        \/\/ but only notify our subscribers when the value has indeed changed.\n+        this.getAndInvoke(() => {\n+          this.dep.notify()\n+        })\n+      }\n     } else if (this.sync) {\n       this.run()\n     } else {\n@@ -177,47 +197,54 @@ export default class Watcher {\n    *\/\n   run () {\n     if (this.active) {\n-      const value = this.get()\n-      if (\n-        value !== this.value ||\n-        \/\/ Deep watchers and watchers on Object\/Arrays should fire even\n-        \/\/ when the value is the same, because the value may\n-        \/\/ have mutated.\n-        isObject(value) ||\n-        this.deep\n-      ) {\n-        \/\/ set new value\n-        const oldValue = this.value\n-        this.value = value\n-        if (this.user) {\n-          try {\n-            this.cb.call(this.vm, value, oldValue)\n-          } catch (e) {\n-            handleError(e, this.vm, `callback for watcher \"${this.expression}\"`)\n-          }\n-        } else {\n-          this.cb.call(this.vm, value, oldValue)\n+      this.getAndInvoke(this.cb)\n+    }\n+  }\n+\n+  getAndInvoke (cb: Function) {\n+    const value = this.get()\n+    if (\n+      value !== this.value ||\n+      \/\/ Deep watchers and watchers on Object\/Arrays should fire even\n+      \/\/ when the value is the same, because the value may\n+      \/\/ have mutated.\n+      isObject(value) ||\n+      this.deep\n+    ) {\n+      \/\/ set new value\n+      const oldValue = this.value\n+      this.value = value\n+      this.dirty = false\n+      if (this.user) {\n+        try {\n+          cb.call(this.vm, value, oldValue)\n+        } catch (e) {\n+          handleError(e, this.vm, `callback for watcher \"${this.expression}\"`)\n         }\n+      } else {\n+        cb.call(this.vm, value, oldValue)\n       }\n     }\n   }\n \n   \/**\n-   * Evaluate the value of the watcher.\n-   * This only gets called for lazy watchers.\n+   * Evaluate and return the value of the watcher.\n+   * This only gets called for computed property watchers.\n    *\/\n   evaluate () {\n-    this.value = this.get()\n-    this.dirty = false\n+    if (this.dirty) {\n+      this.value = this.get()\n+      this.dirty = false\n+    }\n+    return this.value\n   }\n \n   \/**\n-   * Depend on all deps collected by this watcher.\n+   * Depend on this watcher. Only for computed property watchers.\n    *\/\n   depend () {\n-    let i = this.deps.length\n-    while (i--) {\n-      this.deps[i].depend()\n+    if (this.dep && Dep.target) {\n+      this.dep.depend()\n     }\n   }\n \n\n---\n file path A: test\/unit\/features\/options\/computed.spec.js | file path B: test\/unit\/features\/options\/computed.spec.js\n\n@@ -216,4 +216,40 @@ describe('Options computed', () => {\n     })\n     expect(() => vm.a).toThrowError('rethrow')\n   })\n+\n+  \/\/ #7767\n+  it('should avoid unnecessary re-renders', done => {\n+    const computedSpy = jasmine.createSpy('computed')\n+    const updatedSpy = jasmine.createSpy('updated')\n+    const vm = new Vue({\n+      data: {\n+        msg: 'bar'\n+      },\n+      computed: {\n+        a () {\n+          computedSpy()\n+          return this.msg !== 'foo'\n+        }\n+      },\n+      template: `<div>{{ a }}<\/div>`,\n+      updated: updatedSpy\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe('true')\n+    expect(computedSpy.calls.count()).toBe(1)\n+    expect(updatedSpy.calls.count()).toBe(0)\n+\n+    vm.msg = 'baz'\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toBe('true')\n+      expect(computedSpy.calls.count()).toBe(2)\n+      expect(updatedSpy.calls.count()).toBe(0)\n+    }).then(() => {\n+      vm.msg = 'foo'\n+    }).then(() => {\n+      expect(vm.$el.textContent).toBe('false')\n+      expect(computedSpy.calls.count()).toBe(3)\n+      expect(updatedSpy.calls.count()).toBe(1)\n+    }).then(done)\n+  })\n })\n\n---\n file path A: test\/unit\/modules\/observer\/watcher.spec.js | file path B: test\/unit\/modules\/observer\/watcher.spec.js\n\n@@ -144,26 +144,70 @@ describe('Watcher', () => {\n     }).then(done)\n   })\n \n-  it('lazy mode', done => {\n+  it('computed mode, lazy', done => {\n+    let getterCallCount = 0\n     const watcher = new Watcher(vm, function () {\n+      getterCallCount++\n       return this.a + this.b.d\n-    }, null, { lazy: true })\n-    expect(watcher.lazy).toBe(true)\n+    }, null, { computed: true })\n+\n+    expect(getterCallCount).toBe(0)\n+    expect(watcher.computed).toBe(true)\n     expect(watcher.value).toBeUndefined()\n     expect(watcher.dirty).toBe(true)\n-    watcher.evaluate()\n+    expect(watcher.dep).toBeTruthy()\n+\n+    const value = watcher.evaluate()\n+    expect(getterCallCount).toBe(1)\n+    expect(value).toBe(5)\n     expect(watcher.value).toBe(5)\n     expect(watcher.dirty).toBe(false)\n+\n+    \/\/ should not get again if not dirty\n+    watcher.evaluate()\n+    expect(getterCallCount).toBe(1)\n+\n     vm.a = 2\n     waitForUpdate(() => {\n+      expect(getterCallCount).toBe(1)\n       expect(watcher.value).toBe(5)\n       expect(watcher.dirty).toBe(true)\n-      watcher.evaluate()\n+\n+      const value = watcher.evaluate()\n+      expect(getterCallCount).toBe(2)\n+      expect(value).toBe(6)\n       expect(watcher.value).toBe(6)\n       expect(watcher.dirty).toBe(false)\n     }).then(done)\n   })\n \n+  it('computed mode, activated', done => {\n+    let getterCallCount = 0\n+    const watcher = new Watcher(vm, function () {\n+      getterCallCount++\n+      return this.a + this.b.d\n+    }, null, { computed: true })\n+\n+    \/\/ activate by mocking a subscriber\n+    const subMock = jasmine.createSpyObj('sub', ['update'])\n+    watcher.dep.addSub(subMock)\n+\n+    const value = watcher.evaluate()\n+    expect(getterCallCount).toBe(1)\n+    expect(value).toBe(5)\n+\n+    vm.a = 2\n+    waitForUpdate(() => {\n+      expect(getterCallCount).toBe(2)\n+      expect(subMock.update).toHaveBeenCalled()\n+\n+      \/\/ since already computed, calling evaluate again should not trigger\n+      \/\/ getter\n+      watcher.evaluate()\n+      expect(getterCallCount).toBe(2)\n+    }).then(done)\n+  })\n+\n   it('teardown', done => {\n     const watcher = new Watcher(vm, 'b.c', spy)\n     watcher.teardown()\n\n\n###\n\n","completion":" perf: avoid unnecessary re-renders when computed property value did not change (#<issue-num>)\n"}
{"prompt":" file path A: flow\/options.js | file path B: flow\/options.js\n\n@@ -2,8 +2,6 @@ declare type InternalComponentOptions = {\n   _isComponent: true;\n   parent: Component;\n   _parentVnode: VNode;\n-  _parentElm: ?Node;\n-  _refElm: ?Node;\n   render?: Function;\n   staticRenderFns?: Array<Function>\n };\n@@ -81,8 +79,6 @@ declare type ComponentOptions = {\n   _componentTag: ?string;\n   _scopeId: ?string;\n   _base: Class<Component>;\n-  _parentElm: ?Node;\n-  _refElm: ?Node;\n };\n \n declare type PropOptions = {\n\n---\n file path A: src\/core\/instance\/init.js | file path B: src\/core\/instance\/init.js\n\n@@ -77,8 +77,6 @@ export function initInternalComponent (vm: Component, options: InternalComponent\n   const parentVnode = options._parentVnode\n   opts.parent = options.parent\n   opts._parentVnode = parentVnode\n-  opts._parentElm = options._parentElm\n-  opts._refElm = options._refElm\n \n   const vnodeComponentOptions = parentVnode.componentOptions\n   opts.propsData = vnodeComponentOptions.propsData\n\n---\n file path A: src\/core\/instance\/lifecycle.js | file path B: src\/core\/instance\/lifecycle.js\n\n@@ -59,14 +59,7 @@ export function lifecycleMixin (Vue: Class<Component>) {\n     \/\/ based on the rendering backend used.\n     if (!prevVnode) {\n       \/\/ initial render\n-      vm.$el = vm.__patch__(\n-        vm.$el, vnode, hydrating, false \/* removeOnly *\/,\n-        vm.$options._parentElm,\n-        vm.$options._refElm\n-      )\n-      \/\/ no need for the ref nodes after initial patch\n-      \/\/ this prevents keeping a detached DOM tree in memory (#5851)\n-      vm.$options._parentElm = vm.$options._refElm = null\n+      vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false \/* removeOnly *\/)\n     } else {\n       \/\/ updates\n       vm.$el = vm.__patch__(prevVnode, vnode)\n\n---\n file path A: src\/core\/vdom\/create-component.js | file path B: src\/core\/vdom\/create-component.js\n\n@@ -34,12 +34,7 @@ import {\n \n \/\/ inline hooks to be invoked on component VNodes during patch\n const componentVNodeHooks = {\n-  init (\n-    vnode: VNodeWithData,\n-    hydrating: boolean,\n-    parentElm: ?Node,\n-    refElm: ?Node\n-  ): ?boolean {\n+  init (vnode: VNodeWithData, hydrating: boolean): ?boolean {\n     if (\n       vnode.componentInstance &&\n       !vnode.componentInstance._isDestroyed &&\n@@ -51,9 +46,7 @@ const componentVNodeHooks = {\n     } else {\n       const child = vnode.componentInstance = createComponentInstanceForVnode(\n         vnode,\n-        activeInstance,\n-        parentElm,\n-        refElm\n+        activeInstance\n       )\n       child.$mount(hydrating ? vnode.elm : undefined, hydrating)\n     }\n@@ -215,15 +208,11 @@ export function createComponent (\n export function createComponentInstanceForVnode (\n   vnode: any, \/\/ we know it's MountedComponentVNode but flow doesn't\n   parent: any, \/\/ activeInstance in lifecycle state\n-  parentElm?: ?Node,\n-  refElm?: ?Node\n ): Component {\n   const options: InternalComponentOptions = {\n     _isComponent: true,\n-    parent,\n     _parentVnode: vnode,\n-    _parentElm: parentElm || null,\n-    _refElm: refElm || null\n+    parent\n   }\n   \/\/ check inline-template render functions\n   const inlineTemplate = vnode.data.inlineTemplate\n\n---\n file path A: src\/core\/vdom\/patch.js | file path B: src\/core\/vdom\/patch.js\n\n@@ -212,7 +212,7 @@ export function createPatchFunction (backend) {\n     if (isDef(i)) {\n       const isReactivated = isDef(vnode.componentInstance) && i.keepAlive\n       if (isDef(i = i.hook) && isDef(i = i.init)) {\n-        i(vnode, false \/* hydrating *\/, parentElm, refElm)\n+        i(vnode, false \/* hydrating *\/)\n       }\n       \/\/ after calling the init hook, if the vnode is a child component\n       \/\/ it should've created a child instance and mounted it. the child\n@@ -220,6 +220,7 @@ export function createPatchFunction (backend) {\n       \/\/ in that case we can just return the element and be done.\n       if (isDef(vnode.componentInstance)) {\n         initComponent(vnode, insertedVnodeQueue)\n+        insert(parentElm, vnode.elm, refElm)\n         if (isTrue(isReactivated)) {\n           reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm)\n         }\n@@ -681,7 +682,7 @@ export function createPatchFunction (backend) {\n     }\n   }\n \n-  return function patch (oldVnode, vnode, hydrating, removeOnly, parentElm, refElm) {\n+  return function patch (oldVnode, vnode, hydrating, removeOnly) {\n     if (isUndef(vnode)) {\n       if (isDef(oldVnode)) invokeDestroyHook(oldVnode)\n       return\n@@ -693,7 +694,7 @@ export function createPatchFunction (backend) {\n     if (isUndef(oldVnode)) {\n       \/\/ empty mount (likely as component), create new root element\n       isInitialPatch = true\n-      createElm(vnode, insertedVnodeQueue, parentElm, refElm)\n+      createElm(vnode, insertedVnodeQueue)\n     } else {\n       const isRealElement = isDef(oldVnode.nodeType)\n       if (!isRealElement && sameVnode(oldVnode, vnode)) {\n\n\n###\n\n","completion":" fix: invoke component node create hooks before insertion (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/lifecycle.js | file path B: src\/core\/instance\/lifecycle.js\n\n@@ -50,9 +50,6 @@ export function initLifecycle (vm: Component) {\n export function lifecycleMixin (Vue: Class<Component>) {\n   Vue.prototype._update = function (vnode: VNode, hydrating?: boolean) {\n     const vm: Component = this\n-    if (vm._isMounted) {\n-      callHook(vm, 'beforeUpdate')\n-    }\n     const prevEl = vm.$el\n     const prevVnode = vm._vnode\n     const prevActiveInstance = activeInstance\n@@ -197,7 +194,13 @@ export function mountComponent (\n   \/\/ we set this to vm._watcher inside the watcher's constructor\n   \/\/ since the watcher's initial patch may call $forceUpdate (e.g. inside child\n   \/\/ component's mounted hook), which relies on vm._watcher being already defined\n-  new Watcher(vm, updateComponent, noop, null, true \/* isRenderWatcher *\/)\n+  new Watcher(vm, updateComponent, noop, {\n+    before () {\n+      if (vm._isMounted) {\n+        callHook(vm, 'beforeUpdate')\n+      }\n+    }\n+  }, true \/* isRenderWatcher *\/)\n   hydrating = false\n \n   \/\/ manually mounted instance, call mounted on self\n\n---\n file path A: src\/core\/observer\/scheduler.js | file path B: src\/core\/observer\/scheduler.js\n\n@@ -53,6 +53,9 @@ function flushSchedulerQueue () {\n   \/\/ as we run existing watchers\n   for (index = 0; index < queue.length; index++) {\n     watcher = queue[index]\n+    if (watcher.before) {\n+      watcher.before()\n+    }\n     id = watcher.id\n     has[id] = null\n     watcher.run()\n\n---\n file path A: src\/core\/observer\/watcher.js | file path B: src\/core\/observer\/watcher.js\n\n@@ -37,6 +37,7 @@ export default class Watcher {\n   newDeps: Array<Dep>;\n   depIds: SimpleSet;\n   newDepIds: SimpleSet;\n+  before: ?Function;\n   getter: Function;\n   value: any;\n \n@@ -58,6 +59,7 @@ export default class Watcher {\n       this.user = !!options.user\n       this.lazy = !!options.lazy\n       this.sync = !!options.sync\n+      this.before = options.before\n     } else {\n       this.deep = this.user = this.lazy = this.sync = false\n     }\n\n---\n file path A: src\/platforms\/web\/runtime\/components\/transition-group.js | file path B: src\/platforms\/web\/runtime\/components\/transition-group.js\n\n@@ -33,6 +33,21 @@ delete props.mode\n export default {\n   props,\n \n+  beforeMount () {\n+    const update = this._update\n+    this._update = (vnode, hydrating) => {\n+      \/\/ force removing pass\n+      this.__patch__(\n+        this._vnode,\n+        this.kept,\n+        false, \/\/ hydrating\n+        true \/\/ removeOnly (!important, avoids unnecessary moves)\n+      )\n+      this._vnode = this.kept\n+      update.call(this, vnode, hydrating)\n+    }\n+  },\n+\n   render (h: Function) {\n     const tag: string = this.tag || this.$vnode.data.tag || 'span'\n     const map: Object = Object.create(null)\n@@ -76,17 +91,6 @@ export default {\n     return h(tag, null, children)\n   },\n \n-  beforeUpdate () {\n-    \/\/ force removing pass\n-    this.__patch__(\n-      this._vnode,\n-      this.kept,\n-      false, \/\/ hydrating\n-      true \/\/ removeOnly (!important, avoids unnecessary moves)\n-    )\n-    this._vnode = this.kept\n-  },\n-\n   updated () {\n     const children: Array<VNode> = this.prevChildren\n     const moveClass: string = this.moveClass || ((this.name || 'v') + '-move')\n\n---\n file path A: test\/unit\/features\/options\/lifecycle.spec.js | file path B: test\/unit\/features\/options\/lifecycle.spec.js\n\n@@ -137,6 +137,21 @@ describe('Options lifecycle hooks', () => {\n         expect(spy).toHaveBeenCalled()\n       }).then(done)\n     })\n+\n+    it('should be called before render and allow mutating state', done => {\n+      const vm = new Vue({\n+        template: '<div>{{ msg }}<\/div>',\n+        data: { msg: 'foo' },\n+        beforeUpdate () {\n+          this.msg += '!'\n+        }\n+      }).$mount()\n+      expect(vm.$el.textContent).toBe('foo')\n+      vm.msg = 'bar'\n+      waitForUpdate(() => {\n+        expect(vm.$el.textContent).toBe('bar!')\n+      }).then(done)\n+    })\n   })\n \n   describe('updated', () => {\n\n\n###\n\n","completion":" fix: beforeUpdate should be called before render and allow state mutation (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/create-component.js | file path B: src\/core\/vdom\/create-component.js\n\n@@ -238,8 +238,21 @@ function installComponentHooks (data: VNodeData) {\n   const hooks = data.hook || (data.hook = {})\n   for (let i = 0; i < hooksToMerge.length; i++) {\n     const key = hooksToMerge[i]\n-    hooks[key] = componentVNodeHooks[key]\n+    const existing = hooks[key]\n+    const toMerge = componentVNodeHooks[key]\n+    if (existing !== toMerge && !(existing && existing._merged)) {\n+      hooks[key] = existing ? mergeHook(toMerge, existing) : toMerge\n+    }\n+  }\n+}\n+\n+function mergeHook (f1, f2) {\n+  const merged = (a, b, c, d) => {\n+    f1(a, b, c, d)\n+    f2(a, b, c, d)\n   }\n+  merged._merged = true\n+  return merged\n }\n \n \/\/ transform component v-model info (value and callback) into\n\n---\n file path A: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js | file path B: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js\n\n@@ -393,9 +393,15 @@ describe('vdom patch: edge cases', () => {\n       extends: Base\n     }\n \n+    \/\/ sometimes we do need to tap into these internal hooks (e.g. in vue-router)\n+    \/\/ so make sure it does work\n+    const inlineHookSpy = jasmine.createSpy('inlineInit')\n+\n     const vm = new Vue({\n       render (h) {\n-        const data = { staticClass: 'text-red' }\n+        const data = { staticClass: 'text-red', hook: {\n+          init: inlineHookSpy\n+        }}\n \n         return h('div', [\n           h(Foo, data),\n@@ -405,5 +411,6 @@ describe('vdom patch: edge cases', () => {\n     }).$mount()\n \n     expect(vm.$el.textContent).toBe('FooBar')\n+    expect(inlineHookSpy.calls.count()).toBe(2)\n   })\n })\n\n\n###\n\n","completion":" fix: ensure init\/prepatch hooks are still repsected\n"}
{"prompt":" file path A: src\/core\/instance\/state.js | file path B: src\/core\/instance\/state.js\n\n@@ -111,9 +111,8 @@ function initProps (vm: Component, propsOptions: Object) {\n \n function initData (vm: Component) {\n   let data = vm.$options.data\n-  data = vm._data = typeof data === 'function'\n-    ? getData(data, vm)\n-    : data || {}\n+  \/\/ $options.data is guaranteed to be a function after merge\n+  data = vm._data = getData(data, vm)\n   if (!isPlainObject(data)) {\n     data = {}\n     process.env.NODE_ENV !== 'production' && warn(\n\n\n###\n\n","completion":" refactor: remove unnecessary checks (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/instance\/proxy.js | file path B: src\/core\/instance\/proxy.js\n\n@@ -45,7 +45,7 @@ if (process.env.NODE_ENV !== 'production') {\n   const hasHandler = {\n     has (target, key) {\n       const has = key in target\n-      const isAllowed = allowedGlobals(key) || key.charAt(0) === '_'\n+      const isAllowed = allowedGlobals(key) || (typeof key === 'string' && key.charAt(0) === '_')\n       if (!has && !isAllowed) {\n         warnNonPresent(target, key)\n       }\n\n---\n file path A: test\/unit\/features\/instance\/render-proxy.spec.js | file path B: test\/unit\/features\/instance\/render-proxy.spec.js\n\n@@ -28,5 +28,22 @@ if (typeof Proxy !== 'undefined') {\n       }).$mount()\n       expect(`Property or method \"a\" is not defined`).not.toHaveBeenWarned()\n     })\n+\n+    it('support symbols using the `in` operator in hand-written render functions', () => {\n+      const sym = Symbol()\n+\n+      const vm = new Vue({\n+        created () {\n+          this[sym] = 'foo'\n+        },\n+        render (h) {\n+          if (sym in this) {\n+            return h('div', [this[sym]])\n+          }\n+        }\n+      }).$mount()\n+\n+      expect(vm.$el.textContent).toBe('foo')\n+    })\n   })\n }\n\n\n###\n\n","completion":" fix: correct the `has` implementation in the `_renderProxy` (#<issue-num>)\n"}
{"prompt":" file path A: package.json | file path B: package.json\n\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"vue\",\n-  \"version\": \"2.5.15\",\n+  \"version\": \"2.5.16\",\n   \"description\": \"Reactive, component-oriented view layer for modern web interfaces.\",\n   \"main\": \"dist\/vue.runtime.common.js\",\n   \"module\": \"dist\/vue.runtime.esm.js\",\n\n\n###\n\n","completion":" build: release 2.5.16\n"}
{"prompt":" file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -1,6 +1,6 @@\n \/* @flow *\/\n \n-import VNode from '.\/vnode'\n+import VNode, { cloneVNode } from '.\/vnode'\n import { createElement } from '.\/create-element'\n import { resolveInject } from '..\/instance\/inject'\n import { normalizeChildren } from '..\/vdom\/helpers\/normalize-children'\n@@ -32,6 +32,9 @@ export function FunctionalRenderContext (\n     \/\/ $flow-disable-line\n     contextVm._original = parent\n   } else {\n+    \/\/ the context vm passed in is a functional context as well.\n+    \/\/ in this case we want to make sure we are able to get a hold to the\n+    \/\/ real context instance.\n     contextVm = parent\n     \/\/ $flow-disable-line\n     parent = parent._original\n@@ -102,23 +105,28 @@ export function createFunctionalComponent (\n   const vnode = options.render.call(null, renderContext._c, renderContext)\n \n   if (vnode instanceof VNode) {\n-    setFunctionalContextForVNode(vnode, data, contextVm, options)\n-    return vnode\n+    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options)\n   } else if (Array.isArray(vnode)) {\n     const vnodes = normalizeChildren(vnode) || []\n+    const res = new Array(vnodes.length)\n     for (let i = 0; i < vnodes.length; i++) {\n-      setFunctionalContextForVNode(vnodes[i], data, contextVm, options)\n+      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options)\n     }\n-    return vnodes\n+    return res\n   }\n }\n \n-function setFunctionalContextForVNode (vnode, data, vm, options) {\n-  vnode.fnContext = vm\n-  vnode.fnOptions = options\n+function cloneAndMarkFunctionalResult (vnode, data, contextVm, options) {\n+  \/\/ #7817 clone node before setting fnContext, otherwise if the node is reused\n+  \/\/ (e.g. it was from a cached normal slot) the fnContext causes named slots\n+  \/\/ that should not be matched to match.\n+  const clone = cloneVNode(vnode)\n+  clone.fnContext = contextVm\n+  clone.fnOptions = options\n   if (data.slot) {\n-    (vnode.data || (vnode.data = {})).slot = data.slot\n+    (clone.data || (clone.data = {})).slot = data.slot\n   }\n+  return clone\n }\n \n function mergeProps (to, from) {\n\n---\n file path A: test\/unit\/features\/component\/component-slot.spec.js | file path B: test\/unit\/features\/component\/component-slot.spec.js\n\n@@ -855,4 +855,35 @@ describe('Component slot', () => {\n \n     expect(vm.$el.textContent).toBe('foo')\n   })\n+\n+  \/\/ #7817\n+  it('should not match wrong named slot in functional component on re-render', done => {\n+    const Functional = {\n+      functional: true,\n+      render: (h, ctx) => ctx.slots().default\n+    }\n+\n+    const Stateful = {\n+      data () {\n+        return { ok: true }\n+      },\n+      render (h) {\n+        this.ok \/\/ register dep\n+        return h('div', [\n+          h(Functional, this.$slots.named)\n+        ])\n+      }\n+    }\n+\n+    const vm = new Vue({\n+      template: `<stateful ref=\"stateful\"><div slot=\"named\">foo<\/div><\/stateful>`,\n+      components: { Stateful }\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe('foo')\n+    vm.$refs.stateful.ok = false\n+    waitForUpdate(() => {\n+      expect(vm.$el.textContent).toBe('foo')\n+    }).then(done)\n+  })\n })\n\n\n###\n\n","completion":" fix: fix wrongly matched named slots in functional components\n"}
{"prompt":" file path A: src\/core\/observer\/index.js | file path B: src\/core\/observer\/index.js\n\n@@ -10,6 +10,8 @@ import {\n   hasProto,\n   isObject,\n   isPlainObject,\n+  isPrimitive,\n+  isUndef,\n   isValidArrayIndex,\n   isServerRendering\n } from '..\/util\/index'\n@@ -195,10 +197,9 @@ export function defineReactive (\n  *\/\n export function set (target: Array<any> | Object, key: any, val: any): any {\n   if (process.env.NODE_ENV !== 'production' &&\n-    !Array.isArray(target) &&\n-    !isObject(target)\n+    (isUndef(target) || isPrimitive(target))\n   ) {\n-    warn(`Cannot set reactive property on non-object\/array value: ${target}`)\n+    warn(`Cannot set reactive property on undefined, null, or primitive value: ${(target: any)}`)\n   }\n   if (Array.isArray(target) && isValidArrayIndex(key)) {\n     target.length = Math.max(target.length, key)\n@@ -231,10 +232,9 @@ export function set (target: Array<any> | Object, key: any, val: any): any {\n  *\/\n export function del (target: Array<any> | Object, key: any) {\n   if (process.env.NODE_ENV !== 'production' &&\n-    !Array.isArray(target) &&\n-    !isObject(target)\n+    (isUndef(target) || isPrimitive(target))\n   ) {\n-    warn(`Cannot delete reactive property on non-object\/array value: ${target}`)\n+    warn(`Cannot delete reactive property on undefined, null, or primitive value: ${(target: any)}`)\n   }\n   if (Array.isArray(target) && isValidArrayIndex(key)) {\n     target.splice(key, 1)\n\n---\n file path A: test\/unit\/modules\/observer\/observer.spec.js | file path B: test\/unit\/modules\/observer\/observer.spec.js\n\n@@ -360,12 +360,12 @@ describe('Observer', () => {\n     try {\n       setProp(null, 'foo', 1)\n     } catch (e) {}\n-    expect(`Cannot set reactive property on non-object\/array value`).toHaveBeenWarned()\n+    expect(`Cannot set reactive property on undefined, null, or primitive value`).toHaveBeenWarned()\n \n     try {\n       delProp(null, 'foo')\n     } catch (e) {}\n-    expect(`Cannot delete reactive property on non-object\/array value`).toHaveBeenWarned()\n+    expect(`Cannot delete reactive property on undefined, null, or primitive value`).toHaveBeenWarned()\n   })\n \n   it('should lazy invoke existing getters', () => {\n\n\n###\n\n","completion":" fix(core): Make set\/delete warning condition for undefined, null and (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/server\/directives\/show.js | file path B: src\/platforms\/web\/server\/directives\/show.js\n\n@@ -3,6 +3,10 @@\n export default function show (node: VNodeWithData, dir: VNodeDirective) {\n   if (!dir.value) {\n     const style: any = node.data.style || (node.data.style = {})\n-    style.display = 'none'\n+    if (Array.isArray(style)) {\n+      style.push({ display: 'none' })\n+    } else {\n+      style.display = 'none'\n+    }\n   }\n }\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -267,6 +267,17 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n+  it('v-show directive merge with style', done => {\n+    renderVmWithOptions({\n+      template: '<div :style=\"[{lineHeight: 1}]\" v-show=\"false\"><span>inner<\/span><\/div>'\n+    }, res => {\n+      expect(res).toContain(\n+        '<div data-server-rendered=\"true\" style=\"line-height:1;display:none;\"><span>inner<\/span><\/div>'\n+      )\n+      done()\n+    })\n+  })\n+\n   it('v-show directive not passed to child', done => {\n     renderVmWithOptions({\n       template: '<foo v-show=\"false\"><\/foo>',\n\n\n###\n\n","completion":" fix(ssr): fix v-show inline style rendering when style binding is array (#<issue-num>)\n"}
{"prompt":" file path A: src\/platforms\/web\/compiler\/modules\/model.js | file path B: src\/platforms\/web\/compiler\/modules\/model.js\n\n@@ -34,7 +34,7 @@ function preTransformNode (el: ASTElement, options: CompilerOptions) {\n     if (map[':type'] || map['v-bind:type']) {\n       typeBinding = getBindingAttr(el, 'type')\n     }\n-    if (!typeBinding && map['v-bind']) {\n+    if (!map.type && !typeBinding && map['v-bind']) {\n       typeBinding = `(${map['v-bind']}).type`\n     }\n \n\n---\n file path A: test\/unit\/features\/directives\/model-checkbox.spec.js | file path B: test\/unit\/features\/directives\/model-checkbox.spec.js\n\n@@ -337,4 +337,15 @@ describe('Directive v-model checkbox', () => {\n       expect(vm.$el.children[1].textContent).toBe('false')\n     }).then(done)\n   })\n+  \n+  \/\/ #7811\n+  it('type should not be overwritten by v-bind', () => {\n+    const vm = new Vue({\n+      data: {\n+        test: true\n+      },\n+      template: '<input type=\"checkbox\" v-model=\"test\" v-bind=\"$attrs\">'\n+    }).$mount()\n+    expect(vm.$el.type).toBe('checkbox')\n+  })\n })\n\n\n###\n\n","completion":" fix(model): fix static input type being overwritten by v-bind object (#<issue-num>)\n"}
{"prompt":" file path A: src\/core\/vdom\/create-functional-component.js | file path B: src\/core\/vdom\/create-functional-component.js\n\n@@ -10,6 +10,7 @@ import { installRenderHelpers } from '..\/instance\/render-helpers\/index'\n import {\n   isDef,\n   isTrue,\n+  hasOwn,\n   camelize,\n   emptyObject,\n   validateProp\n@@ -23,6 +24,21 @@ export function FunctionalRenderContext (\n   Ctor: Class<Component>\n ) {\n   const options = Ctor.options\n+  \/\/ ensure the createElement function in functional components\n+  \/\/ gets a unique context - this is necessary for correct named slot check\n+  let contextVm\n+  if (hasOwn(parent, '_uid')) {\n+    contextVm = Object.create(parent)\n+    \/\/ $flow-disable-line\n+    contextVm._original = parent\n+  } else {\n+    contextVm = parent\n+    \/\/ $flow-disable-line\n+    parent = parent._original\n+  }\n+  const isCompiled = isTrue(options._compiled)\n+  const needNormalization = !isCompiled\n+\n   this.data = data\n   this.props = props\n   this.children = children\n@@ -31,12 +47,6 @@ export function FunctionalRenderContext (\n   this.injections = resolveInject(options.inject, parent)\n   this.slots = () => resolveSlots(children, parent)\n \n-  \/\/ ensure the createElement function in functional components\n-  \/\/ gets a unique context - this is necessary for correct named slot check\n-  const contextVm = Object.create(parent)\n-  const isCompiled = isTrue(options._compiled)\n-  const needNormalization = !isCompiled\n-\n   \/\/ support for compiled functional template\n   if (isCompiled) {\n     \/\/ exposing $options for renderStatic()\n\n---\n file path A: test\/unit\/features\/component\/component-slot.spec.js | file path B: test\/unit\/features\/component\/component-slot.spec.js\n\n@@ -824,4 +824,35 @@ describe('Component slot', () => {\n       expect(vm.$el.textContent).toBe('hello')\n     }).then(done)\n   })\n+\n+  it('should allow passing named slots as raw children down multiple layers of functional component', () => {\n+    const CompB = {\n+      functional: true,\n+      render (h, { slots }) {\n+        return slots().foo\n+      }\n+    }\n+\n+    const CompA = {\n+      functional: true,\n+      render (h, { children }) {\n+        return h(CompB, children)\n+      }\n+    }\n+\n+    const vm = new Vue({\n+      components: {\n+        CompA\n+      },\n+      template: `\n+        <div>\n+          <comp-a>\n+            <span slot=\"foo\">foo<\/span>\n+          <\/comp-a>\n+        <\/div>\n+      `\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe('foo')\n+  })\n })\n\n\n###\n\n","completion":" fix: named slots for nested functional components\n"}
{"prompt":" file path A: src\/core\/components\/keep-alive.js | file path B: src\/core\/components\/keep-alive.js\n\n@@ -71,13 +71,13 @@ export default {\n     }\n   },\n \n-  watch: {\n-    include (val: string | RegExp | Array<string>) {\n+  mounted () {\n+    this.$watch('include', val => {\n       pruneCache(this, name => matches(val, name))\n-    },\n-    exclude (val: string | RegExp | Array<string>) {\n+    })\n+    this.$watch('exclude', val => {\n       pruneCache(this, name => !matches(val, name))\n-    }\n+    })\n   },\n \n   render () {\n\n---\n file path A: test\/unit\/features\/component\/component-keep-alive.spec.js | file path B: test\/unit\/features\/component\/component-keep-alive.spec.js\n\n@@ -393,6 +393,35 @@ describe('Component keep-alive', () => {\n     }).then(done)\n   })\n \n+  it('prune cache on include\/exclude change + view switch', done => {\n+    const vm = new Vue({\n+      template: `\n+        <div>\n+          <keep-alive :include=\"include\">\n+            <component :is=\"view\"><\/component>\n+          <\/keep-alive>\n+        <\/div>\n+      `,\n+      data: {\n+        view: 'one',\n+        include: 'one,two'\n+      },\n+      components\n+    }).$mount()\n+\n+    vm.view = 'two'\n+    waitForUpdate(() => {\n+      assertHookCalls(one, [1, 1, 1, 1, 0])\n+      assertHookCalls(two, [1, 1, 1, 0, 0])\n+      vm.include = 'one'\n+      vm.view = 'one'\n+    }).then(() => {\n+      assertHookCalls(one, [1, 1, 2, 1, 0])\n+      \/\/ two should be pruned\n+      assertHookCalls(two, [1, 1, 1, 1, 1])\n+    }).then(done)\n+  })\n+\n   it('should not prune currently active instance', done => {\n     const vm = new Vue({\n       template: `\n\n\n###\n\n","completion":" fix(keep-alive): run prune after render for correct active component check\n"}
{"prompt":" file path A: src\/compiler\/codegen\/events.js | file path B: src\/compiler\/codegen\/events.js\n\n@@ -22,10 +22,11 @@ const keyNames: { [key: string]: string | Array<string> } = {\n   tab: 'Tab',\n   enter: 'Enter',\n   space: ' ',\n-  up: 'ArrowUp',\n-  left: 'ArrowLeft',\n-  right: 'ArrowRight',\n-  down: 'ArrowDown',\n+  \/\/ #7806: IE11 uses key names without `Arrow` prefix for arrow keys.\n+  up: ['Up', 'ArrowUp'],\n+  left: ['Left', 'ArrowLeft'],\n+  right: ['Right', 'ArrowRight'],\n+  down: ['Down', 'ArrowDown'],\n   'delete': ['Backspace', 'Delete']\n }\n \n\n\n###\n\n","completion":" fix: fix keyName checking for arrow keys in IE11\n"}
{"prompt":" file path A: src\/core\/vdom\/create-component.js | file path B: src\/core\/vdom\/create-component.js\n\n@@ -32,7 +32,7 @@ import {\n   renderRecyclableComponentTemplate\n } from 'weex\/runtime\/recycle-list\/render-component-template'\n \n-\/\/ hooks to be invoked on component VNodes during patch\n+\/\/ inline hooks to be invoked on component VNodes during patch\n const componentVNodeHooks = {\n   init (\n     vnode: VNodeWithData,\n@@ -189,8 +189,8 @@ export function createComponent (\n     }\n   }\n \n-  \/\/ merge component management hooks onto the placeholder node\n-  mergeHooks(data)\n+  \/\/ install component management hooks onto the placeholder node\n+  installComponentHooks(data)\n \n   \/\/ return a placeholder vnode\n   const name = Ctor.options.name || tag\n@@ -234,22 +234,11 @@ export function createComponentInstanceForVnode (\n   return new vnode.componentOptions.Ctor(options)\n }\n \n-function mergeHooks (data: VNodeData) {\n-  if (!data.hook) {\n-    data.hook = {}\n-  }\n+function installComponentHooks (data: VNodeData) {\n+  const hooks = data.hook || (data.hook = {})\n   for (let i = 0; i < hooksToMerge.length; i++) {\n     const key = hooksToMerge[i]\n-    const fromParent = data.hook[key]\n-    const ours = componentVNodeHooks[key]\n-    data.hook[key] = fromParent ? mergeHook(ours, fromParent) : ours\n-  }\n-}\n-\n-function mergeHook (one: Function, two: Function): Function {\n-  return function (a, b, c, d) {\n-    one(a, b, c, d)\n-    two(a, b, c, d)\n+    hooks[key] = componentVNodeHooks[key]\n   }\n }\n \n\n---\n file path A: test\/unit\/modules\/vdom\/create-component.spec.js | file path B: test\/unit\/modules\/vdom\/create-component.spec.js\n\n@@ -19,12 +19,10 @@ describe('create-component', () => {\n       props: ['msg'],\n       render () {}\n     }\n-    const init = jasmine.createSpy()\n     const data = {\n       props: { msg: 'hello world' },\n       attrs: { id: 1 },\n       staticAttrs: { class: 'foo' },\n-      hook: { init },\n       on: { notify: 'onNotify' }\n     }\n     const vnode = createComponent(child, data, vm, vm)\n@@ -38,9 +36,6 @@ describe('create-component', () => {\n     expect(vnode.elm).toBeUndefined()\n     expect(vnode.ns).toBeUndefined()\n     expect(vnode.context).toEqual(vm)\n-\n-    vnode.data.hook.init(vnode)\n-    expect(init.calls.argsFor(0)[0]).toBe(vnode)\n   })\n \n   it('create a component when resolved with async loading', done => {\n\n---\n file path A: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js | file path B: test\/unit\/modules\/vdom\/patch\/edge-cases.spec.js\n\n@@ -374,4 +374,36 @@ describe('vdom patch: edge cases', () => {\n     expect(vm.$el.querySelector('custom-foo').getAttribute('selected')).toBe('1')\n     Vue.config.ignoredElements = []\n   })\n+\n+  \/\/ #7805\n+  it('should not cause duplicate init when components share data object', () => {\n+    const Base = {\n+      render (h) {\n+        return h('div', this.$options.name)\n+      }\n+    }\n+\n+    const Foo = {\n+      name: 'Foo',\n+      extends: Base\n+    }\n+\n+    const Bar = {\n+      name: 'Bar',\n+      extends: Base\n+    }\n+\n+    const vm = new Vue({\n+      render (h) {\n+        const data = { staticClass: 'text-red' }\n+\n+        return h('div', [\n+          h(Foo, data),\n+          h(Bar, data)\n+        ])\n+      }\n+    }).$mount()\n+\n+    expect(vm.$el.textContent).toBe('FooBar')\n+  })\n })\n\n\n###\n\n","completion":" fix: fix regression on duplicate component init when using shared data objects\n"}
{"prompt":" file path A: .circleci\/config.yml | file path B: .circleci\/config.yml\n\n@@ -12,12 +12,12 @@ jobs:\n       - checkout\n       - restore_cache:\n           keys:\n-            - v1-vue-{{ .Branch }}-{{ checksum \"package-lock.json\" }}\n+            - v1-vue-{{ .Branch }}-{{ checksum \"yarn.lock\" }}\n             - v1-vue-{{ .Branch }}-\n             - v1-vue-\n       - run: npm install\n       - save_cache:\n-          key: v1-vue-{{ .Branch }}-{{ checksum \"package-lock.json\" }}\n+          key: v1-vue-{{ .Branch }}-{{ checksum \"yarn.lock\" }}\n           paths:\n             - node_modules\/\n       - persist_to_workspace:\n\n\n###\n\n","completion":" ci: use yarn.lock instead of package-lock.json\n"}
{"prompt":" file path A: src\/server\/render.js | file path B: src\/server\/render.js\n\n@@ -191,7 +191,8 @@ function renderAsyncComponent (node, isRoot, context) {\n       tag\n     )\n     if (resolvedNode) {\n-      if (resolvedNode.componnetInstance) {\n+      if (resolvedNode.componentOptions) {\n+        \/\/ normal component\n         renderComponent(resolvedNode, isRoot, context)\n       } else if (!Array.isArray(resolvedNode)) {\n         \/\/ single return node from functional component\n\n\n###\n\n","completion":" chore: fix typo\n"}
{"prompt":" file path A: src\/server\/render-context.js | file path B: src\/server\/render-context.js\n\n@@ -67,13 +67,18 @@ export class RenderContext {\n     }\n     switch (lastState.type) {\n       case 'Element':\n+      case 'Fragment':\n         const { children, total } = lastState\n         const rendered = lastState.rendered++\n         if (rendered < total) {\n           this.renderNode(children[rendered], false, this)\n         } else {\n           this.renderStates.pop()\n-          this.write(lastState.endTag, this.next)\n+          if (lastState.endTag) {\n+            this.write(lastState.endTag, this.next)\n+          } else {\n+            this.next()\n+          }\n         }\n         break\n       case 'Component':\n\n---\n file path A: src\/server\/render.js | file path B: src\/server\/render.js\n\n@@ -191,7 +191,21 @@ function renderAsyncComponent (node, isRoot, context) {\n       tag\n     )\n     if (resolvedNode) {\n-      renderComponent(resolvedNode, isRoot, context)\n+      if (resolvedNode.componnetInstance) {\n+        renderComponent(resolvedNode, isRoot, context)\n+      } else if (!Array.isArray(resolvedNode)) {\n+        \/\/ single return node from functional component\n+        renderNode(resolvedNode, isRoot, context)\n+      } else {\n+        \/\/ multiple return nodes from functional component\n+        context.renderStates.push({\n+          type: 'Fragment',\n+          children: resolvedNode,\n+          rendered: 0,\n+          total: resolvedNode.length\n+        })\n+        context.next()\n+      }\n     } else {\n       \/\/ invalid component, but this does not throw on the client\n       \/\/ so render empty comment node\n@@ -232,9 +246,10 @@ function renderStringNode (el, context) {\n     const children: Array<VNode> = el.children\n     context.renderStates.push({\n       type: 'Element',\n+      children,\n       rendered: 0,\n       total: children.length,\n-      endTag: el.close, children\n+      endTag: el.close\n     })\n     write(el.open, next)\n   }\n@@ -263,9 +278,10 @@ function renderElement (el, isRoot, context) {\n     const children: Array<VNode> = el.children\n     context.renderStates.push({\n       type: 'Element',\n+      children,\n       rendered: 0,\n       total: children.length,\n-      endTag, children\n+      endTag\n     })\n     write(startTag, next)\n   }\n\n---\n file path A: test\/ssr\/ssr-string.spec.js | file path B: test\/ssr\/ssr-string.spec.js\n\n@@ -575,6 +575,60 @@ describe('SSR: renderToString', () => {\n     })\n   })\n \n+  it('renders async component (functional, single node)', done => {\n+    renderVmWithOptions({\n+      template: `\n+        <div>\n+          <test-async><\/test-async>\n+        <\/div>\n+      `,\n+      components: {\n+        testAsync (resolve) {\n+          setTimeout(() => resolve({\n+            functional: true,\n+            render (h) {\n+              return h('span', { class: ['b'] }, 'testAsync')\n+            }\n+          }), 1)\n+        }\n+      }\n+    }, result => {\n+      expect(result).toContain('<div data-server-rendered=\"true\"><span class=\"b\">testAsync<\/span><\/div>')\n+      done()\n+    })\n+  })\n+\n+  it('renders async component (functional, multiple nodes)', done => {\n+    renderVmWithOptions({\n+      template: `\n+        <div>\n+          <test-async><\/test-async>\n+        <\/div>\n+      `,\n+      components: {\n+        testAsync (resolve) {\n+          setTimeout(() => resolve({\n+            functional: true,\n+            render (h) {\n+              return [\n+                h('span', { class: ['a'] }, 'foo'),\n+                h('span', { class: ['b'] }, 'bar')\n+              ]\n+            }\n+          }), 1)\n+        }\n+      }\n+    }, result => {\n+      expect(result).toContain(\n+        '<div data-server-rendered=\"true\">' +\n+          '<span class=\"a\">foo<\/span>' +\n+          '<span class=\"b\">bar<\/span>' +\n+        '<\/div>'\n+      )\n+      done()\n+    })\n+  })\n+\n   it('should catch async component error', done => {\n     Vue.config.silent = true\n     renderToString(new Vue({\n\n\n###\n\n","completion":" fix(ssr): fix SSR for async functional components\n"}
{"prompt":" file path A: test\/unit\/modules\/vdom\/create-element.spec.js | file path B: test\/unit\/modules\/vdom\/create-element.spec.js\n\n@@ -253,4 +253,24 @@ describe('create-element', () => {\n       expect(vm.$el.querySelector('input').value).toBe('b')\n     }).then(done)\n   })\n+\n+  \/\/ #7786\n+  it('creates element with vnode reference in :class or :style', () => {\n+    const vm = new Vue({\n+      components: {\n+        foo: {\n+          render (h) {\n+            return h('div', {\n+              class: {\n+                'has-vnode': this.$vnode\n+              }\n+            }, 'foo')\n+          }\n+        }\n+      },\n+      render: h => h('foo')\n+    }).$mount()\n+    expect(vm.$el.innerHTML).toContain('foo')\n+    expect(vm.$el.classList.contains('has-vnode')).toBe(true)\n+  })\n })\n\n\n###\n\n","completion":" test(vdom): add test case for #7786 (#<issue-num>)\n"}
{"prompt":" file path A: src\/compiler\/parser\/index.js | file path B: src\/compiler\/parser\/index.js\n\n@@ -21,7 +21,7 @@ import {\n \n export const onRE = \/^@|^v-on:\/\n export const dirRE = \/^v-|^@|^:\/\n-export const forAliasRE = \/(.*?)\\s+(?:in|of)\\s+(.*)\/\n+export const forAliasRE = \/([^]*?)\\s+(?:in|of)\\s+([^]*)\/\n export const forIteratorRE = \/,([^,\\}\\]]*)(?:,([^,\\}\\]]*))?$\/\n const stripParensRE = \/^\\(|\\)$\/g\n \n\n---\n file path A: test\/unit\/features\/directives\/for.spec.js | file path B: test\/unit\/features\/directives\/for.spec.js\n\n@@ -464,6 +464,26 @@ describe('Directive v-for', () => {\n     }).then(done)\n   })\n \n+  \/\/ #7792\n+  it('should work with multiline expressions', () => {\n+    const vm = new Vue({\n+      data: {\n+        a: [1],\n+        b: [2]\n+      },\n+      template: `\n+        <div>\n+          <span v-for=\"n in (\n+            a.concat(\n+              b\n+            )\n+          )\">{{ n }}<\/span>\n+        <\/div>\n+      `\n+    }).$mount()\n+    expect(vm.$el.textContent).toBe('12')\n+  })\n+\n   const supportsDestructuring = (() => {\n     try {\n       new Function('var { foo } = bar')\n\n\n###\n\n","completion":" fix: allow multiline expression in v-for\n"}
